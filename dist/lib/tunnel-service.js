'use strict';var a35_0x397d=['containerId:\x20','Region:\x20','userServiceConfig','close','saveHelperFunctionDeployRes','.aliyuncs.com/aliyunfc/ts-remote:','container','remove','indexOf','length','appName','triggers','saveSession','5dHEeFg','access','streamOfRunner','TUNNEL_SERVICE_AK_ID','generateProxyContainerOpts','client','__importDefault','initializer','AlicloudClient','Session\x20name\x20is\x20:\x20','getSessionFromState','cacheDirPath','Error:\x20','stderrFileWriteStream','loadComponent','default','current','Close\x20stderr\x20file\x20of\x20proxy\x20container:\x20','FcRemoteInvokeComponent','Delete\x20done.','next','includes','helperImageStableVersion','../common/logger','Put\x20provision\x20config\x20error:\x20','Helper\x20function\x20is\x20set\x20to\x201\x20provison\x20and\x200\x20elasticity.','__esModule','ts-local','\x20not\x20support\x20now,\x20supported\x20regions:\x20','1MtnWQn','dockerode','iterator','value','devsapp/fc-remote-invoke',',\x20functionName:\x20','queryUntilSessionEstablished','getFcClient','AccessKeySecret','getSession','Deleting\x20session:\x20','deploy','path','pullImageIfNeed','279539avgqCR','nested-object-assign','unsetHelperFunctionConfig','deleteSession','apply','java','v0.5','message','SIGINT','serviceName','createSession','274241bmFPSc','./utils/runtime','stdoutFileWriteStream','create','putProvisionConfig','php7.2','sent','Deploying\x20helper\x20function...','generateProxyContainerEnv','fc-tunnel-invoke','maxRetryCnt','clean','Unsetting\x20helper\x20function\x20config...','Stop\x20proxy\x20container:\x20','call','internetAccess','defineProperty','name','fc-remote-invoke-project','getProvisionConfig','Creating\x20session...','./component/stdout-formatter','20751EiJERI','assign','296769RcAXVc','runtimeListNeedSetTsAdjustFLag','unsetProxyContainerId','Generator\x20is\x20already\x20executing.','Set\x20provision\x20result:\x20','python3','startsWith',',\x20stderr\x20to:\x20','succeed','function','/on-demand-config','data','devsapp/fc-deploy','debug','helperImageVersion','stopContainer','139267FoDsxG','helperConfig','python','getState','stop\x20proxy\x20container','info','genHelperServiceConfig','0:0','initializationTimeout','makeHelperFunction','./utils/utils','stdoutFormatter','python2.7','routeConfigs','Close\x20stdout\x20file\x20of\x20proxy\x20container:\x20','cache','cloneDeep','saveProxyContainerId','Fail\x20to\x20set\x20provison\x20and\x20elasticity\x20for\x20helper\x20function.','137579AmTlmj','AccountID','fc-deploy-project','sleep','genComponentInputs','warning','userCustomDomainConfigList','isEmpty','Session\x20establish\x20fail.','region','isAutoConfig','getHelperConfigFromState','__awaiter','Container:\x20','lodash','40645gRgOOp','proxyImageVersion','Delete\x20error.','1LiwXIh','body','then','certConfig','prototype','Session\x20created,\x20session\x20id:\x20','Create\x20session\x20failed.','registry.','userFunctionConfig','__setModuleDefault','--invocation-type\x20async','remoteInstanceId','getProxyContainerIdFromState','cn-hangzhou','\x20error:\x20','ops','session','setSigint','Start\x20proxy\x20container\x20failed.','./client','7OzkTqI','/services/','forEach','Checking\x20if\x20session\x20is\x20established...','Session\x20established!','PUT','substring','Proxy\x20container\x20is\x20running.','dirname','genProxyContainerName','debugIde','proxyImageRepo','localInstanceId','TUNNEL_SERVICE_AK_SECRET','done','custom-container','FcDeployComponent','nasConfig','SESSION-',',\x20please\x20make\x20sure\x20that\x20your\x20account\x20has\x20updateService\x20permission.','utf-8','Delete\x20session\x20body:\x20','trys','session_','statusCode','v0.10','ESTABLISHED','stderrFilePath','writeEventToStreamAndClose','@alicloud/tunnel-service20210509','error','proxyContainerId','proxyImageName','genOutputFileOfProxyContainer','Setting\x20helper\x20function\x20with\x201\x20provison\x20and\x200\x20elasticity','\x20debug\x20config\x20only\x20support\x20for\x20runtime\x20[python2.7,\x20python3]','join','./utils/process','./utils/devs','spinner','setHelperFunctionProvision','\x20failed!\x0aError:\x20','Received\x20canncel\x20request,\x20stopping\x20running\x20proxy\x20container.....','fcClient','LATEST','instanceLifecycleConfig','DELETE','1ImVFCM','credentials','setHelperFunctionConfig','genHelperCustomDomainConfig','map','CreateSessionRequest','fail','push','...','handler','setup','/functions/','unsetKVInState','Env','generateSessionName','proxyImageStableVersion','runner','AccessKeyID','generateProxyContainerDebugOpts','stdout.log','homedir','warn','./utils/time','proxyImaggeRegistry','__importStar','Helper\x20function\x20generated\x20by\x20fc-tunnel-invoke\x20component','Proxy\x20container\x20was\x20not\x20running.\x20Please\x20exec\x20\x27s\x20setup\x27\x20first.','label','pop','runtime','./definition','sessionId','supportedRegionList','stream','setKVInState','ensureDir','./component/fc-deploy','./docker/docker','isCustomContainerRuntime','status','TUNNEL_SERVICE_PROXY_IMAGE_LATEST_VERSION','runContainer','Unset\x20helper\x20function\x20provision\x20and\x20on-demand\x20config\x20done.','userTriggerConfigList','fc-deploy','invoke','Helper\x20resource\x20has\x20not\x20been\x20deployed.\x20Please\x20exec\x20\x27s\x20setup\x27\x20first.','stderr.log','stringify','functionName','createWriteStream','stdoutFilePath','genStateId','tunnel-service.cn-hangzhou.aliyuncs.com'];var a35_0x524168=a35_0x1e5b;(function(_0x29f369,_0x371dae){var _0x7ead30=a35_0x1e5b;while(!![]){try{var _0x4d00ea=parseInt(_0x7ead30(0x1fb))*-parseInt(_0x7ead30(0x1c4))+-parseInt(_0x7ead30(0x1a3))*parseInt(_0x7ead30(0x23e))+-parseInt(_0x7ead30(0x195))*parseInt(_0x7ead30(0x1ae))+parseInt(_0x7ead30(0x1f8))*parseInt(_0x7ead30(0x178))+-parseInt(_0x7ead30(0x1d6))+-parseInt(_0x7ead30(0x1c6))+-parseInt(_0x7ead30(0x1e9))*-parseInt(_0x7ead30(0x20f));if(_0x4d00ea===_0x371dae)break;else _0x29f369['push'](_0x29f369['shift']());}catch(_0xd2f800){_0x29f369['push'](_0x29f369['shift']());}}}(a35_0x397d,0x2603f));var __createBinding=this&&this['__createBinding']||(Object[a35_0x524168(0x1b1)]?function(_0x1054b3,_0x1c953a,_0x2f02df,_0x49bffc){if(_0x49bffc===undefined)_0x49bffc=_0x2f02df;Object['defineProperty'](_0x1054b3,_0x49bffc,{'enumerable':!![],'get':function(){return _0x1c953a[_0x2f02df];}});}:function(_0x2f1313,_0x225581,_0xcf09e5,_0x140a32){if(_0x140a32===undefined)_0x140a32=_0xcf09e5;_0x2f1313[_0x140a32]=_0x225581[_0xcf09e5];}),__setModuleDefault=this&&this[a35_0x524168(0x204)]||(Object[a35_0x524168(0x1b1)]?function(_0x4c1b94,_0x52cb80){var _0x46b1a8=a35_0x524168;Object[_0x46b1a8(0x1be)](_0x4c1b94,_0x46b1a8(0x187),{'enumerable':!![],'value':_0x52cb80});}:function(_0x1ca02b,_0x328484){_0x1ca02b['default']=_0x328484;}),__importStar=this&&this[a35_0x524168(0x14d)]||function(_0x1e8333){var _0x46c807=a35_0x524168;if(_0x1e8333&&_0x1e8333[_0x46c807(0x192)])return _0x1e8333;var _0x576950={};if(_0x1e8333!=null){for(var _0x307666 in _0x1e8333)if(_0x307666!=='default'&&Object['hasOwnProperty'][_0x46c807(0x1bc)](_0x1e8333,_0x307666))__createBinding(_0x576950,_0x1e8333,_0x307666);}return __setModuleDefault(_0x576950,_0x1e8333),_0x576950;},__awaiter=this&&this[a35_0x524168(0x1f5)]||function(_0x11e672,_0xe4709b,_0x56e9c2,_0x405b5f){function _0x5214d8(_0x204074){return _0x204074 instanceof _0x56e9c2?_0x204074:new _0x56e9c2(function(_0x30374f){_0x30374f(_0x204074);});}return new(_0x56e9c2||(_0x56e9c2=Promise))(function(_0x5d6929,_0x1a0c2c){var _0x3a33ac=a35_0x1e5b;function _0x98f5ef(_0x47fa3f){try{_0x3b044e(_0x405b5f['next'](_0x47fa3f));}catch(_0xd95890){_0x1a0c2c(_0xd95890);}}function _0xc1679c(_0x42b064){try{_0x3b044e(_0x405b5f['throw'](_0x42b064));}catch(_0x16e488){_0x1a0c2c(_0x16e488);}}function _0x3b044e(_0x4930b4){var _0x3c4e7f=a35_0x1e5b;_0x4930b4[_0x3c4e7f(0x21d)]?_0x5d6929(_0x4930b4[_0x3c4e7f(0x198)]):_0x5214d8(_0x4930b4[_0x3c4e7f(0x198)])[_0x3c4e7f(0x1fd)](_0x98f5ef,_0xc1679c);}_0x3b044e((_0x405b5f=_0x405b5f[_0x3a33ac(0x1a7)](_0x11e672,_0xe4709b||[]))['next']());});},__generator=this&&this['__generator']||function(_0x3eefaa,_0x4fc0a0){var _0xdeabbf=a35_0x524168,_0x53c3fc={'label':0x0,'sent':function(){if(_0x5cdce4[0x0]&0x1)throw _0x5cdce4[0x1];return _0x5cdce4[0x1];},'trys':[],'ops':[]},_0x205e3d,_0x5d4b78,_0x5cdce4,_0x4ba56a;return _0x4ba56a={'next':_0x599a01(0x0),'throw':_0x599a01(0x1),'return':_0x599a01(0x2)},typeof Symbol===_0xdeabbf(0x1cf)&&(_0x4ba56a[Symbol[_0xdeabbf(0x197)]]=function(){return this;}),_0x4ba56a;function _0x599a01(_0x101c01){return function(_0x33ae3c){return _0x388830([_0x101c01,_0x33ae3c]);};}function _0x388830(_0xe02472){var _0x399f58=_0xdeabbf;if(_0x205e3d)throw new TypeError(_0x399f58(0x1c9));while(_0x53c3fc)try{if(_0x205e3d=0x1,_0x5d4b78&&(_0x5cdce4=_0xe02472[0x0]&0x2?_0x5d4b78['return']:_0xe02472[0x0]?_0x5d4b78['throw']||((_0x5cdce4=_0x5d4b78['return'])&&_0x5cdce4[_0x399f58(0x1bc)](_0x5d4b78),0x0):_0x5d4b78[_0x399f58(0x18c)])&&!(_0x5cdce4=_0x5cdce4[_0x399f58(0x1bc)](_0x5d4b78,_0xe02472[0x1]))['done'])return _0x5cdce4;if(_0x5d4b78=0x0,_0x5cdce4)_0xe02472=[_0xe02472[0x0]&0x2,_0x5cdce4[_0x399f58(0x198)]];switch(_0xe02472[0x0]){case 0x0:case 0x1:_0x5cdce4=_0xe02472;break;case 0x4:_0x53c3fc[_0x399f58(0x150)]++;return{'value':_0xe02472[0x1],'done':![]};case 0x5:_0x53c3fc[_0x399f58(0x150)]++,_0x5d4b78=_0xe02472[0x1],_0xe02472=[0x0];continue;case 0x7:_0xe02472=_0x53c3fc[_0x399f58(0x20a)][_0x399f58(0x151)](),_0x53c3fc['trys']['pop']();continue;default:if(!(_0x5cdce4=_0x53c3fc[_0x399f58(0x225)],_0x5cdce4=_0x5cdce4['length']>0x0&&_0x5cdce4[_0x5cdce4[_0x399f58(0x174)]-0x1])&&(_0xe02472[0x0]===0x6||_0xe02472[0x0]===0x2)){_0x53c3fc=0x0;continue;}if(_0xe02472[0x0]===0x3&&(!_0x5cdce4||_0xe02472[0x1]>_0x5cdce4[0x0]&&_0xe02472[0x1]<_0x5cdce4[0x3])){_0x53c3fc[_0x399f58(0x150)]=_0xe02472[0x1];break;}if(_0xe02472[0x0]===0x6&&_0x53c3fc[_0x399f58(0x150)]<_0x5cdce4[0x1]){_0x53c3fc['label']=_0x5cdce4[0x1],_0x5cdce4=_0xe02472;break;}if(_0x5cdce4&&_0x53c3fc[_0x399f58(0x150)]<_0x5cdce4[0x2]){_0x53c3fc[_0x399f58(0x150)]=_0x5cdce4[0x2],_0x53c3fc[_0x399f58(0x20a)]['push'](_0xe02472);break;}if(_0x5cdce4[0x2])_0x53c3fc['ops'][_0x399f58(0x151)]();_0x53c3fc[_0x399f58(0x225)]['pop']();continue;}_0xe02472=_0x4fc0a0[_0x399f58(0x1bc)](_0x3eefaa,_0x53c3fc);}catch(_0x444afe){_0xe02472=[0x6,_0x444afe],_0x5d4b78=0x0;}finally{_0x205e3d=_0x5cdce4=0x0;}if(_0xe02472[0x0]&0x5)throw _0xe02472[0x1];return{'value':_0xe02472[0x0]?_0xe02472[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a35_0x524168(0x17e)]||function(_0x141035){var _0x4e9740=a35_0x524168;return _0x141035&&_0x141035[_0x4e9740(0x192)]?_0x141035:{'default':_0x141035};};Object[a35_0x524168(0x1be)](exports,'__esModule',{'value':!![]});var logger_1=__importDefault(require(a35_0x524168(0x18f))),core=__importStar(require('@serverless-devs/core')),client_1=require(a35_0x524168(0x20e)),lodash_1=__importDefault(require(a35_0x524168(0x1f7))),fc_deploy_1=require(a35_0x524168(0x159)),time_1=require(a35_0x524168(0x14b)),docker_1=require(a35_0x524168(0x15a)),nested_object_assign_1=__importDefault(require(a35_0x524168(0x1a4))),utils_1=require(a35_0x524168(0x1e0)),path=__importStar(require(a35_0x524168(0x1a1))),os=__importStar(require('os')),fse=__importStar(require('fs-extra')),tunnel_service20210509_1=require('@alicloud/tunnel-service20210509'),tunnel_service20210509_2=__importDefault(require(a35_0x524168(0x22c))),definition_1=require(a35_0x524168(0x153)),process_1=require(a35_0x524168(0x234)),stream_1=require('./utils/stream'),fc_remote_invoke_1=require('./component/fc-remote-invoke'),devs_1=require(a35_0x524168(0x235)),dockerode_1=__importDefault(require(a35_0x524168(0x196))),runtime_1=require(a35_0x524168(0x1af)),stdout_formatter_1=__importDefault(require(a35_0x524168(0x1c3))),docker=new dockerode_1[(a35_0x524168(0x187))](),IDE_PYCHARM='pycharm',TunnelService=function(){var _0x3eeaec=a35_0x524168;function _0x9ad0f0(_0x1e4fd3,_0xbc98e6,_0xcbe6f2,_0x3f11d9,_0x3598b5,_0x535c79,_0x3a39ac,_0x21abe9,_0x287a97,_0x204ee9,_0x27130c){var _0x3108db=a35_0x1e5b,_0x3850a1=this,_0x18a2a6,_0x49e4eb;this[_0x3108db(0x23f)]=_0x1e4fd3,this['userServiceConfig']=_0xbc98e6,this[_0x3108db(0x203)]=_0xcbe6f2,this[_0x3108db(0x160)]=_0x21abe9,this[_0x3108db(0x1ef)]=_0x287a97;if(!_0x9ad0f0[_0x3108db(0x155)][_0x3108db(0x18d)](_0x3f11d9))throw new Error(_0x3108db(0x16c)+_0x3f11d9+_0x3108db(0x194)+_0x9ad0f0[_0x3108db(0x155)]);this['debugPort']=_0x204ee9,this['debugIde']=_0x27130c,this[_0x3108db(0x1f2)]=_0x3f11d9,this[_0x3108db(0x179)]=_0x3598b5,this[_0x3108db(0x175)]=_0x535c79,this[_0x3108db(0x1a1)]=_0x3a39ac;var _0x3fc0b6={'accessKeyId':(_0x18a2a6=this[_0x3108db(0x23f)])===null||_0x18a2a6===void 0x0?void 0x0:_0x18a2a6[_0x3108db(0x24f)],'accessKeySecret':(_0x49e4eb=this[_0x3108db(0x23f)])===null||_0x49e4eb===void 0x0?void 0x0:_0x49e4eb[_0x3108db(0x19d)],'regionId':this[_0x3108db(0x1f2)],'endpoint':_0x9ad0f0['tunnerServiceHost']};this[_0x3108db(0x17d)]=new tunnel_service20210509_2[(_0x3108db(0x187))](_0x3fc0b6),process_1[_0x3108db(0x20c)](),process['on'](_0x3108db(0x1ab),function(){return __awaiter(_0x3850a1,void 0x0,void 0x0,function(){var _0x23f425,_0x390ee1,_0x5a931c;return __generator(this,function(_0x297a59){var _0x3515e8=a35_0x1e5b;switch(_0x297a59['label']){case 0x0:this[_0x3515e8(0x17a)]&&stream_1[_0x3515e8(0x22b)](this[_0x3515e8(0x17a)]);if(!this[_0x3515e8(0x24e)])return[0x3,0x3];logger_1[_0x3515e8(0x187)][_0x3515e8(0x1db)](_0x3515e8(0x239));return[0x4,docker_1[_0x3515e8(0x1d5)](this['runner'])];case 0x1:_0x297a59[_0x3515e8(0x1b4)]();return[0x4,this['unsetProxyContainerId']()];case 0x2:_0x297a59[_0x3515e8(0x1b4)](),_0x297a59[_0x3515e8(0x150)]=0x3;case 0x3:_0x23f425=this[_0x3515e8(0x230)](),_0x390ee1=_0x23f425[_0x3515e8(0x168)],_0x5a931c=_0x23f425[_0x3515e8(0x22a)];this['stdoutFileWriteStream']&&this[_0x3515e8(0x1b0)][_0x3515e8(0x16e)](function(_0x5e122f){var _0x144cb7=_0x3515e8;_0x5e122f&&logger_1[_0x144cb7(0x187)]['warning'](_0x144cb7(0x1e4)+_0x390ee1+_0x144cb7(0x238)+_0x5e122f);});this[_0x3515e8(0x185)]&&this['stderrFileWriteStream'][_0x3515e8(0x16e)](function(_0x4feafb){var _0x2ff6dc=_0x3515e8;_0x4feafb&&logger_1[_0x2ff6dc(0x187)][_0x2ff6dc(0x1ee)](_0x2ff6dc(0x189)+_0x5a931c+'\x20failed!\x0aError:\x20'+_0x4feafb);});return[0x2];}});});});}return _0x9ad0f0['prototype'][_0x3eeaec(0x248)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x14716f,_0x4f1f3d,_0x4dc63a,_0x5b0a57,_0x194ea8,_0x5aa50d,_0x3e5f1b,_0x1f1a86,_0x2b8484;return __generator(this,function(_0x1fb251){var _0x3e0418=a35_0x1e5b;switch(_0x1fb251[_0x3e0418(0x150)]){case 0x0:_0x14716f=new client_1['AlicloudClient'](this[_0x3e0418(0x23f)]),_0x4f1f3d=this;return[0x4,_0x14716f['getFcClient'](this[_0x3e0418(0x1f2)])];case 0x1:_0x4f1f3d[_0x3e0418(0x23a)]=_0x1fb251[_0x3e0418(0x1b4)](),_0x4dc63a=core[_0x3e0418(0x236)](_0x3e0418(0x1c2)),_0x1fb251['label']=0x2;case 0x2:_0x1fb251[_0x3e0418(0x225)][_0x3e0418(0x245)]([0x2,0x5,,0x6]),_0x5b0a57=this;return[0x4,this[_0x3e0418(0x1ad)]()];case 0x3:_0x5b0a57[_0x3e0418(0x20b)]=_0x1fb251['sent'](),_0x4dc63a['succeed'](_0x3e0418(0x200)+this[_0x3e0418(0x20b)][_0x3e0418(0x154)]+'.');return[0x4,this[_0x3e0418(0x177)]()];case 0x4:_0x1fb251[_0x3e0418(0x1b4)]();return[0x3,0x6];case 0x5:_0x194ea8=_0x1fb251['sent'](),_0x4dc63a[_0x3e0418(0x244)](_0x3e0418(0x201));throw _0x194ea8;case 0x6:logger_1[_0x3e0418(0x187)][_0x3e0418(0x1db)](_0x3e0418(0x1b5));return[0x4,this[_0x3e0418(0x1df)]()];case 0x7:_0x1fb251[_0x3e0418(0x1b4)](),_0x5aa50d=core[_0x3e0418(0x236)]('Starting\x20proxy\x20container...'),_0x1fb251[_0x3e0418(0x150)]=0x8;case 0x8:_0x1fb251[_0x3e0418(0x225)][_0x3e0418(0x245)]([0x8,0xa,,0xb]);return[0x4,this['runProxyContainer']()];case 0x9:_0x1fb251[_0x3e0418(0x1b4)](),_0x5aa50d['succeed'](_0x3e0418(0x216));return[0x3,0xb];case 0xa:_0x3e5f1b=_0x1fb251['sent'](),_0x5aa50d[_0x3e0418(0x244)](_0x3e0418(0x20d));throw _0x3e5f1b;case 0xb:_0x1f1a86=core['spinner'](_0x3e0418(0x212)),_0x1fb251['label']=0xc;case 0xc:_0x1fb251['trys'][_0x3e0418(0x245)]([0xc,0xe,,0xf]);return[0x4,this[_0x3e0418(0x19b)]()];case 0xd:_0x1fb251['sent'](),_0x1f1a86[_0x3e0418(0x1ce)](_0x3e0418(0x213));return[0x3,0xf];case 0xe:_0x2b8484=_0x1fb251[_0x3e0418(0x1b4)](),_0x1f1a86['fail'](_0x3e0418(0x1f1));throw _0x2b8484;case 0xf:return[0x2];}});});},_0x9ad0f0['prototype'][_0x3eeaec(0x24c)]=function(){var _0x3e74fa=_0x3eeaec;return _0x3e74fa(0x226)+this[_0x3e74fa(0x1f2)]+'_'+this['userServiceConfig'][_0x3e74fa(0x1bf)];},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1ad)]=function(){var _0x4d833b;return __awaiter(this,void 0x0,void 0x0,function(){var _0x15354a,_0x4f9490,_0x45d888,_0x4af935;return __generator(this,function(_0x46aeba){var _0x501c70=a35_0x1e5b;switch(_0x46aeba[_0x501c70(0x150)]){case 0x0:_0x15354a=this['generateSessionName'](),_0x4f9490=new tunnel_service20210509_1[(_0x501c70(0x243))]({'sessionName':_0x15354a}),logger_1[_0x501c70(0x187)][_0x501c70(0x1d3)](_0x501c70(0x181)+_0x15354a);return[0x4,this['client'][_0x501c70(0x1ad)](_0x4f9490)];case 0x1:_0x45d888=_0x46aeba[_0x501c70(0x1b4)](),_0x4af935=(_0x4d833b=_0x45d888===null||_0x45d888===void 0x0?void 0x0:_0x45d888['body'])===null||_0x4d833b===void 0x0?void 0x0:_0x4d833b['data'],logger_1[_0x501c70(0x187)]['debug']('Create\x20session\x20result\x20data:\x20'+JSON[_0x501c70(0x165)](_0x4af935,null,'\x20\x20'));return[0x2,{'name':_0x4af935===null||_0x4af935===void 0x0?void 0x0:_0x4af935['sessionName'],'sessionId':_0x4af935===null||_0x4af935===void 0x0?void 0x0:_0x4af935[_0x501c70(0x154)],'localInstanceId':_0x4af935===null||_0x4af935===void 0x0?void 0x0:_0x4af935[_0x501c70(0x21b)],'remoteInstanceId':_0x4af935===null||_0x4af935===void 0x0?void 0x0:_0x4af935[_0x501c70(0x206)]}];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1a6)]=function(_0x17655b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1e2693,_0x20633a;return __generator(this,function(_0x2744e2){var _0x5b6ad3=a35_0x1e5b;switch(_0x2744e2[_0x5b6ad3(0x150)]){case 0x0:return[0x4,this[_0x5b6ad3(0x17d)][_0x5b6ad3(0x1a6)](_0x17655b)];case 0x1:_0x1e2693=_0x2744e2['sent'](),_0x20633a=_0x1e2693===null||_0x1e2693===void 0x0?void 0x0:_0x1e2693[_0x5b6ad3(0x1fc)],logger_1[_0x5b6ad3(0x187)]['debug'](_0x5b6ad3(0x224)+JSON['stringify'](_0x20633a,null,'\x20\x20'));return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1dc)]=function(){var _0xd6a7a4=_0x3eeaec,_0x3d00f4,_0x40ded2=lodash_1[_0xd6a7a4(0x187)][_0xd6a7a4(0x1e6)](this['userServiceConfig']);return _0x40ded2[_0xd6a7a4(0x1bf)]=_0xd6a7a4(0x221)+((_0x3d00f4=this[_0xd6a7a4(0x20b)])===null||_0x3d00f4===void 0x0?void 0x0:_0x3d00f4[_0xd6a7a4(0x154)][_0xd6a7a4(0x215)](0x0,0x7)),_0x40ded2[_0xd6a7a4(0x1bd)]=!![],definition_1[_0xd6a7a4(0x1f3)](_0x40ded2===null||_0x40ded2===void 0x0?void 0x0:_0x40ded2['nasConfig'])&&delete _0x40ded2[_0xd6a7a4(0x220)],_0x40ded2;},_0x9ad0f0[_0x3eeaec(0x1ff)]['genHelperFunctionConfig']=function(){var _0x3a57a2=_0x3eeaec,_0x154173=this,_0x434ee2,_0x42c0a2,_0x3e5649,_0x5a6d39,_0x39596c,_0x5ddd42,_0x326812,_0x3f3cd7,_0x2fa0ca,_0x93a199,_0x5a1354,_0x2dbb05,_0x269f1c={'name':(_0x434ee2=this[_0x3a57a2(0x203)])===null||_0x434ee2===void 0x0?void 0x0:_0x434ee2['name'],'description':_0x3a57a2(0x14e),'runtime':_0x3a57a2(0x21e),'handler':(_0x42c0a2=this[_0x3a57a2(0x203)])===null||_0x42c0a2===void 0x0?void 0x0:_0x42c0a2[_0x3a57a2(0x247)],'timeout':0x258,'memorySize':0x200,'customContainerConfig':{'image':_0x3a57a2(0x202)+this[_0x3a57a2(0x1f2)]+_0x3a57a2(0x170)+_0x9ad0f0[_0x3a57a2(0x1d4)]},'environmentVariables':{'TUNNEL_SERVICE_HOST':_0x9ad0f0['tunnerServiceHost'],'TUNNEL_SERVICE_INSTANCE_ID':(_0x3e5649=this[_0x3a57a2(0x20b)])===null||_0x3e5649===void 0x0?void 0x0:_0x3e5649[_0x3a57a2(0x206)],'TUNNEL_SERVICE_SESSION_ID':(_0x5a6d39=this['session'])===null||_0x5a6d39===void 0x0?void 0x0:_0x5a6d39['sessionId'],'TUNNEL_SERVICE_AK_ID':(_0x39596c=this[_0x3a57a2(0x23f)])===null||_0x39596c===void 0x0?void 0x0:_0x39596c[_0x3a57a2(0x24f)],'TUNNEL_SERVICE_AK_SECRET':(_0x5ddd42=this['credentials'])===null||_0x5ddd42===void 0x0?void 0x0:_0x5ddd42[_0x3a57a2(0x19d)]}};return!lodash_1[_0x3a57a2(0x187)][_0x3a57a2(0x1f0)](definition_1['getHttpTrigger'](this[_0x3a57a2(0x160)]))&&_0x9ad0f0[_0x3a57a2(0x1c7)][_0x3a57a2(0x211)](function(_0x1c87c2){var _0xd2c46d=_0x3a57a2,_0x586936;((_0x586936=_0x154173[_0xd2c46d(0x203)])===null||_0x586936===void 0x0?void 0x0:_0x586936[_0xd2c46d(0x152)][_0xd2c46d(0x173)](_0x1c87c2))!==-0x1&&Object[_0xd2c46d(0x1c5)](_0x269f1c['environmentVariables'],{'TS_DEBUG_HTTP_TRIGGER_ADJUST':!![]});}),((_0x326812=this['userFunctionConfig'])===null||_0x326812===void 0x0?void 0x0:_0x326812[_0x3a57a2(0x1de)])&&((_0x3f3cd7=this['userFunctionConfig'])===null||_0x3f3cd7===void 0x0?void 0x0:_0x3f3cd7[_0x3a57a2(0x17f)])&&Object[_0x3a57a2(0x1c5)](_0x269f1c,{'initializationTimeout':(_0x2fa0ca=this[_0x3a57a2(0x203)])===null||_0x2fa0ca===void 0x0?void 0x0:_0x2fa0ca[_0x3a57a2(0x1de)],'initializer':(_0x93a199=this[_0x3a57a2(0x203)])===null||_0x93a199===void 0x0?void 0x0:_0x93a199['initializer']}),((_0x5a1354=this[_0x3a57a2(0x203)])===null||_0x5a1354===void 0x0?void 0x0:_0x5a1354[_0x3a57a2(0x23c)])&&Object[_0x3a57a2(0x1c5)](_0x269f1c,{'instanceLifecycleConfig':(_0x2dbb05=this['userFunctionConfig'])===null||_0x2dbb05===void 0x0?void 0x0:_0x2dbb05[_0x3a57a2(0x23c)]}),_0x269f1c;},_0x9ad0f0['prototype'][_0x3eeaec(0x241)]=function(){var _0x2bee17=_0x3eeaec,_0x1abb3b=this;if(lodash_1[_0x2bee17(0x187)]['isEmpty'](this[_0x2bee17(0x1ef)]))return[];var _0x1bac6a=[];for(var _0x37d4ff=0x0,_0x398428=this[_0x2bee17(0x1ef)];_0x37d4ff<_0x398428[_0x2bee17(0x174)];_0x37d4ff++){var _0xea5980=_0x398428[_0x37d4ff],_0x3f5f09=_0xea5980===null||_0xea5980===void 0x0?void 0x0:_0xea5980[_0x2bee17(0x1e3)][_0x2bee17(0x242)](function(_0x3696f9){var _0x63fd22=_0x2bee17,_0x304d13,_0x59b7ac;if((_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9[_0x63fd22(0x1ac)])&&(_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9[_0x63fd22(0x1ac)])===((_0x304d13=_0x1abb3b[_0x63fd22(0x16d)])===null||_0x304d13===void 0x0?void 0x0:_0x304d13[_0x63fd22(0x1bf)])&&(_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9[_0x63fd22(0x166)])&&(_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9[_0x63fd22(0x166)])===((_0x59b7ac=_0x1abb3b[_0x63fd22(0x203)])===null||_0x59b7ac===void 0x0?void 0x0:_0x59b7ac[_0x63fd22(0x1bf)])){var _0x3e7230=lodash_1[_0x63fd22(0x187)][_0x63fd22(0x1e6)](_0x3696f9);return _0x3e7230===null||_0x3e7230===void 0x0?!![]:delete _0x3e7230[_0x63fd22(0x1ac)],_0x3e7230===null||_0x3e7230===void 0x0?!![]:delete _0x3e7230[_0x63fd22(0x166)],_0x3e7230;}if(!(_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9[_0x63fd22(0x1ac)])&&!(_0x3696f9===null||_0x3696f9===void 0x0?void 0x0:_0x3696f9['functionName']))return _0x3696f9;}),_0x1e5b57={'domainName':_0xea5980===null||_0xea5980===void 0x0?void 0x0:_0xea5980['domainName'],'protocol':_0xea5980===null||_0xea5980===void 0x0?void 0x0:_0xea5980['protocol'],'routeConfigs':_0x3f5f09};(_0xea5980===null||_0xea5980===void 0x0?void 0x0:_0xea5980[_0x2bee17(0x1fe)])&&Object['assign'](_0x1e5b57,{'certConfig':_0x1e5b57===null||_0x1e5b57===void 0x0?void 0x0:_0x1e5b57[_0x2bee17(0x1fe)]}),_0x1bac6a[_0x2bee17(0x245)](_0x1e5b57);}return _0x1bac6a;},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1df)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x590f72,_0x49ed98,_0x16332e,_0x2d4361,_0x49df2e,_0x854a21,_0x8194c4,_0x4e356b,_0x2bde0a,_0x2766ee;return __generator(this,function(_0x178aef){var _0x1290bb=a35_0x1e5b;switch(_0x178aef['label']){case 0x0:_0x590f72=this[_0x1290bb(0x1dc)](),_0x49ed98=this['genHelperFunctionConfig'](),_0x16332e=this[_0x1290bb(0x160)],_0x2d4361=this[_0x1290bb(0x241)](),_0x49df2e=new fc_deploy_1[(_0x1290bb(0x21f))](this[_0x1290bb(0x1f2)],_0x590f72,this['access'],this[_0x1290bb(0x175)],this['path'],_0x49ed98,_0x16332e,_0x2d4361),_0x854a21=_0x49df2e[_0x1290bb(0x1ed)]('fc-deploy',_0x1290bb(0x1eb),'','deploy');return[0x4,core[_0x1290bb(0x186)]('devsapp/fc-deploy')];case 0x1:_0x8194c4=_0x178aef['sent']();return[0x4,_0x8194c4[_0x1290bb(0x1a0)](_0x854a21)];case 0x2:_0x4e356b=_0x178aef[_0x1290bb(0x1b4)]();return[0x4,this['saveHelperFunctionDeployRes'](_0x4e356b)];case 0x3:_0x178aef[_0x1290bb(0x1b4)](),_0x2bde0a=core['spinner'](_0x1290bb(0x231)),_0x178aef[_0x1290bb(0x150)]=0x4;case 0x4:_0x178aef[_0x1290bb(0x225)]['push']([0x4,0x6,,0x7]);return[0x4,this[_0x1290bb(0x240)](_0x590f72[_0x1290bb(0x1bf)],_0x49ed98[_0x1290bb(0x1bf)])];case 0x5:_0x178aef['sent'](),_0x2bde0a[_0x1290bb(0x1ce)](_0x1290bb(0x191));return[0x3,0x7];case 0x6:_0x2766ee=_0x178aef[_0x1290bb(0x1b4)](),_0x2bde0a['fail'](_0x1290bb(0x1e8));throw _0x2766ee;case 0x7:return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x16f)]=function(_0x2687ec){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x4e708c){var _0x1aaa05=a35_0x1e5b;switch(_0x4e708c['label']){case 0x0:return[0x4,devs_1['setKVInState'](_0x1aaa05(0x1d7),_0x2687ec,this['genStateId']())];case 0x1:_0x4e708c[_0x1aaa05(0x1b4)]();return[0x2];}});});},_0x9ad0f0['prototype'][_0x3eeaec(0x177)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x44f2af){var _0x19258d=a35_0x1e5b;switch(_0x44f2af[_0x19258d(0x150)]){case 0x0:return[0x4,devs_1[_0x19258d(0x157)](_0x19258d(0x20b),this[_0x19258d(0x20b)],this[_0x19258d(0x169)]())];case 0x1:_0x44f2af[_0x19258d(0x1b4)]();return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)]['genStateId']=function(){var _0x3441ed=_0x3eeaec,_0x419fea,_0x1012f0;return this['credentials'][_0x3441ed(0x1ea)]+'-'+this['region']+'-'+((_0x419fea=this[_0x3441ed(0x16d)])===null||_0x419fea===void 0x0?void 0x0:_0x419fea[_0x3441ed(0x1bf)])+'-'+((_0x1012f0=this[_0x3441ed(0x203)])===null||_0x1012f0===void 0x0?void 0x0:_0x1012f0['name']);},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x237)]=function(_0x4789da,_0x3794f8,_0x4ccc13,_0x25cd71){var _0x271afa,_0xf7fd92;return __awaiter(this,void 0x0,void 0x0,function(){var _0x11fdbe,_0x3ac423,_0x17019b,_0x152a2a,_0x353380,_0x5956cb;return __generator(this,function(_0x35da99){var _0x4bb814=a35_0x1e5b;switch(_0x35da99['label']){case 0x0:_0x11fdbe=_0x25cd71||_0x4bb814(0x23b);if(!!this[_0x4bb814(0x23a)])return[0x3,0x2];_0x3ac423=new client_1[(_0x4bb814(0x180))](this['credentials']),_0x17019b=this;return[0x4,_0x3ac423[_0x4bb814(0x19c)](this[_0x4bb814(0x1f2)])];case 0x1:_0x17019b['fcClient']=_0x35da99[_0x4bb814(0x1b4)](),_0x35da99[_0x4bb814(0x150)]=0x2;case 0x2:_0x35da99[_0x4bb814(0x225)][_0x4bb814(0x245)]([0x2,0x4,,0x5]);return[0x4,this[_0x4bb814(0x23a)][_0x4bb814(0x1b2)](_0x4789da,_0x3794f8,_0x11fdbe,{'target':_0x4ccc13})];case 0x3:_0x35da99[_0x4bb814(0x1b4)]();return[0x3,0x5];case 0x4:_0x152a2a=_0x35da99['sent']();throw new Error(_0x4bb814(0x190)+_0x152a2a+_0x4bb814(0x222));case 0x5:return[0x4,this['fcClient'][_0x4bb814(0x1c1)](_0x4789da,_0x3794f8,_0x11fdbe)];case 0x6:_0x353380=_0x35da99[_0x4bb814(0x1b4)](),_0x5956cb=0x0,_0x35da99['label']=0x7;case 0x7:if(!(((_0x271afa=_0x353380===null||_0x353380===void 0x0?void 0x0:_0x353380['data'])===null||_0x271afa===void 0x0?void 0x0:_0x271afa[_0x4bb814(0x188)])!==0x1&&_0x5956cb<=_0x9ad0f0[_0x4bb814(0x1b8)]))return[0x3,0xa];return[0x4,this[_0x4bb814(0x23a)]['getProvisionConfig'](_0x4789da,_0x3794f8,_0x11fdbe)];case 0x8:_0x353380=_0x35da99[_0x4bb814(0x1b4)](),_0x5956cb=_0x5956cb+0x1,logger_1['default']['debug']('Retry\x20setting\x20provision\x20'+_0x5956cb+'\x20times.');return[0x4,time_1[_0x4bb814(0x1ec)](0x3e8)];case 0x9:_0x35da99[_0x4bb814(0x1b4)]();return[0x3,0x7];case 0xa:if(((_0xf7fd92=_0x353380===null||_0x353380===void 0x0?void 0x0:_0x353380[_0x4bb814(0x1d1)])===null||_0xf7fd92===void 0x0?void 0x0:_0xf7fd92['current'])!==0x1){logger_1[_0x4bb814(0x187)][_0x4bb814(0x1d3)](JSON[_0x4bb814(0x165)](_0x353380,null,'\x20\x20'));throw new Error('Set/get\x20provision\x20of\x20helper\x20function\x20error.Please\x20make\x20sure\x20you\x20have\x20the\x20related\x20ram\x20permission.');}logger_1[_0x4bb814(0x187)]['debug'](_0x4bb814(0x1ca)+JSON[_0x4bb814(0x165)](_0x353380===null||_0x353380===void 0x0?void 0x0:_0x353380[_0x4bb814(0x1d1)]));return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1a5)]=function(_0x14bd6b,_0x251816,_0x3211e1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1bc200,_0x29552c,_0x16b49e,_0x52fd5b,_0x241e93;return __generator(this,function(_0xc39afe){var _0x4546f8=a35_0x1e5b;switch(_0xc39afe[_0x4546f8(0x150)]){case 0x0:return[0x4,this['setHelperFunctionProvision'](_0x14bd6b,_0x251816,0x0,_0x3211e1)];case 0x1:_0xc39afe['sent'](),_0x1bc200=_0x4546f8(0x23d),_0x29552c=_0x4546f8(0x210)+_0x14bd6b+'.'+_0x3211e1+_0x4546f8(0x249)+_0x251816+_0x4546f8(0x1d0);if(!!this['client'])return[0x3,0x3];_0x16b49e=new client_1['AlicloudClient'](this[_0x4546f8(0x23f)]),_0x52fd5b=this;return[0x4,_0x16b49e[_0x4546f8(0x19c)](this[_0x4546f8(0x1f2)])];case 0x2:_0x52fd5b[_0x4546f8(0x23a)]=_0xc39afe[_0x4546f8(0x1b4)](),_0xc39afe[_0x4546f8(0x150)]=0x3;case 0x3:return[0x4,this['fcClient']['request'](_0x1bc200,_0x29552c,null,JSON[_0x4546f8(0x165)]({}))];case 0x4:_0x241e93=_0xc39afe[_0x4546f8(0x1b4)](),logger_1[_0x4546f8(0x187)][_0x4546f8(0x1d3)]('On-demand\x20config\x20delete\x20result:\x20'+(_0x241e93===null||_0x241e93===void 0x0?void 0x0:_0x241e93['statusCode']));return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)]['setHelperFunctionConfig']=function(_0x530ade,_0x158d24){return __awaiter(this,void 0x0,void 0x0,function(){var _0x38183a,_0x23ef6c,_0x2071d7,_0x316b44,_0x4483c5,_0x14f940;return __generator(this,function(_0x732e8c){var _0x1115f2=a35_0x1e5b;switch(_0x732e8c['label']){case 0x0:_0x38183a=_0x1115f2(0x23b);return[0x4,this[_0x1115f2(0x237)](_0x530ade,_0x158d24,0x1,_0x38183a)];case 0x1:_0x732e8c[_0x1115f2(0x1b4)](),_0x23ef6c=_0x1115f2(0x214),_0x2071d7=_0x1115f2(0x210)+_0x530ade+'.'+_0x38183a+'/functions/'+_0x158d24+_0x1115f2(0x1d0);if(!!this[_0x1115f2(0x23a)])return[0x3,0x3];_0x316b44=new client_1[(_0x1115f2(0x180))](this[_0x1115f2(0x23f)]),_0x4483c5=this;return[0x4,_0x316b44[_0x1115f2(0x19c)](this[_0x1115f2(0x1f2)])];case 0x2:_0x4483c5['fcClient']=_0x732e8c[_0x1115f2(0x1b4)](),_0x732e8c[_0x1115f2(0x150)]=0x3;case 0x3:return[0x4,this[_0x1115f2(0x23a)]['request'](_0x23ef6c,_0x2071d7,null,JSON['stringify']({'maximumInstanceCount':0x0}))];case 0x4:_0x14f940=_0x732e8c['sent'](),logger_1[_0x1115f2(0x187)][_0x1115f2(0x1d3)]('On-demand\x20config\x20put\x20result:\x20'+(_0x14f940===null||_0x14f940===void 0x0?void 0x0:_0x14f940[_0x1115f2(0x227)]));return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x230)]=function(){var _0x365f9d=_0x3eeaec,_0x2a9d93;if(!lodash_1[_0x365f9d(0x187)][_0x365f9d(0x1f0)](this[_0x365f9d(0x20b)])){var _0x1f82ac=path[_0x365f9d(0x233)](_0x9ad0f0[_0x365f9d(0x183)],(_0x2a9d93=this[_0x365f9d(0x20b)])===null||_0x2a9d93===void 0x0?void 0x0:_0x2a9d93['sessionId']),_0x238227=path[_0x365f9d(0x233)](_0x1f82ac,_0x365f9d(0x251)),_0x2cccb5=path[_0x365f9d(0x233)](_0x1f82ac,_0x365f9d(0x164));return{'stdoutFilePath':_0x238227,'stderrFilePath':_0x2cccb5};}return{};},_0x9ad0f0[_0x3eeaec(0x1ff)]['runProxyContainer']=function(){var _0x58ed26;return __awaiter(this,void 0x0,void 0x0,function(){var _0x2194e0,_0x55d61d,_0x44e448,_0x56e07c,_0x352d54;return __generator(this,function(_0x2a9a9d){var _0x168f44=a35_0x1e5b;switch(_0x2a9a9d['label']){case 0x0:return[0x4,docker_1[_0x168f44(0x1a2)](_0x9ad0f0[_0x168f44(0x14c)],_0x9ad0f0[_0x168f44(0x21a)],_0x9ad0f0[_0x168f44(0x22f)],_0x9ad0f0[_0x168f44(0x1f9)])];case 0x1:_0x2a9a9d[_0x168f44(0x1b4)](),_0x2194e0=this['generateProxyContainerOpts'](),(_0x55d61d=this[_0x168f44(0x230)](),_0x44e448=_0x55d61d['stdoutFilePath'],_0x56e07c=_0x55d61d['stderrFilePath']);return[0x4,fse[_0x168f44(0x158)](path[_0x168f44(0x217)](_0x44e448))];case 0x2:_0x2a9a9d[_0x168f44(0x1b4)](),logger_1[_0x168f44(0x187)][_0x168f44(0x1d3)](_0x168f44(0x1f6)+(_0x2194e0===null||_0x2194e0===void 0x0?void 0x0:_0x2194e0['name'])+'\x20stdout\x20to:\x20'+_0x44e448+_0x168f44(0x1cd)+_0x56e07c),this['stdoutFileWriteStream']=fse[_0x168f44(0x167)](_0x44e448,{'flag':'w+','encoding':_0x168f44(0x223),'autoClose':!![]}),this[_0x168f44(0x185)]=fse[_0x168f44(0x167)](_0x56e07c,{'flag':'w+','encoding':'utf-8','autoClose':!![]});return[0x4,docker_1[_0x168f44(0x15e)](_0x2194e0,this['stdoutFileWriteStream'],this['stderrFileWriteStream'])];case 0x3:_0x352d54=_0x2a9a9d[_0x168f44(0x1b4)](),this[_0x168f44(0x17a)]=_0x352d54===null||_0x352d54===void 0x0?void 0x0:_0x352d54[_0x168f44(0x156)],this[_0x168f44(0x24e)]=_0x352d54===null||_0x352d54===void 0x0?void 0x0:_0x352d54[_0x168f44(0x171)];return[0x4,this[_0x168f44(0x1e7)]((_0x58ed26=this['runner'])===null||_0x58ed26===void 0x0?void 0x0:_0x58ed26['id'])];case 0x4:_0x2a9a9d[_0x168f44(0x1b4)]();return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1e7)]=function(_0x21ce7b){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x195ba8){var _0x3391f1=a35_0x1e5b;switch(_0x195ba8['label']){case 0x0:return[0x4,devs_1[_0x3391f1(0x157)](_0x3391f1(0x22e),_0x21ce7b,this[_0x3391f1(0x169)]())];case 0x1:_0x195ba8[_0x3391f1(0x1b4)]();return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1c8)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x4b7959){var _0x7080f5=a35_0x1e5b;switch(_0x4b7959[_0x7080f5(0x150)]){case 0x0:return[0x4,devs_1[_0x7080f5(0x24a)](_0x7080f5(0x22e),this[_0x7080f5(0x169)]())];case 0x1:_0x4b7959[_0x7080f5(0x1b4)]();return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)]['generateProxyContainerDebugOpts']=function(){var _0xd29067=_0x3eeaec,_0x2248ff,_0x3439e5,_0x5e64b0,_0xbef7e1=(_0x5e64b0=this[_0xd29067(0x203)])===null||_0x5e64b0===void 0x0?void 0x0:_0x5e64b0[_0xd29067(0x152)];if(runtime_1[_0xd29067(0x15b)](_0xbef7e1))return{};var _0x428143=this['debugPort']+'/tcp';if(this[_0xd29067(0x219)]===IDE_PYCHARM){if(_0xbef7e1!==_0xd29067(0x1e2)&&_0xbef7e1!==_0xd29067(0x1cb))throw new Error(IDE_PYCHARM+_0xd29067(0x232));else return{};}else return _0xbef7e1===_0xd29067(0x1b3)?{}:{'ExposedPorts':(_0x2248ff={},_0x2248ff[_0x428143]={},_0x2248ff),'HostConfig':{'PortBindings':(_0x3439e5={},_0x3439e5[_0x428143]=[{'HostIp':'','HostPort':''+this['debugPort']}],_0x3439e5)}};},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x17c)]=function(){var _0x25f060=_0x3eeaec,_0xcf513,_0x1810af=_0x9ad0f0[_0x25f060(0x14c)]+'/'+_0x9ad0f0[_0x25f060(0x21a)]+'/'+_0x9ad0f0[_0x25f060(0x22f)]+':'+_0x9ad0f0[_0x25f060(0x1f9)],_0x2d948a=definition_1[_0x25f060(0x218)]((_0xcf513=this['session'])===null||_0xcf513===void 0x0?void 0x0:_0xcf513['sessionId']),_0x4e5aac={'OpenStdin':![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x60ceb9={'HostConfig':{'AutoRemove':!![],'Privileged':!![],'Mounts':[]}},_0x176366={};this['debugPort']&&(_0x176366=this[_0x25f060(0x250)]());var _0x3f7aca=nested_object_assign_1[_0x25f060(0x187)]({'Env':this['generateProxyContainerEnv'](),'Image':_0x1810af,'name':_0x2d948a,'User':_0x25f060(0x1dd)},_0x4e5aac,_0x60ceb9,_0x176366),_0x4d0e75=lodash_1[_0x25f060(0x187)][_0x25f060(0x1e6)](_0x3f7aca);if(_0x4d0e75===null||_0x4d0e75===void 0x0?void 0x0:_0x4d0e75[_0x25f060(0x24b)]){var _0x3f321d=_0x4d0e75[_0x25f060(0x24b)][_0x25f060(0x242)](function(_0x487f38){var _0x582908=_0x25f060;if(_0x487f38['startsWith'](_0x582908(0x17b))||_0x487f38[_0x582908(0x1cc)](_0x582908(0x21c))){var _0x2f5813=_0x487f38['split']('='),_0x380785=utils_1['mark'](_0x2f5813[0x1]);return _0x2f5813[0x0]+'='+_0x380785;}else return _0x487f38;});_0x4d0e75[_0x25f060(0x24b)]=_0x3f321d;}return logger_1[_0x25f060(0x187)][_0x25f060(0x1d3)]('Tunnel\x20service\x20proxy\x20container\x20options:\x20'+JSON[_0x25f060(0x165)](_0x4d0e75,null,'\x20\x20')),_0x3f7aca;},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1b6)]=function(){var _0x4d93d7=_0x3eeaec,_0x3f7684,_0x2becdb,_0x5cb71d,_0x855d93,_0x32d018={'TUNNEL_SERVICE_HOST':_0x9ad0f0['tunnerServiceHost'],'TUNNEL_SERVICE_SESSION_ID':(_0x3f7684=this[_0x4d93d7(0x20b)])===null||_0x3f7684===void 0x0?void 0x0:_0x3f7684['sessionId'],'TUNNEL_SERVICE_INSTANCE_ID':(_0x2becdb=this['session'])===null||_0x2becdb===void 0x0?void 0x0:_0x2becdb[_0x4d93d7(0x21b)],'TUNNEL_SERVICE_AK_ID':(_0x5cb71d=this[_0x4d93d7(0x23f)])===null||_0x5cb71d===void 0x0?void 0x0:_0x5cb71d[_0x4d93d7(0x24f)],'TUNNEL_SERVICE_AK_SECRET':(_0x855d93=this[_0x4d93d7(0x23f)])===null||_0x855d93===void 0x0?void 0x0:_0x855d93[_0x4d93d7(0x19d)]};return lodash_1[_0x4d93d7(0x187)][_0x4d93d7(0x242)](_0x32d018||{},function(_0x566194,_0x2ea223){return _0x2ea223+'='+_0x566194;});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x19b)]=function(){var _0x36dcca,_0xb699f8,_0x886015,_0x5ba7dc,_0x3592cd,_0x2551d5;return __awaiter(this,void 0x0,void 0x0,function(){var _0x4c9377,_0x37d19f,_0x32929a;return __generator(this,function(_0x4ea595){var _0x84f897=a35_0x1e5b;switch(_0x4ea595['label']){case 0x0:return[0x4,this[_0x84f897(0x17d)][_0x84f897(0x19e)]((_0x36dcca=this['session'])===null||_0x36dcca===void 0x0?void 0x0:_0x36dcca['sessionId'])];case 0x1:_0x4c9377=_0x4ea595[_0x84f897(0x1b4)](),_0x37d19f=(_0x886015=(_0xb699f8=_0x4c9377===null||_0x4c9377===void 0x0?void 0x0:_0x4c9377['body'])===null||_0xb699f8===void 0x0?void 0x0:_0xb699f8['data'])===null||_0x886015===void 0x0?void 0x0:_0x886015['status'],_0x32929a=0x0,_0x4ea595[_0x84f897(0x150)]=0x2;case 0x2:if(!(_0x37d19f!==_0x84f897(0x229)&&_0x32929a<_0x9ad0f0[_0x84f897(0x1b8)]))return[0x3,0x5];return[0x4,time_1[_0x84f897(0x1ec)](0x3e8)];case 0x3:_0x4ea595[_0x84f897(0x1b4)]();return[0x4,this['client']['getSession']((_0x5ba7dc=this[_0x84f897(0x20b)])===null||_0x5ba7dc===void 0x0?void 0x0:_0x5ba7dc['sessionId'])];case 0x4:_0x4c9377=_0x4ea595[_0x84f897(0x1b4)](),_0x37d19f=(_0x2551d5=(_0x3592cd=_0x4c9377===null||_0x4c9377===void 0x0?void 0x0:_0x4c9377[_0x84f897(0x1fc)])===null||_0x3592cd===void 0x0?void 0x0:_0x3592cd['data'])===null||_0x2551d5===void 0x0?void 0x0:_0x2551d5[_0x84f897(0x15c)],_0x32929a=_0x32929a+0x1;return[0x3,0x2];case 0x5:if(_0x37d19f!==_0x84f897(0x229))throw new Error('Session\x20establish\x20fail,\x20body\x20in\x20response\x20is:\x20'+JSON[_0x84f897(0x165)](_0x4c9377===null||_0x4c9377===void 0x0?void 0x0:_0x4c9377['body'],null,'\x20\x20'));return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1d9)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x10e481;return __generator(this,function(_0x54183a){var _0x2daaf2=a35_0x1e5b;switch(_0x54183a[_0x2daaf2(0x150)]){case 0x0:_0x10e481=this[_0x2daaf2(0x169)]();return[0x4,core[_0x2daaf2(0x1d9)](_0x10e481)];case 0x1:return[0x2,_0x54183a[_0x2daaf2(0x1b4)]()];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x182)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x34fb43;return __generator(this,function(_0x4db38e){var _0x32ae0f=a35_0x1e5b;switch(_0x4db38e[_0x32ae0f(0x150)]){case 0x0:return[0x4,this['getState']()];case 0x1:_0x34fb43=_0x4db38e['sent']();lodash_1[_0x32ae0f(0x187)]['isEmpty'](_0x34fb43===null||_0x34fb43===void 0x0?void 0x0:_0x34fb43[_0x32ae0f(0x20b)])&&logger_1['default'][_0x32ae0f(0x22d)]('Session\x20has\x20not\x20been\x20established.\x20Please\x20exec\x20\x27s\x20setup\x27\x20first.');return[0x2,_0x34fb43===null||_0x34fb43===void 0x0?void 0x0:_0x34fb43[_0x32ae0f(0x20b)]];}});});},_0x9ad0f0['prototype']['getHelperConfigFromState']=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x12ad54;return __generator(this,function(_0x53d347){var _0x47f5d0=a35_0x1e5b;switch(_0x53d347[_0x47f5d0(0x150)]){case 0x0:return[0x4,this[_0x47f5d0(0x1d9)]()];case 0x1:_0x12ad54=_0x53d347[_0x47f5d0(0x1b4)]();lodash_1[_0x47f5d0(0x187)][_0x47f5d0(0x1f0)](_0x12ad54===null||_0x12ad54===void 0x0?void 0x0:_0x12ad54[_0x47f5d0(0x1d7)])&&logger_1['default'][_0x47f5d0(0x22d)](_0x47f5d0(0x163));return[0x2,_0x12ad54===null||_0x12ad54===void 0x0?void 0x0:_0x12ad54[_0x47f5d0(0x1d7)]];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x207)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0xba3af2;return __generator(this,function(_0x137464){var _0x1260e1=a35_0x1e5b;switch(_0x137464[_0x1260e1(0x150)]){case 0x0:return[0x4,this[_0x1260e1(0x1d9)]()];case 0x1:_0xba3af2=_0x137464[_0x1260e1(0x1b4)]();lodash_1[_0x1260e1(0x187)][_0x1260e1(0x1f0)](_0xba3af2===null||_0xba3af2===void 0x0?void 0x0:_0xba3af2[_0x1260e1(0x22e)])&&logger_1[_0x1260e1(0x187)][_0x1260e1(0x22d)](_0x1260e1(0x14f));return[0x2,_0xba3af2===null||_0xba3af2===void 0x0?void 0x0:_0xba3af2[_0x1260e1(0x22e)]];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)]['invokeHelperFunction']=function(_0x41a82e){return __awaiter(this,void 0x0,void 0x0,function(){var _0x45319a,_0x3780b5,_0x58ece3,_0x2da95f,_0x7c636f,_0x266538,_0x2125c4,_0x3b6ecb;return __generator(this,function(_0x235ceb){var _0x52289c=a35_0x1e5b;switch(_0x235ceb[_0x52289c(0x150)]){case 0x0:return[0x4,this['getHelperConfigFromState']()];case 0x1:_0x45319a=_0x235ceb[_0x52289c(0x1b4)](),_0x3780b5=_0x45319a===null||_0x45319a===void 0x0?void 0x0:_0x45319a['service'],_0x58ece3=_0x45319a===null||_0x45319a===void 0x0?void 0x0:_0x45319a['function'],_0x2da95f=_0x45319a===null||_0x45319a===void 0x0?void 0x0:_0x45319a['triggers'],_0x7c636f=new fc_remote_invoke_1[(_0x52289c(0x18a))](this[_0x52289c(0x1f2)],_0x3780b5===null||_0x3780b5===void 0x0?void 0x0:_0x3780b5['name'],this[_0x52289c(0x179)],this[_0x52289c(0x175)],this[_0x52289c(0x1a1)],_0x58ece3===null||_0x58ece3===void 0x0?void 0x0:_0x58ece3['name']),_0x266538='--invocation-type\x20sync';!lodash_1[_0x52289c(0x187)][_0x52289c(0x1f0)](_0x2da95f)&&lodash_1[_0x52289c(0x187)]['isEmpty'](definition_1['getHttpTrigger'](_0x2da95f))&&(_0x266538=_0x52289c(0x205));!lodash_1[_0x52289c(0x187)][_0x52289c(0x1f0)](_0x41a82e)&&(_0x266538=_0x266538+'\x20'+_0x41a82e);_0x2125c4=_0x7c636f[_0x52289c(0x1ed)]('fc-remote-invoke',_0x52289c(0x1c0),_0x266538,_0x52289c(0x162));return[0x4,core[_0x52289c(0x186)](_0x52289c(0x199))];case 0x2:_0x3b6ecb=_0x235ceb['sent']();return[0x4,_0x3b6ecb[_0x52289c(0x162)](_0x2125c4)];case 0x3:_0x235ceb[_0x52289c(0x1b4)]();return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x1b9)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x290ab7,_0x31b9c3,_0x5438b9,_0x5557c4,_0x918f55,_0x4ef4d8,_0x5057a8,_0x47e007,_0x1b5b48,_0x334d95,_0x5789ab,_0x58d1d0,_0x18121d,_0x1bd59e,_0x4ec8dc,_0x3d3929;return __generator(this,function(_0x1272b0){var _0x1ffd43=a35_0x1e5b;switch(_0x1272b0['label']){case 0x0:return[0x4,this[_0x1ffd43(0x1f4)]()];case 0x1:_0x290ab7=_0x1272b0[_0x1ffd43(0x1b4)]();return[0x4,this[_0x1ffd43(0x182)]()];case 0x2:_0x31b9c3=_0x1272b0['sent']();return[0x4,this[_0x1ffd43(0x207)]()];case 0x3:_0x5438b9=_0x1272b0[_0x1ffd43(0x1b4)](),_0x5557c4=_0x290ab7===null||_0x290ab7===void 0x0?void 0x0:_0x290ab7['service'],_0x918f55=_0x290ab7===null||_0x290ab7===void 0x0?void 0x0:_0x290ab7[_0x1ffd43(0x1cf)],_0x4ef4d8=_0x290ab7===null||_0x290ab7===void 0x0?void 0x0:_0x290ab7[_0x1ffd43(0x176)];if(!_0x5438b9)return[0x3,0x8];_0x1272b0[_0x1ffd43(0x150)]=0x4;case 0x4:_0x1272b0['trys'][_0x1ffd43(0x245)]([0x4,0x7,,0x8]),_0x5057a8=docker['getContainer'](_0x5438b9);return[0x4,docker_1[_0x1ffd43(0x1d5)](_0x5057a8)];case 0x5:_0x1272b0['sent']();return[0x4,this[_0x1ffd43(0x1c8)]()];case 0x6:_0x1272b0['sent']();return[0x3,0x8];case 0x7:_0x47e007=_0x1272b0[_0x1ffd43(0x1b4)](),logger_1[_0x1ffd43(0x187)]['warning'](stdout_formatter_1[_0x1ffd43(0x187)][_0x1ffd43(0x1e1)][_0x1ffd43(0x253)](_0x1ffd43(0x1da),_0x1ffd43(0x16b)+_0x5438b9,_0x47e007===null||_0x47e007===void 0x0?void 0x0:_0x47e007['message'])),logger_1['default'][_0x1ffd43(0x1d3)](_0x1ffd43(0x1bb)+_0x5438b9+_0x1ffd43(0x209)+_0x47e007);return[0x3,0x8];case 0x8:_0x1b5b48=core[_0x1ffd43(0x236)](_0x1ffd43(0x1ba)),_0x1272b0[_0x1ffd43(0x150)]=0x9;case 0x9:_0x1272b0[_0x1ffd43(0x225)][_0x1ffd43(0x245)]([0x9,0xb,,0xc]);return[0x4,this['unsetHelperFunctionConfig'](_0x5557c4===null||_0x5557c4===void 0x0?void 0x0:_0x5557c4[_0x1ffd43(0x1bf)],_0x918f55===null||_0x918f55===void 0x0?void 0x0:_0x918f55[_0x1ffd43(0x1bf)],'LATEST')];case 0xa:_0x1272b0['sent'](),_0x1b5b48[_0x1ffd43(0x1ce)](_0x1ffd43(0x15f));return[0x3,0xc];case 0xb:_0x334d95=_0x1272b0[_0x1ffd43(0x1b4)](),_0x1b5b48['fail']('Unset\x20error.'),logger_1['default'][_0x1ffd43(0x22d)](_0x334d95===null||_0x334d95===void 0x0?void 0x0:_0x334d95[_0x1ffd43(0x1aa)]),logger_1[_0x1ffd43(0x187)]['debug']('Error:\x20'+_0x334d95);return[0x3,0xc];case 0xc:_0x1272b0[_0x1ffd43(0x225)][_0x1ffd43(0x245)]([0xc,0xf,,0x10]),_0x5789ab=new fc_deploy_1[(_0x1ffd43(0x21f))](this[_0x1ffd43(0x1f2)],_0x5557c4,this['access'],this['appName'],this[_0x1ffd43(0x1a1)],_0x918f55,_0x4ef4d8);return[0x4,core[_0x1ffd43(0x186)](_0x1ffd43(0x1d2))];case 0xd:_0x58d1d0=_0x1272b0[_0x1ffd43(0x1b4)](),_0x18121d=_0x5789ab[_0x1ffd43(0x1ed)](_0x1ffd43(0x161),_0x1ffd43(0x1eb),'service\x20-y',_0x1ffd43(0x172));return[0x4,_0x58d1d0[_0x1ffd43(0x172)](_0x18121d)];case 0xe:_0x1272b0[_0x1ffd43(0x1b4)]();return[0x3,0x10];case 0xf:_0x1bd59e=_0x1272b0[_0x1ffd43(0x1b4)](),logger_1[_0x1ffd43(0x187)][_0x1ffd43(0x1ee)](stdout_formatter_1['default'][_0x1ffd43(0x1e1)]['warn']('remove\x20helper\x20service','serviceName:\x20'+(_0x5557c4===null||_0x5557c4===void 0x0?void 0x0:_0x5557c4[_0x1ffd43(0x1bf)])+_0x1ffd43(0x19a)+(_0x918f55===null||_0x918f55===void 0x0?void 0x0:_0x918f55[_0x1ffd43(0x1bf)]),_0x1bd59e===null||_0x1bd59e===void 0x0?void 0x0:_0x1bd59e[_0x1ffd43(0x1aa)])),logger_1[_0x1ffd43(0x187)][_0x1ffd43(0x1d3)](_0x1ffd43(0x184)+_0x1bd59e);return[0x3,0x10];case 0x10:_0x4ec8dc=core[_0x1ffd43(0x236)](_0x1ffd43(0x19f)+(_0x31b9c3===null||_0x31b9c3===void 0x0?void 0x0:_0x31b9c3[_0x1ffd43(0x154)])+_0x1ffd43(0x246));;_0x1272b0[_0x1ffd43(0x150)]=0x11;case 0x11:_0x1272b0[_0x1ffd43(0x225)][_0x1ffd43(0x245)]([0x11,0x13,,0x14]);return[0x4,this[_0x1ffd43(0x1a6)](_0x31b9c3===null||_0x31b9c3===void 0x0?void 0x0:_0x31b9c3['sessionId'])];case 0x12:_0x1272b0['sent'](),_0x4ec8dc[_0x1ffd43(0x1ce)](_0x1ffd43(0x18b));return[0x3,0x14];case 0x13:_0x3d3929=_0x1272b0[_0x1ffd43(0x1b4)](),_0x4ec8dc['fail'](_0x1ffd43(0x1fa)),logger_1[_0x1ffd43(0x187)][_0x1ffd43(0x22d)](_0x3d3929===null||_0x3d3929===void 0x0?void 0x0:_0x3d3929[_0x1ffd43(0x1aa)]),logger_1[_0x1ffd43(0x187)][_0x1ffd43(0x1d3)](_0x1ffd43(0x184)+_0x3d3929);return[0x3,0x14];case 0x14:return[0x2];}});});},_0x9ad0f0[_0x3eeaec(0x1ff)][_0x3eeaec(0x19e)]=function(){var _0x5626a2=_0x3eeaec;return this[_0x5626a2(0x20b)];},_0x9ad0f0[_0x3eeaec(0x1b8)]=0x14,_0x9ad0f0['tunnerServiceHost']=_0x3eeaec(0x16a),_0x9ad0f0['supportedRegionList']=[_0x3eeaec(0x208)],_0x9ad0f0[_0x3eeaec(0x22f)]=_0x3eeaec(0x193),_0x9ad0f0[_0x3eeaec(0x24d)]=_0x3eeaec(0x1a9),_0x9ad0f0[_0x3eeaec(0x18e)]=_0x3eeaec(0x228),_0x9ad0f0['helperImageVersion']=process['env']['TUNNEL_SERVICE_HELPER_IMAGE_LATEST_VERSION']||_0x9ad0f0[_0x3eeaec(0x18e)],_0x9ad0f0[_0x3eeaec(0x1f9)]=process['env'][_0x3eeaec(0x15d)]||_0x9ad0f0[_0x3eeaec(0x24d)],_0x9ad0f0[_0x3eeaec(0x21a)]='aliyunfc',_0x9ad0f0[_0x3eeaec(0x14c)]='registry.cn-hangzhou.aliyuncs.com',_0x9ad0f0[_0x3eeaec(0x183)]=path['join'](os[_0x3eeaec(0x252)](),'.s',_0x3eeaec(0x1e5),_0x3eeaec(0x1b7)),_0x9ad0f0[_0x3eeaec(0x1c7)]=['nodejs',_0x3eeaec(0x1d8),'php',_0x3eeaec(0x1a8)],_0x9ad0f0;}();function a35_0x1e5b(_0x29d350,_0x11b27e){return a35_0x1e5b=function(_0x397d1,_0x1e5b49){_0x397d1=_0x397d1-0x14b;var _0x7ac413=a35_0x397d[_0x397d1];return _0x7ac413;},a35_0x1e5b(_0x29d350,_0x11b27e);}exports[a35_0x524168(0x187)]=TunnelService;