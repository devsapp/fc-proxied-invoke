'use strict';var a16_0xb973=['error','Via\x20the\x20link:\x20\x20https://shell.aliyun.com/\x20or\x20aliyun\x20cli','\x27\x20on\x20\x27','129678dBGIkX','90237jAwZwn','stringify','\x0aYou\x20can\x20run\x20the\x20following\x20commands\x20to\x20grant\x20permission\x20\x27','Message','url','throwProcessedFCPermissionError','random','NoPermission','5wMuWpW','toString','102286SKxiIo','46464qtYnek','306325Jucvmc','includes','\x20--PolicyType\x20\x22Custom\x22\x20--UserName\x20\x22YOUR_USER_NAME\x22\x0a','Aliyun\x20ram\x20CreatePolicy\x20--PolicyName\x20','1Movqgn','exec','Forbidden.RAM','\x20--PolicyDocument\x20\x22','3KWLHsw','AccessDenied','__importDefault','throwProcessedPopPermissionError','join','312489YRUjOn','Aliyun\x20ram\x20AttachPolicyToUser\x20--PolicyName\x20','Forbbiden','generatePolicyName','__spreadArrays','length','message','code','defineProperty','__esModule','\x0a2.\x20Attach\x20Policy\x20To\x20User','152672MXoEUT','data','fun-generated-','replace','default','printPermissionTip'];var a16_0x4d72a1=a16_0x4f84;(function(_0x6407af,_0x34fb3c){var _0x3bfa56=a16_0x4f84;while(!![]){try{var _0x47d383=-parseInt(_0x3bfa56(0x198))+-parseInt(_0x3bfa56(0x176))+-parseInt(_0x3bfa56(0x177))+parseInt(_0x3bfa56(0x199))+parseInt(_0x3bfa56(0x17b))*-parseInt(_0x3bfa56(0x184))+parseInt(_0x3bfa56(0x18f))*parseInt(_0x3bfa56(0x17f))+parseInt(_0x3bfa56(0x175))*parseInt(_0x3bfa56(0x173));if(_0x47d383===_0x34fb3c)break;else _0x6407af['push'](_0x6407af['shift']());}catch(_0x190b9d){_0x6407af['push'](_0x6407af['shift']());}}}(a16_0xb973,0x40a17));var __spreadArrays=this&&this[a16_0x4d72a1(0x188)]||function(){var _0x1932f9=a16_0x4d72a1;for(var _0x506399=0x0,_0x105775=0x0,_0x56acf8=arguments[_0x1932f9(0x189)];_0x105775<_0x56acf8;_0x105775++)_0x506399+=arguments[_0x105775][_0x1932f9(0x189)];for(var _0x340145=Array(_0x506399),_0x5b112d=0x0,_0x105775=0x0;_0x105775<_0x56acf8;_0x105775++)for(var _0x5beaf5=arguments[_0x105775],_0x37bbd8=0x0,_0x1f92e4=_0x5beaf5['length'];_0x37bbd8<_0x1f92e4;_0x37bbd8++,_0x5b112d++)_0x340145[_0x5b112d]=_0x5beaf5[_0x37bbd8];return _0x340145;},__importDefault=this&&this[a16_0x4d72a1(0x181)]||function(_0x3de617){var _0x27a9cc=a16_0x4d72a1;return _0x3de617&&_0x3de617[_0x27a9cc(0x18d)]?_0x3de617:{'default':_0x3de617};};Object[a16_0x4d72a1(0x18c)](exports,a16_0x4d72a1(0x18d),{'value':!![]}),exports[a16_0x4d72a1(0x170)]=exports['printPermissionTip']=exports[a16_0x4d72a1(0x187)]=exports[a16_0x4d72a1(0x182)]=void 0x0;var logger_1=__importDefault(require('../common/logger'));function a16_0x4f84(_0x2b330b,_0x222289){return a16_0x4f84=function(_0xb97318,_0x4f849e){_0xb97318=_0xb97318-0x170;var _0x13e65c=a16_0xb973[_0xb97318];return _0x13e65c;},a16_0x4f84(_0x2b330b,_0x222289);}function throwProcessedPopPermissionError(_0x240e3b,_0x113531){var _0x52e60b=a16_0x4d72a1;if(!_0x240e3b['code']||!_0x240e3b[_0x52e60b(0x19d)]||_0x240e3b['code']!==_0x52e60b(0x172)&&_0x240e3b['code']!==_0x52e60b(0x17d)&&!_0x240e3b[_0x52e60b(0x18b)][_0x52e60b(0x178)](_0x52e60b(0x186)))throw _0x240e3b;var _0x3a35d5=new RegExp(/https?:\/\/([a-zA-Z]*).(.*)aliyuncs.com/),_0x1dd991=_0x3a35d5[_0x52e60b(0x17c)](_0x240e3b[_0x52e60b(0x19d)]);if(!_0x1dd991)throw _0x240e3b;var _0x29ffa7=_0x1dd991[0x1];_0x113531=_0x29ffa7+':'+_0x113531;var _0x37eab4='*';if(_0x240e3b[_0x52e60b(0x190)]&&_0x240e3b['data'][_0x52e60b(0x19c)]){var _0x29a6c1=new RegExp(/Resource: (.*) Action: (.*)/),_0x4e7f67=_0x29a6c1[_0x52e60b(0x17c)](_0x240e3b[_0x52e60b(0x190)][_0x52e60b(0x19c)]);_0x4e7f67&&(_0x37eab4=_0x4e7f67[0x1],_0x113531=_0x4e7f67[0x2]);}var _0x2c63c7=generatePolicyName(_0x113531);printPermissionTip(_0x2c63c7,_0x113531,_0x37eab4);throw _0x240e3b;}exports[a16_0x4d72a1(0x182)]=throwProcessedPopPermissionError;function generatePolicyName(_0x2525c5){var _0x10207e=a16_0x4d72a1,_0x45aae2=[];for(var _0x3ab896=0x1;_0x3ab896<arguments[_0x10207e(0x189)];_0x3ab896++){_0x45aae2[_0x3ab896-0x1]=arguments[_0x3ab896];}var _0xbb38d6=_0x45aae2&&_0x45aae2[_0x10207e(0x189)]?_0x45aae2[_0x10207e(0x183)]('-'):Math[_0x10207e(0x171)]()[_0x10207e(0x174)](0x24)['slice'](-0x8);return _0x10207e(0x191)+_0x2525c5[_0x10207e(0x192)](/:/g,'-')+'-'+_0xbb38d6;}exports[a16_0x4d72a1(0x187)]=generatePolicyName;function printPermissionTip(_0x23d70f,_0xf987be,_0x588e85){var _0x440347=a16_0x4d72a1,_0x31e532={'Version':'1','Statement':[{'Effect':'Allow','Action':[_0xf987be],'Resource':[_0x588e85]}]};logger_1[_0x440347(0x193)][_0x440347(0x195)](_0x440347(0x19b)+_0xf987be+_0x440347(0x197)+_0x588e85+'\x27\x20'),logger_1[_0x440347(0x193)][_0x440347(0x195)](_0x440347(0x196)),logger_1[_0x440347(0x193)][_0x440347(0x195)]('(Note:\x20aliyun\x20cli\x20tool\x20needs\x20to\x20be\x20configured\x20with\x20credentials\x20that\x20have\x20related\x20RAM\x20permissions,\x20such\x20as\x20primary\x20account\x27s\x20AK)'),logger_1[_0x440347(0x193)][_0x440347(0x195)]('\x0a1.\x20Create\x20Policy'),logger_1['default'][_0x440347(0x195)](_0x440347(0x17a)+_0x23d70f+_0x440347(0x17e)+JSON[_0x440347(0x19a)](_0x31e532)['replace'](/"/g,'\x5c\x22')+'\x22'),logger_1[_0x440347(0x193)]['error'](_0x440347(0x18e)),logger_1[_0x440347(0x193)][_0x440347(0x195)](_0x440347(0x185)+_0x23d70f+_0x440347(0x179));}exports[a16_0x4d72a1(0x194)]=printPermissionTip;function throwProcessedFCPermissionError(_0xfa25d2,_0x20364f){var _0x45480f=a16_0x4d72a1,_0x37db3b=[];for(var _0x2d759c=0x2;_0x2d759c<arguments[_0x45480f(0x189)];_0x2d759c++){_0x37db3b[_0x2d759c-0x2]=arguments[_0x2d759c];}if(!_0xfa25d2['code']||_0xfa25d2[_0x45480f(0x18b)]!==_0x45480f(0x180)||!_0xfa25d2[_0x45480f(0x18a)])throw _0xfa25d2;var _0x2d0c98=new RegExp(/the caller is not authorized to perform '(.*)' on resource '(.*)'/),_0x405f0e=_0x2d0c98[_0x45480f(0x17c)](_0xfa25d2[_0x45480f(0x18a)]);if(!_0x405f0e)throw _0xfa25d2;var _0xec9bd=_0x405f0e[0x1],_0x3e3932=_0x405f0e[0x2],_0x16878d=generatePolicyName['apply'](void 0x0,__spreadArrays([_0xec9bd,_0x20364f],_0x37db3b));printPermissionTip(_0x16878d,_0xec9bd,_0x3e3932);throw _0xfa25d2;}exports[a16_0x4d72a1(0x170)]=throwProcessedFCPermissionError;