'use strict';var a16_0x4cfc=['Allow','apply','Forbbiden','message','1XCVgVe','throwProcessedPopPermissionError','default','generatePolicyName','311503xYphqP','NoPermission','throwProcessedFCPermissionError','__esModule','exec','Via\x20the\x20link:\x20\x20https://shell.aliyun.com/\x20or\x20aliyun\x20cli','random','Aliyun\x20ram\x20CreatePolicy\x20--PolicyName\x20','AccessDenied','141214yIYGEA','\x27\x20on\x20\x27','__spreadArrays','fun-generated-','error','\x0a1.\x20Create\x20Policy','\x0aYou\x20can\x20run\x20the\x20following\x20commands\x20to\x20grant\x20permission\x20\x27','Message','Forbidden.RAM','replace','1238693raclEn','join','url','246883ZfDFet','length','341323rerKHk','printPermissionTip','code','144490NraTNU','(Note:\x20aliyun\x20cli\x20tool\x20needs\x20to\x20be\x20configured\x20with\x20credentials\x20that\x20have\x20related\x20RAM\x20permissions,\x20such\x20as\x20primary\x20account\x27s\x20AK)','__importDefault','160565PWowVA','Aliyun\x20ram\x20AttachPolicyToUser\x20--PolicyName\x20','data','stringify'];var a16_0x422589=a16_0x5af3;(function(_0x3a8181,_0x5bbc3e){var _0x3f3239=a16_0x5af3;while(!![]){try{var _0x160e56=-parseInt(_0x3f3239(0xbd))+-parseInt(_0x3f3239(0xa7))+-parseInt(_0x3f3239(0x98))+-parseInt(_0x3f3239(0x9b))*parseInt(_0x3f3239(0xa3))+-parseInt(_0x3f3239(0xbf))+parseInt(_0x3f3239(0xb0))+parseInt(_0x3f3239(0xba));if(_0x160e56===_0x5bbc3e)break;else _0x3a8181['push'](_0x3a8181['shift']());}catch(_0x597b54){_0x3a8181['push'](_0x3a8181['shift']());}}}(a16_0x4cfc,0x2ac27));var __spreadArrays=this&&this[a16_0x422589(0xb2)]||function(){var _0x23a76b=a16_0x422589;for(var _0x51bc0b=0x0,_0xb642a=0x0,_0x4df303=arguments[_0x23a76b(0xbe)];_0xb642a<_0x4df303;_0xb642a++)_0x51bc0b+=arguments[_0xb642a][_0x23a76b(0xbe)];for(var _0x567975=Array(_0x51bc0b),_0x36118a=0x0,_0xb642a=0x0;_0xb642a<_0x4df303;_0xb642a++)for(var _0x39cb38=arguments[_0xb642a],_0x145a51=0x0,_0x5a24df=_0x39cb38['length'];_0x145a51<_0x5a24df;_0x145a51++,_0x36118a++)_0x567975[_0x36118a]=_0x39cb38[_0x145a51];return _0x567975;},__importDefault=this&&this[a16_0x422589(0x9a)]||function(_0x2060eb){var _0x812819=a16_0x422589;return _0x2060eb&&_0x2060eb[_0x812819(0xaa)]?_0x2060eb:{'default':_0x2060eb};};function a16_0x5af3(_0x504bed,_0xf258c2){return a16_0x5af3=function(_0x4cfc87,_0x5af30b){_0x4cfc87=_0x4cfc87-0x97;var _0x33b6d2=a16_0x4cfc[_0x4cfc87];return _0x33b6d2;},a16_0x5af3(_0x504bed,_0xf258c2);}Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a16_0x422589(0xa9)]=exports[a16_0x422589(0xc0)]=exports[a16_0x422589(0xa6)]=exports[a16_0x422589(0xa4)]=void 0x0;var logger_1=__importDefault(require('../common/logger'));function throwProcessedPopPermissionError(_0x6407a2,_0x370bef){var _0x27aacd=a16_0x422589;if(!_0x6407a2[_0x27aacd(0x97)]||!_0x6407a2[_0x27aacd(0xbc)]||_0x6407a2[_0x27aacd(0x97)]!==_0x27aacd(0xa8)&&_0x6407a2[_0x27aacd(0x97)]!==_0x27aacd(0xb8)&&!_0x6407a2[_0x27aacd(0x97)]['includes'](_0x27aacd(0xa1)))throw _0x6407a2;var _0x1e74ff=new RegExp(/https?:\/\/([a-zA-Z]*).(.*)aliyuncs.com/),_0x307d89=_0x1e74ff[_0x27aacd(0xab)](_0x6407a2[_0x27aacd(0xbc)]);if(!_0x307d89)throw _0x6407a2;var _0x360e10=_0x307d89[0x1];_0x370bef=_0x360e10+':'+_0x370bef;var _0x33ef0f='*';if(_0x6407a2['data']&&_0x6407a2['data']['Message']){var _0x3a2f0b=new RegExp(/Resource: (.*) Action: (.*)/),_0x222f6d=_0x3a2f0b[_0x27aacd(0xab)](_0x6407a2[_0x27aacd(0x9d)][_0x27aacd(0xb7)]);_0x222f6d&&(_0x33ef0f=_0x222f6d[0x1],_0x370bef=_0x222f6d[0x2]);}var _0x2aecbe=generatePolicyName(_0x370bef);printPermissionTip(_0x2aecbe,_0x370bef,_0x33ef0f);throw _0x6407a2;}exports[a16_0x422589(0xa4)]=throwProcessedPopPermissionError;function generatePolicyName(_0x1a94bc){var _0x520757=a16_0x422589,_0x2f7ae4=[];for(var _0x59347e=0x1;_0x59347e<arguments[_0x520757(0xbe)];_0x59347e++){_0x2f7ae4[_0x59347e-0x1]=arguments[_0x59347e];}var _0x539ea8=_0x2f7ae4&&_0x2f7ae4[_0x520757(0xbe)]?_0x2f7ae4[_0x520757(0xbb)]('-'):Math[_0x520757(0xad)]()['toString'](0x24)['slice'](-0x8);return _0x520757(0xb3)+_0x1a94bc[_0x520757(0xb9)](/:/g,'-')+'-'+_0x539ea8;}exports[a16_0x422589(0xa6)]=generatePolicyName;function printPermissionTip(_0x402b32,_0x2aa2f7,_0x548a53){var _0x235aa6=a16_0x422589,_0x3865fb={'Version':'1','Statement':[{'Effect':_0x235aa6(0x9f),'Action':[_0x2aa2f7],'Resource':[_0x548a53]}]};logger_1[_0x235aa6(0xa5)]['error'](_0x235aa6(0xb6)+_0x2aa2f7+_0x235aa6(0xb1)+_0x548a53+'\x27\x20'),logger_1[_0x235aa6(0xa5)][_0x235aa6(0xb4)](_0x235aa6(0xac)),logger_1['default']['error'](_0x235aa6(0x99)),logger_1[_0x235aa6(0xa5)][_0x235aa6(0xb4)](_0x235aa6(0xb5)),logger_1[_0x235aa6(0xa5)][_0x235aa6(0xb4)](_0x235aa6(0xae)+_0x402b32+'\x20--PolicyDocument\x20\x22'+JSON[_0x235aa6(0x9e)](_0x3865fb)['replace'](/"/g,'\x5c\x22')+'\x22'),logger_1[_0x235aa6(0xa5)]['error']('\x0a2.\x20Attach\x20Policy\x20To\x20User'),logger_1['default'][_0x235aa6(0xb4)](_0x235aa6(0x9c)+_0x402b32+'\x20--PolicyType\x20\x22Custom\x22\x20--UserName\x20\x22YOUR_USER_NAME\x22\x0a');}exports[a16_0x422589(0xc0)]=printPermissionTip;function throwProcessedFCPermissionError(_0x5570a5,_0x1e699e){var _0x3e927c=a16_0x422589,_0x5978af=[];for(var _0x1480d2=0x2;_0x1480d2<arguments[_0x3e927c(0xbe)];_0x1480d2++){_0x5978af[_0x1480d2-0x2]=arguments[_0x1480d2];}if(!_0x5570a5[_0x3e927c(0x97)]||_0x5570a5[_0x3e927c(0x97)]!==_0x3e927c(0xaf)||!_0x5570a5[_0x3e927c(0xa2)])throw _0x5570a5;var _0x40a284=new RegExp(/the caller is not authorized to perform '(.*)' on resource '(.*)'/),_0x209deb=_0x40a284[_0x3e927c(0xab)](_0x5570a5[_0x3e927c(0xa2)]);if(!_0x209deb)throw _0x5570a5;var _0x49f237=_0x209deb[0x1],_0xd1d224=_0x209deb[0x2],_0xd6c7ae=generatePolicyName[_0x3e927c(0xa0)](void 0x0,__spreadArrays([_0x49f237,_0x1e699e],_0x5978af));printPermissionTip(_0xd6c7ae,_0x49f237,_0xd1d224);throw _0x5570a5;}exports[a16_0x422589(0xa9)]=throwProcessedFCPermissionError;