'use strict';var a16_0xb722=['95947sHAsUa','419895GHMnTM','slice','\x20--PolicyType\x20\x22Custom\x22\x20--UserName\x20\x22YOUR_USER_NAME\x22\x0a','random','default','join','stringify','url','Allow','4nvbFnf','11cggYdE','includes','replace','length','exec','__esModule','1005445bZqcHE','code','printPermissionTip','throwProcessedPopPermissionError','data','\x0a2.\x20Attach\x20Policy\x20To\x20User','1562900itERWq','message','127468FXLjWY','6087bvmRHZ','\x27\x20on\x20\x27','\x0aYou\x20can\x20run\x20the\x20following\x20commands\x20to\x20grant\x20permission\x20\x27','error','\x0a1.\x20Create\x20Policy','Aliyun\x20ram\x20CreatePolicy\x20--PolicyName\x20','throwProcessedFCPermissionError','Forbbiden','__spreadArrays','24197bKwrTw','5KYTaGy','11SclZaS','Message','generatePolicyName','(Note:\x20aliyun\x20cli\x20tool\x20needs\x20to\x20be\x20configured\x20with\x20credentials\x20that\x20have\x20related\x20RAM\x20permissions,\x20such\x20as\x20primary\x20account\x27s\x20AK)'];var a16_0x397245=a16_0x37b9;(function(_0x25edef,_0x3f4f0b){var _0x2a5c97=a16_0x37b9;while(!![]){try{var _0x5d0f86=-parseInt(_0x2a5c97(0xf8))*parseInt(_0x2a5c97(0x107))+parseInt(_0x2a5c97(0x111))*parseInt(_0x2a5c97(0xed))+-parseInt(_0x2a5c97(0xf7))*-parseInt(_0x2a5c97(0x106))+-parseInt(_0x2a5c97(0xe9))*parseInt(_0x2a5c97(0x110))+parseInt(_0x2a5c97(0xee))+parseInt(_0x2a5c97(0xfe))+-parseInt(_0x2a5c97(0x104));if(_0x5d0f86===_0x3f4f0b)break;else _0x25edef['push'](_0x25edef['shift']());}catch(_0x540801){_0x25edef['push'](_0x25edef['shift']());}}}(a16_0xb722,0x7eb0b));var __spreadArrays=this&&this[a16_0x397245(0x10f)]||function(){var _0x4385fc=a16_0x397245;for(var _0x37908d=0x0,_0x5e7fff=0x0,_0x46d126=arguments['length'];_0x5e7fff<_0x46d126;_0x5e7fff++)_0x37908d+=arguments[_0x5e7fff]['length'];for(var _0x43543b=Array(_0x37908d),_0x3fd2e6=0x0,_0x5e7fff=0x0;_0x5e7fff<_0x46d126;_0x5e7fff++)for(var _0xc4c5fa=arguments[_0x5e7fff],_0x490f87=0x0,_0x30d48f=_0xc4c5fa[_0x4385fc(0xfb)];_0x490f87<_0x30d48f;_0x490f87++,_0x3fd2e6++)_0x43543b[_0x3fd2e6]=_0xc4c5fa[_0x490f87];return _0x43543b;},__importDefault=this&&this['__importDefault']||function(_0x53bba7){var _0x316051=a16_0x397245;return _0x53bba7&&_0x53bba7[_0x316051(0xfd)]?_0x53bba7:{'default':_0x53bba7};};Object['defineProperty'](exports,a16_0x397245(0xfd),{'value':!![]}),exports[a16_0x397245(0x10d)]=exports[a16_0x397245(0x100)]=exports[a16_0x397245(0xeb)]=exports['throwProcessedPopPermissionError']=void 0x0;var logger_1=__importDefault(require('../common/logger'));function throwProcessedPopPermissionError(_0x3f4b3e,_0x5cf7cc){var _0x5e28e9=a16_0x397245;if(!_0x3f4b3e[_0x5e28e9(0xff)]||!_0x3f4b3e[_0x5e28e9(0xf5)]||_0x3f4b3e['code']!=='NoPermission'&&_0x3f4b3e['code']!=='Forbidden.RAM'&&!_0x3f4b3e[_0x5e28e9(0xff)][_0x5e28e9(0xf9)](_0x5e28e9(0x10e)))throw _0x3f4b3e;var _0x1e65da=new RegExp(/https?:\/\/([a-zA-Z]*).(.*)aliyuncs.com/),_0xe0308b=_0x1e65da[_0x5e28e9(0xfc)](_0x3f4b3e[_0x5e28e9(0xf5)]);if(!_0xe0308b)throw _0x3f4b3e;var _0xf1c72b=_0xe0308b[0x1];_0x5cf7cc=_0xf1c72b+':'+_0x5cf7cc;var _0xabfb65='*';if(_0x3f4b3e['data']&&_0x3f4b3e['data'][_0x5e28e9(0xea)]){var _0x1b3821=new RegExp(/Resource: (.*) Action: (.*)/),_0x3b046f=_0x1b3821[_0x5e28e9(0xfc)](_0x3f4b3e[_0x5e28e9(0x102)][_0x5e28e9(0xea)]);_0x3b046f&&(_0xabfb65=_0x3b046f[0x1],_0x5cf7cc=_0x3b046f[0x2]);}var _0xf6d96a=generatePolicyName(_0x5cf7cc);printPermissionTip(_0xf6d96a,_0x5cf7cc,_0xabfb65);throw _0x3f4b3e;}exports[a16_0x397245(0x101)]=throwProcessedPopPermissionError;function generatePolicyName(_0x5f1d6e){var _0x52f2db=a16_0x397245,_0x201e43=[];for(var _0xf87d85=0x1;_0xf87d85<arguments[_0x52f2db(0xfb)];_0xf87d85++){_0x201e43[_0xf87d85-0x1]=arguments[_0xf87d85];}var _0x527819=_0x201e43&&_0x201e43[_0x52f2db(0xfb)]?_0x201e43[_0x52f2db(0xf3)]('-'):Math[_0x52f2db(0xf1)]()['toString'](0x24)[_0x52f2db(0xef)](-0x8);return'fun-generated-'+_0x5f1d6e['replace'](/:/g,'-')+'-'+_0x527819;}exports[a16_0x397245(0xeb)]=generatePolicyName;function a16_0x37b9(_0x50ca7c,_0x121b6c){return a16_0x37b9=function(_0xb7228a,_0x37b96e){_0xb7228a=_0xb7228a-0xe9;var _0x1401a1=a16_0xb722[_0xb7228a];return _0x1401a1;},a16_0x37b9(_0x50ca7c,_0x121b6c);}function printPermissionTip(_0x3cb51c,_0x35d54a,_0x394bc8){var _0x588672=a16_0x397245,_0x1a3d48={'Version':'1','Statement':[{'Effect':_0x588672(0xf6),'Action':[_0x35d54a],'Resource':[_0x394bc8]}]};logger_1[_0x588672(0xf2)][_0x588672(0x10a)](_0x588672(0x109)+_0x35d54a+_0x588672(0x108)+_0x394bc8+'\x27\x20'),logger_1[_0x588672(0xf2)][_0x588672(0x10a)]('Via\x20the\x20link:\x20\x20https://shell.aliyun.com/\x20or\x20aliyun\x20cli'),logger_1[_0x588672(0xf2)]['error'](_0x588672(0xec)),logger_1[_0x588672(0xf2)][_0x588672(0x10a)](_0x588672(0x10b)),logger_1[_0x588672(0xf2)][_0x588672(0x10a)](_0x588672(0x10c)+_0x3cb51c+'\x20--PolicyDocument\x20\x22'+JSON[_0x588672(0xf4)](_0x1a3d48)[_0x588672(0xfa)](/"/g,'\x5c\x22')+'\x22'),logger_1[_0x588672(0xf2)]['error'](_0x588672(0x103)),logger_1[_0x588672(0xf2)][_0x588672(0x10a)]('Aliyun\x20ram\x20AttachPolicyToUser\x20--PolicyName\x20'+_0x3cb51c+_0x588672(0xf0));}exports[a16_0x397245(0x100)]=printPermissionTip;function throwProcessedFCPermissionError(_0x140a20,_0x283ac5){var _0x313723=a16_0x397245,_0x17b9aa=[];for(var _0x51f705=0x2;_0x51f705<arguments[_0x313723(0xfb)];_0x51f705++){_0x17b9aa[_0x51f705-0x2]=arguments[_0x51f705];}if(!_0x140a20[_0x313723(0xff)]||_0x140a20[_0x313723(0xff)]!=='AccessDenied'||!_0x140a20[_0x313723(0x105)])throw _0x140a20;var _0x3ff1f6=new RegExp(/the caller is not authorized to perform '(.*)' on resource '(.*)'/),_0x54d801=_0x3ff1f6[_0x313723(0xfc)](_0x140a20[_0x313723(0x105)]);if(!_0x54d801)throw _0x140a20;var _0x1416a0=_0x54d801[0x1],_0x128637=_0x54d801[0x2],_0x2df953=generatePolicyName['apply'](void 0x0,__spreadArrays([_0x1416a0,_0x283ac5],_0x17b9aa));printPermissionTip(_0x2df953,_0x1416a0,_0x128637);throw _0x140a20;}exports[a16_0x397245(0x10d)]=throwProcessedFCPermissionError;