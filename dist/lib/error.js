'use strict';var a16_0x3fe6=['random','apply','defineProperty','fun-generated-','__importDefault','62162rhUkOY','data','\x0a1.\x20Create\x20Policy','(Note:\x20aliyun\x20cli\x20tool\x20needs\x20to\x20be\x20configured\x20with\x20credentials\x20that\x20have\x20related\x20RAM\x20permissions,\x20such\x20as\x20primary\x20account\x27s\x20AK)','AccessDenied','length','Aliyun\x20ram\x20CreatePolicy\x20--PolicyName\x20','3253LBflJw','51857Xrrkee','\x0a2.\x20Attach\x20Policy\x20To\x20User','replace','Via\x20the\x20link:\x20\x20https://shell.aliyun.com/\x20or\x20aliyun\x20cli','195002EKGCKa','1xuxjnd','error','toString','88067pHpEVU','throwProcessedPopPermissionError','__esModule','default','13BbSDaL','119441ISxoiX','2wtTbsq','exec','__spreadArrays','1DcIFLG','slice','54241AbXlov','message','Message','code','Forbbiden','url','generatePolicyName','\x0aYou\x20can\x20run\x20the\x20following\x20commands\x20to\x20grant\x20permission\x20\x27','throwProcessedFCPermissionError','printPermissionTip','\x20--PolicyDocument\x20\x22','stringify','includes'];var a16_0x580d50=a16_0x5201;(function(_0x8066b2,_0x1b6285){var _0x157247=a16_0x5201;while(!![]){try{var _0x19439c=parseInt(_0x157247(0x75))+parseInt(_0x157247(0x97))*parseInt(_0x157247(0x9d))+parseInt(_0x157247(0x8f))*parseInt(_0x157247(0x94))+parseInt(_0x157247(0x73))*-parseInt(_0x157247(0x93))+parseInt(_0x157247(0x9b))*-parseInt(_0x157247(0x8e))+-parseInt(_0x157247(0x87))+parseInt(_0x157247(0x9c));if(_0x19439c===_0x1b6285)break;else _0x8066b2['push'](_0x8066b2['shift']());}catch(_0x5862a2){_0x8066b2['push'](_0x8066b2['shift']());}}}(a16_0x3fe6,0x18f4c));var __spreadArrays=this&&this[a16_0x580d50(0x72)]||function(){var _0x248a28=a16_0x580d50;for(var _0x1d976f=0x0,_0x1c5bff=0x0,_0x48748c=arguments[_0x248a28(0x8c)];_0x1c5bff<_0x48748c;_0x1c5bff++)_0x1d976f+=arguments[_0x1c5bff]['length'];for(var _0x29c1c9=Array(_0x1d976f),_0x210d81=0x0,_0x1c5bff=0x0;_0x1c5bff<_0x48748c;_0x1c5bff++)for(var _0x2bd646=arguments[_0x1c5bff],_0x6fb259=0x0,_0x568a66=_0x2bd646[_0x248a28(0x8c)];_0x6fb259<_0x568a66;_0x6fb259++,_0x210d81++)_0x29c1c9[_0x210d81]=_0x2bd646[_0x6fb259];return _0x29c1c9;},__importDefault=this&&this[a16_0x580d50(0x86)]||function(_0x58fe17){var _0x118b66=a16_0x580d50;return _0x58fe17&&_0x58fe17[_0x118b66(0x99)]?_0x58fe17:{'default':_0x58fe17};};Object[a16_0x580d50(0x84)](exports,a16_0x580d50(0x99),{'value':!![]}),exports[a16_0x580d50(0x7d)]=exports[a16_0x580d50(0x7e)]=exports[a16_0x580d50(0x7b)]=exports['throwProcessedPopPermissionError']=void 0x0;var logger_1=__importDefault(require('../common/logger'));function throwProcessedPopPermissionError(_0x279717,_0x386432){var _0x5b390e=a16_0x580d50;if(!_0x279717['code']||!_0x279717['url']||_0x279717['code']!=='NoPermission'&&_0x279717[_0x5b390e(0x78)]!=='Forbidden.RAM'&&!_0x279717[_0x5b390e(0x78)][_0x5b390e(0x81)](_0x5b390e(0x79)))throw _0x279717;var _0x1aae15=new RegExp(/https?:\/\/([a-zA-Z]*).(.*)aliyuncs.com/),_0x5435c8=_0x1aae15[_0x5b390e(0x71)](_0x279717[_0x5b390e(0x7a)]);if(!_0x5435c8)throw _0x279717;var _0x226c0c=_0x5435c8[0x1];_0x386432=_0x226c0c+':'+_0x386432;var _0x5555e4='*';if(_0x279717['data']&&_0x279717[_0x5b390e(0x88)][_0x5b390e(0x77)]){var _0x279e1f=new RegExp(/Resource: (.*) Action: (.*)/),_0x5ec13e=_0x279e1f[_0x5b390e(0x71)](_0x279717[_0x5b390e(0x88)][_0x5b390e(0x77)]);_0x5ec13e&&(_0x5555e4=_0x5ec13e[0x1],_0x386432=_0x5ec13e[0x2]);}var _0x49efdb=generatePolicyName(_0x386432);printPermissionTip(_0x49efdb,_0x386432,_0x5555e4);throw _0x279717;}exports[a16_0x580d50(0x98)]=throwProcessedPopPermissionError;function generatePolicyName(_0x4cc5d0){var _0x5da9de=a16_0x580d50,_0x4cb11c=[];for(var _0x4b8f72=0x1;_0x4b8f72<arguments['length'];_0x4b8f72++){_0x4cb11c[_0x4b8f72-0x1]=arguments[_0x4b8f72];}var _0x245640=_0x4cb11c&&_0x4cb11c[_0x5da9de(0x8c)]?_0x4cb11c['join']('-'):Math[_0x5da9de(0x82)]()[_0x5da9de(0x96)](0x24)[_0x5da9de(0x74)](-0x8);return _0x5da9de(0x85)+_0x4cc5d0[_0x5da9de(0x91)](/:/g,'-')+'-'+_0x245640;}exports['generatePolicyName']=generatePolicyName;function printPermissionTip(_0x46641a,_0x5cccc7,_0x3450b6){var _0x3d72b6=a16_0x580d50,_0x1d664={'Version':'1','Statement':[{'Effect':'Allow','Action':[_0x5cccc7],'Resource':[_0x3450b6]}]};logger_1['default']['error'](_0x3d72b6(0x7c)+_0x5cccc7+'\x27\x20on\x20\x27'+_0x3450b6+'\x27\x20'),logger_1[_0x3d72b6(0x9a)][_0x3d72b6(0x95)](_0x3d72b6(0x92)),logger_1[_0x3d72b6(0x9a)][_0x3d72b6(0x95)](_0x3d72b6(0x8a)),logger_1['default'][_0x3d72b6(0x95)](_0x3d72b6(0x89)),logger_1['default']['error'](_0x3d72b6(0x8d)+_0x46641a+_0x3d72b6(0x7f)+JSON[_0x3d72b6(0x80)](_0x1d664)[_0x3d72b6(0x91)](/"/g,'\x5c\x22')+'\x22'),logger_1[_0x3d72b6(0x9a)][_0x3d72b6(0x95)](_0x3d72b6(0x90)),logger_1[_0x3d72b6(0x9a)][_0x3d72b6(0x95)]('Aliyun\x20ram\x20AttachPolicyToUser\x20--PolicyName\x20'+_0x46641a+'\x20--PolicyType\x20\x22Custom\x22\x20--UserName\x20\x22YOUR_USER_NAME\x22\x0a');}exports['printPermissionTip']=printPermissionTip;function a16_0x5201(_0x5de058,_0x4d5170){return a16_0x5201=function(_0x3fe651,_0x52012c){_0x3fe651=_0x3fe651-0x71;var _0x3355b7=a16_0x3fe6[_0x3fe651];return _0x3355b7;},a16_0x5201(_0x5de058,_0x4d5170);}function throwProcessedFCPermissionError(_0x2307c3,_0x19e2d9){var _0x2df7c2=a16_0x580d50,_0x396616=[];for(var _0x4b3006=0x2;_0x4b3006<arguments['length'];_0x4b3006++){_0x396616[_0x4b3006-0x2]=arguments[_0x4b3006];}if(!_0x2307c3['code']||_0x2307c3['code']!==_0x2df7c2(0x8b)||!_0x2307c3['message'])throw _0x2307c3;var _0x555576=new RegExp(/the caller is not authorized to perform '(.*)' on resource '(.*)'/),_0x30625a=_0x555576[_0x2df7c2(0x71)](_0x2307c3[_0x2df7c2(0x76)]);if(!_0x30625a)throw _0x2307c3;var _0x12cbae=_0x30625a[0x1],_0x560b54=_0x30625a[0x2],_0x4bbdd8=generatePolicyName[_0x2df7c2(0x83)](void 0x0,__spreadArrays([_0x12cbae,_0x19e2d9],_0x396616));printPermissionTip(_0x4bbdd8,_0x12cbae,_0x560b54);throw _0x2307c3;}exports[a16_0x580d50(0x7d)]=throwProcessedFCPermissionError;