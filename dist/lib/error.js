'use strict';var a16_0x241f=['AccessDenied','\x0a1.\x20Create\x20Policy','Aliyun\x20ram\x20AttachPolicyToUser\x20--PolicyName\x20','329729wmAjnb','__esModule','19YbKWuK','__importDefault','message','654854KXljWp','\x0a2.\x20Attach\x20Policy\x20To\x20User','replace','196VWkXHQ','join','exec','includes','Message','176303TWqSjO','\x0aYou\x20can\x20run\x20the\x20following\x20commands\x20to\x20grant\x20permission\x20\x27','491924BARrlp','2907ZJCyVS','fun-generated-','150691BgonIo','apply','printPermissionTip','NoPermission','\x20--PolicyDocument\x20\x22','default','toString','\x27\x20on\x20\x27','error','throwProcessedPopPermissionError','throwProcessedFCPermissionError','Allow','defineProperty','Forbbiden','stringify','generatePolicyName','Forbidden.RAM','2bhOeSu','code','2jboEDi','data','url','slice','length','156184tiXlCG'];var a16_0x31713a=a16_0x4a2a;(function(_0x277dfb,_0x17859e){var _0x531a70=a16_0x4a2a;while(!![]){try{var _0x4ea069=parseInt(_0x531a70(0x86))*-parseInt(_0x531a70(0xad))+-parseInt(_0x531a70(0x99))+-parseInt(_0x531a70(0x8f))+-parseInt(_0x531a70(0x9c))+-parseInt(_0x531a70(0x92))*parseInt(_0x531a70(0x9a))+-parseInt(_0x531a70(0x8a))*parseInt(_0x531a70(0x81))+-parseInt(_0x531a70(0x8c))*-parseInt(_0x531a70(0x97));if(_0x4ea069===_0x17859e)break;else _0x277dfb['push'](_0x277dfb['shift']());}catch(_0x5640ed){_0x277dfb['push'](_0x277dfb['shift']());}}}(a16_0x241f,0x7cae2));var __spreadArrays=this&&this['__spreadArrays']||function(){var _0x4eb9c5=a16_0x4a2a;for(var _0x53dc83=0x0,_0xa72715=0x0,_0x690f1e=arguments[_0x4eb9c5(0x85)];_0xa72715<_0x690f1e;_0xa72715++)_0x53dc83+=arguments[_0xa72715][_0x4eb9c5(0x85)];for(var _0xf3058c=Array(_0x53dc83),_0x301630=0x0,_0xa72715=0x0;_0xa72715<_0x690f1e;_0xa72715++)for(var _0x1b3316=arguments[_0xa72715],_0x5586ca=0x0,_0x4cfb32=_0x1b3316[_0x4eb9c5(0x85)];_0x5586ca<_0x4cfb32;_0x5586ca++,_0x301630++)_0xf3058c[_0x301630]=_0x1b3316[_0x5586ca];return _0xf3058c;},__importDefault=this&&this[a16_0x31713a(0x8d)]||function(_0x440a06){return _0x440a06&&_0x440a06['__esModule']?_0x440a06:{'default':_0x440a06};};Object[a16_0x31713a(0xa8)](exports,a16_0x31713a(0x8b),{'value':!![]}),exports[a16_0x31713a(0xa6)]=exports[a16_0x31713a(0x9e)]=exports[a16_0x31713a(0xab)]=exports[a16_0x31713a(0xa5)]=void 0x0;var logger_1=__importDefault(require('../common/logger'));function throwProcessedPopPermissionError(_0x2921ac,_0x3424e0){var _0x410ff4=a16_0x31713a;if(!_0x2921ac[_0x410ff4(0xae)]||!_0x2921ac[_0x410ff4(0x83)]||_0x2921ac[_0x410ff4(0xae)]!==_0x410ff4(0x9f)&&_0x2921ac['code']!==_0x410ff4(0xac)&&!_0x2921ac[_0x410ff4(0xae)][_0x410ff4(0x95)](_0x410ff4(0xa9)))throw _0x2921ac;var _0x260c0e=new RegExp(/https?:\/\/([a-zA-Z]*).(.*)aliyuncs.com/),_0x29956e=_0x260c0e[_0x410ff4(0x94)](_0x2921ac[_0x410ff4(0x83)]);if(!_0x29956e)throw _0x2921ac;var _0x2e2eb5=_0x29956e[0x1];_0x3424e0=_0x2e2eb5+':'+_0x3424e0;var _0x2cfe04='*';if(_0x2921ac[_0x410ff4(0x82)]&&_0x2921ac[_0x410ff4(0x82)][_0x410ff4(0x96)]){var _0x346680=new RegExp(/Resource: (.*) Action: (.*)/),_0x2c94f5=_0x346680[_0x410ff4(0x94)](_0x2921ac[_0x410ff4(0x82)]['Message']);_0x2c94f5&&(_0x2cfe04=_0x2c94f5[0x1],_0x3424e0=_0x2c94f5[0x2]);}var _0x593b0e=generatePolicyName(_0x3424e0);printPermissionTip(_0x593b0e,_0x3424e0,_0x2cfe04);throw _0x2921ac;}exports['throwProcessedPopPermissionError']=throwProcessedPopPermissionError;function generatePolicyName(_0x2c9bf2){var _0x285d04=a16_0x31713a,_0x3a5458=[];for(var _0x40fdf2=0x1;_0x40fdf2<arguments[_0x285d04(0x85)];_0x40fdf2++){_0x3a5458[_0x40fdf2-0x1]=arguments[_0x40fdf2];}var _0x3827b5=_0x3a5458&&_0x3a5458['length']?_0x3a5458[_0x285d04(0x93)]('-'):Math['random']()[_0x285d04(0xa2)](0x24)[_0x285d04(0x84)](-0x8);return _0x285d04(0x9b)+_0x2c9bf2[_0x285d04(0x91)](/:/g,'-')+'-'+_0x3827b5;}exports[a16_0x31713a(0xab)]=generatePolicyName;function printPermissionTip(_0x4b6476,_0x67d079,_0x98f65c){var _0x2df8a5=a16_0x31713a,_0x3be546={'Version':'1','Statement':[{'Effect':_0x2df8a5(0xa7),'Action':[_0x67d079],'Resource':[_0x98f65c]}]};logger_1[_0x2df8a5(0xa1)][_0x2df8a5(0xa4)](_0x2df8a5(0x98)+_0x67d079+_0x2df8a5(0xa3)+_0x98f65c+'\x27\x20'),logger_1[_0x2df8a5(0xa1)]['error']('Via\x20the\x20link:\x20\x20https://shell.aliyun.com/\x20or\x20aliyun\x20cli'),logger_1[_0x2df8a5(0xa1)][_0x2df8a5(0xa4)]('(Note:\x20aliyun\x20cli\x20tool\x20needs\x20to\x20be\x20configured\x20with\x20credentials\x20that\x20have\x20related\x20RAM\x20permissions,\x20such\x20as\x20primary\x20account\x27s\x20AK)'),logger_1['default']['error'](_0x2df8a5(0x88)),logger_1[_0x2df8a5(0xa1)][_0x2df8a5(0xa4)]('Aliyun\x20ram\x20CreatePolicy\x20--PolicyName\x20'+_0x4b6476+_0x2df8a5(0xa0)+JSON[_0x2df8a5(0xaa)](_0x3be546)['replace'](/"/g,'\x5c\x22')+'\x22'),logger_1[_0x2df8a5(0xa1)][_0x2df8a5(0xa4)](_0x2df8a5(0x90)),logger_1['default'][_0x2df8a5(0xa4)](_0x2df8a5(0x89)+_0x4b6476+'\x20--PolicyType\x20\x22Custom\x22\x20--UserName\x20\x22YOUR_USER_NAME\x22\x0a');}exports['printPermissionTip']=printPermissionTip;function throwProcessedFCPermissionError(_0xb0d80e,_0x183dfa){var _0x55586b=a16_0x31713a,_0x261401=[];for(var _0x215177=0x2;_0x215177<arguments[_0x55586b(0x85)];_0x215177++){_0x261401[_0x215177-0x2]=arguments[_0x215177];}if(!_0xb0d80e[_0x55586b(0xae)]||_0xb0d80e['code']!==_0x55586b(0x87)||!_0xb0d80e['message'])throw _0xb0d80e;var _0x4802ec=new RegExp(/the caller is not authorized to perform '(.*)' on resource '(.*)'/),_0x3d30c2=_0x4802ec['exec'](_0xb0d80e[_0x55586b(0x8e)]);if(!_0x3d30c2)throw _0xb0d80e;var _0x3e1530=_0x3d30c2[0x1],_0x3fda6f=_0x3d30c2[0x2],_0x4198e7=generatePolicyName[_0x55586b(0x9d)](void 0x0,__spreadArrays([_0x3e1530,_0x183dfa],_0x261401));printPermissionTip(_0x4198e7,_0x3e1530,_0x3fda6f);throw _0xb0d80e;}function a16_0x4a2a(_0xa35704,_0x2b0409){return a16_0x4a2a=function(_0x241ff5,_0x4a2a82){_0x241ff5=_0x241ff5-0x81;var _0x1834f1=a16_0x241f[_0x241ff5];return _0x1834f1;},a16_0x4a2a(_0xa35704,_0x2b0409);}exports[a16_0x31713a(0xa6)]=throwProcessedFCPermissionError;