'use strict';var a14_0x4ac9=['join','bind','generateDockerCmd','Running','serviceName','label','slice','pullImageIfNeed','address','ServerVersion','Please\x20add\x20directory\x20\x27','run','\x20failed.','cwd','invalid\x20mount\x20config\x20for\x20type','\x20failed,\x20error:\x20','customContainerConfig','You\x20can\x20paste\x20these\x20config\x20to\x20.vscode/launch.json,\x20and\x20then\x20attach\x20to\x20your\x20running\x20function','37372ODbZwp','...','pop','lodash','attach','error','hasOwnProperty','filter','fs-extra','createAndRunContainer','showDebugIdeTipsForPycharm','isCustomContainerRuntime','../local-invoke/debug','imageExist','into','Ensure\x20directory:\x20','debug','utf8','return','__generator','env','runContainer',',\x20for\x20a\x20better\x20experience,\x20please\x20upgrade\x20the\x20docker\x20version.','10018WQfAvr','.vscode','random','wait','pullFcImageIfNeed','parseInt','\x0aWe\x20detected\x20that\x20your\x20docker\x20version\x20is\x20','logs','isDirectory','generateDockerEnvs','codeUri','default','map','iterator','282181pqonZd','logstore','stderr','resolveDockerEnv','then','resolveDebuggerPathToMount','start','--initializationTimeout','apply','substr','../utils/runtime','docker\x20exec\x20opts:\x20','Stop\x20the\x20container:\x20','resolvePasswdMount','exec','runtime','localNasDir','HostConfig','dirname','errorStream','initializer','__esModule','stop','succeed','\x20already\x20exists,\x20please\x20overwrite\x20it\x20with\x20the\x20following\x20config.','done','stdout','../../common/logger','push','demuxStream','aux.ID','AccountID','SecurityToken','drive\x20is\x20not\x20shared','Generator\x20is\x20already\x20executing.','95NepTrf','create','__importDefault','sent','Failed\x20to\x20stop\x20the\x20container.','\x20exited\x20with\x20code\x20','resolveLibPathsFromLdConf','DOCKER_REGISTRIES','__spreadArrays','resolveTmpDirToMount','first','dockerode','progress','path','convertNasConfigToNasMappings','\x27docker\x20pull\x20',',\x20you\x20can\x20also\x20use\x20','indexOf','darwin','logConfig','generateVscodeDebugConfig','verbose','readFile','ReadOnly','Kill\x20proxy\x20container:\x20','detectDockerVersion','call','/tmp','File:\x20','Source','Stopping\x20the\x20container:\x20','win32','environmentVariables','Stop\x20container\x20succeed.','\x27\x20to\x20Docker\x20File\x20sharing\x20list,\x20more\x20information\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md','aux','stream','message','delete','/////////////////\x20config\x20end\x20/////////////////','next','throw','startContainer','context','resolveNasConfigToMounts','inspect','split','status','pull','draft','java','557LTPMIB','Failed\x20to\x20kill\x20the\x20container.Please\x20stop\x20it\x20manually.','\x0a=========\x20Tips\x20for\x20PyCharm\x20remote\x20debug\x20=========\x0aLocal\x20host\x20name:\x20','dev-null','3azyMnl','Cmd','Starting\x20docker\x20pull\x20','info','isAutoConfig','stopContainer','assign','../local-invoke/env','pullImage','launch.json','Killing\x20container:\x20','8pzgmOJ','base64','parse','basename','kill','--server','command','has','8HBNULG','fail','value','showDebugIdeTipsForVscode','Skip\x20pulling\x20image\x20','event','write','generateDebugEnv','trys','resolveAutoLogConfig','getImage','/////////////////\x20config\x20begin\x20/////////////////','processorTransformFactory','yellow','Proxy\x20image\x20url:\x20','toString','37rTFKts','length','handler','@serverless-devs/core','last','add','addEnv','writeDebugIdeConfigForVscode','=/code\x0a\x0aDebug\x20Code\x20needed\x20to:\x0a\x201.\x20Install\x20pydevd-pycharm:\x0a\x20\x0a\x20pip\x20install\x20pydevd-pycharm~=203.5981.165\x0a\x20\x0a\x202.\x20copy\x20to\x20your\x20function\x20code:\x0a\x0aimport\x20pydevd_pycharm\x0apydevd_pycharm.settrace(\x27','getRootBaseDir','isFile','\x20to\x20pull\x20image\x20by\x20yourself.','103358bobFoF','isEqual','createContainer','log','generatePwdFile','ExitCode','--event-decode','../utils/passwd','lstat','entrypoint','__createBinding','initializationTimeout','/code','args','ops','/etc/passwd','\x27,\x20port=','\x0aPath\x20mappings\x20\x20:\x20','ProcessConfig','findPathsOutofSharedPaths','Write\x20','./docker-support','lstatSync','resolve','4090rZbkvW','virtualbox','../error-processor','platform','remoteNasDir','memorySize','__setModuleDefault','defineProperty','Pulling\x20image\x20','linux','generateFunctionEnvs','../devs','stringify','warning','modem','--stdin','80813TUTrid','resolveImageNameForPull'];var a14_0x2a81c9=a14_0x1a4f;(function(_0x2447d4,_0x44a105){var _0x3ee66a=a14_0x1a4f;while(!![]){try{var _0x5d8999=-parseInt(_0x3ee66a(0x153))*parseInt(_0x3ee66a(0x20a))+parseInt(_0x3ee66a(0x1e7))+parseInt(_0x3ee66a(0x186))+parseInt(_0x3ee66a(0x157))*-parseInt(_0x3ee66a(0x1ae))+parseInt(_0x3ee66a(0x1d9))*parseInt(_0x3ee66a(0x17a))+-parseInt(_0x3ee66a(0x19e))*-parseInt(_0x3ee66a(0x16a))+-parseInt(_0x3ee66a(0x1c2))*parseInt(_0x3ee66a(0x162));if(_0x5d8999===_0x44a105)break;else _0x2447d4['push'](_0x2447d4['shift']());}catch(_0x2271c9){_0x2447d4['push'](_0x2447d4['shift']());}}}(a14_0x4ac9,0x2f823));var __createBinding=this&&this[a14_0x2a81c9(0x190)]||(Object['create']?function(_0x17f38e,_0x48bfe7,_0x5572cd,_0x145715){if(_0x145715===undefined)_0x145715=_0x5572cd;Object['defineProperty'](_0x17f38e,_0x145715,{'enumerable':!![],'get':function(){return _0x48bfe7[_0x5572cd];}});}:function(_0x1fe066,_0xc09c32,_0x690561,_0x3f1295){if(_0x3f1295===undefined)_0x3f1295=_0x690561;_0x1fe066[_0x3f1295]=_0xc09c32[_0x690561];}),__setModuleDefault=this&&this[a14_0x2a81c9(0x1a4)]||(Object[a14_0x2a81c9(0x121)]?function(_0x342bbd,_0x2c96f7){var _0x175fe9=a14_0x2a81c9;Object[_0x175fe9(0x1a5)](_0x342bbd,_0x175fe9(0x1e4),{'enumerable':!![],'value':_0x2c96f7});}:function(_0x4518fc,_0x59aa46){var _0x586562=a14_0x2a81c9;_0x4518fc[_0x586562(0x1e4)]=_0x59aa46;}),__importStar=this&&this['__importStar']||function(_0x3b94d4){var _0x592ae1=a14_0x2a81c9;if(_0x3b94d4&&_0x3b94d4[_0x592ae1(0x1fc)])return _0x3b94d4;var _0x5b179a={};if(_0x3b94d4!=null){for(var _0x4d6ca8 in _0x3b94d4)if(_0x4d6ca8!==_0x592ae1(0x1e4)&&Object[_0x592ae1(0x1c8)][_0x592ae1(0x13a)](_0x3b94d4,_0x4d6ca8))__createBinding(_0x5b179a,_0x3b94d4,_0x4d6ca8);}return __setModuleDefault(_0x5b179a,_0x3b94d4),_0x5b179a;},__awaiter=this&&this['__awaiter']||function(_0x40cd15,_0x52f2dc,_0x3659a9,_0xdb1b1f){function _0x19922f(_0x15af39){return _0x15af39 instanceof _0x3659a9?_0x15af39:new _0x3659a9(function(_0x55c4bd){_0x55c4bd(_0x15af39);});}return new(_0x3659a9||(_0x3659a9=Promise))(function(_0x41990e,_0x534679){var _0x23f48d=a14_0x1a4f;function _0x2e598b(_0x42325a){var _0x488eb3=a14_0x1a4f;try{_0x24c565(_0xdb1b1f[_0x488eb3(0x148)](_0x42325a));}catch(_0x398ce1){_0x534679(_0x398ce1);}}function _0x456d73(_0x441e4c){var _0x1ce6a2=a14_0x1a4f;try{_0x24c565(_0xdb1b1f[_0x1ce6a2(0x149)](_0x441e4c));}catch(_0x13c13a){_0x534679(_0x13c13a);}}function _0x24c565(_0x1b0c1e){var _0x32fca3=a14_0x1a4f;_0x1b0c1e['done']?_0x41990e(_0x1b0c1e[_0x32fca3(0x16c)]):_0x19922f(_0x1b0c1e[_0x32fca3(0x16c)])[_0x32fca3(0x1eb)](_0x2e598b,_0x456d73);}_0x24c565((_0xdb1b1f=_0xdb1b1f[_0x23f48d(0x1ef)](_0x40cd15,_0x52f2dc||[]))['next']());});},__generator=this&&this[a14_0x2a81c9(0x1d5)]||function(_0x310d3b,_0x31e9ff){var _0x5b7562=a14_0x2a81c9,_0x3dd2ad={'label':0x0,'sent':function(){if(_0xa4d1e6[0x0]&0x1)throw _0xa4d1e6[0x1];return _0xa4d1e6[0x1];},'trys':[],'ops':[]},_0x46f091,_0x456b1d,_0xa4d1e6,_0x3b5da8;return _0x3b5da8={'next':_0x57d945(0x0),'throw':_0x57d945(0x1),'return':_0x57d945(0x2)},typeof Symbol==='function'&&(_0x3b5da8[Symbol[_0x5b7562(0x1e6)]]=function(){return this;}),_0x3b5da8;function _0x57d945(_0xdbd31){return function(_0x432dc4){return _0x1b611([_0xdbd31,_0x432dc4]);};}function _0x1b611(_0x1cb0cb){var _0x3c05c7=_0x5b7562;if(_0x46f091)throw new TypeError(_0x3c05c7(0x209));while(_0x3dd2ad)try{if(_0x46f091=0x1,_0x456b1d&&(_0xa4d1e6=_0x1cb0cb[0x0]&0x2?_0x456b1d[_0x3c05c7(0x1d4)]:_0x1cb0cb[0x0]?_0x456b1d[_0x3c05c7(0x149)]||((_0xa4d1e6=_0x456b1d[_0x3c05c7(0x1d4)])&&_0xa4d1e6[_0x3c05c7(0x13a)](_0x456b1d),0x0):_0x456b1d[_0x3c05c7(0x148)])&&!(_0xa4d1e6=_0xa4d1e6['call'](_0x456b1d,_0x1cb0cb[0x1]))[_0x3c05c7(0x200)])return _0xa4d1e6;if(_0x456b1d=0x0,_0xa4d1e6)_0x1cb0cb=[_0x1cb0cb[0x0]&0x2,_0xa4d1e6[_0x3c05c7(0x16c)]];switch(_0x1cb0cb[0x0]){case 0x0:case 0x1:_0xa4d1e6=_0x1cb0cb;break;case 0x4:_0x3dd2ad[_0x3c05c7(0x1b5)]++;return{'value':_0x1cb0cb[0x1],'done':![]};case 0x5:_0x3dd2ad[_0x3c05c7(0x1b5)]++,_0x456b1d=_0x1cb0cb[0x1],_0x1cb0cb=[0x0];continue;case 0x7:_0x1cb0cb=_0x3dd2ad['ops']['pop'](),_0x3dd2ad[_0x3c05c7(0x172)][_0x3c05c7(0x1c4)]();continue;default:if(!(_0xa4d1e6=_0x3dd2ad[_0x3c05c7(0x172)],_0xa4d1e6=_0xa4d1e6[_0x3c05c7(0x17b)]>0x0&&_0xa4d1e6[_0xa4d1e6[_0x3c05c7(0x17b)]-0x1])&&(_0x1cb0cb[0x0]===0x6||_0x1cb0cb[0x0]===0x2)){_0x3dd2ad=0x0;continue;}if(_0x1cb0cb[0x0]===0x3&&(!_0xa4d1e6||_0x1cb0cb[0x1]>_0xa4d1e6[0x0]&&_0x1cb0cb[0x1]<_0xa4d1e6[0x3])){_0x3dd2ad[_0x3c05c7(0x1b5)]=_0x1cb0cb[0x1];break;}if(_0x1cb0cb[0x0]===0x6&&_0x3dd2ad['label']<_0xa4d1e6[0x1]){_0x3dd2ad[_0x3c05c7(0x1b5)]=_0xa4d1e6[0x1],_0xa4d1e6=_0x1cb0cb;break;}if(_0xa4d1e6&&_0x3dd2ad[_0x3c05c7(0x1b5)]<_0xa4d1e6[0x2]){_0x3dd2ad[_0x3c05c7(0x1b5)]=_0xa4d1e6[0x2],_0x3dd2ad[_0x3c05c7(0x194)]['push'](_0x1cb0cb);break;}if(_0xa4d1e6[0x2])_0x3dd2ad['ops'][_0x3c05c7(0x1c4)]();_0x3dd2ad[_0x3c05c7(0x172)][_0x3c05c7(0x1c4)]();continue;}_0x1cb0cb=_0x31e9ff['call'](_0x310d3b,_0x3dd2ad);}catch(_0x25e9ce){_0x1cb0cb=[0x6,_0x25e9ce],_0x456b1d=0x0;}finally{_0x46f091=_0xa4d1e6=0x0;}if(_0x1cb0cb[0x0]&0x5)throw _0x1cb0cb[0x1];return{'value':_0x1cb0cb[0x0]?_0x1cb0cb[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this[a14_0x2a81c9(0x128)]||function(){var _0x2ce870=a14_0x2a81c9;for(var _0x358997=0x0,_0x589ec7=0x0,_0x47c936=arguments[_0x2ce870(0x17b)];_0x589ec7<_0x47c936;_0x589ec7++)_0x358997+=arguments[_0x589ec7]['length'];for(var _0x9ec345=Array(_0x358997),_0x32a17c=0x0,_0x589ec7=0x0;_0x589ec7<_0x47c936;_0x589ec7++)for(var _0x45ce1b=arguments[_0x589ec7],_0x1d2355=0x0,_0x56bafc=_0x45ce1b[_0x2ce870(0x17b)];_0x1d2355<_0x56bafc;_0x1d2355++,_0x32a17c++)_0x9ec345[_0x32a17c]=_0x45ce1b[_0x1d2355];return _0x9ec345;},__importDefault=this&&this[a14_0x2a81c9(0x122)]||function(_0x166ed2){var _0x3b3dc0=a14_0x2a81c9;return _0x166ed2&&_0x166ed2[_0x3b3dc0(0x1fc)]?_0x166ed2:{'default':_0x166ed2};};Object[a14_0x2a81c9(0x1a5)](exports,a14_0x2a81c9(0x1fc),{'value':!![]}),exports[a14_0x2a81c9(0x15c)]=exports[a14_0x2a81c9(0x1bb)]=exports['startContainer']=exports[a14_0x2a81c9(0x1cc)]=exports[a14_0x2a81c9(0x181)]=exports[a14_0x2a81c9(0x16d)]=exports[a14_0x2a81c9(0x1cb)]=exports[a14_0x2a81c9(0x1f4)]=exports[a14_0x2a81c9(0x1ec)]=exports[a14_0x2a81c9(0x129)]=exports[a14_0x2a81c9(0x14c)]=exports[a14_0x2a81c9(0x139)]=exports['isDockerToolBoxAndEnsureDockerVersion']=exports['resolveCodeUriToMount']=exports[a14_0x2a81c9(0x1d7)]=exports[a14_0x2a81c9(0x15f)]=exports['pullFcImageIfNeed']=exports[a14_0x2a81c9(0x1a8)]=exports[a14_0x2a81c9(0x1e2)]=exports[a14_0x2a81c9(0x1b2)]=exports[a14_0x2a81c9(0x1b7)]=exports['generateRamdomContainerName']=exports[a14_0x2a81c9(0x1cf)]=void 0x0;var dockerode_1=__importDefault(require(a14_0x2a81c9(0x12b))),logger_1=__importDefault(require(a14_0x2a81c9(0x202))),draftlog=__importStar(require('draftlog')),docker_support_1=require(a14_0x2a81c9(0x19b)),error_processor_1=require(a14_0x2a81c9(0x1a0)),lodash_1=__importDefault(require(a14_0x2a81c9(0x1c5))),nas=__importStar(require('../local-invoke/nas')),path_1=__importDefault(require(a14_0x2a81c9(0x12d))),devs_1=require(a14_0x2a81c9(0x1a9)),fs=__importStar(require(a14_0x2a81c9(0x1ca))),passwd_1=require(a14_0x2a81c9(0x18d)),dockerOpts=__importStar(require('./docker-opts')),debug_1=require(a14_0x2a81c9(0x1ce)),ip=__importStar(require('ip')),env_1=require(a14_0x2a81c9(0x15e)),runtime_1=require(a14_0x2a81c9(0x1f1)),definition_1=require('../definition'),dev_null_1=__importDefault(require(a14_0x2a81c9(0x156))),core=__importStar(require(a14_0x2a81c9(0x17d))),isWin=process[a14_0x2a81c9(0x1a1)]===a14_0x2a81c9(0x13f),docker=new dockerode_1[(a14_0x2a81c9(0x1e4))]();draftlog[a14_0x2a81c9(0x1d0)](console);var containers=new Set(),streams=new Set(),skipPullImage=!![];function imageExist(_0x1152f6){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4cdc4d;return __generator(this,function(_0x2d5502){var _0x34df46=a14_0x1a4f;switch(_0x2d5502[_0x34df46(0x1b5)]){case 0x0:return[0x4,docker['listImages']({'filters':{'reference':[_0x1152f6]}})];case 0x1:_0x4cdc4d=_0x2d5502[_0x34df46(0x123)]();return[0x2,_0x4cdc4d[_0x34df46(0x17b)]>0x0];}});});}exports['imageExist']=imageExist;function generateRamdomContainerName(){var _0xaf464d=a14_0x2a81c9;return'fc_local_'+new Date()['getTime']()+'_'+Math[_0xaf464d(0x1db)]()[_0xaf464d(0x179)](0x24)[_0xaf464d(0x1f0)](0x2,0x7);}exports['generateRamdomContainerName']=generateRamdomContainerName;function pullImageIfNeed(_0x5e48b4,_0x329d48,_0x5c120,_0x445853){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1f9615,_0x324092;return __generator(this,function(_0x185cad){var _0x3c73d1=a14_0x1a4f;switch(_0x185cad[_0x3c73d1(0x1b5)]){case 0x0:_0x1f9615=_0x5e48b4+'/'+_0x329d48+'/'+_0x5c120+':'+_0x445853,logger_1['default'][_0x3c73d1(0x1d2)](_0x3c73d1(0x178)+_0x1f9615);return[0x4,imageExist(_0x1f9615)];case 0x1:if(!!_0x185cad[_0x3c73d1(0x123)]())return[0x3,0x3];logger_1['default']['debug'](_0x3c73d1(0x159)+_0x1f9615);return[0x4,docker['pull'](_0x1f9615)];case 0x2:_0x324092=_0x185cad[_0x3c73d1(0x123)](),_0x185cad[_0x3c73d1(0x1b5)]=0x3;case 0x3:return[0x4,new Promise(function(_0x480c94,_0x379ee3){if(_0x324092){var _0xcb934a=function(_0x31deaf){_0x31deaf&&_0x379ee3(_0x31deaf),_0x480c94(_0x1f9615);},_0x2c0706={},_0x30235e=function(_0x5f8668){var _0x34834a=a14_0x1a4f,_0xb69f48=_0x5f8668['status'];_0x5f8668['progress']&&(_0xb69f48=_0x5f8668[_0x34834a(0x14f)]+'\x20'+_0x5f8668['progress']);if(_0x5f8668['id']){var _0x1227ba=_0x5f8668['id'];!_0x2c0706[_0x1227ba]&&(_0x2c0706[_0x1227ba]=console[_0x34834a(0x151)]()),_0x2c0706[_0x1227ba](_0x1227ba+':\x20'+_0xb69f48);}else{lodash_1['default'][_0x34834a(0x169)](_0x5f8668,_0x34834a(0x205))&&(_0x5f8668[_0x34834a(0x144)]=_0x5f8668[_0x34834a(0x143)]['ID']+'\x0a');var _0xe024e8=_0x5f8668[_0x34834a(0x14f)]?_0x5f8668[_0x34834a(0x14f)]+'\x0a':_0x5f8668[_0x34834a(0x144)];process['stdout'][_0x34834a(0x170)](_0xe024e8);}};docker['modem']['followProgress'](_0x324092,_0xcb934a,_0x30235e);}else _0x480c94(_0x1f9615);})];case 0x4:return[0x2,_0x185cad['sent']()];}});});}exports[a14_0x2a81c9(0x1b7)]=pullImageIfNeed;function generateDockerCmd(_0x3f8ac3,_0x2008df,_0x2e99ea,_0x20ae84,_0xb97903,_0x53f35){var _0x52d161=a14_0x2a81c9;_0xb97903===void 0x0&&(_0xb97903=!![]);_0x53f35===void 0x0&&(_0x53f35=null);if(runtime_1[_0x52d161(0x1cd)](_0x3f8ac3))return genDockerCmdOfCustomContainer(_0x2e99ea);else{if(_0x2008df)return[_0x52d161(0x167)];}return genDockerCmdOfNonCustomContainer(_0x2e99ea,_0x20ae84,_0xb97903,_0x53f35);}exports[a14_0x2a81c9(0x1b2)]=generateDockerCmd;function genDockerCmdOfNonCustomContainer(_0x256d89,_0x13bebe,_0x2cfcfa,_0x30dfba){var _0x4e9398=a14_0x2a81c9;_0x2cfcfa===void 0x0&&(_0x2cfcfa=!![]);_0x30dfba===void 0x0&&(_0x30dfba=null);var _0x98eb74=['-h',_0x256d89['handler']];_0x30dfba!==null?(_0x98eb74[_0x4e9398(0x203)]('--event',Buffer['from'](_0x30dfba)['toString'](_0x4e9398(0x163))),_0x98eb74[_0x4e9398(0x203)](_0x4e9398(0x18c))):_0x98eb74[_0x4e9398(0x203)](_0x4e9398(0x1ad));_0x13bebe&&_0x98eb74[_0x4e9398(0x203)]('--http');var _0x34bb0a=_0x256d89['initializer'];_0x34bb0a&&_0x2cfcfa&&_0x98eb74['push']('-i',_0x34bb0a);var _0x389a8f=_0x256d89[_0x4e9398(0x191)];return _0x389a8f&&_0x98eb74[_0x4e9398(0x203)](_0x4e9398(0x1ee),_0x389a8f[_0x4e9398(0x179)]()),logger_1[_0x4e9398(0x1e4)][_0x4e9398(0x1d2)]('docker\x20cmd:\x20'+_0x98eb74),_0x98eb74;}function genDockerCmdOfCustomContainer(_0x43f08b){var _0x2bd334=a14_0x2a81c9,_0x1f0cf3=_0x43f08b[_0x2bd334(0x1c0)][_0x2bd334(0x168)]?JSON[_0x2bd334(0x164)](_0x43f08b[_0x2bd334(0x1c0)][_0x2bd334(0x168)]):undefined,_0x54efe9=_0x43f08b[_0x2bd334(0x1c0)][_0x2bd334(0x193)]?JSON['parse'](_0x43f08b[_0x2bd334(0x1c0)][_0x2bd334(0x193)]):undefined;if(_0x1f0cf3&&_0x54efe9)return __spreadArrays(_0x1f0cf3,_0x54efe9);else{if(_0x1f0cf3)return _0x1f0cf3;else{if(_0x54efe9)return _0x54efe9;}}return[];}function generateDockerEnvs(_0x4837e8,_0x3a6c06,_0x9559db,_0x1fa9f2,_0x238b7c,_0x108cf0,_0x1e593b,_0x314669,_0x2c6e6d,_0x1fca4c,_0x15c35f,_0x4406dd){return __awaiter(this,void 0x0,void 0x0,function(){var _0x111554,_0x35dd84,_0x261daf,_0x297253,_0x16cbab;return __generator(this,function(_0x3d63bb){var _0x1cf134=a14_0x1a4f;switch(_0x3d63bb[_0x1cf134(0x1b5)]){case 0x0:_0x111554={};_0x2c6e6d&&Object[_0x1cf134(0x15d)](_0x111554,{'FC_HTTP_PARAMS':_0x2c6e6d});return[0x4,env_1[_0x1cf134(0x126)](_0x9559db,_0x1e593b[_0x1cf134(0x1e3)])];case 0x1:_0x35dd84=_0x3d63bb[_0x1cf134(0x123)](),Object['assign'](_0x111554,_0x35dd84),_0x261daf=_0x1e593b[_0x1cf134(0x1f6)];if(_0x314669&&!_0x4406dd)_0x297253=debug_1[_0x1cf134(0x171)](_0x261daf,_0x314669,_0x15c35f),Object['assign'](_0x111554,_0x297253);else _0x4406dd&&Object[_0x1cf134(0x15d)](_0x111554,{'DEBUG_OPTIONS':_0x4406dd});Object[_0x1cf134(0x15d)](_0x111554,generateFunctionEnvs(_0x1e593b));definition_1[_0x1cf134(0x15b)](_0x238b7c===null||_0x238b7c===void 0x0?void 0x0:_0x238b7c[_0x1cf134(0x133)])?_0x16cbab=definition_1[_0x1cf134(0x173)](_0x4837e8===null||_0x4837e8===void 0x0?void 0x0:_0x4837e8[_0x1cf134(0x206)],_0x3a6c06,_0x1fa9f2):_0x16cbab=_0x238b7c===null||_0x238b7c===void 0x0?void 0x0:_0x238b7c[_0x1cf134(0x133)];(_0x1e593b===null||_0x1e593b===void 0x0?void 0x0:_0x1e593b[_0x1cf134(0x1f6)]['includes'](_0x1cf134(0x152)))&&Object[_0x1cf134(0x15d)](_0x111554,{'fc_enable_new_java_ca':!![]});Object[_0x1cf134(0x15d)](_0x111554,{'local':!![],'FC_ACCESS_KEY_ID':_0x4837e8===null||_0x4837e8===void 0x0?void 0x0:_0x4837e8['AccessKeyID'],'FC_ACCESS_KEY_SECRET':_0x4837e8===null||_0x4837e8===void 0x0?void 0x0:_0x4837e8['AccessKeySecret'],'FC_SECURITY_TOKEN':_0x4837e8===null||_0x4837e8===void 0x0?void 0x0:_0x4837e8[_0x1cf134(0x207)],'FC_ACCOUNT_ID':_0x4837e8===null||_0x4837e8===void 0x0?void 0x0:_0x4837e8['AccountID'],'FC_REGION':_0x3a6c06,'FC_FUNCTION_NAME':_0x108cf0,'FC_HANDLER':_0x1e593b[_0x1cf134(0x17c)],'FC_MEMORY_SIZE':_0x1e593b[_0x1cf134(0x1a3)]||0x80,'FC_TIMEOUT':_0x1e593b['timeout']||0x3,'FC_INITIALIZER':_0x1e593b[_0x1cf134(0x1fb)],'FC_INITIALIZATION_TIMEOUT':_0x1e593b[_0x1cf134(0x191)]||0x3,'FC_SERVICE_NAME':_0x1fa9f2,'FC_SERVICE_LOG_PROJECT':_0x16cbab===null||_0x16cbab===void 0x0?void 0x0:_0x16cbab['project'],'FC_SERVICE_LOG_STORE':_0x16cbab===null||_0x16cbab===void 0x0?void 0x0:_0x16cbab[_0x1cf134(0x1e8)]});if(runtime_1[_0x1cf134(0x1cd)](_0x1e593b['runtime']))return[0x2,_0x111554];return[0x2,env_1[_0x1cf134(0x180)](_0x111554,_0x1fca4c)];}});});}exports[a14_0x2a81c9(0x1e2)]=generateDockerEnvs;function generateFunctionEnvs(_0x52f724){var _0x4a6672=a14_0x2a81c9,_0x2acfed=_0x52f724[_0x4a6672(0x140)];if(!_0x2acfed)return{};return Object[_0x4a6672(0x15d)]({},_0x2acfed);}exports[a14_0x2a81c9(0x1a8)]=generateFunctionEnvs;function pullFcImageIfNeed(_0x1cd89a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x49e498;return __generator(this,function(_0xad69cc){var _0x43f17b=a14_0x1a4f;switch(_0xad69cc['label']){case 0x0:return[0x4,imageExist(_0x1cd89a)];case 0x1:_0x49e498=_0xad69cc[_0x43f17b(0x123)]();if(!(!_0x49e498||!skipPullImage))return[0x3,0x3];return[0x4,pullImage(_0x1cd89a)];case 0x2:_0xad69cc[_0x43f17b(0x123)]();return[0x3,0x4];case 0x3:logger_1[_0x43f17b(0x1e4)][_0x43f17b(0x1d2)]('skip\x20pulling\x20image\x20'+_0x1cd89a+_0x43f17b(0x1c3)),logger_1[_0x43f17b(0x1e4)][_0x43f17b(0x15a)](_0x43f17b(0x16e)+_0x1cd89a+_0x43f17b(0x1c3)),_0xad69cc[_0x43f17b(0x1b5)]=0x4;case 0x4:return[0x2];}});});}function a14_0x1a4f(_0x28d8c2,_0x5e1266){return a14_0x1a4f=function(_0x4ac982,_0x1a4f73){_0x4ac982=_0x4ac982-0x121;var _0x1e5467=a14_0x4ac9[_0x4ac982];return _0x1e5467;},a14_0x1a4f(_0x28d8c2,_0x5e1266);}exports[a14_0x2a81c9(0x1dd)]=pullFcImageIfNeed;function pullImage(_0x412cf1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3cd1e2,_0x413a20,_0x4a9570=this;return __generator(this,function(_0x5193fe){var _0x164f81=a14_0x1a4f;switch(_0x5193fe['label']){case 0x0:return[0x4,dockerOpts[_0x164f81(0x1af)](_0x412cf1)];case 0x1:_0x3cd1e2=_0x5193fe[_0x164f81(0x123)]();return[0x4,docker[_0x164f81(0x150)](_0x3cd1e2)];case 0x2:_0x413a20=_0x5193fe['sent']();return[0x4,new Promise(function(_0x213246,_0x1627e5){var _0x5de6aa=_0x164f81;logger_1['default'][_0x5de6aa(0x15a)](_0x5de6aa(0x1a6)+_0x3cd1e2+_0x5de6aa(0x130)+(_0x5de6aa(0x12f)+_0x3cd1e2+'\x27')+_0x5de6aa(0x185));var _0x4a7c26=function(_0x39a7cd){return __awaiter(_0x4a9570,void 0x0,void 0x0,function(){var _0x1c9dbf,_0x50b8cd,_0x25c175,_0x542334,_0x258c40,_0x590b6a;return __generator(this,function(_0x1f6ae8){var _0x598d35=a14_0x1a4f;switch(_0x1f6ae8['label']){case 0x0:_0x39a7cd&&_0x1627e5(_0x39a7cd);containers[_0x598d35(0x146)](_0x413a20),(_0x1c9dbf=0x0,_0x50b8cd=dockerOpts[_0x598d35(0x127)]),_0x1f6ae8[_0x598d35(0x1b5)]=0x1;case 0x1:if(!(_0x1c9dbf<_0x50b8cd[_0x598d35(0x17b)]))return[0x3,0x5];_0x25c175=_0x50b8cd[_0x1c9dbf];if(!(_0x3cd1e2[_0x598d35(0x131)](_0x25c175)===0x0))return[0x3,0x4];return[0x4,docker[_0x598d35(0x174)](_0x3cd1e2)];case 0x2:_0x542334=_0x1f6ae8[_0x598d35(0x123)](),_0x258c40=_0x3cd1e2[_0x598d35(0x1b6)](_0x25c175['length']+0x1),_0x590b6a=_0x258c40[_0x598d35(0x14e)](':');return[0x4,_0x542334['tag']({'name':_0x3cd1e2,'repo':lodash_1['default'][_0x598d35(0x12a)](_0x590b6a),'tag':lodash_1[_0x598d35(0x1e4)][_0x598d35(0x17e)](_0x590b6a)})];case 0x3:_0x1f6ae8[_0x598d35(0x123)]();return[0x3,0x5];case 0x4:_0x1c9dbf++;return[0x3,0x1];case 0x5:_0x213246(_0x3cd1e2);return[0x2];}});});};containers[_0x5de6aa(0x17f)](_0x413a20),followProgress(_0x413a20,_0x4a7c26);})];case 0x3:return[0x2,_0x5193fe[_0x164f81(0x123)]()];}});});}exports[a14_0x2a81c9(0x15f)]=pullImage;function followProgress(_0x38d31a,_0x20d290){var _0x346379=a14_0x2a81c9,_0x5ef5f0={},_0x1787e5=function(_0x32e331){var _0xd1bb3e=a14_0x1a4f,_0x539571=_0x32e331[_0xd1bb3e(0x14f)];_0x32e331[_0xd1bb3e(0x12c)]&&(_0x539571=_0x32e331[_0xd1bb3e(0x14f)]+'\x20'+_0x32e331[_0xd1bb3e(0x12c)]);if(_0x32e331['id']){var _0x43ef59=_0x32e331['id'];!_0x5ef5f0[_0x43ef59]&&(_0x5ef5f0[_0x43ef59]=console[_0xd1bb3e(0x151)]()),_0x5ef5f0[_0x43ef59](_0x43ef59+':\x20'+_0x539571);}else{lodash_1[_0xd1bb3e(0x1e4)][_0xd1bb3e(0x169)](_0x32e331,'aux.ID')&&(_0x32e331[_0xd1bb3e(0x144)]=_0x32e331[_0xd1bb3e(0x143)]['ID']+'\x0a');var _0x3b5698=_0x32e331[_0xd1bb3e(0x14f)]?_0x32e331['status']+'\x0a':_0x32e331[_0xd1bb3e(0x144)];process[_0xd1bb3e(0x201)][_0xd1bb3e(0x170)](_0x3b5698);}};docker[_0x346379(0x1ac)]['followProgress'](_0x38d31a,_0x20d290,_0x1787e5);}function runContainer(_0x4f5f67,_0x3370ec,_0x4f5159,_0x2ed2e6){return __awaiter(this,void 0x0,void 0x0,function(){var _0x242a25,_0x436142,_0x572a97,_0x5dfb25,_0x407a97;return __generator(this,function(_0x12a419){var _0x4383dd=a14_0x1a4f;switch(_0x12a419[_0x4383dd(0x1b5)]){case 0x0:return[0x4,createContainer(_0x4f5f67)];case 0x1:_0x242a25=_0x12a419['sent'](),_0x436142={'hijack':!![],'stream':!![],'stdin':!![],'stdout':!![],'stderr':!![]};return[0x4,_0x242a25[_0x4383dd(0x1c6)](_0x436142)];case 0x2:_0x572a97=_0x12a419[_0x4383dd(0x123)]();!_0x3370ec&&(_0x3370ec=process[_0x4383dd(0x201)]);!_0x4f5159&&(_0x4f5159=process[_0x4383dd(0x1e9)]);_0x5dfb25=error_processor_1[_0x4383dd(0x176)]({'serviceName':_0x2ed2e6===null||_0x2ed2e6===void 0x0?void 0x0:_0x2ed2e6[_0x4383dd(0x1b4)],'functionName':_0x2ed2e6===null||_0x2ed2e6===void 0x0?void 0x0:_0x2ed2e6['functionName'],'errorStream':_0x4f5159});!isWin&&_0x242a25[_0x4383dd(0x1ac)][_0x4383dd(0x204)](_0x572a97,_0x3370ec,_0x5dfb25);return[0x4,_0x242a25[_0x4383dd(0x1ed)]()];case 0x3:_0x12a419[_0x4383dd(0x123)]();if(!isWin)return[0x3,0x5];return[0x4,_0x242a25['logs']({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x4:_0x407a97=_0x12a419['sent'](),_0x242a25[_0x4383dd(0x1ac)][_0x4383dd(0x204)](_0x407a97,_0x3370ec,_0x5dfb25),_0x12a419['label']=0x5;case 0x5:containers['add'](_0x242a25['id']),streams['add'](_0x572a97);return[0x2,{'container':_0x242a25,'stream':_0x572a97}];}});});}exports[a14_0x2a81c9(0x1d7)]=runContainer;function resolveCodeUriToMount(_0x308341,_0x4dbcbd){return _0x4dbcbd===void 0x0&&(_0x4dbcbd=!![]),__awaiter(this,void 0x0,void 0x0,function(){var _0x15a639,_0x13ae5e;return __generator(this,function(_0x562290){var _0x366991=a14_0x1a4f;switch(_0x562290[_0x366991(0x1b5)]){case 0x0:if(!_0x308341)return[0x2,null];_0x15a639=null;return[0x4,fs['lstat'](_0x308341)];case 0x1:_0x13ae5e=_0x562290[_0x366991(0x123)]();_0x13ae5e[_0x366991(0x1e1)]()?_0x15a639=_0x366991(0x192):_0x15a639=path_1[_0x366991(0x1e4)]['posix'][_0x366991(0x1b0)](_0x366991(0x192),path_1[_0x366991(0x1e4)][_0x366991(0x165)](_0x308341));return[0x2,{'Type':_0x366991(0x1b1),'Source':_0x308341,'Target':_0x15a639,'ReadOnly':_0x4dbcbd}];}});});}exports['resolveCodeUriToMount']=resolveCodeUriToMount;function isDockerToolBoxAndEnsureDockerVersion(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3486c9,_0x265f30;return __generator(this,function(_0x11ca38){var _0x84afcb=a14_0x1a4f;switch(_0x11ca38[_0x84afcb(0x1b5)]){case 0x0:return[0x4,docker[_0x84afcb(0x15a)]()];case 0x1:_0x3486c9=_0x11ca38[_0x84afcb(0x123)]();return[0x4,detectDockerVersion(_0x3486c9[_0x84afcb(0x1b9)]||'')];case 0x2:_0x11ca38[_0x84afcb(0x123)](),_0x265f30=(_0x3486c9['Labels']||[])[_0x84afcb(0x1e5)](function(_0x58fb12){var _0x85b8b6=_0x84afcb;return lodash_1['default'][_0x85b8b6(0x14e)](_0x58fb12,'=',0x2);})[_0x84afcb(0x1c9)](function(_0x2f15e5){return _0x2f15e5['length']===0x2;})['reduce'](function(_0x1fc123,_0x3450a6){return _0x1fc123[_0x3450a6[0x0]]=_0x3450a6[0x1],_0x1fc123;},{});return[0x2,process[_0x84afcb(0x1a1)]===_0x84afcb(0x13f)&&_0x265f30['provider']===_0x84afcb(0x19f)];}});});}exports['isDockerToolBoxAndEnsureDockerVersion']=isDockerToolBoxAndEnsureDockerVersion;function detectDockerVersion(_0x3b68ad){return __awaiter(this,void 0x0,void 0x0,function(){var _0x998aec;return __generator(this,function(_0x82883b){var _0x12ab18=a14_0x1a4f;_0x998aec=_0x3b68ad[_0x12ab18(0x14e)]('.');if(Number[_0x12ab18(0x1de)](_0x998aec[0x0])===0x1&&Number[_0x12ab18(0x1de)](_0x998aec[0x1])<=0xd)throw new Error(_0x12ab18(0x1df)+_0x3b68ad+_0x12ab18(0x1d8));return[0x2];});});}exports[a14_0x2a81c9(0x139)]=detectDockerVersion;function createContainer(_0x384df3){var _0x5b9856;return __awaiter(this,void 0x0,void 0x0,function(){var _0x5974e9,_0x3aaf35,_0x2b4e76,_0x59ba43,_0x163355,_0x392af1;return __generator(this,function(_0x82a8d5){var _0x39387d=a14_0x1a4f;switch(_0x82a8d5[_0x39387d(0x1b5)]){case 0x0:_0x5974e9=process[_0x39387d(0x1a1)]===_0x39387d(0x13f),_0x3aaf35=process[_0x39387d(0x1a1)]===_0x39387d(0x132);if(!(_0x384df3&&_0x3aaf35))return[0x3,0x2];if(!_0x384df3['HostConfig'])return[0x3,0x2];return[0x4,docker_support_1[_0x39387d(0x199)]((_0x5b9856=_0x384df3[_0x39387d(0x1f8)])===null||_0x5b9856===void 0x0?void 0x0:_0x5b9856['Mounts'])];case 0x1:_0x2b4e76=_0x82a8d5[_0x39387d(0x123)]();if(_0x3aaf35&&_0x2b4e76[_0x39387d(0x17b)]>0x0)throw new Error(_0x39387d(0x1ba)+_0x2b4e76+_0x39387d(0x142));_0x82a8d5['label']=0x2;case 0x2:return[0x4,isDockerToolBoxAndEnsureDockerVersion()];case 0x3:_0x59ba43=_0x82a8d5[_0x39387d(0x123)](),_0x82a8d5[_0x39387d(0x1b5)]=0x4;case 0x4:_0x82a8d5[_0x39387d(0x172)][_0x39387d(0x203)]([0x4,0x6,,0x7]);return[0x4,docker[_0x39387d(0x188)](_0x384df3)];case 0x5:_0x163355=_0x82a8d5[_0x39387d(0x123)]();return[0x3,0x7];case 0x6:_0x392af1=_0x82a8d5[_0x39387d(0x123)]();if(_0x392af1[_0x39387d(0x145)][_0x39387d(0x131)](_0x39387d(0x1be))!==-0x1&&_0x59ba43)throw new Error('The\x20default\x20host\x20machine\x20path\x20for\x20docker\x20toolbox\x20is\x20under\x20\x27C:\x5cUsers\x27,\x20Please\x20make\x20sure\x20your\x20project\x20is\x20in\x20this\x20directory.\x20If\x20you\x20want\x20to\x20mount\x20other\x20disk\x20paths,\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md\x20.');if(_0x392af1[_0x39387d(0x145)]['indexOf'](_0x39387d(0x208))!==-0x1&&_0x5974e9)throw new Error(_0x392af1[_0x39387d(0x145)]+'More\x20information\x20please\x20refer\x20to\x20https://docs.docker.com/docker-for-windows/#shared-drives');throw _0x392af1;case 0x7:return[0x2,_0x163355];}});});}function resolveNasConfigToMounts(_0x226fbf,_0xda581c,_0x22ad98,_0x396139){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3f7af1;return __generator(this,function(_0x7cb0a4){var _0x3fdf3f=a14_0x1a4f;switch(_0x7cb0a4[_0x3fdf3f(0x1b5)]){case 0x0:return[0x4,nas[_0x3fdf3f(0x12e)](_0x396139,_0x22ad98,_0xda581c)];case 0x1:_0x3f7af1=_0x7cb0a4[_0x3fdf3f(0x123)]();return[0x2,convertNasMappingsToMounts(devs_1[_0x3fdf3f(0x183)](_0x226fbf),_0x3f7af1)];}});});}exports[a14_0x2a81c9(0x14c)]=resolveNasConfigToMounts;function convertNasMappingsToMounts(_0x4a2079,_0x30aa5a){var _0x20e6a3=a14_0x2a81c9;return _0x30aa5a[_0x20e6a3(0x1e5)](function(_0x138553){var _0x32f535=_0x20e6a3;return{'Type':_0x32f535(0x1b1),'Source':path_1['default'][_0x32f535(0x19d)](_0x4a2079,_0x138553[_0x32f535(0x1f7)]),'Target':_0x138553[_0x32f535(0x1a2)],'ReadOnly':![]};});}function resolveTmpDirToMount(_0xd107b6){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x890972){var _0x58d50f=a14_0x1a4f;if(!_0xd107b6)return[0x2,{}];return[0x2,{'Type':_0x58d50f(0x1b1),'Source':_0xd107b6,'Target':_0x58d50f(0x13b),'ReadOnly':![]}];});});}exports[a14_0x2a81c9(0x129)]=resolveTmpDirToMount;function resolveDebuggerPathToMount(_0x304b7e){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4e860f;return __generator(this,function(_0x147796){var _0x10cf4e=a14_0x1a4f;if(!_0x304b7e)return[0x2,{}];return _0x4e860f=path_1['default'][_0x10cf4e(0x19d)](_0x304b7e),[0x2,{'Type':_0x10cf4e(0x1b1),'Source':_0x4e860f,'Target':'/tmp/debugger_files','ReadOnly':![]}];});});}exports[a14_0x2a81c9(0x1ec)]=resolveDebuggerPathToMount;function resolvePasswdMount(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4da800;return __generator(this,function(_0x1a11cf){var _0x522553=a14_0x1a4f;switch(_0x1a11cf[_0x522553(0x1b5)]){case 0x0:if(!(process[_0x522553(0x1a1)]===_0x522553(0x1a7)))return[0x3,0x2];_0x4da800={'Type':'bind'};return[0x4,passwd_1[_0x522553(0x18a)]()];case 0x1:return[0x2,(_0x4da800[_0x522553(0x13d)]=_0x1a11cf[_0x522553(0x123)](),_0x4da800['Target']=_0x522553(0x195),_0x4da800[_0x522553(0x137)]=!![],_0x4da800)];case 0x2:return[0x2,null];}});});}exports[a14_0x2a81c9(0x1f4)]=resolvePasswdMount;function createAndRunContainer(_0x4b59c8){return __awaiter(this,void 0x0,void 0x0,function(){var _0x30f8d5;return __generator(this,function(_0x3e6b6a){var _0x36c32f=a14_0x1a4f;switch(_0x3e6b6a[_0x36c32f(0x1b5)]){case 0x0:return[0x4,createContainer(_0x4b59c8)];case 0x1:_0x30f8d5=_0x3e6b6a[_0x36c32f(0x123)](),containers[_0x36c32f(0x17f)](_0x30f8d5['id']);return[0x4,_0x30f8d5[_0x36c32f(0x1ed)]({})];case 0x2:_0x3e6b6a[_0x36c32f(0x123)]();return[0x2,_0x30f8d5];}});});}exports['createAndRunContainer']=createAndRunContainer;function showDebugIdeTipsForVscode(_0x1004a2,_0x466109,_0x4c7c22,_0x5ba1f7,_0x5893ae){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3f990e;return __generator(this,function(_0x53f3ed){var _0x3b816e=a14_0x1a4f;switch(_0x53f3ed[_0x3b816e(0x1b5)]){case 0x0:return[0x4,debug_1[_0x3b816e(0x134)](_0x1004a2,_0x466109,_0x4c7c22,_0x5ba1f7,_0x5893ae)];case 0x1:_0x3f990e=_0x53f3ed[_0x3b816e(0x123)](),logger_1[_0x3b816e(0x1e4)][_0x3b816e(0x189)](_0x3b816e(0x1c1),_0x3b816e(0x177)),logger_1[_0x3b816e(0x1e4)][_0x3b816e(0x189)](_0x3b816e(0x175)),logger_1['default'][_0x3b816e(0x189)](JSON[_0x3b816e(0x1aa)](_0x3f990e,null,0x4)),logger_1[_0x3b816e(0x1e4)][_0x3b816e(0x189)](_0x3b816e(0x147));return[0x2];}});});}exports['showDebugIdeTipsForVscode']=showDebugIdeTipsForVscode;function writeDebugIdeConfigForVscode(_0x117a62,_0x287277,_0x430c09,_0x47eec6,_0x5af989,_0x16f3f4){return __awaiter(this,void 0x0,void 0x0,function(){var _0x21d98f,_0x43e4ff,_0x39ebc8,_0x2e5a29,_0x454e5a,_0x35e17b,_0x327951,_0xa50f0a;return __generator(this,function(_0x502e37){var _0x3266ea=a14_0x1a4f;switch(_0x502e37[_0x3266ea(0x1b5)]){case 0x0:_0x21d98f=path_1[_0x3266ea(0x1e4)]['join'](_0x117a62,_0x3266ea(0x1da)),_0x43e4ff=path_1['default']['join'](_0x21d98f,_0x3266ea(0x160)),_0x502e37[_0x3266ea(0x1b5)]=0x1;case 0x1:_0x502e37[_0x3266ea(0x172)][_0x3266ea(0x203)]([0x1,0x3,,0x5]);return[0x4,fs['ensureDir'](path_1['default'][_0x3266ea(0x1f9)](_0x43e4ff))];case 0x2:_0x502e37[_0x3266ea(0x123)]();return[0x3,0x5];case 0x3:_0x39ebc8=_0x502e37[_0x3266ea(0x123)](),logger_1[_0x3266ea(0x1e4)][_0x3266ea(0x1ab)]('Ensure\x20directory:\x20'+_0x21d98f+'\x20failed.');return[0x4,showDebugIdeTipsForVscode(_0x287277,_0x430c09,_0x47eec6,_0x5af989,_0x16f3f4)];case 0x4:_0x502e37[_0x3266ea(0x123)](),logger_1[_0x3266ea(0x1e4)]['debug'](_0x3266ea(0x1d1)+_0x21d98f+_0x3266ea(0x1bf)+_0x39ebc8);return[0x2];case 0x5:return[0x4,debug_1['generateVscodeDebugConfig'](_0x287277,_0x430c09,_0x47eec6,_0x5af989,_0x16f3f4)];case 0x6:_0x2e5a29=_0x502e37[_0x3266ea(0x123)]();if(!(fs['pathExistsSync'](_0x43e4ff)&&fs[_0x3266ea(0x19c)](_0x43e4ff)[_0x3266ea(0x184)]()))return[0x3,0x9];_0x327951=(_0x35e17b=JSON)[_0x3266ea(0x164)];return[0x4,fs[_0x3266ea(0x136)](_0x43e4ff,{'encoding':_0x3266ea(0x1d3)})];case 0x7:_0x454e5a=_0x327951[_0x3266ea(0x1ef)](_0x35e17b,[_0x502e37[_0x3266ea(0x123)]()]);if(lodash_1['default'][_0x3266ea(0x187)](_0x454e5a,_0x2e5a29))return[0x2];logger_1['default'][_0x3266ea(0x1ab)](_0x3266ea(0x13c)+_0x43e4ff+_0x3266ea(0x1ff));return[0x4,showDebugIdeTipsForVscode(_0x287277,_0x430c09,_0x47eec6,_0x5af989,_0x16f3f4)];case 0x8:_0x502e37['sent']();return[0x2];case 0x9:_0x502e37[_0x3266ea(0x172)][_0x3266ea(0x203)]([0x9,0xb,,0xd]);return[0x4,fs['writeFile'](_0x43e4ff,JSON[_0x3266ea(0x1aa)](_0x2e5a29,null,'\x20\x20'),{'encoding':'utf8','flag':'w'})];case 0xa:_0x502e37[_0x3266ea(0x123)]();return[0x3,0xd];case 0xb:_0xa50f0a=_0x502e37[_0x3266ea(0x123)](),logger_1[_0x3266ea(0x1e4)][_0x3266ea(0x1ab)](_0x3266ea(0x19a)+_0x43e4ff+_0x3266ea(0x1bc));return[0x4,showDebugIdeTipsForVscode(_0x287277,_0x430c09,_0x47eec6,_0x5af989,_0x16f3f4)];case 0xc:_0x502e37[_0x3266ea(0x123)](),logger_1['default']['debug'](_0x3266ea(0x19a)+_0x43e4ff+_0x3266ea(0x1bf)+_0xa50f0a);return[0x3,0xd];case 0xd:return[0x2];}});});}exports['writeDebugIdeConfigForVscode']=writeDebugIdeConfigForVscode;function showDebugIdeTipsForPycharm(_0x320c43,_0x44f765){return __awaiter(this,void 0x0,void 0x0,function(){var _0x14091a;return __generator(this,function(_0x621dfd){var _0x20eea9=a14_0x1a4f;switch(_0x621dfd['label']){case 0x0:return[0x4,fs[_0x20eea9(0x18e)](_0x320c43)];case 0x1:_0x14091a=_0x621dfd[_0x20eea9(0x123)]();!_0x14091a[_0x20eea9(0x1e1)]()&&(_0x320c43=path_1['default'][_0x20eea9(0x1f9)](_0x320c43));logger_1[_0x20eea9(0x1e4)][_0x20eea9(0x189)](_0x20eea9(0x155)+ip[_0x20eea9(0x1b8)]()+'\x0aPort\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20'+_0x44f765+_0x20eea9(0x197)+_0x320c43+_0x20eea9(0x182)+ip[_0x20eea9(0x1b8)]()+_0x20eea9(0x196)+_0x44f765+',\x20stdoutToServer=True,\x20stderrToServer=True)\x0a\x0a=========================================================================\x0a',_0x20eea9(0x177));return[0x2];}});});}exports[a14_0x2a81c9(0x1cc)]=showDebugIdeTipsForPycharm;function writeEventToStreamAndClose(_0x5d0f1f,_0x20f222){var _0x470092=a14_0x2a81c9;_0x20f222&&_0x5d0f1f[_0x470092(0x170)](_0x20f222),_0x5d0f1f['end']();}function startContainer(_0x3d7e15,_0x9b0fae,_0x4c1721,_0x1c74d8){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1e87e8,_0x27553c,_0x1a7177,_0xfacf2,_0x296944=this;return __generator(this,function(_0x14e117){var _0xedd460=a14_0x1a4f;switch(_0x14e117[_0xedd460(0x1b5)]){case 0x0:return[0x4,createContainer(_0x3d7e15)];case 0x1:_0x1e87e8=_0x14e117[_0xedd460(0x123)](),containers['add'](_0x1e87e8['id']),_0x14e117['label']=0x2;case 0x2:_0x14e117['trys'][_0xedd460(0x203)]([0x2,0x4,,0x5]);return[0x4,_0x1e87e8[_0xedd460(0x1ed)]({})];case 0x3:_0x14e117[_0xedd460(0x123)]();return[0x3,0x5];case 0x4:_0x27553c=_0x14e117[_0xedd460(0x123)](),logger_1[_0xedd460(0x1e4)][_0xedd460(0x1c7)](_0x27553c);return[0x3,0x5];case 0x5:_0x1a7177=_0x9b0fae||_0x4c1721;if(!_0x1a7177)return[0x3,0x7];!_0x9b0fae&&(_0x9b0fae=dev_null_1[_0xedd460(0x1e4)]());!_0x4c1721&&(_0x4c1721=dev_null_1[_0xedd460(0x1e4)]());return[0x4,_0x1e87e8[_0xedd460(0x1e0)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x6:_0xfacf2=_0x14e117[_0xedd460(0x123)](),_0x1e87e8['modem'][_0xedd460(0x204)](_0xfacf2,_0x9b0fae,error_processor_1[_0xedd460(0x176)]({'serviceName':_0x1c74d8['serviceName'],'functionName':_0x1c74d8['functionName'],'errorStream':_0x4c1721})),_0x14e117[_0xedd460(0x1b5)]=0x7;case 0x7:return[0x2,{'containerId':_0x1e87e8===null||_0x1e87e8===void 0x0?void 0x0:_0x1e87e8['id'],'stop':function(){return __awaiter(_0x296944,void 0x0,void 0x0,function(){return __generator(this,function(_0x12c39d){var _0x159bff=a14_0x1a4f;switch(_0x12c39d['label']){case 0x0:logger_1[_0x159bff(0x1e4)][_0x159bff(0x1d2)]('Stopping\x20container:\x20'+_0x1e87e8['id']);return[0x4,_0x1e87e8[_0x159bff(0x1fd)]()];case 0x1:_0x12c39d[_0x159bff(0x123)](),containers[_0x159bff(0x146)](_0x1e87e8['id']);return[0x2];}});});},'kill':function(){return __awaiter(_0x296944,void 0x0,void 0x0,function(){return __generator(this,function(_0x3c27c3){var _0x530dde=a14_0x1a4f;switch(_0x3c27c3[_0x530dde(0x1b5)]){case 0x0:logger_1[_0x530dde(0x1e4)][_0x530dde(0x1d2)](_0x530dde(0x161)+_0x1e87e8['id']);return[0x4,_0x1e87e8[_0x530dde(0x166)]()];case 0x1:_0x3c27c3[_0x530dde(0x123)](),containers[_0x530dde(0x146)](_0x1e87e8['id']);return[0x2];}});});},'exec':function(_0x378dc5,_0x183c0e){var _0x3702ff=_0xedd460,_0x262cce=_0x183c0e===void 0x0?{}:_0x183c0e,_0x52806c=_0x262cce[_0x3702ff(0x1bd)],_0x35a93e=_0x52806c===void 0x0?'':_0x52806c,_0x73609b=_0x262cce[_0x3702ff(0x1d6)],_0x37157f=_0x73609b===void 0x0?{}:_0x73609b,_0x4e438c=_0x262cce['outputStream'],_0x8309e4=_0x4e438c===void 0x0?process[_0x3702ff(0x201)]:_0x4e438c,_0xef0ffa=_0x262cce[_0x3702ff(0x1fa)],_0x4b0ce5=_0xef0ffa===void 0x0?process[_0x3702ff(0x1e9)]:_0xef0ffa,_0x1d533c=_0x262cce[_0x3702ff(0x135)],_0x415992=_0x1d533c===void 0x0?![]:_0x1d533c,_0x356419=_0x262cce[_0x3702ff(0x14b)],_0x5e8865=_0x356419===void 0x0?{}:_0x356419,_0x5a4e82=_0x262cce[_0x3702ff(0x16f)],_0x55564a=_0x5a4e82===void 0x0?null:_0x5a4e82;return __awaiter(_0x296944,void 0x0,void 0x0,function(){var _0xa2d659,_0xe938b8,_0x30cb39,_0x27c335;return __generator(this,function(_0x5ab596){var _0x302b20=a14_0x1a4f;switch(_0x5ab596[_0x302b20(0x1b5)]){case 0x0:_0xa2d659=_0x55564a?!![]:![],_0xe938b8={'Env':dockerOpts[_0x302b20(0x1ea)](_0x37157f),'Tty':![],'AttachStdin':_0xa2d659,'AttachStdout':!![],'AttachStderr':!![],'WorkingDir':_0x35a93e};_0x378dc5!==[]&&(_0xe938b8[_0x302b20(0x158)]=_0x378dc5);logger_1[_0x302b20(0x1e4)][_0x302b20(0x1d2)](_0x302b20(0x1f2)+JSON[_0x302b20(0x1aa)](_0xe938b8,null,0x4));return[0x4,_0x1e87e8[_0x302b20(0x1f5)](_0xe938b8)];case 0x1:_0x30cb39=_0x5ab596[_0x302b20(0x123)]();return[0x4,_0x30cb39[_0x302b20(0x1ed)]({'hijack':!![],'stdin':_0xa2d659})];case 0x2:_0x27c335=_0x5ab596['sent']();return[0x4,new Promise(function(_0x4dae91){return setTimeout(_0x4dae91,0x1e);})];case 0x3:_0x5ab596['sent']();_0x55564a!==null&&writeEventToStreamAndClose(_0x27c335,_0x55564a);!_0x8309e4&&(_0x8309e4=process[_0x302b20(0x201)]);!_0x4b0ce5&&(_0x4b0ce5=process[_0x302b20(0x1e9)]);_0x415992?_0x1e87e8[_0x302b20(0x1ac)][_0x302b20(0x204)](_0x27c335,_0x8309e4,_0x4b0ce5):_0x1e87e8[_0x302b20(0x1ac)]['demuxStream'](_0x27c335,dev_null_1[_0x302b20(0x1e4)](),_0x4b0ce5);return[0x4,waitForExec(_0x30cb39)];case 0x4:return[0x2,_0x5ab596['sent']()];}});});}}];}});});}exports[a14_0x2a81c9(0x14a)]=startContainer;function waitForExec(_0x151f2c){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x37ae5f){switch(_0x37ae5f['label']){case 0x0:return[0x4,new Promise(function(_0x595356,_0x4382f1){function _0x3b0892(){var _0x18dfbc=a14_0x1a4f;_0x151f2c[_0x18dfbc(0x14d)](function(_0x269002,_0x1a61dd){var _0x144ebb=_0x18dfbc;if(_0x1a61dd[_0x144ebb(0x1b3)]){setTimeout(_0x3b0892,0x64);return;}if(_0x269002)_0x4382f1(_0x269002);else _0x1a61dd[_0x144ebb(0x18b)]!==0x0?_0x4382f1(_0x1a61dd[_0x144ebb(0x198)][_0x144ebb(0x18f)]+_0x144ebb(0x125)+_0x1a61dd[_0x144ebb(0x18b)]):_0x595356(_0x1a61dd['ExitCode']);});}_0x3b0892();})];case 0x1:return[0x2,_0x37ae5f['sent']()];}});});}function run(_0x54ff3e,_0x427fec,_0x32e34f,_0x14e61b,_0x432e75){return _0x432e75===void 0x0&&(_0x432e75={}),__awaiter(this,void 0x0,void 0x0,function(){var _0x1bf3e7,_0x22e0c6,_0x7a263e,_0x4430a5;return __generator(this,function(_0x42df8b){var _0x6c8043=a14_0x1a4f;switch(_0x42df8b['label']){case 0x0:return[0x4,runContainer(_0x54ff3e,_0x32e34f,_0x14e61b,_0x432e75)];case 0x1:_0x1bf3e7=_0x42df8b[_0x6c8043(0x123)](),_0x22e0c6=_0x1bf3e7['container'],_0x7a263e=_0x1bf3e7[_0x6c8043(0x144)],writeEventToStreamAndClose(_0x7a263e,_0x427fec);return[0x4,_0x22e0c6[_0x6c8043(0x1dc)]()];case 0x2:_0x4430a5=_0x42df8b['sent'](),containers[_0x6c8043(0x146)](_0x22e0c6['id']),streams['delete'](_0x7a263e);return[0x2,_0x4430a5];}});});}exports[a14_0x2a81c9(0x1bb)]=run;function stopContainer(_0x2b81e5){return __awaiter(this,void 0x0,void 0x0,function(){var _0xdf5213,_0x3d272a,_0x345918;return __generator(this,function(_0x3f9073){var _0x1d7e8d=a14_0x1a4f;switch(_0x3f9073['label']){case 0x0:_0xdf5213=core['spinner'](_0x1d7e8d(0x13e)+_0x2b81e5['id']),_0x3f9073[_0x1d7e8d(0x1b5)]=0x1;case 0x1:_0x3f9073[_0x1d7e8d(0x172)][_0x1d7e8d(0x203)]([0x1,0x3,,0x8]);return[0x4,_0x2b81e5[_0x1d7e8d(0x1fd)]()];case 0x2:_0x3f9073[_0x1d7e8d(0x123)](),_0xdf5213[_0x1d7e8d(0x1fe)](_0x1d7e8d(0x141));return[0x3,0x8];case 0x3:_0x3d272a=_0x3f9073[_0x1d7e8d(0x123)](),_0xdf5213['fail'](_0x1d7e8d(0x124)),logger_1[_0x1d7e8d(0x1e4)]['debug'](_0x1d7e8d(0x1f3)+_0x2b81e5['id']+_0x1d7e8d(0x1bf)+_0x3d272a),_0xdf5213=core['spinner']('Killing\x20the\x20container:\x20'+_0x2b81e5['id']),_0x3f9073[_0x1d7e8d(0x1b5)]=0x4;case 0x4:_0x3f9073[_0x1d7e8d(0x172)][_0x1d7e8d(0x203)]([0x4,0x6,,0x7]);return[0x4,_0x2b81e5[_0x1d7e8d(0x166)]()];case 0x5:_0x3f9073['sent'](),_0xdf5213[_0x1d7e8d(0x1fe)]('Kill\x20container\x20succeed');return[0x3,0x7];case 0x6:_0x345918=_0x3f9073['sent'](),_0xdf5213[_0x1d7e8d(0x16b)](_0x1d7e8d(0x154)),logger_1['default'][_0x1d7e8d(0x1d2)](_0x1d7e8d(0x138)+_0x2b81e5['id']+_0x1d7e8d(0x1bf)+_0x345918);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x2];}});});}exports[a14_0x2a81c9(0x15c)]=stopContainer;