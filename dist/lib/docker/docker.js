'use strict';var a14_0x7ad7=['971907HvnZsH','trys','__generator','info','--event-decode','invalid\x20mount\x20config\x20for\x20type','status','Stopping\x20container:\x20','assign','dev-null','handler','errorStream','--event','debug','aux.ID','./docker-support','throw','sent','Source','delete','__awaiter','return','/////////////////\x20config\x20begin\x20/////////////////','demuxStream','progress','stream','512831KyoFxL','You\x20can\x20paste\x20these\x20config\x20to\x20.vscode/launch.json,\x20and\x20then\x20attach\x20to\x20your\x20running\x20function','resolveNasConfigToMounts','logConfig','Labels',',\x20stdoutToServer=True,\x20stderrToServer=True)\x0a\x0a=========================================================================\x0a','bind','\x0aWe\x20detected\x20that\x20your\x20docker\x20version\x20is\x20','Cmd','draftlog','call','create','Killing\x20the\x20container:\x20','from','split','listImages','error','/tmp','fs-extra','imageExist','ExitCode','detectDockerVersion','\x20failed,\x20error:\x20','initializationTimeout','fail','wait','../../common/logger','Stop\x20container\x20succeed.','Killing\x20container:\x20','../utils/passwd','1174473YIqINh','__setModuleDefault','has','resolveImageNameForPull','done','yellow','Starting\x20docker\x20pull\x20','\x27,\x20port=','runContainer','memorySize','log','/code','../local-invoke/nas','lstat','isDirectory','ops','write','iterator','22565xIkVSC','parse','../local-invoke/debug','args','resolveDockerEnv','slice','project','Target','push','resolve','hasOwnProperty','start','Please\x20add\x20directory\x20\x27','inspect','\x20exited\x20with\x20code\x20','verbose','createAndRunContainer','284nGKwwA','generateFunctionEnvs','resolveTmpDirToMount','exec','environmentVariables','generateRamdomContainerName','../definition','runtime','aux','generatePwdFile','add','showDebugIdeTipsForPycharm','timeout','--server','drive\x20is\x20not\x20shared','Stopping\x20the\x20container:\x20','createContainer','resolveDebuggerPathToMount','pop','More\x20information\x20please\x20refer\x20to\x20https://docs.docker.com/docker-for-windows/#shared-drives','stop','logs','/etc/passwd','followProgress','isDockerToolBoxAndEnsureDockerVersion','defineProperty','stderr','reduce','=/code\x0a\x0aDebug\x20Code\x20needed\x20to:\x0a\x201.\x20Install\x20pydevd-pycharm:\x0a\x20\x0a\x20pip\x20install\x20pydevd-pycharm~=203.5981.165\x0a\x20\x0a\x202.\x20copy\x20to\x20your\x20function\x20code:\x0a\x0aimport\x20pydevd_pycharm\x0apydevd_pycharm.settrace(\x27','AccountID','../error-processor','platform','run','command','\x27docker\x20pull\x20','kill','base64','1125761qKgsKx','pull','linux','isCustomContainerRuntime','filter','/tmp/debugger_files','./docker-opts','findPathsOutofSharedPaths',',\x20for\x20a\x20better\x20experience,\x20please\x20upgrade\x20the\x20docker\x20version.','ServerVersion','...','Running','stdout','length','--stdin','default','pullImage','isAutoConfig','customContainerConfig','indexOf','next','\x0aPath\x20mappings\x20\x20:\x20','generateDockerEnvs','stopContainer','../local-invoke/env','serviceName','2RTFbfa','Mounts','label','succeed','toString','ProcessConfig','parseInt','darwin','message','/////////////////\x20config\x20end\x20/////////////////','../devs','functionName','join','Stop\x20the\x20container:\x20','HostConfig','resolveLibPathsFromLdConf','value','processorTransformFactory','__importDefault','SecurityToken','The\x20default\x20host\x20machine\x20path\x20for\x20docker\x20toolbox\x20is\x20under\x20\x27C:\x5cUsers\x27,\x20Please\x20make\x20sure\x20your\x20project\x20is\x20in\x20this\x20directory.\x20If\x20you\x20want\x20to\x20mount\x20other\x20disk\x20paths,\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md\x20.','cwd','Kill\x20container\x20succeed','modem','posix','getRootBaseDir','1590772jdPyHQ','resolvePasswdMount','logstore','AccessKeySecret','virtualbox','pullImageIfNeed','draft','getImage','Failed\x20to\x20stop\x20the\x20container.','Generator\x20is\x20already\x20executing.','generateDockerCmd','map','function','end',',\x20you\x20can\x20also\x20use\x20','container','into','__esModule','addEnv','win32','resolveCodeUriToMount','remoteNasDir','dirname','DOCKER_REGISTRIES','--http','AccessKeyID','438318IdeEFe','substr','pullFcImageIfNeed','basename','showDebugIdeTipsForVscode','../utils/runtime','docker\x20cmd:\x20','provider'];var a14_0x2b5909=a14_0x4f86;(function(_0xdcf44,_0x5a58ae){var _0x4c2aa7=a14_0x4f86;while(!![]){try{var _0x133fe8=parseInt(_0x4c2aa7(0xf6))+-parseInt(_0x4c2aa7(0xdc))+parseInt(_0x4c2aa7(0x118))*-parseInt(_0x4c2aa7(0xc2))+-parseInt(_0x4c2aa7(0xfe))+-parseInt(_0x4c2aa7(0x17e))+-parseInt(_0x4c2aa7(0x136))+parseInt(_0x4c2aa7(0x159))*parseInt(_0x4c2aa7(0x148));if(_0x133fe8===_0x5a58ae)break;else _0xdcf44['push'](_0xdcf44['shift']());}catch(_0x1e271b){_0xdcf44['push'](_0xdcf44['shift']());}}}(a14_0x7ad7,0xe9efb));var __createBinding=this&&this['__createBinding']||(Object[a14_0x2b5909(0x123)]?function(_0x248fda,_0x2cd066,_0x2b8a2e,_0x20dda6){var _0x8477d0=a14_0x2b5909;if(_0x20dda6===undefined)_0x20dda6=_0x2b8a2e;Object[_0x8477d0(0x172)](_0x248fda,_0x20dda6,{'enumerable':!![],'get':function(){return _0x2cd066[_0x2b8a2e];}});}:function(_0x50bafa,_0x2a3f53,_0xe8e9e5,_0x14859c){if(_0x14859c===undefined)_0x14859c=_0xe8e9e5;_0x50bafa[_0x14859c]=_0x2a3f53[_0xe8e9e5];}),__setModuleDefault=this&&this[a14_0x2b5909(0x137)]||(Object[a14_0x2b5909(0x123)]?function(_0x231016,_0x43b358){var _0x59ffa9=a14_0x2b5909;Object[_0x59ffa9(0x172)](_0x231016,_0x59ffa9(0xb7),{'enumerable':!![],'value':_0x43b358});}:function(_0x5d214f,_0x455945){var _0x51b229=a14_0x2b5909;_0x5d214f[_0x51b229(0xb7)]=_0x455945;}),__importStar=this&&this['__importStar']||function(_0x21b6a5){var _0x1079e1=a14_0x2b5909;if(_0x21b6a5&&_0x21b6a5[_0x1079e1(0xed)])return _0x21b6a5;var _0x592584={};if(_0x21b6a5!=null){for(var _0x37b050 in _0x21b6a5)if(_0x37b050!==_0x1079e1(0xb7)&&Object[_0x1079e1(0x152)]['call'](_0x21b6a5,_0x37b050))__createBinding(_0x592584,_0x21b6a5,_0x37b050);}return __setModuleDefault(_0x592584,_0x21b6a5),_0x592584;},__awaiter=this&&this[a14_0x2b5909(0x112)]||function(_0x2b8362,_0x2c6cc2,_0x2d3e2d,_0x4dbf84){function _0x2c5408(_0x3f025c){return _0x3f025c instanceof _0x2d3e2d?_0x3f025c:new _0x2d3e2d(function(_0x450e2d){_0x450e2d(_0x3f025c);});}return new(_0x2d3e2d||(_0x2d3e2d=Promise))(function(_0x4fb426,_0x13045e){var _0x1ad0b4=a14_0x4f86;function _0xfb9de9(_0x2393b2){var _0x26e686=a14_0x4f86;try{_0x36de83(_0x4dbf84[_0x26e686(0xbc)](_0x2393b2));}catch(_0x36ee0b){_0x13045e(_0x36ee0b);}}function _0x48a9a3(_0x266bcf){var _0x29fed4=a14_0x4f86;try{_0x36de83(_0x4dbf84[_0x29fed4(0x10e)](_0x266bcf));}catch(_0x3d99ff){_0x13045e(_0x3d99ff);}}function _0x36de83(_0x547e3f){var _0x3e5535=a14_0x4f86;_0x547e3f['done']?_0x4fb426(_0x547e3f[_0x3e5535(0xd2)]):_0x2c5408(_0x547e3f[_0x3e5535(0xd2)])['then'](_0xfb9de9,_0x48a9a3);}_0x36de83((_0x4dbf84=_0x4dbf84['apply'](_0x2b8362,_0x2c6cc2||[]))[_0x1ad0b4(0xbc)]());});},__generator=this&&this[a14_0x2b5909(0x100)]||function(_0x271f84,_0xd9a02c){var _0x4cbc6b=a14_0x2b5909,_0x4f0ccd={'label':0x0,'sent':function(){if(_0x13be5f[0x0]&0x1)throw _0x13be5f[0x1];return _0x13be5f[0x1];},'trys':[],'ops':[]},_0x596ebd,_0x201f3b,_0x13be5f,_0x4382cf;return _0x4382cf={'next':_0x445471(0x0),'throw':_0x445471(0x1),'return':_0x445471(0x2)},typeof Symbol===_0x4cbc6b(0xe8)&&(_0x4382cf[Symbol[_0x4cbc6b(0x147)]]=function(){return this;}),_0x4382cf;function _0x445471(_0x33cecb){return function(_0xc3af1c){return _0x51516f([_0x33cecb,_0xc3af1c]);};}function _0x51516f(_0x4950d7){var _0x506e71=_0x4cbc6b;if(_0x596ebd)throw new TypeError(_0x506e71(0xe5));while(_0x4f0ccd)try{if(_0x596ebd=0x1,_0x201f3b&&(_0x13be5f=_0x4950d7[0x0]&0x2?_0x201f3b[_0x506e71(0x113)]:_0x4950d7[0x0]?_0x201f3b[_0x506e71(0x10e)]||((_0x13be5f=_0x201f3b[_0x506e71(0x113)])&&_0x13be5f[_0x506e71(0x122)](_0x201f3b),0x0):_0x201f3b[_0x506e71(0xbc)])&&!(_0x13be5f=_0x13be5f[_0x506e71(0x122)](_0x201f3b,_0x4950d7[0x1]))[_0x506e71(0x13a)])return _0x13be5f;if(_0x201f3b=0x0,_0x13be5f)_0x4950d7=[_0x4950d7[0x0]&0x2,_0x13be5f[_0x506e71(0xd2)]];switch(_0x4950d7[0x0]){case 0x0:case 0x1:_0x13be5f=_0x4950d7;break;case 0x4:_0x4f0ccd[_0x506e71(0xc4)]++;return{'value':_0x4950d7[0x1],'done':![]};case 0x5:_0x4f0ccd['label']++,_0x201f3b=_0x4950d7[0x1],_0x4950d7=[0x0];continue;case 0x7:_0x4950d7=_0x4f0ccd[_0x506e71(0x145)][_0x506e71(0x16b)](),_0x4f0ccd[_0x506e71(0xff)]['pop']();continue;default:if(!(_0x13be5f=_0x4f0ccd['trys'],_0x13be5f=_0x13be5f[_0x506e71(0xb5)]>0x0&&_0x13be5f[_0x13be5f[_0x506e71(0xb5)]-0x1])&&(_0x4950d7[0x0]===0x6||_0x4950d7[0x0]===0x2)){_0x4f0ccd=0x0;continue;}if(_0x4950d7[0x0]===0x3&&(!_0x13be5f||_0x4950d7[0x1]>_0x13be5f[0x0]&&_0x4950d7[0x1]<_0x13be5f[0x3])){_0x4f0ccd[_0x506e71(0xc4)]=_0x4950d7[0x1];break;}if(_0x4950d7[0x0]===0x6&&_0x4f0ccd[_0x506e71(0xc4)]<_0x13be5f[0x1]){_0x4f0ccd['label']=_0x13be5f[0x1],_0x13be5f=_0x4950d7;break;}if(_0x13be5f&&_0x4f0ccd[_0x506e71(0xc4)]<_0x13be5f[0x2]){_0x4f0ccd['label']=_0x13be5f[0x2],_0x4f0ccd['ops'][_0x506e71(0x150)](_0x4950d7);break;}if(_0x13be5f[0x2])_0x4f0ccd[_0x506e71(0x145)][_0x506e71(0x16b)]();_0x4f0ccd['trys'][_0x506e71(0x16b)]();continue;}_0x4950d7=_0xd9a02c[_0x506e71(0x122)](_0x271f84,_0x4f0ccd);}catch(_0x4a36a6){_0x4950d7=[0x6,_0x4a36a6],_0x201f3b=0x0;}finally{_0x596ebd=_0x13be5f=0x0;}if(_0x4950d7[0x0]&0x5)throw _0x4950d7[0x1];return{'value':_0x4950d7[0x0]?_0x4950d7[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this['__spreadArrays']||function(){var _0x419812=a14_0x2b5909;for(var _0x15d304=0x0,_0x14ab23=0x0,_0x48cb5d=arguments[_0x419812(0xb5)];_0x14ab23<_0x48cb5d;_0x14ab23++)_0x15d304+=arguments[_0x14ab23][_0x419812(0xb5)];for(var _0xfeb94a=Array(_0x15d304),_0x3ee6dc=0x0,_0x14ab23=0x0;_0x14ab23<_0x48cb5d;_0x14ab23++)for(var _0x577d88=arguments[_0x14ab23],_0x4d0082=0x0,_0x7592d9=_0x577d88[_0x419812(0xb5)];_0x4d0082<_0x7592d9;_0x4d0082++,_0x3ee6dc++)_0xfeb94a[_0x3ee6dc]=_0x577d88[_0x4d0082];return _0xfeb94a;},__importDefault=this&&this[a14_0x2b5909(0xd4)]||function(_0x48c879){var _0x3b5c78=a14_0x2b5909;return _0x48c879&&_0x48c879[_0x3b5c78(0xed)]?_0x48c879:{'default':_0x48c879};};Object[a14_0x2b5909(0x172)](exports,a14_0x2b5909(0xed),{'value':!![]}),exports[a14_0x2b5909(0xbf)]=exports[a14_0x2b5909(0x179)]=exports['startContainer']=exports['showDebugIdeTipsForPycharm']=exports[a14_0x2b5909(0xfa)]=exports[a14_0x2b5909(0x158)]=exports[a14_0x2b5909(0xdd)]=exports[a14_0x2b5909(0x16a)]=exports[a14_0x2b5909(0x15b)]=exports['resolveNasConfigToMounts']=exports['detectDockerVersion']=exports['isDockerToolBoxAndEnsureDockerVersion']=exports[a14_0x2b5909(0xf0)]=exports[a14_0x2b5909(0x13e)]=exports[a14_0x2b5909(0xb8)]=exports['pullFcImageIfNeed']=exports[a14_0x2b5909(0x15a)]=exports[a14_0x2b5909(0xbe)]=exports[a14_0x2b5909(0xe6)]=exports['pullImageIfNeed']=exports['generateRamdomContainerName']=exports[a14_0x2b5909(0x12b)]=void 0x0;function a14_0x4f86(_0x4db4fa,_0x1a5199){return a14_0x4f86=function(_0x7ad725,_0x4f8685){_0x7ad725=_0x7ad725-0xb2;var _0x4a281b=a14_0x7ad7[_0x7ad725];return _0x4a281b;},a14_0x4f86(_0x4db4fa,_0x1a5199);}var dockerode_1=__importDefault(require('dockerode')),logger_1=__importDefault(require(a14_0x2b5909(0x132))),draftlog=__importStar(require(a14_0x2b5909(0x121))),docker_support_1=require(a14_0x2b5909(0x10d)),error_processor_1=require(a14_0x2b5909(0x177)),lodash_1=__importDefault(require('lodash')),nas=__importStar(require(a14_0x2b5909(0x142))),path_1=__importDefault(require('path')),devs_1=require(a14_0x2b5909(0xcc)),fs=__importStar(require(a14_0x2b5909(0x12a))),passwd_1=require(a14_0x2b5909(0x135)),dockerOpts=__importStar(require(a14_0x2b5909(0x184))),debug_1=require(a14_0x2b5909(0x14a)),ip=__importStar(require('ip')),env_1=require(a14_0x2b5909(0xc0)),runtime_1=require(a14_0x2b5909(0xfb)),definition_1=require(a14_0x2b5909(0x15f)),devnull=__importStar(require(a14_0x2b5909(0x107))),core=__importStar(require('@serverless-devs/core')),isWin=process[a14_0x2b5909(0x178)]==='win32',docker=new dockerode_1[(a14_0x2b5909(0xb7))]();draftlog[a14_0x2b5909(0xec)](console);var containers=new Set(),streams=new Set(),skipPullImage=!![];function imageExist(_0x480c12){return __awaiter(this,void 0x0,void 0x0,function(){var _0x139a30;return __generator(this,function(_0x6bcb4){var _0x6a8f73=a14_0x4f86;switch(_0x6bcb4[_0x6a8f73(0xc4)]){case 0x0:return[0x4,docker[_0x6a8f73(0x127)]({'filters':{'reference':[_0x480c12]}})];case 0x1:_0x139a30=_0x6bcb4[_0x6a8f73(0x10f)]();return[0x2,_0x139a30[_0x6a8f73(0xb5)]>0x0];}});});}exports[a14_0x2b5909(0x12b)]=imageExist;function generateRamdomContainerName(){var _0x3edbc1=a14_0x2b5909;return'fc_local_'+new Date()['getTime']()+'_'+Math['random']()[_0x3edbc1(0xc6)](0x24)[_0x3edbc1(0xf7)](0x2,0x7);}exports[a14_0x2b5909(0x15e)]=generateRamdomContainerName;function pullImageIfNeed(_0x548115,_0x4a847d,_0x234968,_0x2c3081){return __awaiter(this,void 0x0,void 0x0,function(){var _0x163939,_0x348d3c;return __generator(this,function(_0x3ea646){var _0x4fa4f2=a14_0x4f86;switch(_0x3ea646[_0x4fa4f2(0xc4)]){case 0x0:_0x163939=_0x548115+'/'+_0x4a847d+'/'+_0x234968+':'+_0x2c3081,logger_1['default']['debug']('Proxy\x20image\x20url:\x20'+_0x163939);return[0x4,imageExist(_0x163939)];case 0x1:if(!!_0x3ea646[_0x4fa4f2(0x10f)]())return[0x3,0x3];logger_1[_0x4fa4f2(0xb7)]['debug'](_0x4fa4f2(0x13c)+_0x163939);return[0x4,docker['pull'](_0x163939)];case 0x2:_0x348d3c=_0x3ea646[_0x4fa4f2(0x10f)](),_0x3ea646[_0x4fa4f2(0xc4)]=0x3;case 0x3:return[0x4,new Promise(function(_0x4982ed,_0x101be5){var _0x4b5f50=_0x4fa4f2;if(_0x348d3c){var _0x3df55f=function(_0x5c47a4){_0x5c47a4&&_0x101be5(_0x5c47a4),_0x4982ed(_0x163939);},_0x44a191={},_0x5421bd=function(_0x5b8685){var _0x1c850e=a14_0x4f86,_0x59964f=_0x5b8685['status'];_0x5b8685['progress']&&(_0x59964f=_0x5b8685['status']+'\x20'+_0x5b8685[_0x1c850e(0x116)]);if(_0x5b8685['id']){var _0x191397=_0x5b8685['id'];!_0x44a191[_0x191397]&&(_0x44a191[_0x191397]=console[_0x1c850e(0xe2)]()),_0x44a191[_0x191397](_0x191397+':\x20'+_0x59964f);}else{lodash_1[_0x1c850e(0xb7)][_0x1c850e(0x138)](_0x5b8685,'aux.ID')&&(_0x5b8685[_0x1c850e(0x117)]=_0x5b8685[_0x1c850e(0x161)]['ID']+'\x0a');var _0x34a5cd=_0x5b8685[_0x1c850e(0x104)]?_0x5b8685['status']+'\x0a':_0x5b8685[_0x1c850e(0x117)];process[_0x1c850e(0xb4)][_0x1c850e(0x146)](_0x34a5cd);}};docker[_0x4b5f50(0xd9)]['followProgress'](_0x348d3c,_0x3df55f,_0x5421bd);}else _0x4982ed(_0x163939);})];case 0x4:return[0x2,_0x3ea646[_0x4fa4f2(0x10f)]()];}});});}exports[a14_0x2b5909(0xe1)]=pullImageIfNeed;function generateDockerCmd(_0x25f9e9,_0x1d6a28,_0x33a036,_0x24b040,_0x8f2cd8,_0x4005d9){var _0x186365=a14_0x2b5909;_0x8f2cd8===void 0x0&&(_0x8f2cd8=!![]);_0x4005d9===void 0x0&&(_0x4005d9=null);if(runtime_1[_0x186365(0x181)](_0x25f9e9))return genDockerCmdOfCustomContainer(_0x33a036);else{if(_0x1d6a28)return[_0x186365(0x166)];}return genDockerCmdOfNonCustomContainer(_0x33a036,_0x24b040,_0x8f2cd8,_0x4005d9);}exports['generateDockerCmd']=generateDockerCmd;function genDockerCmdOfNonCustomContainer(_0xdd8955,_0x46a2c1,_0x4f7ac8,_0x119ead){var _0x566787=a14_0x2b5909;_0x4f7ac8===void 0x0&&(_0x4f7ac8=!![]);_0x119ead===void 0x0&&(_0x119ead=null);var _0x1209e0=['-h',_0xdd8955[_0x566787(0x108)]];_0x119ead!==null?(_0x1209e0[_0x566787(0x150)](_0x566787(0x10a),Buffer[_0x566787(0x125)](_0x119ead)['toString'](_0x566787(0x17d))),_0x1209e0[_0x566787(0x150)](_0x566787(0x102))):_0x1209e0['push'](_0x566787(0xb6));_0x46a2c1&&_0x1209e0[_0x566787(0x150)](_0x566787(0xf4));var _0x132736=_0xdd8955['initializer'];_0x132736&&_0x4f7ac8&&_0x1209e0[_0x566787(0x150)]('-i',_0x132736);var _0x44d266=_0xdd8955['initializationTimeout'];return _0x44d266&&_0x1209e0[_0x566787(0x150)]('--initializationTimeout',_0x44d266[_0x566787(0xc6)]()),logger_1[_0x566787(0xb7)][_0x566787(0x10b)](_0x566787(0xfc)+_0x1209e0),_0x1209e0;}function genDockerCmdOfCustomContainer(_0x2fd626){var _0x2b70d1=a14_0x2b5909,_0x4c543d=_0x2fd626[_0x2b70d1(0xba)]['command']?JSON[_0x2b70d1(0x149)](_0x2fd626[_0x2b70d1(0xba)][_0x2b70d1(0x17a)]):undefined,_0x1f4cb8=_0x2fd626['customContainerConfig']['args']?JSON[_0x2b70d1(0x149)](_0x2fd626[_0x2b70d1(0xba)][_0x2b70d1(0x14b)]):undefined;if(_0x4c543d&&_0x1f4cb8)return __spreadArrays(_0x4c543d,_0x1f4cb8);else{if(_0x4c543d)return _0x4c543d;else{if(_0x1f4cb8)return _0x1f4cb8;}}return[];}function generateDockerEnvs(_0x3936b4,_0x504d20,_0x478dbd,_0x760a7a,_0x3c721a,_0x409aaa,_0x16163e,_0x26c064,_0x2bf987,_0xbcae1d,_0x431806,_0x2fd579){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1e4ae9,_0x3d034f,_0x1d9572,_0x58cbba,_0x33263b;return __generator(this,function(_0x42ab26){var _0xb9d1f2=a14_0x4f86;switch(_0x42ab26['label']){case 0x0:_0x1e4ae9={};_0x2bf987&&Object['assign'](_0x1e4ae9,{'FC_HTTP_PARAMS':_0x2bf987});return[0x4,env_1[_0xb9d1f2(0xd1)](_0x478dbd,_0x16163e['codeUri'])];case 0x1:_0x3d034f=_0x42ab26[_0xb9d1f2(0x10f)](),Object['assign'](_0x1e4ae9,_0x3d034f),_0x1d9572=_0x16163e[_0xb9d1f2(0x160)];if(_0x26c064&&!_0x2fd579)_0x58cbba=debug_1['generateDebugEnv'](_0x1d9572,_0x26c064,_0x431806),Object[_0xb9d1f2(0x106)](_0x1e4ae9,_0x58cbba);else _0x2fd579&&Object[_0xb9d1f2(0x106)](_0x1e4ae9,{'DEBUG_OPTIONS':_0x2fd579});Object['assign'](_0x1e4ae9,generateFunctionEnvs(_0x16163e));definition_1[_0xb9d1f2(0xb9)](_0x3c721a===null||_0x3c721a===void 0x0?void 0x0:_0x3c721a[_0xb9d1f2(0x11b)])?_0x33263b=definition_1['resolveAutoLogConfig'](_0x3936b4===null||_0x3936b4===void 0x0?void 0x0:_0x3936b4['AccountID'],_0x504d20,_0x760a7a):_0x33263b=_0x3c721a===null||_0x3c721a===void 0x0?void 0x0:_0x3c721a['logConfig'];(_0x16163e===null||_0x16163e===void 0x0?void 0x0:_0x16163e[_0xb9d1f2(0x160)]['includes']('java'))&&Object['assign'](_0x1e4ae9,{'fc_enable_new_java_ca':!![]});Object[_0xb9d1f2(0x106)](_0x1e4ae9,{'local':!![],'FC_ACCESS_KEY_ID':_0x3936b4===null||_0x3936b4===void 0x0?void 0x0:_0x3936b4[_0xb9d1f2(0xf5)],'FC_ACCESS_KEY_SECRET':_0x3936b4===null||_0x3936b4===void 0x0?void 0x0:_0x3936b4[_0xb9d1f2(0xdf)],'FC_SECURITY_TOKEN':_0x3936b4===null||_0x3936b4===void 0x0?void 0x0:_0x3936b4[_0xb9d1f2(0xd5)],'FC_ACCOUNT_ID':_0x3936b4===null||_0x3936b4===void 0x0?void 0x0:_0x3936b4[_0xb9d1f2(0x176)],'FC_REGION':_0x504d20,'FC_FUNCTION_NAME':_0x409aaa,'FC_HANDLER':_0x16163e['handler'],'FC_MEMORY_SIZE':_0x16163e[_0xb9d1f2(0x13f)]||0x80,'FC_TIMEOUT':_0x16163e[_0xb9d1f2(0x165)]||0x3,'FC_INITIALIZER':_0x16163e['initializer'],'FC_INITIALIZATION_TIMEOUT':_0x16163e[_0xb9d1f2(0x12f)]||0x3,'FC_SERVICE_NAME':_0x760a7a,'FC_SERVICE_LOG_PROJECT':_0x33263b===null||_0x33263b===void 0x0?void 0x0:_0x33263b[_0xb9d1f2(0x14e)],'FC_SERVICE_LOG_STORE':_0x33263b===null||_0x33263b===void 0x0?void 0x0:_0x33263b[_0xb9d1f2(0xde)]});if(runtime_1[_0xb9d1f2(0x181)](_0x16163e['runtime']))return[0x2,_0x1e4ae9];return[0x2,env_1[_0xb9d1f2(0xee)](_0x1e4ae9,_0xbcae1d)];}});});}exports['generateDockerEnvs']=generateDockerEnvs;function generateFunctionEnvs(_0x113943){var _0x39e9d3=a14_0x2b5909,_0x2d35c5=_0x113943[_0x39e9d3(0x15d)];if(!_0x2d35c5)return{};return Object[_0x39e9d3(0x106)]({},_0x2d35c5);}exports['generateFunctionEnvs']=generateFunctionEnvs;function pullFcImageIfNeed(_0x1d64dd){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3a1027;return __generator(this,function(_0x117a04){var _0x1f1b7b=a14_0x4f86;switch(_0x117a04[_0x1f1b7b(0xc4)]){case 0x0:return[0x4,imageExist(_0x1d64dd)];case 0x1:_0x3a1027=_0x117a04[_0x1f1b7b(0x10f)]();if(!(!_0x3a1027||!skipPullImage))return[0x3,0x3];return[0x4,pullImage(_0x1d64dd)];case 0x2:_0x117a04[_0x1f1b7b(0x10f)]();return[0x3,0x4];case 0x3:logger_1[_0x1f1b7b(0xb7)][_0x1f1b7b(0x10b)]('skip\x20pulling\x20image\x20'+_0x1d64dd+_0x1f1b7b(0xb2)),logger_1[_0x1f1b7b(0xb7)][_0x1f1b7b(0x101)]('Skip\x20pulling\x20image\x20'+_0x1d64dd+_0x1f1b7b(0xb2)),_0x117a04[_0x1f1b7b(0xc4)]=0x4;case 0x4:return[0x2];}});});}exports[a14_0x2b5909(0xf8)]=pullFcImageIfNeed;function pullImage(_0x4fa810){return __awaiter(this,void 0x0,void 0x0,function(){var _0xe8e217,_0x5d92f7,_0xf5f2f=this;return __generator(this,function(_0x45c5b4){var _0x101674=a14_0x4f86;switch(_0x45c5b4[_0x101674(0xc4)]){case 0x0:return[0x4,dockerOpts[_0x101674(0x139)](_0x4fa810)];case 0x1:_0xe8e217=_0x45c5b4[_0x101674(0x10f)]();return[0x4,docker[_0x101674(0x17f)](_0xe8e217)];case 0x2:_0x5d92f7=_0x45c5b4[_0x101674(0x10f)]();return[0x4,new Promise(function(_0x48f680,_0x5aff0d){var _0xbffc00=_0x101674;logger_1[_0xbffc00(0xb7)]['info']('Pulling\x20image\x20'+_0xe8e217+_0xbffc00(0xea)+(_0xbffc00(0x17b)+_0xe8e217+'\x27')+'\x20to\x20pull\x20image\x20by\x20yourself.');var _0x24bb99=function(_0x58e912){return __awaiter(_0xf5f2f,void 0x0,void 0x0,function(){var _0x50719a,_0x15c75a,_0x351831,_0x358cbc,_0x40091c,_0x414499;return __generator(this,function(_0x391f09){var _0x10a433=a14_0x4f86;switch(_0x391f09[_0x10a433(0xc4)]){case 0x0:_0x58e912&&_0x5aff0d(_0x58e912);containers[_0x10a433(0x111)](_0x5d92f7),(_0x50719a=0x0,_0x15c75a=dockerOpts[_0x10a433(0xf3)]),_0x391f09[_0x10a433(0xc4)]=0x1;case 0x1:if(!(_0x50719a<_0x15c75a[_0x10a433(0xb5)]))return[0x3,0x5];_0x351831=_0x15c75a[_0x50719a];if(!(_0xe8e217[_0x10a433(0xbb)](_0x351831)===0x0))return[0x3,0x4];return[0x4,docker[_0x10a433(0xe3)](_0xe8e217)];case 0x2:_0x358cbc=_0x391f09[_0x10a433(0x10f)](),_0x40091c=_0xe8e217[_0x10a433(0x14d)](_0x351831[_0x10a433(0xb5)]+0x1),_0x414499=_0x40091c[_0x10a433(0x126)](':');return[0x4,_0x358cbc['tag']({'name':_0xe8e217,'repo':lodash_1['default']['first'](_0x414499),'tag':lodash_1[_0x10a433(0xb7)]['last'](_0x414499)})];case 0x3:_0x391f09[_0x10a433(0x10f)]();return[0x3,0x5];case 0x4:_0x50719a++;return[0x3,0x1];case 0x5:_0x48f680(_0xe8e217);return[0x2];}});});};containers[_0xbffc00(0x163)](_0x5d92f7),followProgress(_0x5d92f7,_0x24bb99);})];case 0x3:return[0x2,_0x45c5b4[_0x101674(0x10f)]()];}});});}exports[a14_0x2b5909(0xb8)]=pullImage;function followProgress(_0x344433,_0x45fdb6){var _0x3edf90=a14_0x2b5909,_0x395e36={},_0x2102aa=function(_0xab2fe7){var _0x4250a6=a14_0x4f86,_0x251012=_0xab2fe7[_0x4250a6(0x104)];_0xab2fe7['progress']&&(_0x251012=_0xab2fe7[_0x4250a6(0x104)]+'\x20'+_0xab2fe7[_0x4250a6(0x116)]);if(_0xab2fe7['id']){var _0x243bac=_0xab2fe7['id'];!_0x395e36[_0x243bac]&&(_0x395e36[_0x243bac]=console[_0x4250a6(0xe2)]()),_0x395e36[_0x243bac](_0x243bac+':\x20'+_0x251012);}else{lodash_1[_0x4250a6(0xb7)][_0x4250a6(0x138)](_0xab2fe7,_0x4250a6(0x10c))&&(_0xab2fe7[_0x4250a6(0x117)]=_0xab2fe7[_0x4250a6(0x161)]['ID']+'\x0a');var _0x1d993b=_0xab2fe7[_0x4250a6(0x104)]?_0xab2fe7[_0x4250a6(0x104)]+'\x0a':_0xab2fe7[_0x4250a6(0x117)];process['stdout'][_0x4250a6(0x146)](_0x1d993b);}};docker[_0x3edf90(0xd9)][_0x3edf90(0x170)](_0x344433,_0x45fdb6,_0x2102aa);}function runContainer(_0x59d74c,_0x179849,_0x5d3a3c,_0x3c6f6a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x50b43a,_0x4b9ba2,_0x631010,_0x2cf11b,_0x1f75f7;return __generator(this,function(_0x898cdb){var _0x4e9ed4=a14_0x4f86;switch(_0x898cdb[_0x4e9ed4(0xc4)]){case 0x0:return[0x4,createContainer(_0x59d74c)];case 0x1:_0x50b43a=_0x898cdb[_0x4e9ed4(0x10f)](),_0x4b9ba2={'hijack':!![],'stream':!![],'stdin':!![],'stdout':!![],'stderr':!![]};return[0x4,_0x50b43a['attach'](_0x4b9ba2)];case 0x2:_0x631010=_0x898cdb[_0x4e9ed4(0x10f)]();!_0x179849&&(_0x179849=process[_0x4e9ed4(0xb4)]);!_0x5d3a3c&&(_0x5d3a3c=process[_0x4e9ed4(0x173)]);_0x2cf11b=error_processor_1[_0x4e9ed4(0xd3)]({'serviceName':_0x3c6f6a===null||_0x3c6f6a===void 0x0?void 0x0:_0x3c6f6a[_0x4e9ed4(0xc1)],'functionName':_0x3c6f6a===null||_0x3c6f6a===void 0x0?void 0x0:_0x3c6f6a[_0x4e9ed4(0xcd)],'errorStream':_0x5d3a3c});!isWin&&_0x50b43a[_0x4e9ed4(0xd9)][_0x4e9ed4(0x115)](_0x631010,_0x179849,_0x2cf11b);return[0x4,_0x50b43a[_0x4e9ed4(0x153)]()];case 0x3:_0x898cdb[_0x4e9ed4(0x10f)]();if(!isWin)return[0x3,0x5];return[0x4,_0x50b43a[_0x4e9ed4(0x16e)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x4:_0x1f75f7=_0x898cdb[_0x4e9ed4(0x10f)](),_0x50b43a[_0x4e9ed4(0xd9)]['demuxStream'](_0x1f75f7,_0x179849,_0x2cf11b),_0x898cdb[_0x4e9ed4(0xc4)]=0x5;case 0x5:containers['add'](_0x50b43a['id']),streams[_0x4e9ed4(0x163)](_0x631010);return[0x2,{'container':_0x50b43a,'stream':_0x631010}];}});});}exports['runContainer']=runContainer;function resolveCodeUriToMount(_0x31fe18,_0xde2624){return _0xde2624===void 0x0&&(_0xde2624=!![]),__awaiter(this,void 0x0,void 0x0,function(){var _0x37c30a,_0x5c50c9;return __generator(this,function(_0x237142){var _0x54a5fe=a14_0x4f86;switch(_0x237142[_0x54a5fe(0xc4)]){case 0x0:if(!_0x31fe18)return[0x2,null];_0x37c30a=null;return[0x4,fs[_0x54a5fe(0x143)](_0x31fe18)];case 0x1:_0x5c50c9=_0x237142[_0x54a5fe(0x10f)]();_0x5c50c9[_0x54a5fe(0x144)]()?_0x37c30a='/code':_0x37c30a=path_1['default'][_0x54a5fe(0xda)][_0x54a5fe(0xce)](_0x54a5fe(0x141),path_1[_0x54a5fe(0xb7)][_0x54a5fe(0xf9)](_0x31fe18));return[0x2,{'Type':_0x54a5fe(0x11e),'Source':_0x31fe18,'Target':_0x37c30a,'ReadOnly':_0xde2624}];}});});}exports[a14_0x2b5909(0xf0)]=resolveCodeUriToMount;function isDockerToolBoxAndEnsureDockerVersion(){return __awaiter(this,void 0x0,void 0x0,function(){var _0xbd2148,_0x5d70c3;return __generator(this,function(_0x581f17){var _0xaaedd2=a14_0x4f86;switch(_0x581f17[_0xaaedd2(0xc4)]){case 0x0:return[0x4,docker[_0xaaedd2(0x101)]()];case 0x1:_0xbd2148=_0x581f17[_0xaaedd2(0x10f)]();return[0x4,detectDockerVersion(_0xbd2148[_0xaaedd2(0x187)]||'')];case 0x2:_0x581f17[_0xaaedd2(0x10f)](),_0x5d70c3=(_0xbd2148[_0xaaedd2(0x11c)]||[])[_0xaaedd2(0xe7)](function(_0x1befd8){var _0x453344=_0xaaedd2;return lodash_1[_0x453344(0xb7)]['split'](_0x1befd8,'=',0x2);})[_0xaaedd2(0x182)](function(_0x116681){return _0x116681['length']===0x2;})[_0xaaedd2(0x174)](function(_0x4c3c53,_0x546b3c){return _0x4c3c53[_0x546b3c[0x0]]=_0x546b3c[0x1],_0x4c3c53;},{});return[0x2,process['platform']===_0xaaedd2(0xef)&&_0x5d70c3[_0xaaedd2(0xfd)]===_0xaaedd2(0xe0)];}});});}exports[a14_0x2b5909(0x171)]=isDockerToolBoxAndEnsureDockerVersion;function detectDockerVersion(_0x1f82b9){return __awaiter(this,void 0x0,void 0x0,function(){var _0x14bb1b;return __generator(this,function(_0x1a0ac5){var _0x12378c=a14_0x4f86;_0x14bb1b=_0x1f82b9['split']('.');if(Number[_0x12378c(0xc8)](_0x14bb1b[0x0])===0x1&&Number[_0x12378c(0xc8)](_0x14bb1b[0x1])<=0xd)throw new Error(_0x12378c(0x11f)+_0x1f82b9+_0x12378c(0x186));return[0x2];});});}exports[a14_0x2b5909(0x12d)]=detectDockerVersion;function createContainer(_0x58fea3){var _0x36a094;return __awaiter(this,void 0x0,void 0x0,function(){var _0xfe59ce,_0x510856,_0x3df7ff,_0x273866,_0x2894b7,_0x513c3a;return __generator(this,function(_0x4deb51){var _0x25be01=a14_0x4f86;switch(_0x4deb51['label']){case 0x0:_0xfe59ce=process[_0x25be01(0x178)]===_0x25be01(0xef),_0x510856=process[_0x25be01(0x178)]===_0x25be01(0xc9);if(!(_0x58fea3&&_0x510856))return[0x3,0x2];if(!_0x58fea3[_0x25be01(0xd0)])return[0x3,0x2];return[0x4,docker_support_1[_0x25be01(0x185)]((_0x36a094=_0x58fea3['HostConfig'])===null||_0x36a094===void 0x0?void 0x0:_0x36a094[_0x25be01(0xc3)])];case 0x1:_0x3df7ff=_0x4deb51[_0x25be01(0x10f)]();if(_0x510856&&_0x3df7ff['length']>0x0)throw new Error(_0x25be01(0x154)+_0x3df7ff+'\x27\x20to\x20Docker\x20File\x20sharing\x20list,\x20more\x20information\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md');_0x4deb51[_0x25be01(0xc4)]=0x2;case 0x2:return[0x4,isDockerToolBoxAndEnsureDockerVersion()];case 0x3:_0x273866=_0x4deb51[_0x25be01(0x10f)](),_0x4deb51[_0x25be01(0xc4)]=0x4;case 0x4:_0x4deb51[_0x25be01(0xff)]['push']([0x4,0x6,,0x7]);return[0x4,docker[_0x25be01(0x169)](_0x58fea3)];case 0x5:_0x2894b7=_0x4deb51[_0x25be01(0x10f)]();return[0x3,0x7];case 0x6:_0x513c3a=_0x4deb51[_0x25be01(0x10f)]();if(_0x513c3a[_0x25be01(0xca)][_0x25be01(0xbb)](_0x25be01(0x103))!==-0x1&&_0x273866)throw new Error(_0x25be01(0xd6));if(_0x513c3a[_0x25be01(0xca)]['indexOf'](_0x25be01(0x167))!==-0x1&&_0xfe59ce)throw new Error(_0x513c3a['message']+_0x25be01(0x16c));throw _0x513c3a;case 0x7:return[0x2,_0x2894b7];}});});}function resolveNasConfigToMounts(_0xf28e22,_0x5afe14,_0x232132,_0x3639ce){return __awaiter(this,void 0x0,void 0x0,function(){var _0x313a08;return __generator(this,function(_0x4ceed4){var _0x209813=a14_0x4f86;switch(_0x4ceed4[_0x209813(0xc4)]){case 0x0:return[0x4,nas['convertNasConfigToNasMappings'](_0x3639ce,_0x232132,_0x5afe14)];case 0x1:_0x313a08=_0x4ceed4['sent']();return[0x2,convertNasMappingsToMounts(devs_1[_0x209813(0xdb)](_0xf28e22),_0x313a08)];}});});}exports[a14_0x2b5909(0x11a)]=resolveNasConfigToMounts;function convertNasMappingsToMounts(_0x1c62e0,_0x1962f2){var _0x5445e6=a14_0x2b5909;return _0x1962f2[_0x5445e6(0xe7)](function(_0x458456){var _0x2e56e0=_0x5445e6;return{'Type':'bind','Source':path_1['default']['resolve'](_0x1c62e0,_0x458456['localNasDir']),'Target':_0x458456[_0x2e56e0(0xf1)],'ReadOnly':![]};});}function resolveTmpDirToMount(_0x8d3171){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x44a75f){var _0x68d500=a14_0x4f86;if(!_0x8d3171)return[0x2,{}];return[0x2,{'Type':'bind','Source':_0x8d3171,'Target':_0x68d500(0x129),'ReadOnly':![]}];});});}exports[a14_0x2b5909(0x15b)]=resolveTmpDirToMount;function resolveDebuggerPathToMount(_0x5d9c64){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1a0ab5;return __generator(this,function(_0x461dcb){var _0x323866=a14_0x4f86;if(!_0x5d9c64)return[0x2,{}];return _0x1a0ab5=path_1[_0x323866(0xb7)][_0x323866(0x151)](_0x5d9c64),[0x2,{'Type':_0x323866(0x11e),'Source':_0x1a0ab5,'Target':_0x323866(0x183),'ReadOnly':![]}];});});}exports['resolveDebuggerPathToMount']=resolveDebuggerPathToMount;function resolvePasswdMount(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x438f2e;return __generator(this,function(_0x11a620){var _0x335ed5=a14_0x4f86;switch(_0x11a620[_0x335ed5(0xc4)]){case 0x0:if(!(process[_0x335ed5(0x178)]===_0x335ed5(0x180)))return[0x3,0x2];_0x438f2e={'Type':_0x335ed5(0x11e)};return[0x4,passwd_1[_0x335ed5(0x162)]()];case 0x1:return[0x2,(_0x438f2e[_0x335ed5(0x110)]=_0x11a620[_0x335ed5(0x10f)](),_0x438f2e[_0x335ed5(0x14f)]=_0x335ed5(0x16f),_0x438f2e['ReadOnly']=!![],_0x438f2e)];case 0x2:return[0x2,null];}});});}exports[a14_0x2b5909(0xdd)]=resolvePasswdMount;function createAndRunContainer(_0x39554b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2ab7a3;return __generator(this,function(_0x4ed9ee){var _0xd8b5a9=a14_0x4f86;switch(_0x4ed9ee['label']){case 0x0:return[0x4,createContainer(_0x39554b)];case 0x1:_0x2ab7a3=_0x4ed9ee[_0xd8b5a9(0x10f)](),containers['add'](_0x2ab7a3['id']);return[0x4,_0x2ab7a3['start']({})];case 0x2:_0x4ed9ee[_0xd8b5a9(0x10f)]();return[0x2,_0x2ab7a3];}});});}exports[a14_0x2b5909(0x158)]=createAndRunContainer;function showDebugIdeTipsForVscode(_0x305469,_0x28d3b5,_0xeeeb1e,_0x284b9c,_0xd1d285){return __awaiter(this,void 0x0,void 0x0,function(){var _0x42ce2f;return __generator(this,function(_0x96d8b5){var _0x5f1c48=a14_0x4f86;switch(_0x96d8b5[_0x5f1c48(0xc4)]){case 0x0:return[0x4,debug_1['generateVscodeDebugConfig'](_0x305469,_0x28d3b5,_0xeeeb1e,_0x284b9c,_0xd1d285)];case 0x1:_0x42ce2f=_0x96d8b5[_0x5f1c48(0x10f)](),logger_1['default'][_0x5f1c48(0x140)](_0x5f1c48(0x119),_0x5f1c48(0x13b)),logger_1[_0x5f1c48(0xb7)][_0x5f1c48(0x140)](_0x5f1c48(0x114)),logger_1[_0x5f1c48(0xb7)][_0x5f1c48(0x140)](JSON['stringify'](_0x42ce2f,null,0x4)),logger_1['default'][_0x5f1c48(0x140)](_0x5f1c48(0xcb));return[0x2];}});});}exports[a14_0x2b5909(0xfa)]=showDebugIdeTipsForVscode;function showDebugIdeTipsForPycharm(_0x6800d0,_0x1d9ea1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x31efec;return __generator(this,function(_0x4f928a){var _0x5259f2=a14_0x4f86;switch(_0x4f928a[_0x5259f2(0xc4)]){case 0x0:return[0x4,fs['lstat'](_0x6800d0)];case 0x1:_0x31efec=_0x4f928a['sent']();!_0x31efec[_0x5259f2(0x144)]()&&(_0x6800d0=path_1[_0x5259f2(0xb7)][_0x5259f2(0xf2)](_0x6800d0));logger_1['default'][_0x5259f2(0x140)]('\x0a=========\x20Tips\x20for\x20PyCharm\x20remote\x20debug\x20=========\x0aLocal\x20host\x20name:\x20'+ip['address']()+'\x0aPort\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20'+_0x1d9ea1+_0x5259f2(0xbd)+_0x6800d0+_0x5259f2(0x175)+ip['address']()+_0x5259f2(0x13d)+_0x1d9ea1+_0x5259f2(0x11d),_0x5259f2(0x13b));return[0x2];}});});}exports[a14_0x2b5909(0x164)]=showDebugIdeTipsForPycharm;function writeEventToStreamAndClose(_0x15d8e1,_0xca2218){var _0x483846=a14_0x2b5909;_0xca2218&&_0x15d8e1[_0x483846(0x146)](_0xca2218),_0x15d8e1[_0x483846(0xe9)]();}function startContainer(_0x4a0198,_0x30076f,_0x5bc7e6,_0x2e6fb4){return __awaiter(this,void 0x0,void 0x0,function(){var _0x275225,_0x27dec6,_0x2c5615,_0x14d5c6,_0x3b3e0e=this;return __generator(this,function(_0x5ce295){var _0x57eda5=a14_0x4f86;switch(_0x5ce295['label']){case 0x0:return[0x4,createContainer(_0x4a0198)];case 0x1:_0x275225=_0x5ce295[_0x57eda5(0x10f)](),containers[_0x57eda5(0x163)](_0x275225['id']),_0x5ce295[_0x57eda5(0xc4)]=0x2;case 0x2:_0x5ce295[_0x57eda5(0xff)]['push']([0x2,0x4,,0x5]);return[0x4,_0x275225[_0x57eda5(0x153)]({})];case 0x3:_0x5ce295['sent']();return[0x3,0x5];case 0x4:_0x27dec6=_0x5ce295[_0x57eda5(0x10f)](),logger_1['default'][_0x57eda5(0x128)](_0x27dec6);return[0x3,0x5];case 0x5:_0x2c5615=_0x30076f||_0x5bc7e6;if(!_0x2c5615)return[0x3,0x7];!_0x30076f&&(_0x30076f=devnull());!_0x5bc7e6&&(_0x5bc7e6=devnull());return[0x4,_0x275225[_0x57eda5(0x16e)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x6:_0x14d5c6=_0x5ce295[_0x57eda5(0x10f)](),_0x275225['modem'][_0x57eda5(0x115)](_0x14d5c6,_0x30076f,error_processor_1[_0x57eda5(0xd3)]({'serviceName':_0x2e6fb4['serviceName'],'functionName':_0x2e6fb4[_0x57eda5(0xcd)],'errorStream':_0x5bc7e6})),_0x5ce295[_0x57eda5(0xc4)]=0x7;case 0x7:return[0x2,{'containerId':_0x275225===null||_0x275225===void 0x0?void 0x0:_0x275225['id'],'stop':function(){return __awaiter(_0x3b3e0e,void 0x0,void 0x0,function(){return __generator(this,function(_0x30f8fa){var _0x131376=a14_0x4f86;switch(_0x30f8fa[_0x131376(0xc4)]){case 0x0:logger_1[_0x131376(0xb7)][_0x131376(0x10b)](_0x131376(0x105)+_0x275225['id']);return[0x4,_0x275225['stop']()];case 0x1:_0x30f8fa[_0x131376(0x10f)](),containers['delete'](_0x275225['id']);return[0x2];}});});},'kill':function(){return __awaiter(_0x3b3e0e,void 0x0,void 0x0,function(){return __generator(this,function(_0x18d6c1){var _0x5ab49f=a14_0x4f86;switch(_0x18d6c1[_0x5ab49f(0xc4)]){case 0x0:logger_1[_0x5ab49f(0xb7)]['debug'](_0x5ab49f(0x134)+_0x275225['id']);return[0x4,_0x275225[_0x5ab49f(0x17c)]()];case 0x1:_0x18d6c1[_0x5ab49f(0x10f)](),containers[_0x5ab49f(0x111)](_0x275225['id']);return[0x2];}});});},'exec':function(_0x3be705,_0x3c311b){var _0x12964c=_0x57eda5,_0x5ce782=_0x3c311b===void 0x0?{}:_0x3c311b,_0x2a671d=_0x5ce782[_0x12964c(0xd7)],_0x816c21=_0x2a671d===void 0x0?'':_0x2a671d,_0x23e6a2=_0x5ce782['env'],_0x40f781=_0x23e6a2===void 0x0?{}:_0x23e6a2,_0x5e4605=_0x5ce782['outputStream'],_0x4d5ea7=_0x5e4605===void 0x0?process[_0x12964c(0xb4)]:_0x5e4605,_0x1eaad8=_0x5ce782[_0x12964c(0x109)],_0xaa8b9=_0x1eaad8===void 0x0?process[_0x12964c(0x173)]:_0x1eaad8,_0x36bd2f=_0x5ce782[_0x12964c(0x157)],_0x970405=_0x36bd2f===void 0x0?![]:_0x36bd2f,_0x4299ab=_0x5ce782['context'],_0x179c4e=_0x4299ab===void 0x0?{}:_0x4299ab,_0x1cf441=_0x5ce782['event'],_0x336e08=_0x1cf441===void 0x0?null:_0x1cf441;return __awaiter(_0x3b3e0e,void 0x0,void 0x0,function(){var _0x142a0f,_0x6993c0,_0x109cc9,_0x4b1ace;return __generator(this,function(_0x420fa5){var _0xd76b15=a14_0x4f86;switch(_0x420fa5[_0xd76b15(0xc4)]){case 0x0:_0x142a0f=_0x336e08?!![]:![],_0x6993c0={'Env':dockerOpts[_0xd76b15(0x14c)](_0x40f781),'Tty':![],'AttachStdin':_0x142a0f,'AttachStdout':!![],'AttachStderr':!![],'WorkingDir':_0x816c21};_0x3be705!==[]&&(_0x6993c0[_0xd76b15(0x120)]=_0x3be705);logger_1[_0xd76b15(0xb7)][_0xd76b15(0x10b)]('docker\x20exec\x20opts:\x20'+JSON['stringify'](_0x6993c0,null,0x4));return[0x4,_0x275225[_0xd76b15(0x15c)](_0x6993c0)];case 0x1:_0x109cc9=_0x420fa5[_0xd76b15(0x10f)]();return[0x4,_0x109cc9['start']({'hijack':!![],'stdin':_0x142a0f})];case 0x2:_0x4b1ace=_0x420fa5[_0xd76b15(0x10f)]();return[0x4,new Promise(function(_0x139364){return setTimeout(_0x139364,0x1e);})];case 0x3:_0x420fa5[_0xd76b15(0x10f)]();_0x336e08!==null&&writeEventToStreamAndClose(_0x4b1ace,_0x336e08);!_0x4d5ea7&&(_0x4d5ea7=process['stdout']);!_0xaa8b9&&(_0xaa8b9=process[_0xd76b15(0x173)]);_0x970405?_0x275225[_0xd76b15(0xd9)][_0xd76b15(0x115)](_0x4b1ace,_0x4d5ea7,_0xaa8b9):_0x275225[_0xd76b15(0xd9)][_0xd76b15(0x115)](_0x4b1ace,devnull(),_0xaa8b9);return[0x4,waitForExec(_0x109cc9)];case 0x4:return[0x2,_0x420fa5[_0xd76b15(0x10f)]()];}});});}}];}});});}exports['startContainer']=startContainer;function waitForExec(_0x4cd23a){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x57a3c4){var _0x12e353=a14_0x4f86;switch(_0x57a3c4[_0x12e353(0xc4)]){case 0x0:return[0x4,new Promise(function(_0x4fdaa5,_0x549bac){function _0x2a1771(){var _0x43f643=a14_0x4f86;_0x4cd23a[_0x43f643(0x155)](function(_0x492c01,_0x5a027f){var _0x14b293=_0x43f643;if(_0x5a027f[_0x14b293(0xb3)]){setTimeout(_0x2a1771,0x64);return;}if(_0x492c01)_0x549bac(_0x492c01);else _0x5a027f[_0x14b293(0x12c)]!==0x0?_0x549bac(_0x5a027f[_0x14b293(0xc7)]['entrypoint']+_0x14b293(0x156)+_0x5a027f['ExitCode']):_0x4fdaa5(_0x5a027f[_0x14b293(0x12c)]);});}_0x2a1771();})];case 0x1:return[0x2,_0x57a3c4[_0x12e353(0x10f)]()];}});});}function run(_0x1a0e18,_0x1d04cc,_0x3060f4,_0x297066,_0x2b0f8d){return _0x2b0f8d===void 0x0&&(_0x2b0f8d={}),__awaiter(this,void 0x0,void 0x0,function(){var _0x5d8bde,_0x2b21e8,_0x4985f1,_0x441b10;return __generator(this,function(_0x25eb34){var _0x5dfe9a=a14_0x4f86;switch(_0x25eb34[_0x5dfe9a(0xc4)]){case 0x0:return[0x4,runContainer(_0x1a0e18,_0x3060f4,_0x297066,_0x2b0f8d)];case 0x1:_0x5d8bde=_0x25eb34[_0x5dfe9a(0x10f)](),_0x2b21e8=_0x5d8bde[_0x5dfe9a(0xeb)],_0x4985f1=_0x5d8bde['stream'],writeEventToStreamAndClose(_0x4985f1,_0x1d04cc);return[0x4,_0x2b21e8[_0x5dfe9a(0x131)]()];case 0x2:_0x441b10=_0x25eb34[_0x5dfe9a(0x10f)](),containers[_0x5dfe9a(0x111)](_0x2b21e8['id']),streams[_0x5dfe9a(0x111)](_0x4985f1);return[0x2,_0x441b10];}});});}exports[a14_0x2b5909(0x179)]=run;function stopContainer(_0x322d51){return __awaiter(this,void 0x0,void 0x0,function(){var _0x38b784,_0x1dc1f6,_0x1dc505;return __generator(this,function(_0x18b890){var _0x598018=a14_0x4f86;switch(_0x18b890['label']){case 0x0:_0x38b784=core['spinner'](_0x598018(0x168)+_0x322d51['id']),_0x18b890['label']=0x1;case 0x1:_0x18b890[_0x598018(0xff)][_0x598018(0x150)]([0x1,0x3,,0x8]);return[0x4,_0x322d51[_0x598018(0x16d)]()];case 0x2:_0x18b890[_0x598018(0x10f)](),_0x38b784['succeed'](_0x598018(0x133));return[0x3,0x8];case 0x3:_0x1dc1f6=_0x18b890[_0x598018(0x10f)](),_0x38b784[_0x598018(0x130)](_0x598018(0xe4)),logger_1[_0x598018(0xb7)][_0x598018(0x10b)](_0x598018(0xcf)+_0x322d51['id']+_0x598018(0x12e)+_0x1dc1f6),_0x38b784=core['spinner'](_0x598018(0x124)+_0x322d51['id']),_0x18b890['label']=0x4;case 0x4:_0x18b890[_0x598018(0xff)][_0x598018(0x150)]([0x4,0x6,,0x7]);return[0x4,_0x322d51['kill']()];case 0x5:_0x18b890['sent'](),_0x38b784[_0x598018(0xc5)](_0x598018(0xd8));return[0x3,0x7];case 0x6:_0x1dc505=_0x18b890[_0x598018(0x10f)](),_0x38b784[_0x598018(0x130)]('Failed\x20to\x20kill\x20the\x20container.Please\x20stop\x20it\x20manually.'),logger_1[_0x598018(0xb7)][_0x598018(0x10b)]('Kill\x20proxy\x20container:\x20'+_0x322d51['id']+'\x20failed,\x20error:\x20'+_0x1dc505);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x2];}});});}exports[a14_0x2b5909(0xbf)]=stopContainer;