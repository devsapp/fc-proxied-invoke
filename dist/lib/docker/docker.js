'use strict';var a14_0xdb2e=['stringify','More\x20information\x20please\x20refer\x20to\x20https://docs.docker.com/docker-for-windows/#shared-drives','\x20failed.','22181XacfrC','dev-null','detectDockerVersion','event','__spreadArrays','args','stream','bind','into','--server','__importDefault','\x27docker\x20pull\x20','167ZOPhjF','resolveDockerEnv','\x20failed,\x20error:\x20','/etc/passwd','../utils/passwd','darwin','status','__generator','handler','AccountID','convertNasConfigToNasMappings','timeout','addEnv','Kill\x20proxy\x20container:\x20','The\x20default\x20host\x20machine\x20path\x20for\x20docker\x20toolbox\x20is\x20under\x20\x27C:\x5cUsers\x27,\x20Please\x20make\x20sure\x20your\x20project\x20is\x20in\x20this\x20directory.\x20If\x20you\x20want\x20to\x20mount\x20other\x20disk\x20paths,\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md\x20.','attach','__esModule','fail','pull','./docker-support','fc_local_','label','Kill\x20container\x20succeed','skip\x20pulling\x20image\x20','Killing\x20the\x20container:\x20','Please\x20add\x20directory\x20\x27',',\x20you\x20can\x20also\x20use\x20','customContainerConfig','filter','linux','/////////////////\x20config\x20end\x20/////////////////','initializer','../local-invoke/debug','showDebugIdeTipsForPycharm','Labels','lstat','initializationTimeout','\x27,\x20port=','tag','--http','../definition','startContainer','posix','showDebugIdeTipsForVscode','environmentVariables','codeUri','9742ECqCfX','map','generateVscodeDebugConfig','__createBinding','generateFunctionEnvs','pullImageIfNeed','Cmd','docker\x20cmd:\x20','../local-invoke/env','ReadOnly','createAndRunContainer','virtualbox','from','then','remoteNasDir','return','value','getImage','parse','.vscode','resolveImageNameForPull','findPathsOutofSharedPaths','ServerVersion','defineProperty','Skip\x20pulling\x20image\x20','stopContainer','includes','\x20to\x20pull\x20image\x20by\x20yourself.','52cGyIZu','Write\x20','add','container','resolveNasConfigToMounts','info','has','pullImage','Stopping\x20container:\x20','resolveAutoLogConfig','__awaiter','slice','run','pop','2042vSfyEg','\x20already\x20exists,\x20please\x20overwrite\x20it\x20with\x20the\x20following\x20config.','--event','throw',',\x20for\x20a\x20better\x20experience,\x20please\x20upgrade\x20the\x20docker\x20version.','Pulling\x20image\x20','platform','debug','758598hdNEXV','...','ProcessConfig','assign','toString','generatePwdFile','Failed\x20to\x20stop\x20the\x20container.','function','create','writeFile','resolvePasswdMount','Proxy\x20image\x20url:\x20','modem','stderr','--stdin','draftlog','launch.json','HostConfig','win32','env','--initializationTimeout','22MWUjqH','provider','yellow','push','parseInt','done','outputStream','408912cvuSPF','/////////////////\x20config\x20begin\x20/////////////////','message','log','AccessKeyID','ensureDir','indexOf','hasOwnProperty','trys','warning','logs','errorStream','16FSvRpD','Ensure\x20directory:\x20','/code','next','imageExist','generateRamdomContainerName','442780HXFWsc','aux','apply','last','memorySize','Mounts','first','default','resolveLibPathsFromLdConf','functionName','DOCKER_REGISTRIES','project','../devs','__setModuleDefault','writeDebugIdeConfigForVscode','address','logConfig','aux.ID','isCustomContainerRuntime','../../common/logger','localNasDir','length','createContainer','join','\x27\x20to\x20Docker\x20File\x20sharing\x20list,\x20more\x20information\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md','getRootBaseDir','File:\x20','utf8','serviceName','Stopping\x20the\x20container:\x20','isDockerToolBoxAndEnsureDockerVersion','resolveDebuggerPathToMount','demuxStream','spinner','exec','runContainer','lstatSync','sent','delete','followProgress','__importStar','You\x20can\x20paste\x20these\x20config\x20to\x20.vscode/launch.json,\x20and\x20then\x20attach\x20to\x20your\x20running\x20function','Killing\x20container:\x20','drive\x20is\x20not\x20shared','start','fs-extra','./docker-opts','pullFcImageIfNeed','resolveCodeUriToMount','dockerode','error','stop','Stop\x20the\x20container:\x20','Target','Running','kill','runtime','SecurityToken','split','stdout','generateDebugEnv','pathExistsSync','isAutoConfig','processorTransformFactory','call','/tmp/debugger_files','write','Stop\x20container\x20succeed.','verbose','isDirectory','docker\x20exec\x20opts:\x20','ops','=/code\x0a\x0aDebug\x20Code\x20needed\x20to:\x0a\x201.\x20Install\x20pydevd-pycharm:\x0a\x20\x0a\x20pip\x20install\x20pydevd-pycharm~=203.5981.165\x0a\x20\x0a\x202.\x20copy\x20to\x20your\x20function\x20code:\x0a\x0aimport\x20pydevd_pycharm\x0apydevd_pycharm.settrace(\x27','draft','generateDockerCmd','iterator','progress','29047dgkuiJ','generateDockerEnvs','ExitCode','succeed','resolve','/tmp','Generator\x20is\x20already\x20executing.'];var a14_0x23f5f6=a14_0x3594;(function(_0x2653c3,_0x4b8137){var _0x2d9d7d=a14_0x3594;while(!![]){try{var _0x5e3a24=parseInt(_0x2d9d7d(0x11d))+parseInt(_0x2d9d7d(0xeb))*parseInt(_0x2d9d7d(0x107))+parseInt(_0x2d9d7d(0x198))*-parseInt(_0x2d9d7d(0x132))+parseInt(_0x2d9d7d(0x1a2))*parseInt(_0x2d9d7d(0x145))+parseInt(_0x2d9d7d(0x139))+-parseInt(_0x2d9d7d(0x115))*parseInt(_0x2d9d7d(0x1ae))+-parseInt(_0x2d9d7d(0x14b));if(_0x5e3a24===_0x4b8137)break;else _0x2653c3['push'](_0x2653c3['shift']());}catch(_0x1d9e32){_0x2653c3['push'](_0x2653c3['shift']());}}}(a14_0xdb2e,0x93fd2));var __createBinding=this&&this[a14_0x23f5f6(0xee)]||(Object['create']?function(_0x2f4b9c,_0xe2654,_0x12f234,_0x5a94da){if(_0x5a94da===undefined)_0x5a94da=_0x12f234;Object['defineProperty'](_0x2f4b9c,_0x5a94da,{'enumerable':!![],'get':function(){return _0xe2654[_0x12f234];}});}:function(_0xc0494a,_0x2a38ed,_0x341240,_0xf06d26){if(_0xf06d26===undefined)_0xf06d26=_0x341240;_0xc0494a[_0xf06d26]=_0x2a38ed[_0x341240];}),__setModuleDefault=this&&this[a14_0x23f5f6(0x158)]||(Object[a14_0x23f5f6(0x125)]?function(_0x4799ec,_0x21c06e){var _0x2fa4c6=a14_0x23f5f6;Object[_0x2fa4c6(0x102)](_0x4799ec,_0x2fa4c6(0x152),{'enumerable':!![],'value':_0x21c06e});}:function(_0x3e8823,_0x1c7423){var _0x2675fa=a14_0x23f5f6;_0x3e8823[_0x2675fa(0x152)]=_0x1c7423;}),__importStar=this&&this[a14_0x23f5f6(0x173)]||function(_0x3dfc6f){var _0x54a01f=a14_0x23f5f6;if(_0x3dfc6f&&_0x3dfc6f[_0x54a01f(0xcd)])return _0x3dfc6f;var _0x1c24b9={};if(_0x3dfc6f!=null){for(var _0xbeefff in _0x3dfc6f)if(_0xbeefff!==_0x54a01f(0x152)&&Object[_0x54a01f(0x140)][_0x54a01f(0x18b)](_0x3dfc6f,_0xbeefff))__createBinding(_0x1c24b9,_0x3dfc6f,_0xbeefff);}return __setModuleDefault(_0x1c24b9,_0x3dfc6f),_0x1c24b9;},__awaiter=this&&this[a14_0x23f5f6(0x111)]||function(_0x3cb513,_0x4187bf,_0x3b489c,_0xef74ad){function _0x1fc3f4(_0x330332){return _0x330332 instanceof _0x3b489c?_0x330332:new _0x3b489c(function(_0x148e8e){_0x148e8e(_0x330332);});}return new(_0x3b489c||(_0x3b489c=Promise))(function(_0x578b27,_0x14a6c0){function _0x1a5122(_0x10670b){try{_0xd762bc(_0xef74ad['next'](_0x10670b));}catch(_0x3a9dcc){_0x14a6c0(_0x3a9dcc);}}function _0x282dce(_0x3cc41e){var _0x5dcf92=a14_0x3594;try{_0xd762bc(_0xef74ad[_0x5dcf92(0x118)](_0x3cc41e));}catch(_0x537a09){_0x14a6c0(_0x537a09);}}function _0xd762bc(_0x2ff02d){var _0x5381d4=a14_0x3594;_0x2ff02d[_0x5381d4(0x137)]?_0x578b27(_0x2ff02d[_0x5381d4(0xfb)]):_0x1fc3f4(_0x2ff02d[_0x5381d4(0xfb)])[_0x5381d4(0xf8)](_0x1a5122,_0x282dce);}_0xd762bc((_0xef74ad=_0xef74ad['apply'](_0x3cb513,_0x4187bf||[]))['next']());});},__generator=this&&this[a14_0x23f5f6(0xc4)]||function(_0x1bf7a8,_0x5ebe57){var _0xa011a3=a14_0x23f5f6,_0x384c5c={'label':0x0,'sent':function(){if(_0x1f552a[0x0]&0x1)throw _0x1f552a[0x1];return _0x1f552a[0x1];},'trys':[],'ops':[]},_0x367e57,_0x3e8cd1,_0x1f552a,_0x5af913;return _0x5af913={'next':_0x1e7f06(0x0),'throw':_0x1e7f06(0x1),'return':_0x1e7f06(0x2)},typeof Symbol===_0xa011a3(0x124)&&(_0x5af913[Symbol[_0xa011a3(0x196)]]=function(){return this;}),_0x5af913;function _0x1e7f06(_0x3708dd){return function(_0x3fd19b){return _0x2e1392([_0x3708dd,_0x3fd19b]);};}function _0x2e1392(_0x444c19){var _0x3adae9=_0xa011a3;if(_0x367e57)throw new TypeError(_0x3adae9(0x19e));while(_0x384c5c)try{if(_0x367e57=0x1,_0x3e8cd1&&(_0x1f552a=_0x444c19[0x0]&0x2?_0x3e8cd1[_0x3adae9(0xfa)]:_0x444c19[0x0]?_0x3e8cd1[_0x3adae9(0x118)]||((_0x1f552a=_0x3e8cd1['return'])&&_0x1f552a['call'](_0x3e8cd1),0x0):_0x3e8cd1[_0x3adae9(0x148)])&&!(_0x1f552a=_0x1f552a[_0x3adae9(0x18b)](_0x3e8cd1,_0x444c19[0x1]))['done'])return _0x1f552a;if(_0x3e8cd1=0x0,_0x1f552a)_0x444c19=[_0x444c19[0x0]&0x2,_0x1f552a[_0x3adae9(0xfb)]];switch(_0x444c19[0x0]){case 0x0:case 0x1:_0x1f552a=_0x444c19;break;case 0x4:_0x384c5c[_0x3adae9(0xd2)]++;return{'value':_0x444c19[0x1],'done':![]};case 0x5:_0x384c5c['label']++,_0x3e8cd1=_0x444c19[0x1],_0x444c19=[0x0];continue;case 0x7:_0x444c19=_0x384c5c[_0x3adae9(0x192)][_0x3adae9(0x114)](),_0x384c5c[_0x3adae9(0x141)][_0x3adae9(0x114)]();continue;default:if(!(_0x1f552a=_0x384c5c[_0x3adae9(0x141)],_0x1f552a=_0x1f552a[_0x3adae9(0x160)]>0x0&&_0x1f552a[_0x1f552a[_0x3adae9(0x160)]-0x1])&&(_0x444c19[0x0]===0x6||_0x444c19[0x0]===0x2)){_0x384c5c=0x0;continue;}if(_0x444c19[0x0]===0x3&&(!_0x1f552a||_0x444c19[0x1]>_0x1f552a[0x0]&&_0x444c19[0x1]<_0x1f552a[0x3])){_0x384c5c[_0x3adae9(0xd2)]=_0x444c19[0x1];break;}if(_0x444c19[0x0]===0x6&&_0x384c5c[_0x3adae9(0xd2)]<_0x1f552a[0x1]){_0x384c5c[_0x3adae9(0xd2)]=_0x1f552a[0x1],_0x1f552a=_0x444c19;break;}if(_0x1f552a&&_0x384c5c[_0x3adae9(0xd2)]<_0x1f552a[0x2]){_0x384c5c[_0x3adae9(0xd2)]=_0x1f552a[0x2],_0x384c5c[_0x3adae9(0x192)][_0x3adae9(0x135)](_0x444c19);break;}if(_0x1f552a[0x2])_0x384c5c['ops']['pop']();_0x384c5c['trys'][_0x3adae9(0x114)]();continue;}_0x444c19=_0x5ebe57['call'](_0x1bf7a8,_0x384c5c);}catch(_0x1b7362){_0x444c19=[0x6,_0x1b7362],_0x3e8cd1=0x0;}finally{_0x367e57=_0x1f552a=0x0;}if(_0x444c19[0x0]&0x5)throw _0x444c19[0x1];return{'value':_0x444c19[0x0]?_0x444c19[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this[a14_0x23f5f6(0x1a6)]||function(){var _0x227439=a14_0x23f5f6;for(var _0x5a80f1=0x0,_0x3e3a03=0x0,_0x3155e0=arguments[_0x227439(0x160)];_0x3e3a03<_0x3155e0;_0x3e3a03++)_0x5a80f1+=arguments[_0x3e3a03][_0x227439(0x160)];for(var _0x3e314e=Array(_0x5a80f1),_0x2a3ec1=0x0,_0x3e3a03=0x0;_0x3e3a03<_0x3155e0;_0x3e3a03++)for(var _0xcb1b4=arguments[_0x3e3a03],_0x15e605=0x0,_0x1985e9=_0xcb1b4[_0x227439(0x160)];_0x15e605<_0x1985e9;_0x15e605++,_0x2a3ec1++)_0x3e314e[_0x2a3ec1]=_0xcb1b4[_0x15e605];return _0x3e314e;},__importDefault=this&&this[a14_0x23f5f6(0x1ac)]||function(_0x150411){var _0x3dd861=a14_0x23f5f6;return _0x150411&&_0x150411[_0x3dd861(0xcd)]?_0x150411:{'default':_0x150411};};Object[a14_0x23f5f6(0x102)](exports,'__esModule',{'value':!![]}),exports[a14_0x23f5f6(0x104)]=exports[a14_0x23f5f6(0x113)]=exports[a14_0x23f5f6(0xe6)]=exports[a14_0x23f5f6(0xde)]=exports[a14_0x23f5f6(0x159)]=exports[a14_0x23f5f6(0xe8)]=exports['createAndRunContainer']=exports['resolvePasswdMount']=exports['resolveDebuggerPathToMount']=exports['resolveTmpDirToMount']=exports[a14_0x23f5f6(0x10b)]=exports[a14_0x23f5f6(0x1a4)]=exports['isDockerToolBoxAndEnsureDockerVersion']=exports[a14_0x23f5f6(0x17b)]=exports[a14_0x23f5f6(0x16e)]=exports[a14_0x23f5f6(0x10e)]=exports[a14_0x23f5f6(0x17a)]=exports[a14_0x23f5f6(0xef)]=exports[a14_0x23f5f6(0x199)]=exports['generateDockerCmd']=exports['pullImageIfNeed']=exports[a14_0x23f5f6(0x14a)]=exports[a14_0x23f5f6(0x149)]=void 0x0;var dockerode_1=__importDefault(require(a14_0x23f5f6(0x17c))),logger_1=__importDefault(require(a14_0x23f5f6(0x15e))),draftlog=__importStar(require(a14_0x23f5f6(0x12c))),docker_support_1=require(a14_0x23f5f6(0xd0)),error_processor_1=require('../error-processor'),lodash_1=__importDefault(require('lodash')),nas=__importStar(require('../local-invoke/nas')),path_1=__importDefault(require('path')),devs_1=require(a14_0x23f5f6(0x157)),fs=__importStar(require(a14_0x23f5f6(0x178))),passwd_1=require(a14_0x23f5f6(0xc1)),dockerOpts=__importStar(require(a14_0x23f5f6(0x179))),debug_1=require(a14_0x23f5f6(0xdd)),ip=__importStar(require('ip')),env_1=require(a14_0x23f5f6(0xf3)),runtime_1=require('../utils/runtime'),definition_1=require(a14_0x23f5f6(0xe5)),dev_null_1=__importDefault(require(a14_0x23f5f6(0x1a3))),core=__importStar(require('@serverless-devs/core')),isWin=process['platform']===a14_0x23f5f6(0x12f),docker=new dockerode_1[(a14_0x23f5f6(0x152))]();draftlog[a14_0x23f5f6(0x1aa)](console);var containers=new Set(),streams=new Set(),skipPullImage=!![];function imageExist(_0x538c76){return __awaiter(this,void 0x0,void 0x0,function(){var _0x242634;return __generator(this,function(_0x16b216){var _0x56698a=a14_0x3594;switch(_0x16b216[_0x56698a(0xd2)]){case 0x0:return[0x4,docker['listImages']({'filters':{'reference':[_0x538c76]}})];case 0x1:_0x242634=_0x16b216[_0x56698a(0x170)]();return[0x2,_0x242634[_0x56698a(0x160)]>0x0];}});});}exports['imageExist']=imageExist;function generateRamdomContainerName(){var _0x48e2d0=a14_0x23f5f6;return _0x48e2d0(0xd1)+new Date()['getTime']()+'_'+Math['random']()[_0x48e2d0(0x121)](0x24)['substr'](0x2,0x7);}exports[a14_0x23f5f6(0x14a)]=generateRamdomContainerName;function pullImageIfNeed(_0x328686,_0x1d57ce,_0x5534d5,_0x420f36){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4fba46,_0x26dffc;return __generator(this,function(_0x23a7d8){var _0x16e9b5=a14_0x3594;switch(_0x23a7d8['label']){case 0x0:_0x4fba46=_0x328686+'/'+_0x1d57ce+'/'+_0x5534d5+':'+_0x420f36,logger_1[_0x16e9b5(0x152)][_0x16e9b5(0x11c)](_0x16e9b5(0x128)+_0x4fba46);return[0x4,imageExist(_0x4fba46)];case 0x1:if(!!_0x23a7d8[_0x16e9b5(0x170)]())return[0x3,0x3];logger_1[_0x16e9b5(0x152)]['debug']('Starting\x20docker\x20pull\x20'+_0x4fba46);return[0x4,docker[_0x16e9b5(0xcf)](_0x4fba46)];case 0x2:_0x26dffc=_0x23a7d8[_0x16e9b5(0x170)](),_0x23a7d8[_0x16e9b5(0xd2)]=0x3;case 0x3:return[0x4,new Promise(function(_0x3ded76,_0x574c1f){var _0x595488=_0x16e9b5;if(_0x26dffc){var _0x330076=function(_0x38372a){_0x38372a&&_0x574c1f(_0x38372a),_0x3ded76(_0x4fba46);},_0x2fc219={},_0x39c326=function(_0x1b192e){var _0x43e72d=a14_0x3594,_0x328245=_0x1b192e[_0x43e72d(0xc3)];_0x1b192e[_0x43e72d(0x197)]&&(_0x328245=_0x1b192e['status']+'\x20'+_0x1b192e[_0x43e72d(0x197)]);if(_0x1b192e['id']){var _0x377768=_0x1b192e['id'];!_0x2fc219[_0x377768]&&(_0x2fc219[_0x377768]=console[_0x43e72d(0x194)]()),_0x2fc219[_0x377768](_0x377768+':\x20'+_0x328245);}else{lodash_1[_0x43e72d(0x152)][_0x43e72d(0x10d)](_0x1b192e,'aux.ID')&&(_0x1b192e[_0x43e72d(0x1a8)]=_0x1b192e['aux']['ID']+'\x0a');var _0x474c07=_0x1b192e['status']?_0x1b192e[_0x43e72d(0xc3)]+'\x0a':_0x1b192e[_0x43e72d(0x1a8)];process['stdout'][_0x43e72d(0x18d)](_0x474c07);}};docker['modem'][_0x595488(0x172)](_0x26dffc,_0x330076,_0x39c326);}else _0x3ded76(_0x4fba46);})];case 0x4:return[0x2,_0x23a7d8[_0x16e9b5(0x170)]()];}});});}exports[a14_0x23f5f6(0xf0)]=pullImageIfNeed;function a14_0x3594(_0x4fc738,_0x1dad10){return a14_0x3594=function(_0xdb2e90,_0x35945c){_0xdb2e90=_0xdb2e90-0xbe;var _0x48c45b=a14_0xdb2e[_0xdb2e90];return _0x48c45b;},a14_0x3594(_0x4fc738,_0x1dad10);}function generateDockerCmd(_0x1847bb,_0xc46144,_0x510ebb,_0x4357f0,_0x3aef64,_0x56365c){var _0x28788e=a14_0x23f5f6;_0x3aef64===void 0x0&&(_0x3aef64=!![]);_0x56365c===void 0x0&&(_0x56365c=null);if(runtime_1['isCustomContainerRuntime'](_0x1847bb))return genDockerCmdOfCustomContainer(_0x510ebb);else{if(_0xc46144)return[_0x28788e(0x1ab)];}return genDockerCmdOfNonCustomContainer(_0x510ebb,_0x4357f0,_0x3aef64,_0x56365c);}exports[a14_0x23f5f6(0x195)]=generateDockerCmd;function genDockerCmdOfNonCustomContainer(_0x51fb75,_0x31b7da,_0x41af07,_0x548a78){var _0x5d338f=a14_0x23f5f6;_0x41af07===void 0x0&&(_0x41af07=!![]);_0x548a78===void 0x0&&(_0x548a78=null);var _0x33f2cd=['-h',_0x51fb75[_0x5d338f(0xc5)]];_0x548a78!==null?(_0x33f2cd[_0x5d338f(0x135)](_0x5d338f(0x117),Buffer[_0x5d338f(0xf7)](_0x548a78)[_0x5d338f(0x121)]('base64')),_0x33f2cd[_0x5d338f(0x135)]('--event-decode')):_0x33f2cd[_0x5d338f(0x135)](_0x5d338f(0x12b));_0x31b7da&&_0x33f2cd[_0x5d338f(0x135)](_0x5d338f(0xe4));var _0x109267=_0x51fb75[_0x5d338f(0xdc)];_0x109267&&_0x41af07&&_0x33f2cd['push']('-i',_0x109267);var _0x35fed8=_0x51fb75[_0x5d338f(0xe1)];return _0x35fed8&&_0x33f2cd['push'](_0x5d338f(0x131),_0x35fed8['toString']()),logger_1[_0x5d338f(0x152)][_0x5d338f(0x11c)](_0x5d338f(0xf2)+_0x33f2cd),_0x33f2cd;}function genDockerCmdOfCustomContainer(_0x250621){var _0xa74741=a14_0x23f5f6,_0x3e7900=_0x250621['customContainerConfig']['command']?JSON[_0xa74741(0xfd)](_0x250621[_0xa74741(0xd8)]['command']):undefined,_0x506f15=_0x250621[_0xa74741(0xd8)][_0xa74741(0x1a7)]?JSON['parse'](_0x250621[_0xa74741(0xd8)][_0xa74741(0x1a7)]):undefined;if(_0x3e7900&&_0x506f15)return __spreadArrays(_0x3e7900,_0x506f15);else{if(_0x3e7900)return _0x3e7900;else{if(_0x506f15)return _0x506f15;}}return[];}function generateDockerEnvs(_0x32b853,_0x4d9a9a,_0x2d28ce,_0x4fa241,_0xaceb67,_0xdb100d,_0x3a11aa,_0x106bce,_0x5a3ce4,_0x3560be,_0x14ffc8,_0x25ab1a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x29ff8e,_0x1c5ede,_0xa28541,_0x4c38cc,_0x1eddc4;return __generator(this,function(_0x2e563f){var _0x230cfd=a14_0x3594;switch(_0x2e563f[_0x230cfd(0xd2)]){case 0x0:_0x29ff8e={};_0x5a3ce4&&Object[_0x230cfd(0x120)](_0x29ff8e,{'FC_HTTP_PARAMS':_0x5a3ce4});return[0x4,env_1[_0x230cfd(0x153)](_0x2d28ce,_0x3a11aa[_0x230cfd(0xea)])];case 0x1:_0x1c5ede=_0x2e563f[_0x230cfd(0x170)](),Object['assign'](_0x29ff8e,_0x1c5ede),_0xa28541=_0x3a11aa[_0x230cfd(0x183)];if(_0x106bce&&!_0x25ab1a)_0x4c38cc=debug_1[_0x230cfd(0x187)](_0xa28541,_0x106bce,_0x14ffc8),Object[_0x230cfd(0x120)](_0x29ff8e,_0x4c38cc);else _0x25ab1a&&Object[_0x230cfd(0x120)](_0x29ff8e,{'DEBUG_OPTIONS':_0x25ab1a});Object[_0x230cfd(0x120)](_0x29ff8e,generateFunctionEnvs(_0x3a11aa));definition_1[_0x230cfd(0x189)](_0xaceb67===null||_0xaceb67===void 0x0?void 0x0:_0xaceb67['logConfig'])?_0x1eddc4=definition_1[_0x230cfd(0x110)](_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853['AccountID'],_0x4d9a9a,_0x4fa241):_0x1eddc4=_0xaceb67===null||_0xaceb67===void 0x0?void 0x0:_0xaceb67[_0x230cfd(0x15b)];(_0x3a11aa===null||_0x3a11aa===void 0x0?void 0x0:_0x3a11aa[_0x230cfd(0x183)][_0x230cfd(0x105)]('java'))&&Object['assign'](_0x29ff8e,{'fc_enable_new_java_ca':!![]});Object[_0x230cfd(0x120)](_0x29ff8e,{'local':!![],'FC_ACCESS_KEY_ID':_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853[_0x230cfd(0x13d)],'FC_ACCESS_KEY_SECRET':_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853['AccessKeySecret'],'FC_SECURITY_TOKEN':_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853[_0x230cfd(0x184)],'FC_ACCOUNT_ID':_0x32b853===null||_0x32b853===void 0x0?void 0x0:_0x32b853[_0x230cfd(0xc6)],'FC_REGION':_0x4d9a9a,'FC_FUNCTION_NAME':_0xdb100d,'FC_HANDLER':_0x3a11aa[_0x230cfd(0xc5)],'FC_MEMORY_SIZE':_0x3a11aa[_0x230cfd(0x14f)]||0x80,'FC_TIMEOUT':_0x3a11aa[_0x230cfd(0xc8)]||0x3,'FC_INITIALIZER':_0x3a11aa[_0x230cfd(0xdc)],'FC_INITIALIZATION_TIMEOUT':_0x3a11aa[_0x230cfd(0xe1)]||0x3,'FC_SERVICE_NAME':_0x4fa241,'FC_SERVICE_LOG_PROJECT':_0x1eddc4===null||_0x1eddc4===void 0x0?void 0x0:_0x1eddc4[_0x230cfd(0x156)],'FC_SERVICE_LOG_STORE':_0x1eddc4===null||_0x1eddc4===void 0x0?void 0x0:_0x1eddc4['logstore']});if(runtime_1[_0x230cfd(0x15d)](_0x3a11aa[_0x230cfd(0x183)]))return[0x2,_0x29ff8e];return[0x2,env_1[_0x230cfd(0xc9)](_0x29ff8e,_0x3560be)];}});});}exports[a14_0x23f5f6(0x199)]=generateDockerEnvs;function generateFunctionEnvs(_0x388119){var _0x2748d4=a14_0x23f5f6,_0x260632=_0x388119[_0x2748d4(0xe9)];if(!_0x260632)return{};return Object[_0x2748d4(0x120)]({},_0x260632);}exports[a14_0x23f5f6(0xef)]=generateFunctionEnvs;function pullFcImageIfNeed(_0x14101d){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2436e4;return __generator(this,function(_0x1abe65){var _0x48082a=a14_0x3594;switch(_0x1abe65['label']){case 0x0:return[0x4,imageExist(_0x14101d)];case 0x1:_0x2436e4=_0x1abe65[_0x48082a(0x170)]();if(!(!_0x2436e4||!skipPullImage))return[0x3,0x3];return[0x4,pullImage(_0x14101d)];case 0x2:_0x1abe65['sent']();return[0x3,0x4];case 0x3:logger_1[_0x48082a(0x152)][_0x48082a(0x11c)](_0x48082a(0xd4)+_0x14101d+_0x48082a(0x11e)),logger_1[_0x48082a(0x152)][_0x48082a(0x10c)](_0x48082a(0x103)+_0x14101d+_0x48082a(0x11e)),_0x1abe65[_0x48082a(0xd2)]=0x4;case 0x4:return[0x2];}});});}exports['pullFcImageIfNeed']=pullFcImageIfNeed;function pullImage(_0xc992b6){return __awaiter(this,void 0x0,void 0x0,function(){var _0x551d73,_0x12c6f9,_0x215530=this;return __generator(this,function(_0x5e3821){var _0xed76f=a14_0x3594;switch(_0x5e3821[_0xed76f(0xd2)]){case 0x0:return[0x4,dockerOpts[_0xed76f(0xff)](_0xc992b6)];case 0x1:_0x551d73=_0x5e3821['sent']();return[0x4,docker[_0xed76f(0xcf)](_0x551d73)];case 0x2:_0x12c6f9=_0x5e3821['sent']();return[0x4,new Promise(function(_0x4e12a5,_0x5c9e81){var _0x58efb0=_0xed76f;logger_1['default']['info'](_0x58efb0(0x11a)+_0x551d73+_0x58efb0(0xd7)+(_0x58efb0(0x1ad)+_0x551d73+'\x27')+_0x58efb0(0x106));var _0x4bcae0=function(_0x4ed2a3){return __awaiter(_0x215530,void 0x0,void 0x0,function(){var _0x174231,_0x4f6a2d,_0x255435,_0x5d2efa,_0x12fefd,_0x708ebd;return __generator(this,function(_0x15b997){var _0x465f9d=a14_0x3594;switch(_0x15b997[_0x465f9d(0xd2)]){case 0x0:_0x4ed2a3&&_0x5c9e81(_0x4ed2a3);containers[_0x465f9d(0x171)](_0x12c6f9),(_0x174231=0x0,_0x4f6a2d=dockerOpts[_0x465f9d(0x155)]),_0x15b997[_0x465f9d(0xd2)]=0x1;case 0x1:if(!(_0x174231<_0x4f6a2d['length']))return[0x3,0x5];_0x255435=_0x4f6a2d[_0x174231];if(!(_0x551d73['indexOf'](_0x255435)===0x0))return[0x3,0x4];return[0x4,docker[_0x465f9d(0xfc)](_0x551d73)];case 0x2:_0x5d2efa=_0x15b997[_0x465f9d(0x170)](),_0x12fefd=_0x551d73[_0x465f9d(0x112)](_0x255435[_0x465f9d(0x160)]+0x1),_0x708ebd=_0x12fefd['split'](':');return[0x4,_0x5d2efa[_0x465f9d(0xe3)]({'name':_0x551d73,'repo':lodash_1[_0x465f9d(0x152)][_0x465f9d(0x151)](_0x708ebd),'tag':lodash_1[_0x465f9d(0x152)][_0x465f9d(0x14e)](_0x708ebd)})];case 0x3:_0x15b997[_0x465f9d(0x170)]();return[0x3,0x5];case 0x4:_0x174231++;return[0x3,0x1];case 0x5:_0x4e12a5(_0x551d73);return[0x2];}});});};containers[_0x58efb0(0x109)](_0x12c6f9),followProgress(_0x12c6f9,_0x4bcae0);})];case 0x3:return[0x2,_0x5e3821['sent']()];}});});}exports[a14_0x23f5f6(0x10e)]=pullImage;function followProgress(_0x950c17,_0x4edb72){var _0x2e5850=a14_0x23f5f6,_0x3f02f1={},_0x3c3c3f=function(_0x4d4ffb){var _0x43c833=a14_0x3594,_0x1790b2=_0x4d4ffb[_0x43c833(0xc3)];_0x4d4ffb[_0x43c833(0x197)]&&(_0x1790b2=_0x4d4ffb['status']+'\x20'+_0x4d4ffb[_0x43c833(0x197)]);if(_0x4d4ffb['id']){var _0x1e1ab9=_0x4d4ffb['id'];!_0x3f02f1[_0x1e1ab9]&&(_0x3f02f1[_0x1e1ab9]=console[_0x43c833(0x194)]()),_0x3f02f1[_0x1e1ab9](_0x1e1ab9+':\x20'+_0x1790b2);}else{lodash_1['default'][_0x43c833(0x10d)](_0x4d4ffb,_0x43c833(0x15c))&&(_0x4d4ffb[_0x43c833(0x1a8)]=_0x4d4ffb[_0x43c833(0x14c)]['ID']+'\x0a');var _0x339817=_0x4d4ffb['status']?_0x4d4ffb[_0x43c833(0xc3)]+'\x0a':_0x4d4ffb[_0x43c833(0x1a8)];process[_0x43c833(0x186)][_0x43c833(0x18d)](_0x339817);}};docker['modem'][_0x2e5850(0x172)](_0x950c17,_0x4edb72,_0x3c3c3f);}function runContainer(_0x5746e2,_0x295596,_0x3b212e,_0x584390){return __awaiter(this,void 0x0,void 0x0,function(){var _0x469730,_0x14df0a,_0x1ec5e4,_0x5efbf9,_0xb8a147;return __generator(this,function(_0x164fb5){var _0x154d24=a14_0x3594;switch(_0x164fb5['label']){case 0x0:return[0x4,createContainer(_0x5746e2)];case 0x1:_0x469730=_0x164fb5[_0x154d24(0x170)](),_0x14df0a={'hijack':!![],'stream':!![],'stdin':!![],'stdout':!![],'stderr':!![]};return[0x4,_0x469730[_0x154d24(0xcc)](_0x14df0a)];case 0x2:_0x1ec5e4=_0x164fb5[_0x154d24(0x170)]();!_0x295596&&(_0x295596=process[_0x154d24(0x186)]);!_0x3b212e&&(_0x3b212e=process[_0x154d24(0x12a)]);_0x5efbf9=error_processor_1[_0x154d24(0x18a)]({'serviceName':_0x584390===null||_0x584390===void 0x0?void 0x0:_0x584390[_0x154d24(0x167)],'functionName':_0x584390===null||_0x584390===void 0x0?void 0x0:_0x584390[_0x154d24(0x154)],'errorStream':_0x3b212e});!isWin&&_0x469730[_0x154d24(0x129)][_0x154d24(0x16b)](_0x1ec5e4,_0x295596,_0x5efbf9);return[0x4,_0x469730['start']()];case 0x3:_0x164fb5[_0x154d24(0x170)]();if(!isWin)return[0x3,0x5];return[0x4,_0x469730[_0x154d24(0x143)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x4:_0xb8a147=_0x164fb5[_0x154d24(0x170)](),_0x469730['modem'][_0x154d24(0x16b)](_0xb8a147,_0x295596,_0x5efbf9),_0x164fb5[_0x154d24(0xd2)]=0x5;case 0x5:containers[_0x154d24(0x109)](_0x469730['id']),streams['add'](_0x1ec5e4);return[0x2,{'container':_0x469730,'stream':_0x1ec5e4}];}});});}exports[a14_0x23f5f6(0x16e)]=runContainer;function resolveCodeUriToMount(_0x11ee65,_0xfd1cb1){return _0xfd1cb1===void 0x0&&(_0xfd1cb1=!![]),__awaiter(this,void 0x0,void 0x0,function(){var _0x22a573,_0x43525f;return __generator(this,function(_0x2e0747){var _0x5b9075=a14_0x3594;switch(_0x2e0747[_0x5b9075(0xd2)]){case 0x0:if(!_0x11ee65)return[0x2,null];_0x22a573=null;return[0x4,fs[_0x5b9075(0xe0)](_0x11ee65)];case 0x1:_0x43525f=_0x2e0747['sent']();_0x43525f[_0x5b9075(0x190)]()?_0x22a573='/code':_0x22a573=path_1[_0x5b9075(0x152)][_0x5b9075(0xe7)]['join'](_0x5b9075(0x147),path_1[_0x5b9075(0x152)]['basename'](_0x11ee65));return[0x2,{'Type':'bind','Source':_0x11ee65,'Target':_0x22a573,'ReadOnly':_0xfd1cb1}];}});});}exports[a14_0x23f5f6(0x17b)]=resolveCodeUriToMount;function isDockerToolBoxAndEnsureDockerVersion(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3714ce,_0x5b0634;return __generator(this,function(_0x48448b){var _0x5b1355=a14_0x3594;switch(_0x48448b[_0x5b1355(0xd2)]){case 0x0:return[0x4,docker[_0x5b1355(0x10c)]()];case 0x1:_0x3714ce=_0x48448b[_0x5b1355(0x170)]();return[0x4,detectDockerVersion(_0x3714ce[_0x5b1355(0x101)]||'')];case 0x2:_0x48448b['sent'](),_0x5b0634=(_0x3714ce[_0x5b1355(0xdf)]||[])['map'](function(_0x285c44){var _0x869b76=_0x5b1355;return lodash_1['default'][_0x869b76(0x185)](_0x285c44,'=',0x2);})[_0x5b1355(0xd9)](function(_0x47a053){var _0x52ba86=_0x5b1355;return _0x47a053[_0x52ba86(0x160)]===0x2;})['reduce'](function(_0x15d337,_0x274849){return _0x15d337[_0x274849[0x0]]=_0x274849[0x1],_0x15d337;},{});return[0x2,process[_0x5b1355(0x11b)]===_0x5b1355(0x12f)&&_0x5b0634[_0x5b1355(0x133)]===_0x5b1355(0xf6)];}});});}exports[a14_0x23f5f6(0x169)]=isDockerToolBoxAndEnsureDockerVersion;function detectDockerVersion(_0x5cbea9){return __awaiter(this,void 0x0,void 0x0,function(){var _0x157e40;return __generator(this,function(_0x5aea39){var _0x28cfba=a14_0x3594;_0x157e40=_0x5cbea9[_0x28cfba(0x185)]('.');if(Number[_0x28cfba(0x136)](_0x157e40[0x0])===0x1&&Number[_0x28cfba(0x136)](_0x157e40[0x1])<=0xd)throw new Error('\x0aWe\x20detected\x20that\x20your\x20docker\x20version\x20is\x20'+_0x5cbea9+_0x28cfba(0x119));return[0x2];});});}exports[a14_0x23f5f6(0x1a4)]=detectDockerVersion;function createContainer(_0x4b4d99){var _0x1fef99;return __awaiter(this,void 0x0,void 0x0,function(){var _0x9309b8,_0x162135,_0x3accff,_0x370baf,_0x8f9e4e,_0x55c39c;return __generator(this,function(_0x19ca35){var _0x5f3e69=a14_0x3594;switch(_0x19ca35['label']){case 0x0:_0x9309b8=process[_0x5f3e69(0x11b)]===_0x5f3e69(0x12f),_0x162135=process[_0x5f3e69(0x11b)]===_0x5f3e69(0xc2);if(!(_0x4b4d99&&_0x162135))return[0x3,0x2];if(!_0x4b4d99[_0x5f3e69(0x12e)])return[0x3,0x2];return[0x4,docker_support_1[_0x5f3e69(0x100)]((_0x1fef99=_0x4b4d99[_0x5f3e69(0x12e)])===null||_0x1fef99===void 0x0?void 0x0:_0x1fef99[_0x5f3e69(0x150)])];case 0x1:_0x3accff=_0x19ca35[_0x5f3e69(0x170)]();if(_0x162135&&_0x3accff[_0x5f3e69(0x160)]>0x0)throw new Error(_0x5f3e69(0xd6)+_0x3accff+_0x5f3e69(0x163));_0x19ca35[_0x5f3e69(0xd2)]=0x2;case 0x2:return[0x4,isDockerToolBoxAndEnsureDockerVersion()];case 0x3:_0x370baf=_0x19ca35[_0x5f3e69(0x170)](),_0x19ca35[_0x5f3e69(0xd2)]=0x4;case 0x4:_0x19ca35['trys'][_0x5f3e69(0x135)]([0x4,0x6,,0x7]);return[0x4,docker[_0x5f3e69(0x161)](_0x4b4d99)];case 0x5:_0x8f9e4e=_0x19ca35['sent']();return[0x3,0x7];case 0x6:_0x55c39c=_0x19ca35[_0x5f3e69(0x170)]();if(_0x55c39c[_0x5f3e69(0x13b)][_0x5f3e69(0x13f)]('invalid\x20mount\x20config\x20for\x20type')!==-0x1&&_0x370baf)throw new Error(_0x5f3e69(0xcb));if(_0x55c39c['message'][_0x5f3e69(0x13f)](_0x5f3e69(0x176))!==-0x1&&_0x9309b8)throw new Error(_0x55c39c[_0x5f3e69(0x13b)]+_0x5f3e69(0x1a0));throw _0x55c39c;case 0x7:return[0x2,_0x8f9e4e];}});});}function resolveNasConfigToMounts(_0x3656da,_0x28b97f,_0x5393c1,_0x1f2585){return __awaiter(this,void 0x0,void 0x0,function(){var _0x396a32;return __generator(this,function(_0x612d89){var _0x108862=a14_0x3594;switch(_0x612d89[_0x108862(0xd2)]){case 0x0:return[0x4,nas[_0x108862(0xc7)](_0x1f2585,_0x5393c1,_0x28b97f)];case 0x1:_0x396a32=_0x612d89['sent']();return[0x2,convertNasMappingsToMounts(devs_1[_0x108862(0x164)](_0x3656da),_0x396a32)];}});});}exports[a14_0x23f5f6(0x10b)]=resolveNasConfigToMounts;function convertNasMappingsToMounts(_0x3fca80,_0x11d716){var _0x2fef07=a14_0x23f5f6;return _0x11d716[_0x2fef07(0xec)](function(_0x301502){var _0x467357=_0x2fef07;return{'Type':'bind','Source':path_1['default'][_0x467357(0x19c)](_0x3fca80,_0x301502[_0x467357(0x15f)]),'Target':_0x301502[_0x467357(0xf9)],'ReadOnly':![]};});}function resolveTmpDirToMount(_0x25a358){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x24befe){var _0x100865=a14_0x3594;if(!_0x25a358)return[0x2,{}];return[0x2,{'Type':'bind','Source':_0x25a358,'Target':_0x100865(0x19d),'ReadOnly':![]}];});});}exports['resolveTmpDirToMount']=resolveTmpDirToMount;function resolveDebuggerPathToMount(_0x2386bf){return __awaiter(this,void 0x0,void 0x0,function(){var _0x9536fb;return __generator(this,function(_0x5dc00e){var _0x5aafb2=a14_0x3594;if(!_0x2386bf)return[0x2,{}];return _0x9536fb=path_1['default'][_0x5aafb2(0x19c)](_0x2386bf),[0x2,{'Type':_0x5aafb2(0x1a9),'Source':_0x9536fb,'Target':_0x5aafb2(0x18c),'ReadOnly':![]}];});});}exports[a14_0x23f5f6(0x16a)]=resolveDebuggerPathToMount;function resolvePasswdMount(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3af03f;return __generator(this,function(_0x2588c6){var _0x106e2b=a14_0x3594;switch(_0x2588c6[_0x106e2b(0xd2)]){case 0x0:if(!(process[_0x106e2b(0x11b)]===_0x106e2b(0xda)))return[0x3,0x2];_0x3af03f={'Type':_0x106e2b(0x1a9)};return[0x4,passwd_1[_0x106e2b(0x122)]()];case 0x1:return[0x2,(_0x3af03f['Source']=_0x2588c6[_0x106e2b(0x170)](),_0x3af03f[_0x106e2b(0x180)]=_0x106e2b(0xc0),_0x3af03f[_0x106e2b(0xf4)]=!![],_0x3af03f)];case 0x2:return[0x2,null];}});});}exports[a14_0x23f5f6(0x127)]=resolvePasswdMount;function createAndRunContainer(_0x565a8d){return __awaiter(this,void 0x0,void 0x0,function(){var _0x418a45;return __generator(this,function(_0x11dc3f){var _0x27d041=a14_0x3594;switch(_0x11dc3f[_0x27d041(0xd2)]){case 0x0:return[0x4,createContainer(_0x565a8d)];case 0x1:_0x418a45=_0x11dc3f['sent'](),containers[_0x27d041(0x109)](_0x418a45['id']);return[0x4,_0x418a45[_0x27d041(0x177)]({})];case 0x2:_0x11dc3f[_0x27d041(0x170)]();return[0x2,_0x418a45];}});});}exports[a14_0x23f5f6(0xf5)]=createAndRunContainer;function showDebugIdeTipsForVscode(_0x1c8656,_0xb4093b,_0x26b537,_0x40b2fb,_0x325673){return __awaiter(this,void 0x0,void 0x0,function(){var _0x26d464;return __generator(this,function(_0x18d1ba){var _0x3b3154=a14_0x3594;switch(_0x18d1ba[_0x3b3154(0xd2)]){case 0x0:return[0x4,debug_1[_0x3b3154(0xed)](_0x1c8656,_0xb4093b,_0x26b537,_0x40b2fb,_0x325673)];case 0x1:_0x26d464=_0x18d1ba[_0x3b3154(0x170)](),logger_1[_0x3b3154(0x152)][_0x3b3154(0x13c)](_0x3b3154(0x174),_0x3b3154(0x134)),logger_1[_0x3b3154(0x152)][_0x3b3154(0x13c)](_0x3b3154(0x13a)),logger_1[_0x3b3154(0x152)]['log'](JSON[_0x3b3154(0x19f)](_0x26d464,null,0x4)),logger_1[_0x3b3154(0x152)][_0x3b3154(0x13c)](_0x3b3154(0xdb));return[0x2];}});});}exports['showDebugIdeTipsForVscode']=showDebugIdeTipsForVscode;function writeDebugIdeConfigForVscode(_0x4c1cb8,_0x174467,_0x1a036c,_0x2313c4,_0x4f7651,_0xcfe230){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3cc735,_0xbe35d0,_0x565154,_0x3c93b0,_0x1589a0,_0x2e8b10,_0x21d173,_0x59aec6;return __generator(this,function(_0x4f6246){var _0x5e5423=a14_0x3594;switch(_0x4f6246[_0x5e5423(0xd2)]){case 0x0:_0x3cc735=path_1[_0x5e5423(0x152)][_0x5e5423(0x162)](_0x4c1cb8,_0x5e5423(0xfe)),_0xbe35d0=path_1['default'][_0x5e5423(0x162)](_0x3cc735,_0x5e5423(0x12d)),_0x4f6246[_0x5e5423(0xd2)]=0x1;case 0x1:_0x4f6246[_0x5e5423(0x141)][_0x5e5423(0x135)]([0x1,0x3,,0x5]);return[0x4,fs[_0x5e5423(0x13e)](path_1[_0x5e5423(0x152)]['dirname'](_0xbe35d0))];case 0x2:_0x4f6246[_0x5e5423(0x170)]();return[0x3,0x5];case 0x3:_0x565154=_0x4f6246[_0x5e5423(0x170)](),logger_1[_0x5e5423(0x152)][_0x5e5423(0x142)](_0x5e5423(0x146)+_0x3cc735+_0x5e5423(0x1a1));return[0x4,showDebugIdeTipsForVscode(_0x174467,_0x1a036c,_0x2313c4,_0x4f7651,_0xcfe230)];case 0x4:_0x4f6246[_0x5e5423(0x170)](),logger_1['default']['debug'](_0x5e5423(0x146)+_0x3cc735+_0x5e5423(0xbf)+_0x565154);return[0x2];case 0x5:return[0x4,debug_1[_0x5e5423(0xed)](_0x174467,_0x1a036c,_0x2313c4,_0x4f7651,_0xcfe230)];case 0x6:_0x3c93b0=_0x4f6246[_0x5e5423(0x170)]();if(!(fs[_0x5e5423(0x188)](_0xbe35d0)&&fs[_0x5e5423(0x16f)](_0xbe35d0)['isFile']()))return[0x3,0x9];_0x21d173=(_0x2e8b10=JSON)[_0x5e5423(0xfd)];return[0x4,fs['readFile'](_0xbe35d0,{'encoding':_0x5e5423(0x166)})];case 0x7:_0x1589a0=_0x21d173[_0x5e5423(0x14d)](_0x2e8b10,[_0x4f6246[_0x5e5423(0x170)]()]);if(lodash_1['default']['isEqual'](_0x1589a0,_0x3c93b0))return[0x2];logger_1[_0x5e5423(0x152)][_0x5e5423(0x142)](_0x5e5423(0x165)+_0xbe35d0+_0x5e5423(0x116));return[0x4,showDebugIdeTipsForVscode(_0x174467,_0x1a036c,_0x2313c4,_0x4f7651,_0xcfe230)];case 0x8:_0x4f6246[_0x5e5423(0x170)]();return[0x2];case 0x9:_0x4f6246[_0x5e5423(0x141)][_0x5e5423(0x135)]([0x9,0xb,,0xd]);return[0x4,fs[_0x5e5423(0x126)](_0xbe35d0,JSON[_0x5e5423(0x19f)](_0x3c93b0,null,'\x20\x20'),{'encoding':_0x5e5423(0x166),'flag':'w'})];case 0xa:_0x4f6246[_0x5e5423(0x170)]();return[0x3,0xd];case 0xb:_0x59aec6=_0x4f6246[_0x5e5423(0x170)](),logger_1['default']['warning'](_0x5e5423(0x108)+_0xbe35d0+_0x5e5423(0x1a1));return[0x4,showDebugIdeTipsForVscode(_0x174467,_0x1a036c,_0x2313c4,_0x4f7651,_0xcfe230)];case 0xc:_0x4f6246['sent'](),logger_1[_0x5e5423(0x152)][_0x5e5423(0x11c)](_0x5e5423(0x108)+_0xbe35d0+_0x5e5423(0xbf)+_0x59aec6);return[0x3,0xd];case 0xd:return[0x2];}});});}exports[a14_0x23f5f6(0x159)]=writeDebugIdeConfigForVscode;function showDebugIdeTipsForPycharm(_0x1c7812,_0x2ed8b5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x9d3fac;return __generator(this,function(_0x443a2d){var _0x40f427=a14_0x3594;switch(_0x443a2d['label']){case 0x0:return[0x4,fs['lstat'](_0x1c7812)];case 0x1:_0x9d3fac=_0x443a2d['sent']();!_0x9d3fac[_0x40f427(0x190)]()&&(_0x1c7812=path_1[_0x40f427(0x152)]['dirname'](_0x1c7812));logger_1[_0x40f427(0x152)][_0x40f427(0x13c)]('\x0a=========\x20Tips\x20for\x20PyCharm\x20remote\x20debug\x20=========\x0aLocal\x20host\x20name:\x20'+ip[_0x40f427(0x15a)]()+'\x0aPort\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20'+_0x2ed8b5+'\x0aPath\x20mappings\x20\x20:\x20'+_0x1c7812+_0x40f427(0x193)+ip[_0x40f427(0x15a)]()+_0x40f427(0xe2)+_0x2ed8b5+',\x20stdoutToServer=True,\x20stderrToServer=True)\x0a\x0a=========================================================================\x0a','yellow');return[0x2];}});});}exports[a14_0x23f5f6(0xde)]=showDebugIdeTipsForPycharm;function writeEventToStreamAndClose(_0x20f161,_0xd44134){var _0x38c514=a14_0x23f5f6;_0xd44134&&_0x20f161[_0x38c514(0x18d)](_0xd44134),_0x20f161['end']();}function startContainer(_0x106f1e,_0x51678b,_0x8d8f95,_0x4ee76b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x52bf25,_0x32fb48,_0x96d017,_0x37ceef,_0x143b52=this;return __generator(this,function(_0x49a6fe){var _0x818b35=a14_0x3594;switch(_0x49a6fe[_0x818b35(0xd2)]){case 0x0:return[0x4,createContainer(_0x106f1e)];case 0x1:_0x52bf25=_0x49a6fe[_0x818b35(0x170)](),containers[_0x818b35(0x109)](_0x52bf25['id']),_0x49a6fe[_0x818b35(0xd2)]=0x2;case 0x2:_0x49a6fe['trys'][_0x818b35(0x135)]([0x2,0x4,,0x5]);return[0x4,_0x52bf25[_0x818b35(0x177)]({})];case 0x3:_0x49a6fe[_0x818b35(0x170)]();return[0x3,0x5];case 0x4:_0x32fb48=_0x49a6fe['sent'](),logger_1[_0x818b35(0x152)][_0x818b35(0x17d)](_0x32fb48);return[0x3,0x5];case 0x5:_0x96d017=_0x51678b||_0x8d8f95;if(!_0x96d017)return[0x3,0x7];!_0x51678b&&(_0x51678b=dev_null_1[_0x818b35(0x152)]());!_0x8d8f95&&(_0x8d8f95=dev_null_1[_0x818b35(0x152)]());return[0x4,_0x52bf25[_0x818b35(0x143)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x6:_0x37ceef=_0x49a6fe['sent'](),_0x52bf25[_0x818b35(0x129)][_0x818b35(0x16b)](_0x37ceef,_0x51678b,error_processor_1[_0x818b35(0x18a)]({'serviceName':_0x4ee76b[_0x818b35(0x167)],'functionName':_0x4ee76b['functionName'],'errorStream':_0x8d8f95})),_0x49a6fe['label']=0x7;case 0x7:return[0x2,{'containerId':_0x52bf25===null||_0x52bf25===void 0x0?void 0x0:_0x52bf25['id'],'stop':function(){return __awaiter(_0x143b52,void 0x0,void 0x0,function(){return __generator(this,function(_0x3766e9){var _0x1a1781=a14_0x3594;switch(_0x3766e9['label']){case 0x0:logger_1['default'][_0x1a1781(0x11c)](_0x1a1781(0x10f)+_0x52bf25['id']);return[0x4,_0x52bf25[_0x1a1781(0x17e)]()];case 0x1:_0x3766e9[_0x1a1781(0x170)](),containers[_0x1a1781(0x171)](_0x52bf25['id']);return[0x2];}});});},'kill':function(){return __awaiter(_0x143b52,void 0x0,void 0x0,function(){return __generator(this,function(_0x3f3ee7){var _0x4a955f=a14_0x3594;switch(_0x3f3ee7['label']){case 0x0:logger_1['default'][_0x4a955f(0x11c)](_0x4a955f(0x175)+_0x52bf25['id']);return[0x4,_0x52bf25[_0x4a955f(0x182)]()];case 0x1:_0x3f3ee7['sent'](),containers[_0x4a955f(0x171)](_0x52bf25['id']);return[0x2];}});});},'exec':function(_0x1e58e7,_0x3827d0){var _0x2c4a81=_0x818b35,_0x4a4ea0=_0x3827d0===void 0x0?{}:_0x3827d0,_0x51da44=_0x4a4ea0['cwd'],_0xefcc09=_0x51da44===void 0x0?'':_0x51da44,_0x402a83=_0x4a4ea0[_0x2c4a81(0x130)],_0x4b1e27=_0x402a83===void 0x0?{}:_0x402a83,_0x154d09=_0x4a4ea0[_0x2c4a81(0x138)],_0x390e8f=_0x154d09===void 0x0?process[_0x2c4a81(0x186)]:_0x154d09,_0x4c0954=_0x4a4ea0[_0x2c4a81(0x144)],_0x53a13f=_0x4c0954===void 0x0?process['stderr']:_0x4c0954,_0x304e61=_0x4a4ea0[_0x2c4a81(0x18f)],_0x28185f=_0x304e61===void 0x0?![]:_0x304e61,_0x166304=_0x4a4ea0['context'],_0xfeabab=_0x166304===void 0x0?{}:_0x166304,_0x33cc63=_0x4a4ea0[_0x2c4a81(0x1a5)],_0x1779eb=_0x33cc63===void 0x0?null:_0x33cc63;return __awaiter(_0x143b52,void 0x0,void 0x0,function(){var _0x259fde,_0x4834ed,_0x480dfc,_0x57bb61;return __generator(this,function(_0x29a067){var _0x5ebdb6=a14_0x3594;switch(_0x29a067['label']){case 0x0:_0x259fde=_0x1779eb?!![]:![],_0x4834ed={'Env':dockerOpts[_0x5ebdb6(0xbe)](_0x4b1e27),'Tty':![],'AttachStdin':_0x259fde,'AttachStdout':!![],'AttachStderr':!![],'WorkingDir':_0xefcc09};_0x1e58e7!==[]&&(_0x4834ed[_0x5ebdb6(0xf1)]=_0x1e58e7);logger_1['default']['debug'](_0x5ebdb6(0x191)+JSON[_0x5ebdb6(0x19f)](_0x4834ed,null,0x4));return[0x4,_0x52bf25[_0x5ebdb6(0x16d)](_0x4834ed)];case 0x1:_0x480dfc=_0x29a067[_0x5ebdb6(0x170)]();return[0x4,_0x480dfc[_0x5ebdb6(0x177)]({'hijack':!![],'stdin':_0x259fde})];case 0x2:_0x57bb61=_0x29a067[_0x5ebdb6(0x170)]();return[0x4,new Promise(function(_0x54bc7d){return setTimeout(_0x54bc7d,0x1e);})];case 0x3:_0x29a067[_0x5ebdb6(0x170)]();_0x1779eb!==null&&writeEventToStreamAndClose(_0x57bb61,_0x1779eb);!_0x390e8f&&(_0x390e8f=process[_0x5ebdb6(0x186)]);!_0x53a13f&&(_0x53a13f=process[_0x5ebdb6(0x12a)]);_0x28185f?_0x52bf25[_0x5ebdb6(0x129)]['demuxStream'](_0x57bb61,_0x390e8f,_0x53a13f):_0x52bf25[_0x5ebdb6(0x129)]['demuxStream'](_0x57bb61,dev_null_1['default'](),_0x53a13f);return[0x4,waitForExec(_0x480dfc)];case 0x4:return[0x2,_0x29a067[_0x5ebdb6(0x170)]()];}});});}}];}});});}exports[a14_0x23f5f6(0xe6)]=startContainer;function waitForExec(_0x3772bf){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3faa3a){var _0x115a92=a14_0x3594;switch(_0x3faa3a[_0x115a92(0xd2)]){case 0x0:return[0x4,new Promise(function(_0x169a86,_0x4f9c2d){function _0x3fcea0(){_0x3772bf['inspect'](function(_0x40e838,_0x3da7b3){var _0x125152=a14_0x3594;if(_0x3da7b3[_0x125152(0x181)]){setTimeout(_0x3fcea0,0x64);return;}if(_0x40e838)_0x4f9c2d(_0x40e838);else _0x3da7b3[_0x125152(0x19a)]!==0x0?_0x4f9c2d(_0x3da7b3[_0x125152(0x11f)]['entrypoint']+'\x20exited\x20with\x20code\x20'+_0x3da7b3[_0x125152(0x19a)]):_0x169a86(_0x3da7b3[_0x125152(0x19a)]);});}_0x3fcea0();})];case 0x1:return[0x2,_0x3faa3a[_0x115a92(0x170)]()];}});});}function run(_0x47f43b,_0x57bd6a,_0x342e8b,_0x4602af,_0x280cf7){return _0x280cf7===void 0x0&&(_0x280cf7={}),__awaiter(this,void 0x0,void 0x0,function(){var _0x5e4149,_0x3451dc,_0x1f81c9,_0x297e04;return __generator(this,function(_0x122df4){var _0x142d47=a14_0x3594;switch(_0x122df4[_0x142d47(0xd2)]){case 0x0:return[0x4,runContainer(_0x47f43b,_0x342e8b,_0x4602af,_0x280cf7)];case 0x1:_0x5e4149=_0x122df4['sent'](),_0x3451dc=_0x5e4149[_0x142d47(0x10a)],_0x1f81c9=_0x5e4149[_0x142d47(0x1a8)],writeEventToStreamAndClose(_0x1f81c9,_0x57bd6a);return[0x4,_0x3451dc['wait']()];case 0x2:_0x297e04=_0x122df4[_0x142d47(0x170)](),containers['delete'](_0x3451dc['id']),streams[_0x142d47(0x171)](_0x1f81c9);return[0x2,_0x297e04];}});});}exports['run']=run;function stopContainer(_0xc2e7a5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x50e614,_0x1fedde,_0x232b54;return __generator(this,function(_0x3df861){var _0x4a8bce=a14_0x3594;switch(_0x3df861[_0x4a8bce(0xd2)]){case 0x0:_0x50e614=core[_0x4a8bce(0x16c)](_0x4a8bce(0x168)+_0xc2e7a5['id']),_0x3df861[_0x4a8bce(0xd2)]=0x1;case 0x1:_0x3df861[_0x4a8bce(0x141)][_0x4a8bce(0x135)]([0x1,0x3,,0x8]);return[0x4,_0xc2e7a5['stop']()];case 0x2:_0x3df861[_0x4a8bce(0x170)](),_0x50e614[_0x4a8bce(0x19b)](_0x4a8bce(0x18e));return[0x3,0x8];case 0x3:_0x1fedde=_0x3df861[_0x4a8bce(0x170)](),_0x50e614[_0x4a8bce(0xce)](_0x4a8bce(0x123)),logger_1[_0x4a8bce(0x152)][_0x4a8bce(0x11c)](_0x4a8bce(0x17f)+_0xc2e7a5['id']+_0x4a8bce(0xbf)+_0x1fedde),_0x50e614=core[_0x4a8bce(0x16c)](_0x4a8bce(0xd5)+_0xc2e7a5['id']),_0x3df861[_0x4a8bce(0xd2)]=0x4;case 0x4:_0x3df861[_0x4a8bce(0x141)][_0x4a8bce(0x135)]([0x4,0x6,,0x7]);return[0x4,_0xc2e7a5['kill']()];case 0x5:_0x3df861[_0x4a8bce(0x170)](),_0x50e614[_0x4a8bce(0x19b)](_0x4a8bce(0xd3));return[0x3,0x7];case 0x6:_0x232b54=_0x3df861[_0x4a8bce(0x170)](),_0x50e614[_0x4a8bce(0xce)]('Failed\x20to\x20kill\x20the\x20container.Please\x20stop\x20it\x20manually.'),logger_1[_0x4a8bce(0x152)][_0x4a8bce(0x11c)](_0x4a8bce(0xca)+_0xc2e7a5['id']+_0x4a8bce(0xbf)+_0x232b54);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x2];}});});}exports['stopContainer']=stopContainer;