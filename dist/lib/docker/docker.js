'use strict';var a14_0x29b2=['assign','pullImage','The\x20default\x20host\x20machine\x20path\x20for\x20docker\x20toolbox\x20is\x20under\x20\x27C:\x5cUsers\x27,\x20Please\x20make\x20sure\x20your\x20project\x20is\x20in\x20this\x20directory.\x20If\x20you\x20want\x20to\x20mount\x20other\x20disk\x20paths,\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md\x20.','generatePwdFile','base64','into','runContainer','modem','serviceName','run','map','/etc/passwd','localNasDir','errorStream','stream','pull','project','parse','includes','ProcessConfig','Stop\x20container\x20succeed.','logConfig','default','Stopping\x20the\x20container:\x20','platform','message','generateDebugEnv','Generator\x20is\x20already\x20executing.','split','\x27docker\x20pull\x20','...','imageExist','78629LJGgBB','environmentVariables','draft','resolve','stringify','Labels','exec','basename','log','join','args','resolvePasswdMount','linux','docker\x20cmd:\x20',',\x20for\x20a\x20better\x20experience,\x20please\x20upgrade\x20the\x20docker\x20version.','Skip\x20pulling\x20image\x20','cwd','\x20exited\x20with\x20code\x20','lodash','Cmd','/code','logs','return','Kill\x20container\x20succeed','hasOwnProperty','getImage','ReadOnly','timeout','\x27,\x20port=','resolveLibPathsFromLdConf','info','../definition','handler','env','--http','Failed\x20to\x20stop\x20the\x20container.','filter','followProgress','--event','155438epXKJu','demuxStream','resolveNasConfigToMounts','ExitCode','ServerVersion','\x20to\x20pull\x20image\x20by\x20yourself.','entrypoint','parseInt','stderr','ops','reduce','listImages','40608GSUTng','bind','Stopping\x20container:\x20','../../common/logger','__createBinding','remoteNasDir','Please\x20add\x20directory\x20\x27','command','dev-null','resolveDebuggerPathToMount','getRootBaseDir','throw','/tmp/debugger_files','../utils/passwd','first','resolveAutoLogConfig','status','resolveImageNameForPull','--stdin','done','HostConfig','Killing\x20the\x20container:\x20','fs-extra','--initializationTimeout','Failed\x20to\x20kill\x20the\x20container.Please\x20stop\x20it\x20manually.','stdout','Killing\x20container:\x20','290jvCWxH','succeed','aux','create','kill','2SwMzDI','sent','skip\x20pulling\x20image\x20','AccountID','addEnv','functionName','detectDockerVersion','stop','logstore','progress','1MHrYEH','--server','next','apply','pop','generateDockerCmd','resolveTmpDirToMount','from','getTime','fail','__esModule','outputStream','win32','../devs','/////////////////\x20config\x20begin\x20/////////////////','fc_local_','random','convertNasConfigToNasMappings','address','generateDockerEnvs','trys','iterator','processorTransformFactory','inspect','showDebugIdeTipsForPycharm','__importDefault','path','event','substr','Mounts','Starting\x20docker\x20pull\x20','\x0aPath\x20mappings\x20\x20:\x20','generateFunctionEnvs','Stop\x20the\x20container:\x20','89116nNknnV','--event-decode','initializationTimeout','initializer','context','../error-processor','DOCKER_REGISTRIES','createAndRunContainer','../local-invoke/nas','runtime','delete','value','call','\x0aPort\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20:\x20','write','159288amyBNr','./docker-opts','resolveCodeUriToMount','__awaiter','SecurityToken','push','stopContainer','start','posix','isCustomContainerRuntime','debug','has','\x0aWe\x20detected\x20that\x20your\x20docker\x20version\x20is\x20','dockerode','memorySize','showDebugIdeTipsForVscode','docker\x20exec\x20opts:\x20','AccessKeyID','label','lstat','isDockerToolBoxAndEnsureDockerVersion','isAutoConfig','__setModuleDefault','toString','__spreadArrays','slice','/tmp','indexOf',',\x20you\x20can\x20also\x20use\x20','yellow','1389ZIaGzv','\x20failed,\x20error:\x20','java','82107AzUmsi','pullImageIfNeed','pullFcImageIfNeed','add','customContainerConfig','defineProperty','Pulling\x20image\x20','startContainer','You\x20can\x20paste\x20these\x20config\x20to\x20.vscode/launch.json,\x20and\x20then\x20attach\x20to\x20your\x20running\x20function','invalid\x20mount\x20config\x20for\x20type','length'];var a14_0x40dbe8=a14_0xb6fc;(function(_0x4bdf76,_0x37ab52){var _0x338f49=a14_0xb6fc;while(!![]){try{var _0xa3eeb5=-parseInt(_0x338f49(0x18b))+parseInt(_0x338f49(0x1ac))+parseInt(_0x338f49(0x130))+-parseInt(_0x338f49(0x17c))*parseInt(_0x338f49(0x150))+-parseInt(_0x338f49(0xfd))*-parseInt(_0x338f49(0x15a))+-parseInt(_0x338f49(0x124))+parseInt(_0x338f49(0x14b))*parseInt(_0x338f49(0x1a9));if(_0xa3eeb5===_0x37ab52)break;else _0x4bdf76['push'](_0x4bdf76['shift']());}catch(_0x1244f6){_0x4bdf76['push'](_0x4bdf76['shift']());}}}(a14_0x29b2,0x1b25c));var __createBinding=this&&this[a14_0x40dbe8(0x134)]||(Object['create']?function(_0x29c397,_0x137ee8,_0x477e08,_0x51f20b){if(_0x51f20b===undefined)_0x51f20b=_0x477e08;Object['defineProperty'](_0x29c397,_0x51f20b,{'enumerable':!![],'get':function(){return _0x137ee8[_0x477e08];}});}:function(_0x2a34b7,_0x502099,_0x1b0e33,_0x558caa){if(_0x558caa===undefined)_0x558caa=_0x1b0e33;_0x2a34b7[_0x558caa]=_0x502099[_0x1b0e33];}),__setModuleDefault=this&&this[a14_0x40dbe8(0x1a1)]||(Object[a14_0x40dbe8(0x14e)]?function(_0x1e050d,_0x8cf777){var _0x2e7311=a14_0x40dbe8;Object[_0x2e7311(0xd7)](_0x1e050d,_0x2e7311(0xf3),{'enumerable':!![],'value':_0x8cf777});}:function(_0x2194e2,_0x227103){var _0xa3e511=a14_0x40dbe8;_0x2194e2[_0xa3e511(0xf3)]=_0x227103;}),__importStar=this&&this['__importStar']||function(_0x5034c2){var _0x5e0d00=a14_0x40dbe8;if(_0x5034c2&&_0x5034c2[_0x5e0d00(0x164)])return _0x5034c2;var _0x2a4ef6={};if(_0x5034c2!=null){for(var _0x343493 in _0x5034c2)if(_0x343493!==_0x5e0d00(0xf3)&&Object[_0x5e0d00(0x115)][_0x5e0d00(0x188)](_0x5034c2,_0x343493))__createBinding(_0x2a4ef6,_0x5034c2,_0x343493);}return __setModuleDefault(_0x2a4ef6,_0x5034c2),_0x2a4ef6;},__awaiter=this&&this[a14_0x40dbe8(0x18e)]||function(_0x21770e,_0x42a8bd,_0xe4a929,_0x5788c3){function _0x373b98(_0x3e70cb){return _0x3e70cb instanceof _0xe4a929?_0x3e70cb:new _0xe4a929(function(_0x5dd4ea){_0x5dd4ea(_0x3e70cb);});}return new(_0xe4a929||(_0xe4a929=Promise))(function(_0x38f43c,_0xf56eb9){var _0x208371=a14_0xb6fc;function _0x9d308f(_0x58e6a2){try{_0x5a12bb(_0x5788c3['next'](_0x58e6a2));}catch(_0x15183e){_0xf56eb9(_0x15183e);}}function _0x2630b3(_0x4dea64){try{_0x5a12bb(_0x5788c3['throw'](_0x4dea64));}catch(_0x4927e8){_0xf56eb9(_0x4927e8);}}function _0x5a12bb(_0x34a2f3){var _0xd868dc=a14_0xb6fc;_0x34a2f3['done']?_0x38f43c(_0x34a2f3[_0xd868dc(0x187)]):_0x373b98(_0x34a2f3['value'])['then'](_0x9d308f,_0x2630b3);}_0x5a12bb((_0x5788c3=_0x5788c3[_0x208371(0x15d)](_0x21770e,_0x42a8bd||[]))[_0x208371(0x15c)]());});},__generator=this&&this['__generator']||function(_0xf3043,_0x19a89d){var _0x359946=a14_0x40dbe8,_0x316c88={'label':0x0,'sent':function(){if(_0x31cbea[0x0]&0x1)throw _0x31cbea[0x1];return _0x31cbea[0x1];},'trys':[],'ops':[]},_0x4358fb,_0x1570ee,_0x31cbea,_0x266035;return _0x266035={'next':_0x5891a0(0x0),'throw':_0x5891a0(0x1),'return':_0x5891a0(0x2)},typeof Symbol==='function'&&(_0x266035[Symbol[_0x359946(0x16f)]]=function(){return this;}),_0x266035;function _0x5891a0(_0x2dee67){return function(_0x2fb1b1){return _0x466fce([_0x2dee67,_0x2fb1b1]);};}function _0x466fce(_0x174c3b){var _0x2ef459=_0x359946;if(_0x4358fb)throw new TypeError(_0x2ef459(0xf8));while(_0x316c88)try{if(_0x4358fb=0x1,_0x1570ee&&(_0x31cbea=_0x174c3b[0x0]&0x2?_0x1570ee[_0x2ef459(0x113)]:_0x174c3b[0x0]?_0x1570ee[_0x2ef459(0x13b)]||((_0x31cbea=_0x1570ee['return'])&&_0x31cbea[_0x2ef459(0x188)](_0x1570ee),0x0):_0x1570ee['next'])&&!(_0x31cbea=_0x31cbea[_0x2ef459(0x188)](_0x1570ee,_0x174c3b[0x1]))[_0x2ef459(0x143)])return _0x31cbea;if(_0x1570ee=0x0,_0x31cbea)_0x174c3b=[_0x174c3b[0x0]&0x2,_0x31cbea[_0x2ef459(0x187)]];switch(_0x174c3b[0x0]){case 0x0:case 0x1:_0x31cbea=_0x174c3b;break;case 0x4:_0x316c88[_0x2ef459(0x19d)]++;return{'value':_0x174c3b[0x1],'done':![]};case 0x5:_0x316c88['label']++,_0x1570ee=_0x174c3b[0x1],_0x174c3b=[0x0];continue;case 0x7:_0x174c3b=_0x316c88[_0x2ef459(0x12d)][_0x2ef459(0x15e)](),_0x316c88['trys'][_0x2ef459(0x15e)]();continue;default:if(!(_0x31cbea=_0x316c88[_0x2ef459(0x16e)],_0x31cbea=_0x31cbea['length']>0x0&&_0x31cbea[_0x31cbea[_0x2ef459(0xdc)]-0x1])&&(_0x174c3b[0x0]===0x6||_0x174c3b[0x0]===0x2)){_0x316c88=0x0;continue;}if(_0x174c3b[0x0]===0x3&&(!_0x31cbea||_0x174c3b[0x1]>_0x31cbea[0x0]&&_0x174c3b[0x1]<_0x31cbea[0x3])){_0x316c88[_0x2ef459(0x19d)]=_0x174c3b[0x1];break;}if(_0x174c3b[0x0]===0x6&&_0x316c88[_0x2ef459(0x19d)]<_0x31cbea[0x1]){_0x316c88[_0x2ef459(0x19d)]=_0x31cbea[0x1],_0x31cbea=_0x174c3b;break;}if(_0x31cbea&&_0x316c88[_0x2ef459(0x19d)]<_0x31cbea[0x2]){_0x316c88[_0x2ef459(0x19d)]=_0x31cbea[0x2],_0x316c88['ops'][_0x2ef459(0x190)](_0x174c3b);break;}if(_0x31cbea[0x2])_0x316c88[_0x2ef459(0x12d)][_0x2ef459(0x15e)]();_0x316c88[_0x2ef459(0x16e)][_0x2ef459(0x15e)]();continue;}_0x174c3b=_0x19a89d[_0x2ef459(0x188)](_0xf3043,_0x316c88);}catch(_0x339817){_0x174c3b=[0x6,_0x339817],_0x1570ee=0x0;}finally{_0x4358fb=_0x31cbea=0x0;}if(_0x174c3b[0x0]&0x5)throw _0x174c3b[0x1];return{'value':_0x174c3b[0x0]?_0x174c3b[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this[a14_0x40dbe8(0x1a3)]||function(){var _0x17d865=a14_0x40dbe8;for(var _0x1fd64d=0x0,_0x36a8f5=0x0,_0x45c0a8=arguments[_0x17d865(0xdc)];_0x36a8f5<_0x45c0a8;_0x36a8f5++)_0x1fd64d+=arguments[_0x36a8f5]['length'];for(var _0x2f4420=Array(_0x1fd64d),_0x371955=0x0,_0x36a8f5=0x0;_0x36a8f5<_0x45c0a8;_0x36a8f5++)for(var _0x253116=arguments[_0x36a8f5],_0x3850cd=0x0,_0x3b19eb=_0x253116[_0x17d865(0xdc)];_0x3850cd<_0x3b19eb;_0x3850cd++,_0x371955++)_0x2f4420[_0x371955]=_0x253116[_0x3850cd];return _0x2f4420;},__importDefault=this&&this[a14_0x40dbe8(0x173)]||function(_0x3a9d12){return _0x3a9d12&&_0x3a9d12['__esModule']?_0x3a9d12:{'default':_0x3a9d12};};Object['defineProperty'](exports,a14_0x40dbe8(0x164),{'value':!![]}),exports['stopContainer']=exports[a14_0x40dbe8(0xe6)]=exports[a14_0x40dbe8(0xd9)]=exports[a14_0x40dbe8(0x172)]=exports[a14_0x40dbe8(0x19a)]=exports['createAndRunContainer']=exports[a14_0x40dbe8(0x108)]=exports[a14_0x40dbe8(0x139)]=exports[a14_0x40dbe8(0x160)]=exports[a14_0x40dbe8(0x126)]=exports['detectDockerVersion']=exports[a14_0x40dbe8(0x19f)]=exports[a14_0x40dbe8(0x18d)]=exports[a14_0x40dbe8(0xe3)]=exports[a14_0x40dbe8(0xde)]=exports['pullFcImageIfNeed']=exports['generateFunctionEnvs']=exports[a14_0x40dbe8(0x16d)]=exports['generateDockerCmd']=exports[a14_0x40dbe8(0xd3)]=exports['generateRamdomContainerName']=exports[a14_0x40dbe8(0xfc)]=void 0x0;var dockerode_1=__importDefault(require(a14_0x40dbe8(0x198))),logger_1=__importDefault(require(a14_0x40dbe8(0x133))),draftlog=__importStar(require('draftlog')),docker_support_1=require('./docker-support'),error_processor_1=require(a14_0x40dbe8(0x181)),lodash_1=__importDefault(require(a14_0x40dbe8(0x10f))),nas=__importStar(require(a14_0x40dbe8(0x184))),path_1=__importDefault(require(a14_0x40dbe8(0x174))),devs_1=require(a14_0x40dbe8(0x167)),fs=__importStar(require(a14_0x40dbe8(0x146))),passwd_1=require(a14_0x40dbe8(0x13d)),dockerOpts=__importStar(require(a14_0x40dbe8(0x18c))),debug_1=require('../local-invoke/debug'),ip=__importStar(require('ip')),env_1=require('../local-invoke/env'),runtime_1=require('../utils/runtime'),definition_1=require(a14_0x40dbe8(0x11c)),devnull=__importStar(require(a14_0x40dbe8(0x138))),core=__importStar(require('@serverless-devs/core')),isWin=process[a14_0x40dbe8(0xf5)]===a14_0x40dbe8(0x166),docker=new dockerode_1[(a14_0x40dbe8(0xf3))]();draftlog[a14_0x40dbe8(0xe2)](console);var containers=new Set(),streams=new Set(),skipPullImage=!![];function imageExist(_0x11c974){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1600ce;return __generator(this,function(_0x420d52){var _0x4bc3d6=a14_0xb6fc;switch(_0x420d52[_0x4bc3d6(0x19d)]){case 0x0:return[0x4,docker[_0x4bc3d6(0x12f)]({'filters':{'reference':[_0x11c974]}})];case 0x1:_0x1600ce=_0x420d52[_0x4bc3d6(0x151)]();return[0x2,_0x1600ce[_0x4bc3d6(0xdc)]>0x0];}});});}exports[a14_0x40dbe8(0xfc)]=imageExist;function generateRamdomContainerName(){var _0x48fc28=a14_0x40dbe8;return _0x48fc28(0x169)+new Date()[_0x48fc28(0x162)]()+'_'+Math[_0x48fc28(0x16a)]()[_0x48fc28(0x1a2)](0x24)[_0x48fc28(0x176)](0x2,0x7);}exports['generateRamdomContainerName']=generateRamdomContainerName;function pullImageIfNeed(_0x36c00d,_0x18f788,_0x5663c2,_0x31472b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x5b29a6,_0x5c21c1;return __generator(this,function(_0x25c285){var _0x2d8ea6=a14_0xb6fc;switch(_0x25c285[_0x2d8ea6(0x19d)]){case 0x0:_0x5b29a6=_0x36c00d+'/'+_0x18f788+'/'+_0x5663c2+':'+_0x31472b,logger_1[_0x2d8ea6(0xf3)][_0x2d8ea6(0x195)]('Proxy\x20image\x20url:\x20'+_0x5b29a6);return[0x4,imageExist(_0x5b29a6)];case 0x1:if(!!_0x25c285[_0x2d8ea6(0x151)]())return[0x3,0x3];logger_1[_0x2d8ea6(0xf3)][_0x2d8ea6(0x195)](_0x2d8ea6(0x178)+_0x5b29a6);return[0x4,docker[_0x2d8ea6(0xec)](_0x5b29a6)];case 0x2:_0x5c21c1=_0x25c285[_0x2d8ea6(0x151)](),_0x25c285[_0x2d8ea6(0x19d)]=0x3;case 0x3:return[0x4,new Promise(function(_0x98ac8d,_0x50a255){var _0x2ecfa8=_0x2d8ea6;if(_0x5c21c1){var _0x2711ad=function(_0x196a6a){_0x196a6a&&_0x50a255(_0x196a6a),_0x98ac8d(_0x5b29a6);},_0x1b3399={},_0x11d5b5=function(_0x11c2eb){var _0x463c80=a14_0xb6fc,_0x5056c7=_0x11c2eb['status'];_0x11c2eb[_0x463c80(0x159)]&&(_0x5056c7=_0x11c2eb[_0x463c80(0x140)]+'\x20'+_0x11c2eb[_0x463c80(0x159)]);if(_0x11c2eb['id']){var _0x541667=_0x11c2eb['id'];!_0x1b3399[_0x541667]&&(_0x1b3399[_0x541667]=console[_0x463c80(0xff)]()),_0x1b3399[_0x541667](_0x541667+':\x20'+_0x5056c7);}else{lodash_1[_0x463c80(0xf3)][_0x463c80(0x196)](_0x11c2eb,'aux.ID')&&(_0x11c2eb['stream']=_0x11c2eb[_0x463c80(0x14d)]['ID']+'\x0a');var _0x1e6419=_0x11c2eb['status']?_0x11c2eb[_0x463c80(0x140)]+'\x0a':_0x11c2eb[_0x463c80(0xeb)];process[_0x463c80(0x149)][_0x463c80(0x18a)](_0x1e6419);}};docker[_0x2ecfa8(0xe4)][_0x2ecfa8(0x122)](_0x5c21c1,_0x2711ad,_0x11d5b5);}else _0x98ac8d(_0x5b29a6);})];case 0x4:return[0x2,_0x25c285[_0x2d8ea6(0x151)]()];}});});}exports[a14_0x40dbe8(0xd3)]=pullImageIfNeed;function generateDockerCmd(_0x4113b8,_0x144644,_0x5cc639,_0x2ed99b,_0x2089a6,_0xe2312c){var _0x398589=a14_0x40dbe8;_0x2089a6===void 0x0&&(_0x2089a6=!![]);_0xe2312c===void 0x0&&(_0xe2312c=null);if(runtime_1['isCustomContainerRuntime'](_0x4113b8))return genDockerCmdOfCustomContainer(_0x5cc639);else{if(_0x144644)return[_0x398589(0x15b)];}return genDockerCmdOfNonCustomContainer(_0x5cc639,_0x2ed99b,_0x2089a6,_0xe2312c);}exports[a14_0x40dbe8(0x15f)]=generateDockerCmd;function genDockerCmdOfNonCustomContainer(_0x5715b,_0x3bd2a3,_0x42e9b0,_0x184227){var _0x11d4f0=a14_0x40dbe8;_0x42e9b0===void 0x0&&(_0x42e9b0=!![]);_0x184227===void 0x0&&(_0x184227=null);var _0x39ef1c=['-h',_0x5715b[_0x11d4f0(0x11d)]];_0x184227!==null?(_0x39ef1c['push'](_0x11d4f0(0x123),Buffer[_0x11d4f0(0x161)](_0x184227)[_0x11d4f0(0x1a2)](_0x11d4f0(0xe1))),_0x39ef1c[_0x11d4f0(0x190)](_0x11d4f0(0x17d))):_0x39ef1c[_0x11d4f0(0x190)](_0x11d4f0(0x142));_0x3bd2a3&&_0x39ef1c[_0x11d4f0(0x190)](_0x11d4f0(0x11f));var _0x417134=_0x5715b[_0x11d4f0(0x17f)];_0x417134&&_0x42e9b0&&_0x39ef1c['push']('-i',_0x417134);var _0x1e396c=_0x5715b[_0x11d4f0(0x17e)];return _0x1e396c&&_0x39ef1c[_0x11d4f0(0x190)](_0x11d4f0(0x147),_0x1e396c[_0x11d4f0(0x1a2)]()),logger_1[_0x11d4f0(0xf3)][_0x11d4f0(0x195)](_0x11d4f0(0x10a)+_0x39ef1c),_0x39ef1c;}function genDockerCmdOfCustomContainer(_0x3adede){var _0xad953f=a14_0x40dbe8,_0x1c2eea=_0x3adede['customContainerConfig'][_0xad953f(0x137)]?JSON[_0xad953f(0xee)](_0x3adede[_0xad953f(0xd6)][_0xad953f(0x137)]):undefined,_0x5cb543=_0x3adede[_0xad953f(0xd6)]['args']?JSON[_0xad953f(0xee)](_0x3adede[_0xad953f(0xd6)][_0xad953f(0x107)]):undefined;if(_0x1c2eea&&_0x5cb543)return __spreadArrays(_0x1c2eea,_0x5cb543);else{if(_0x1c2eea)return _0x1c2eea;else{if(_0x5cb543)return _0x5cb543;}}return[];}function generateDockerEnvs(_0x3eeee1,_0x2583d7,_0x2007c9,_0x4270d9,_0x4edd7a,_0x2847b9,_0x42917b,_0x21955e,_0x24aa72,_0x47ce0a,_0x4ccec9,_0x208e6b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x509a37,_0x1a0b87,_0x5c3d83,_0xee382e,_0xf12f1a;return __generator(this,function(_0x4a0abc){var _0x4e24b1=a14_0xb6fc;switch(_0x4a0abc[_0x4e24b1(0x19d)]){case 0x0:_0x509a37={};_0x24aa72&&Object['assign'](_0x509a37,{'FC_HTTP_PARAMS':_0x24aa72});return[0x4,env_1[_0x4e24b1(0x11a)](_0x2007c9,_0x42917b['codeUri'])];case 0x1:_0x1a0b87=_0x4a0abc[_0x4e24b1(0x151)](),Object[_0x4e24b1(0xdd)](_0x509a37,_0x1a0b87),_0x5c3d83=_0x42917b[_0x4e24b1(0x185)];if(_0x21955e&&!_0x208e6b)_0xee382e=debug_1[_0x4e24b1(0xf7)](_0x5c3d83,_0x21955e,_0x4ccec9),Object[_0x4e24b1(0xdd)](_0x509a37,_0xee382e);else _0x208e6b&&Object['assign'](_0x509a37,{'DEBUG_OPTIONS':_0x208e6b});Object[_0x4e24b1(0xdd)](_0x509a37,generateFunctionEnvs(_0x42917b));definition_1[_0x4e24b1(0x1a0)](_0x4edd7a===null||_0x4edd7a===void 0x0?void 0x0:_0x4edd7a['logConfig'])?_0xf12f1a=definition_1[_0x4e24b1(0x13f)](_0x3eeee1===null||_0x3eeee1===void 0x0?void 0x0:_0x3eeee1[_0x4e24b1(0x153)],_0x2583d7,_0x4270d9):_0xf12f1a=_0x4edd7a===null||_0x4edd7a===void 0x0?void 0x0:_0x4edd7a[_0x4e24b1(0xf2)];(_0x42917b===null||_0x42917b===void 0x0?void 0x0:_0x42917b[_0x4e24b1(0x185)][_0x4e24b1(0xef)](_0x4e24b1(0x1ab)))&&Object['assign'](_0x509a37,{'fc_enable_new_java_ca':!![]});Object['assign'](_0x509a37,{'local':!![],'FC_ACCESS_KEY_ID':_0x3eeee1===null||_0x3eeee1===void 0x0?void 0x0:_0x3eeee1[_0x4e24b1(0x19c)],'FC_ACCESS_KEY_SECRET':_0x3eeee1===null||_0x3eeee1===void 0x0?void 0x0:_0x3eeee1['AccessKeySecret'],'FC_SECURITY_TOKEN':_0x3eeee1===null||_0x3eeee1===void 0x0?void 0x0:_0x3eeee1[_0x4e24b1(0x18f)],'FC_ACCOUNT_ID':_0x3eeee1===null||_0x3eeee1===void 0x0?void 0x0:_0x3eeee1[_0x4e24b1(0x153)],'FC_REGION':_0x2583d7,'FC_FUNCTION_NAME':_0x2847b9,'FC_HANDLER':_0x42917b[_0x4e24b1(0x11d)],'FC_MEMORY_SIZE':_0x42917b[_0x4e24b1(0x199)]||0x80,'FC_TIMEOUT':_0x42917b[_0x4e24b1(0x118)]||0x3,'FC_INITIALIZER':_0x42917b[_0x4e24b1(0x17f)],'FC_INITIALIZATION_TIMEOUT':_0x42917b[_0x4e24b1(0x17e)]||0x3,'FC_SERVICE_NAME':_0x4270d9,'FC_SERVICE_LOG_PROJECT':_0xf12f1a===null||_0xf12f1a===void 0x0?void 0x0:_0xf12f1a[_0x4e24b1(0xed)],'FC_SERVICE_LOG_STORE':_0xf12f1a===null||_0xf12f1a===void 0x0?void 0x0:_0xf12f1a[_0x4e24b1(0x158)]});if(runtime_1[_0x4e24b1(0x194)](_0x42917b['runtime']))return[0x2,_0x509a37];return[0x2,env_1[_0x4e24b1(0x154)](_0x509a37,_0x47ce0a)];}});});}exports[a14_0x40dbe8(0x16d)]=generateDockerEnvs;function generateFunctionEnvs(_0x35558a){var _0x7d3372=a14_0x40dbe8,_0x53c497=_0x35558a[_0x7d3372(0xfe)];if(!_0x53c497)return{};return Object[_0x7d3372(0xdd)]({},_0x53c497);}exports[a14_0x40dbe8(0x17a)]=generateFunctionEnvs;function pullFcImageIfNeed(_0x3f5137){return __awaiter(this,void 0x0,void 0x0,function(){var _0x51131a;return __generator(this,function(_0x47fbb9){var _0x46d631=a14_0xb6fc;switch(_0x47fbb9['label']){case 0x0:return[0x4,imageExist(_0x3f5137)];case 0x1:_0x51131a=_0x47fbb9[_0x46d631(0x151)]();if(!(!_0x51131a||!skipPullImage))return[0x3,0x3];return[0x4,pullImage(_0x3f5137)];case 0x2:_0x47fbb9[_0x46d631(0x151)]();return[0x3,0x4];case 0x3:logger_1[_0x46d631(0xf3)][_0x46d631(0x195)](_0x46d631(0x152)+_0x3f5137+_0x46d631(0xfb)),logger_1[_0x46d631(0xf3)]['info'](_0x46d631(0x10c)+_0x3f5137+_0x46d631(0xfb)),_0x47fbb9[_0x46d631(0x19d)]=0x4;case 0x4:return[0x2];}});});}exports[a14_0x40dbe8(0xd4)]=pullFcImageIfNeed;function pullImage(_0x406753){return __awaiter(this,void 0x0,void 0x0,function(){var _0x45b4d6,_0x58e227,_0x2ae785=this;return __generator(this,function(_0x2e8e1b){var _0x2a76c6=a14_0xb6fc;switch(_0x2e8e1b[_0x2a76c6(0x19d)]){case 0x0:return[0x4,dockerOpts[_0x2a76c6(0x141)](_0x406753)];case 0x1:_0x45b4d6=_0x2e8e1b[_0x2a76c6(0x151)]();return[0x4,docker[_0x2a76c6(0xec)](_0x45b4d6)];case 0x2:_0x58e227=_0x2e8e1b[_0x2a76c6(0x151)]();return[0x4,new Promise(function(_0x584b64,_0x1b324d){var _0x45bf44=_0x2a76c6;logger_1[_0x45bf44(0xf3)][_0x45bf44(0x11b)](_0x45bf44(0xd8)+_0x45b4d6+_0x45bf44(0x1a7)+(_0x45bf44(0xfa)+_0x45b4d6+'\x27')+_0x45bf44(0x129));var _0x45d5a1=function(_0x42834b){return __awaiter(_0x2ae785,void 0x0,void 0x0,function(){var _0x58c5d4,_0x1e61b3,_0x55360c,_0x1041b7,_0x3b80d8,_0x9750ba;return __generator(this,function(_0x1432be){var _0x10ac53=a14_0xb6fc;switch(_0x1432be['label']){case 0x0:_0x42834b&&_0x1b324d(_0x42834b);containers[_0x10ac53(0x186)](_0x58e227),(_0x58c5d4=0x0,_0x1e61b3=dockerOpts[_0x10ac53(0x182)]),_0x1432be[_0x10ac53(0x19d)]=0x1;case 0x1:if(!(_0x58c5d4<_0x1e61b3['length']))return[0x3,0x5];_0x55360c=_0x1e61b3[_0x58c5d4];if(!(_0x45b4d6[_0x10ac53(0x1a6)](_0x55360c)===0x0))return[0x3,0x4];return[0x4,docker[_0x10ac53(0x116)](_0x45b4d6)];case 0x2:_0x1041b7=_0x1432be['sent'](),_0x3b80d8=_0x45b4d6[_0x10ac53(0x1a4)](_0x55360c[_0x10ac53(0xdc)]+0x1),_0x9750ba=_0x3b80d8['split'](':');return[0x4,_0x1041b7['tag']({'name':_0x45b4d6,'repo':lodash_1[_0x10ac53(0xf3)][_0x10ac53(0x13e)](_0x9750ba),'tag':lodash_1[_0x10ac53(0xf3)]['last'](_0x9750ba)})];case 0x3:_0x1432be[_0x10ac53(0x151)]();return[0x3,0x5];case 0x4:_0x58c5d4++;return[0x3,0x1];case 0x5:_0x584b64(_0x45b4d6);return[0x2];}});});};containers['add'](_0x58e227),followProgress(_0x58e227,_0x45d5a1);})];case 0x3:return[0x2,_0x2e8e1b[_0x2a76c6(0x151)]()];}});});}exports[a14_0x40dbe8(0xde)]=pullImage;function followProgress(_0x40babe,_0x157f0b){var _0x26838d=a14_0x40dbe8,_0x38ed11={},_0x477557=function(_0x2eac85){var _0x473d56=a14_0xb6fc,_0x3aa41f=_0x2eac85['status'];_0x2eac85['progress']&&(_0x3aa41f=_0x2eac85[_0x473d56(0x140)]+'\x20'+_0x2eac85[_0x473d56(0x159)]);if(_0x2eac85['id']){var _0xc19362=_0x2eac85['id'];!_0x38ed11[_0xc19362]&&(_0x38ed11[_0xc19362]=console[_0x473d56(0xff)]()),_0x38ed11[_0xc19362](_0xc19362+':\x20'+_0x3aa41f);}else{lodash_1[_0x473d56(0xf3)][_0x473d56(0x196)](_0x2eac85,'aux.ID')&&(_0x2eac85[_0x473d56(0xeb)]=_0x2eac85['aux']['ID']+'\x0a');var _0x212e14=_0x2eac85[_0x473d56(0x140)]?_0x2eac85['status']+'\x0a':_0x2eac85[_0x473d56(0xeb)];process[_0x473d56(0x149)]['write'](_0x212e14);}};docker[_0x26838d(0xe4)][_0x26838d(0x122)](_0x40babe,_0x157f0b,_0x477557);}function runContainer(_0xe8dfc5,_0x4ba158,_0x180ca5,_0x34cea1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x25fb6e,_0xe82518,_0xb1c1c0,_0x2bafb6,_0x1503b3;return __generator(this,function(_0x40c49e){var _0x15dffb=a14_0xb6fc;switch(_0x40c49e[_0x15dffb(0x19d)]){case 0x0:return[0x4,createContainer(_0xe8dfc5)];case 0x1:_0x25fb6e=_0x40c49e[_0x15dffb(0x151)](),_0xe82518={'hijack':!![],'stream':!![],'stdin':!![],'stdout':!![],'stderr':!![]};return[0x4,_0x25fb6e['attach'](_0xe82518)];case 0x2:_0xb1c1c0=_0x40c49e[_0x15dffb(0x151)]();!_0x4ba158&&(_0x4ba158=process[_0x15dffb(0x149)]);!_0x180ca5&&(_0x180ca5=process[_0x15dffb(0x12c)]);_0x2bafb6=error_processor_1['processorTransformFactory']({'serviceName':_0x34cea1===null||_0x34cea1===void 0x0?void 0x0:_0x34cea1[_0x15dffb(0xe5)],'functionName':_0x34cea1===null||_0x34cea1===void 0x0?void 0x0:_0x34cea1[_0x15dffb(0x155)],'errorStream':_0x180ca5});!isWin&&_0x25fb6e[_0x15dffb(0xe4)][_0x15dffb(0x125)](_0xb1c1c0,_0x4ba158,_0x2bafb6);return[0x4,_0x25fb6e[_0x15dffb(0x192)]()];case 0x3:_0x40c49e[_0x15dffb(0x151)]();if(!isWin)return[0x3,0x5];return[0x4,_0x25fb6e[_0x15dffb(0x112)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x4:_0x1503b3=_0x40c49e[_0x15dffb(0x151)](),_0x25fb6e[_0x15dffb(0xe4)][_0x15dffb(0x125)](_0x1503b3,_0x4ba158,_0x2bafb6),_0x40c49e[_0x15dffb(0x19d)]=0x5;case 0x5:containers[_0x15dffb(0xd5)](_0x25fb6e['id']),streams[_0x15dffb(0xd5)](_0xb1c1c0);return[0x2,{'container':_0x25fb6e,'stream':_0xb1c1c0}];}});});}exports[a14_0x40dbe8(0xe3)]=runContainer;function resolveCodeUriToMount(_0x5a5a10,_0xb14b3a){return _0xb14b3a===void 0x0&&(_0xb14b3a=!![]),__awaiter(this,void 0x0,void 0x0,function(){var _0xf0de86,_0x588e3d;return __generator(this,function(_0xc8a12e){var _0x42a0eb=a14_0xb6fc;switch(_0xc8a12e['label']){case 0x0:if(!_0x5a5a10)return[0x2,null];_0xf0de86=null;return[0x4,fs[_0x42a0eb(0x19e)](_0x5a5a10)];case 0x1:_0x588e3d=_0xc8a12e[_0x42a0eb(0x151)]();_0x588e3d['isDirectory']()?_0xf0de86=_0x42a0eb(0x111):_0xf0de86=path_1['default'][_0x42a0eb(0x193)][_0x42a0eb(0x106)](_0x42a0eb(0x111),path_1[_0x42a0eb(0xf3)][_0x42a0eb(0x104)](_0x5a5a10));return[0x2,{'Type':'bind','Source':_0x5a5a10,'Target':_0xf0de86,'ReadOnly':_0xb14b3a}];}});});}exports[a14_0x40dbe8(0x18d)]=resolveCodeUriToMount;function isDockerToolBoxAndEnsureDockerVersion(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2c1a66,_0xbf687d;return __generator(this,function(_0x236a4f){var _0x3a8f4c=a14_0xb6fc;switch(_0x236a4f['label']){case 0x0:return[0x4,docker['info']()];case 0x1:_0x2c1a66=_0x236a4f['sent']();return[0x4,detectDockerVersion(_0x2c1a66[_0x3a8f4c(0x128)]||'')];case 0x2:_0x236a4f[_0x3a8f4c(0x151)](),_0xbf687d=(_0x2c1a66[_0x3a8f4c(0x102)]||[])[_0x3a8f4c(0xe7)](function(_0x258504){var _0x3fc265=_0x3a8f4c;return lodash_1[_0x3fc265(0xf3)][_0x3fc265(0xf9)](_0x258504,'=',0x2);})[_0x3a8f4c(0x121)](function(_0x33a3ec){var _0x293a6c=_0x3a8f4c;return _0x33a3ec[_0x293a6c(0xdc)]===0x2;})[_0x3a8f4c(0x12e)](function(_0x402fba,_0x2036c0){return _0x402fba[_0x2036c0[0x0]]=_0x2036c0[0x1],_0x402fba;},{});return[0x2,process[_0x3a8f4c(0xf5)]==='win32'&&_0xbf687d['provider']==='virtualbox'];}});});}exports[a14_0x40dbe8(0x19f)]=isDockerToolBoxAndEnsureDockerVersion;function detectDockerVersion(_0x3633ff){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3f29ba;return __generator(this,function(_0x34c83c){var _0x440079=a14_0xb6fc;_0x3f29ba=_0x3633ff[_0x440079(0xf9)]('.');if(Number['parseInt'](_0x3f29ba[0x0])===0x1&&Number[_0x440079(0x12b)](_0x3f29ba[0x1])<=0xd)throw new Error(_0x440079(0x197)+_0x3633ff+_0x440079(0x10b));return[0x2];});});}exports[a14_0x40dbe8(0x156)]=detectDockerVersion;function createContainer(_0x4166bc){var _0x2505db;return __awaiter(this,void 0x0,void 0x0,function(){var _0x463d33,_0x340eb5,_0x213e39,_0x471326,_0x202eef,_0xd97fc8;return __generator(this,function(_0x5e9575){var _0x5c0957=a14_0xb6fc;switch(_0x5e9575[_0x5c0957(0x19d)]){case 0x0:_0x463d33=process[_0x5c0957(0xf5)]==='win32',_0x340eb5=process['platform']==='darwin';if(!(_0x4166bc&&_0x340eb5))return[0x3,0x2];if(!_0x4166bc[_0x5c0957(0x144)])return[0x3,0x2];return[0x4,docker_support_1['findPathsOutofSharedPaths']((_0x2505db=_0x4166bc[_0x5c0957(0x144)])===null||_0x2505db===void 0x0?void 0x0:_0x2505db[_0x5c0957(0x177)])];case 0x1:_0x213e39=_0x5e9575[_0x5c0957(0x151)]();if(_0x340eb5&&_0x213e39[_0x5c0957(0xdc)]>0x0)throw new Error(_0x5c0957(0x136)+_0x213e39+'\x27\x20to\x20Docker\x20File\x20sharing\x20list,\x20more\x20information\x20please\x20refer\x20to\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/faq-zh.md');_0x5e9575[_0x5c0957(0x19d)]=0x2;case 0x2:return[0x4,isDockerToolBoxAndEnsureDockerVersion()];case 0x3:_0x471326=_0x5e9575['sent'](),_0x5e9575[_0x5c0957(0x19d)]=0x4;case 0x4:_0x5e9575['trys'][_0x5c0957(0x190)]([0x4,0x6,,0x7]);return[0x4,docker['createContainer'](_0x4166bc)];case 0x5:_0x202eef=_0x5e9575[_0x5c0957(0x151)]();return[0x3,0x7];case 0x6:_0xd97fc8=_0x5e9575[_0x5c0957(0x151)]();if(_0xd97fc8[_0x5c0957(0xf6)][_0x5c0957(0x1a6)](_0x5c0957(0xdb))!==-0x1&&_0x471326)throw new Error(_0x5c0957(0xdf));if(_0xd97fc8[_0x5c0957(0xf6)][_0x5c0957(0x1a6)]('drive\x20is\x20not\x20shared')!==-0x1&&_0x463d33)throw new Error(_0xd97fc8['message']+'More\x20information\x20please\x20refer\x20to\x20https://docs.docker.com/docker-for-windows/#shared-drives');throw _0xd97fc8;case 0x7:return[0x2,_0x202eef];}});});}function resolveNasConfigToMounts(_0x37239d,_0x428960,_0x8b1472,_0x4ae1c1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x390383;return __generator(this,function(_0x54c473){var _0x41392b=a14_0xb6fc;switch(_0x54c473[_0x41392b(0x19d)]){case 0x0:return[0x4,nas[_0x41392b(0x16b)](_0x4ae1c1,_0x8b1472,_0x428960)];case 0x1:_0x390383=_0x54c473['sent']();return[0x2,convertNasMappingsToMounts(devs_1[_0x41392b(0x13a)](_0x37239d),_0x390383)];}});});}exports[a14_0x40dbe8(0x126)]=resolveNasConfigToMounts;function convertNasMappingsToMounts(_0x24fa9b,_0x14506c){var _0x336048=a14_0x40dbe8;return _0x14506c[_0x336048(0xe7)](function(_0x5cdb79){var _0x15ab03=_0x336048;return{'Type':'bind','Source':path_1[_0x15ab03(0xf3)]['resolve'](_0x24fa9b,_0x5cdb79[_0x15ab03(0xe9)]),'Target':_0x5cdb79[_0x15ab03(0x135)],'ReadOnly':![]};});}function resolveTmpDirToMount(_0x34464d){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x394d82){var _0x5d7b48=a14_0xb6fc;if(!_0x34464d)return[0x2,{}];return[0x2,{'Type':_0x5d7b48(0x131),'Source':_0x34464d,'Target':_0x5d7b48(0x1a5),'ReadOnly':![]}];});});}exports[a14_0x40dbe8(0x160)]=resolveTmpDirToMount;function resolveDebuggerPathToMount(_0x24b072){return __awaiter(this,void 0x0,void 0x0,function(){var _0x425270;return __generator(this,function(_0x122f1d){var _0x1ee3a9=a14_0xb6fc;if(!_0x24b072)return[0x2,{}];return _0x425270=path_1['default'][_0x1ee3a9(0x100)](_0x24b072),[0x2,{'Type':_0x1ee3a9(0x131),'Source':_0x425270,'Target':_0x1ee3a9(0x13c),'ReadOnly':![]}];});});}exports[a14_0x40dbe8(0x139)]=resolveDebuggerPathToMount;function resolvePasswdMount(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x26ab54;return __generator(this,function(_0x4f750e){var _0x289016=a14_0xb6fc;switch(_0x4f750e[_0x289016(0x19d)]){case 0x0:if(!(process[_0x289016(0xf5)]===_0x289016(0x109)))return[0x3,0x2];_0x26ab54={'Type':_0x289016(0x131)};return[0x4,passwd_1[_0x289016(0xe0)]()];case 0x1:return[0x2,(_0x26ab54['Source']=_0x4f750e[_0x289016(0x151)](),_0x26ab54['Target']=_0x289016(0xe8),_0x26ab54[_0x289016(0x117)]=!![],_0x26ab54)];case 0x2:return[0x2,null];}});});}exports[a14_0x40dbe8(0x108)]=resolvePasswdMount;function createAndRunContainer(_0x312fe1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x53981d;return __generator(this,function(_0x2e76f8){var _0x2e8e9c=a14_0xb6fc;switch(_0x2e76f8['label']){case 0x0:return[0x4,createContainer(_0x312fe1)];case 0x1:_0x53981d=_0x2e76f8['sent'](),containers[_0x2e8e9c(0xd5)](_0x53981d['id']);return[0x4,_0x53981d[_0x2e8e9c(0x192)]({})];case 0x2:_0x2e76f8['sent']();return[0x2,_0x53981d];}});});}exports[a14_0x40dbe8(0x183)]=createAndRunContainer;function showDebugIdeTipsForVscode(_0x4a518e,_0x35f700,_0xb7adb4,_0x5869bd,_0x2990d3){return __awaiter(this,void 0x0,void 0x0,function(){var _0x136a45;return __generator(this,function(_0x5abec2){var _0x2f1375=a14_0xb6fc;switch(_0x5abec2[_0x2f1375(0x19d)]){case 0x0:return[0x4,debug_1['generateVscodeDebugConfig'](_0x4a518e,_0x35f700,_0xb7adb4,_0x5869bd,_0x2990d3)];case 0x1:_0x136a45=_0x5abec2[_0x2f1375(0x151)](),logger_1[_0x2f1375(0xf3)][_0x2f1375(0x105)](_0x2f1375(0xda),_0x2f1375(0x1a8)),logger_1[_0x2f1375(0xf3)][_0x2f1375(0x105)](_0x2f1375(0x168)),logger_1[_0x2f1375(0xf3)][_0x2f1375(0x105)](JSON[_0x2f1375(0x101)](_0x136a45,null,0x4)),logger_1['default'][_0x2f1375(0x105)]('/////////////////\x20config\x20end\x20/////////////////');return[0x2];}});});}exports[a14_0x40dbe8(0x19a)]=showDebugIdeTipsForVscode;function showDebugIdeTipsForPycharm(_0x105e01,_0x4ecf48){return __awaiter(this,void 0x0,void 0x0,function(){var _0x554e2a;return __generator(this,function(_0x526084){var _0x1320fd=a14_0xb6fc;switch(_0x526084['label']){case 0x0:return[0x4,fs[_0x1320fd(0x19e)](_0x105e01)];case 0x1:_0x554e2a=_0x526084[_0x1320fd(0x151)]();!_0x554e2a['isDirectory']()&&(_0x105e01=path_1[_0x1320fd(0xf3)]['dirname'](_0x105e01));logger_1[_0x1320fd(0xf3)][_0x1320fd(0x105)]('\x0a=========\x20Tips\x20for\x20PyCharm\x20remote\x20debug\x20=========\x0aLocal\x20host\x20name:\x20'+ip['address']()+_0x1320fd(0x189)+_0x4ecf48+_0x1320fd(0x179)+_0x105e01+'=/code\x0a\x0aDebug\x20Code\x20needed\x20to:\x0a\x201.\x20Install\x20pydevd-pycharm:\x0a\x20\x0a\x20pip\x20install\x20pydevd-pycharm~=203.5981.165\x0a\x20\x0a\x202.\x20copy\x20to\x20your\x20function\x20code:\x0a\x0aimport\x20pydevd_pycharm\x0apydevd_pycharm.settrace(\x27'+ip[_0x1320fd(0x16c)]()+_0x1320fd(0x119)+_0x4ecf48+',\x20stdoutToServer=True,\x20stderrToServer=True)\x0a\x0a=========================================================================\x0a',_0x1320fd(0x1a8));return[0x2];}});});}function a14_0xb6fc(_0x17d92f,_0x5a618c){return a14_0xb6fc=function(_0x29b2a9,_0xb6fc4f){_0x29b2a9=_0x29b2a9-0xd3;var _0x5f1f40=a14_0x29b2[_0x29b2a9];return _0x5f1f40;},a14_0xb6fc(_0x17d92f,_0x5a618c);}exports[a14_0x40dbe8(0x172)]=showDebugIdeTipsForPycharm;function writeEventToStreamAndClose(_0x4c793b,_0x1537f1){var _0x2f3c3f=a14_0x40dbe8;_0x1537f1&&_0x4c793b[_0x2f3c3f(0x18a)](_0x1537f1),_0x4c793b['end']();}function startContainer(_0x181410,_0x204e9a,_0x3fe056,_0x3c192e){return __awaiter(this,void 0x0,void 0x0,function(){var _0x249874,_0x203508,_0x4e2a37,_0x14982f,_0x58f28d=this;return __generator(this,function(_0x41ca1d){var _0x31a0d4=a14_0xb6fc;switch(_0x41ca1d[_0x31a0d4(0x19d)]){case 0x0:return[0x4,createContainer(_0x181410)];case 0x1:_0x249874=_0x41ca1d[_0x31a0d4(0x151)](),containers['add'](_0x249874['id']),_0x41ca1d[_0x31a0d4(0x19d)]=0x2;case 0x2:_0x41ca1d[_0x31a0d4(0x16e)][_0x31a0d4(0x190)]([0x2,0x4,,0x5]);return[0x4,_0x249874[_0x31a0d4(0x192)]({})];case 0x3:_0x41ca1d[_0x31a0d4(0x151)]();return[0x3,0x5];case 0x4:_0x203508=_0x41ca1d[_0x31a0d4(0x151)](),logger_1[_0x31a0d4(0xf3)]['error'](_0x203508);return[0x3,0x5];case 0x5:_0x4e2a37=_0x204e9a||_0x3fe056;if(!_0x4e2a37)return[0x3,0x7];!_0x204e9a&&(_0x204e9a=devnull());!_0x3fe056&&(_0x3fe056=devnull());return[0x4,_0x249874[_0x31a0d4(0x112)]({'stdout':!![],'stderr':!![],'follow':!![]})];case 0x6:_0x14982f=_0x41ca1d[_0x31a0d4(0x151)](),_0x249874['modem'][_0x31a0d4(0x125)](_0x14982f,_0x204e9a,error_processor_1[_0x31a0d4(0x170)]({'serviceName':_0x3c192e['serviceName'],'functionName':_0x3c192e[_0x31a0d4(0x155)],'errorStream':_0x3fe056})),_0x41ca1d[_0x31a0d4(0x19d)]=0x7;case 0x7:return[0x2,{'containerId':_0x249874===null||_0x249874===void 0x0?void 0x0:_0x249874['id'],'stop':function(){return __awaiter(_0x58f28d,void 0x0,void 0x0,function(){return __generator(this,function(_0x3ca7ab){var _0x5af093=a14_0xb6fc;switch(_0x3ca7ab[_0x5af093(0x19d)]){case 0x0:logger_1[_0x5af093(0xf3)][_0x5af093(0x11b)](_0x5af093(0x132)+_0x249874['id']);return[0x4,_0x249874[_0x5af093(0x157)]()];case 0x1:_0x3ca7ab[_0x5af093(0x151)](),containers['delete'](_0x249874['id']);return[0x2];}});});},'kill':function(){return __awaiter(_0x58f28d,void 0x0,void 0x0,function(){return __generator(this,function(_0x244bab){var _0x5acbe4=a14_0xb6fc;switch(_0x244bab[_0x5acbe4(0x19d)]){case 0x0:logger_1[_0x5acbe4(0xf3)][_0x5acbe4(0x11b)](_0x5acbe4(0x14a)+_0x249874['id']);return[0x4,_0x249874[_0x5acbe4(0x14f)]()];case 0x1:_0x244bab[_0x5acbe4(0x151)](),containers['delete'](_0x249874['id']);return[0x2];}});});},'exec':function(_0x2dd28a,_0x1eb516){var _0x4d5b63=_0x31a0d4,_0x3f6928=_0x1eb516===void 0x0?{}:_0x1eb516,_0x388a84=_0x3f6928[_0x4d5b63(0x10d)],_0x3d224a=_0x388a84===void 0x0?'':_0x388a84,_0x25c874=_0x3f6928[_0x4d5b63(0x11e)],_0x1a2cbd=_0x25c874===void 0x0?{}:_0x25c874,_0x181b52=_0x3f6928[_0x4d5b63(0x165)],_0x161c1a=_0x181b52===void 0x0?process[_0x4d5b63(0x149)]:_0x181b52,_0x1ae696=_0x3f6928[_0x4d5b63(0xea)],_0x22cd4e=_0x1ae696===void 0x0?process['stderr']:_0x1ae696,_0x1cb504=_0x3f6928['verbose'],_0x4e409c=_0x1cb504===void 0x0?![]:_0x1cb504,_0x4322dd=_0x3f6928[_0x4d5b63(0x180)],_0x398b8d=_0x4322dd===void 0x0?{}:_0x4322dd,_0x5605bd=_0x3f6928[_0x4d5b63(0x175)],_0x191981=_0x5605bd===void 0x0?null:_0x5605bd;return __awaiter(_0x58f28d,void 0x0,void 0x0,function(){var _0x47fcc7,_0x35c10e,_0x43084b,_0x47f4b9;return __generator(this,function(_0x43dd2d){var _0x133247=a14_0xb6fc;switch(_0x43dd2d[_0x133247(0x19d)]){case 0x0:_0x47fcc7=_0x191981?!![]:![],_0x35c10e={'Env':dockerOpts['resolveDockerEnv'](_0x1a2cbd),'Tty':![],'AttachStdin':_0x47fcc7,'AttachStdout':!![],'AttachStderr':!![],'WorkingDir':_0x3d224a};_0x2dd28a!==[]&&(_0x35c10e[_0x133247(0x110)]=_0x2dd28a);logger_1[_0x133247(0xf3)][_0x133247(0x195)](_0x133247(0x19b)+JSON[_0x133247(0x101)](_0x35c10e,null,0x4));return[0x4,_0x249874[_0x133247(0x103)](_0x35c10e)];case 0x1:_0x43084b=_0x43dd2d[_0x133247(0x151)]();return[0x4,_0x43084b[_0x133247(0x192)]({'hijack':!![],'stdin':_0x47fcc7})];case 0x2:_0x47f4b9=_0x43dd2d[_0x133247(0x151)]();return[0x4,new Promise(function(_0xd98ef5){return setTimeout(_0xd98ef5,0x1e);})];case 0x3:_0x43dd2d[_0x133247(0x151)]();_0x191981!==null&&writeEventToStreamAndClose(_0x47f4b9,_0x191981);!_0x161c1a&&(_0x161c1a=process[_0x133247(0x149)]);!_0x22cd4e&&(_0x22cd4e=process['stderr']);_0x4e409c?_0x249874[_0x133247(0xe4)]['demuxStream'](_0x47f4b9,_0x161c1a,_0x22cd4e):_0x249874['modem'][_0x133247(0x125)](_0x47f4b9,devnull(),_0x22cd4e);return[0x4,waitForExec(_0x43084b)];case 0x4:return[0x2,_0x43dd2d[_0x133247(0x151)]()];}});});}}];}});});}exports[a14_0x40dbe8(0xd9)]=startContainer;function waitForExec(_0x302171){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x19f9bc){var _0xa23c48=a14_0xb6fc;switch(_0x19f9bc[_0xa23c48(0x19d)]){case 0x0:return[0x4,new Promise(function(_0x45818f,_0x27252a){function _0x3356b3(){var _0x2c6bf1=a14_0xb6fc;_0x302171[_0x2c6bf1(0x171)](function(_0x1d8803,_0x504ee7){var _0x818629=_0x2c6bf1;if(_0x504ee7['Running']){setTimeout(_0x3356b3,0x64);return;}if(_0x1d8803)_0x27252a(_0x1d8803);else _0x504ee7[_0x818629(0x127)]!==0x0?_0x27252a(_0x504ee7[_0x818629(0xf0)][_0x818629(0x12a)]+_0x818629(0x10e)+_0x504ee7['ExitCode']):_0x45818f(_0x504ee7[_0x818629(0x127)]);});}_0x3356b3();})];case 0x1:return[0x2,_0x19f9bc[_0xa23c48(0x151)]()];}});});}function run(_0x176e49,_0x484d95,_0x455651,_0x1656d8,_0x2efa54){return _0x2efa54===void 0x0&&(_0x2efa54={}),__awaiter(this,void 0x0,void 0x0,function(){var _0x4aa1c0,_0xbb10e0,_0x55c0f8,_0x4ee95e;return __generator(this,function(_0x291750){var _0x281ace=a14_0xb6fc;switch(_0x291750[_0x281ace(0x19d)]){case 0x0:return[0x4,runContainer(_0x176e49,_0x455651,_0x1656d8,_0x2efa54)];case 0x1:_0x4aa1c0=_0x291750[_0x281ace(0x151)](),_0xbb10e0=_0x4aa1c0['container'],_0x55c0f8=_0x4aa1c0[_0x281ace(0xeb)],writeEventToStreamAndClose(_0x55c0f8,_0x484d95);return[0x4,_0xbb10e0['wait']()];case 0x2:_0x4ee95e=_0x291750[_0x281ace(0x151)](),containers[_0x281ace(0x186)](_0xbb10e0['id']),streams[_0x281ace(0x186)](_0x55c0f8);return[0x2,_0x4ee95e];}});});}exports[a14_0x40dbe8(0xe6)]=run;function stopContainer(_0x30a2b3){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3a2cb8,_0x58abe5,_0x5225b5;return __generator(this,function(_0x5212cb){var _0x197cb9=a14_0xb6fc;switch(_0x5212cb['label']){case 0x0:_0x3a2cb8=core['spinner'](_0x197cb9(0xf4)+_0x30a2b3['id']),_0x5212cb[_0x197cb9(0x19d)]=0x1;case 0x1:_0x5212cb['trys'][_0x197cb9(0x190)]([0x1,0x3,,0x8]);return[0x4,_0x30a2b3[_0x197cb9(0x157)]()];case 0x2:_0x5212cb[_0x197cb9(0x151)](),_0x3a2cb8[_0x197cb9(0x14c)](_0x197cb9(0xf1));return[0x3,0x8];case 0x3:_0x58abe5=_0x5212cb[_0x197cb9(0x151)](),_0x3a2cb8[_0x197cb9(0x163)](_0x197cb9(0x120)),logger_1['default'][_0x197cb9(0x195)](_0x197cb9(0x17b)+_0x30a2b3['id']+_0x197cb9(0x1aa)+_0x58abe5),_0x3a2cb8=core['spinner'](_0x197cb9(0x145)+_0x30a2b3['id']),_0x5212cb['label']=0x4;case 0x4:_0x5212cb[_0x197cb9(0x16e)][_0x197cb9(0x190)]([0x4,0x6,,0x7]);return[0x4,_0x30a2b3['kill']()];case 0x5:_0x5212cb[_0x197cb9(0x151)](),_0x3a2cb8[_0x197cb9(0x14c)](_0x197cb9(0x114));return[0x3,0x7];case 0x6:_0x5225b5=_0x5212cb[_0x197cb9(0x151)](),_0x3a2cb8['fail'](_0x197cb9(0x148)),logger_1[_0x197cb9(0xf3)]['debug']('Kill\x20proxy\x20container:\x20'+_0x30a2b3['id']+_0x197cb9(0x1aa)+_0x5225b5);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x2];}});});}exports[a14_0x40dbe8(0x191)]=stopContainer;