'use strict';var a12_0x253d=['547PbXSdR','transformPathForVirtualBox','default','call','__awaiter','env','__esModule','linux','Generator\x20is\x20already\x20executing.','hostname','isTty','label','sbox','addEnv','Source','throw','NetworkMode','next','ops','value','1.9.18','getgid','hasOwnProperty','../local-invoke/debug','assign','307BNqOzB','dotnetcore2.1','done','request','__generator','warn','length','defineProperty','145705bPCqmV','-run','run','generateContainerName','generateDockerDebugOpts','Env','nodejs12','isArray','dockerUser','26LJZAbX','108101FmquaP','mounts','isEmpty','resolveImageNameForPull','replace','imageName:\x20','registry.cn-beijing.aliyuncs.com','generateInstallOpts','172smrKYB','aliyunfc/runtime-','return','transformMountsForToolbox','914149aCqHIJ','../local-invoke/env','__importDefault','{\x22name\x22:\x20[\x22','container:','platform','then','function','../../common/logger','httpx','nodejs8','For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions','/var/fc/runtime/','FC_ACCOUNT_ID','lowerFirst','custom','resolveRuntimeToDockerImage','676955ibsJvW','FC_ACCESS_KEY_ID','nasConfig','DOCKER_REGISTRIES','2902LGaVBY','imageName','stage','python3.6','startsWith','trys','/v2/aliyunfc/runtime-nodejs8/tags/list','groupId','php7.2','We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a','invalid\x20runtime\x20name\x20','cloneDeep','cmd','FC_ACCESS_KEY_SECRET','docker\x20options:\x20','Cmd','docker\x20options\x20for\x20custom\x20container:\x20','https://','generateLocalStartOpts','debugPort','debugIde','debug','race','lodash','61402ejssRV','stringify','caPort','HostConfig','generateContainerNameFilter','map','join','resolveDockerEnv','\x22]}','pop','-debug','iterator','split','resolveDockerUser','nodejs10','-inited\x22]}','java11','resolveDockerRegistry','create','apply','BOOTSTRAP_FILE','generateLocalInvokeOpts','sent','java8','push','../utils/utils','resolveMockScript'];var a12_0x33733e=a12_0x5e71;(function(_0x409b0a,_0x5aa24e){var _0x54c3e5=a12_0x5e71;while(!![]){try{var _0x3b9153=-parseInt(_0x54c3e5(0x24f))+-parseInt(_0x54c3e5(0x207))*parseInt(_0x54c3e5(0x220))+-parseInt(_0x54c3e5(0x228))+-parseInt(_0x54c3e5(0x253))*parseInt(_0x54c3e5(0x23a))+parseInt(_0x54c3e5(0x1ec))+-parseInt(_0x54c3e5(0x23e))+parseInt(_0x54c3e5(0x232))*parseInt(_0x54c3e5(0x231));if(_0x3b9153===_0x5aa24e)break;else _0x409b0a['push'](_0x409b0a['shift']());}catch(_0x18d233){_0x409b0a['push'](_0x409b0a['shift']());}}}(a12_0x253d,0x724b2));var __createBinding=this&&this['__createBinding']||(Object[a12_0x33733e(0x1fe)]?function(_0x20c3fc,_0x587d1d,_0x3d60c1,_0x3ed831){var _0x1d108f=a12_0x33733e;if(_0x3ed831===undefined)_0x3ed831=_0x3d60c1;Object[_0x1d108f(0x227)](_0x20c3fc,_0x3ed831,{'enumerable':!![],'get':function(){return _0x587d1d[_0x3d60c1];}});}:function(_0x2c6bd3,_0x4932fb,_0x138bb5,_0x51aeb9){if(_0x51aeb9===undefined)_0x51aeb9=_0x138bb5;_0x2c6bd3[_0x51aeb9]=_0x4932fb[_0x138bb5];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x2f98cf,_0x1f7f95){var _0x58562c=a12_0x33733e;Object[_0x58562c(0x227)](_0x2f98cf,'default',{'enumerable':!![],'value':_0x1f7f95});}:function(_0x187ea4,_0x13c364){_0x187ea4['default']=_0x13c364;}),__importStar=this&&this['__importStar']||function(_0x2dce6e){var _0xf06619=a12_0x33733e;if(_0x2dce6e&&_0x2dce6e[_0xf06619(0x20d)])return _0x2dce6e;var _0x405277={};if(_0x2dce6e!=null){for(var _0x2d5803 in _0x2dce6e)if(_0x2d5803!=='default'&&Object[_0xf06619(0x21d)]['call'](_0x2dce6e,_0x2d5803))__createBinding(_0x405277,_0x2dce6e,_0x2d5803);}return __setModuleDefault(_0x405277,_0x2dce6e),_0x405277;},__awaiter=this&&this[a12_0x33733e(0x20b)]||function(_0x521e35,_0x273e40,_0x3e101e,_0x1c22a1){function _0x43db84(_0x14d406){return _0x14d406 instanceof _0x3e101e?_0x14d406:new _0x3e101e(function(_0xcd161a){_0xcd161a(_0x14d406);});}return new(_0x3e101e||(_0x3e101e=Promise))(function(_0x417926,_0x3b6f6a){var _0xce72e2=a12_0x5e71;function _0x305340(_0x27874a){try{_0x363423(_0x1c22a1['next'](_0x27874a));}catch(_0x113347){_0x3b6f6a(_0x113347);}}function _0xe2ed32(_0x4a54d4){var _0x203bef=a12_0x5e71;try{_0x363423(_0x1c22a1[_0x203bef(0x216)](_0x4a54d4));}catch(_0x466427){_0x3b6f6a(_0x466427);}}function _0x363423(_0x1bf41d){var _0x3084bc=a12_0x5e71;_0x1bf41d[_0x3084bc(0x222)]?_0x417926(_0x1bf41d[_0x3084bc(0x21a)]):_0x43db84(_0x1bf41d[_0x3084bc(0x21a)])[_0x3084bc(0x244)](_0x305340,_0xe2ed32);}_0x363423((_0x1c22a1=_0x1c22a1[_0xce72e2(0x1ff)](_0x521e35,_0x273e40||[]))[_0xce72e2(0x218)]());});},__generator=this&&this[a12_0x33733e(0x224)]||function(_0x187b6b,_0x1d5fe8){var _0x31a2c9=a12_0x33733e,_0x3c8b7d={'label':0x0,'sent':function(){if(_0x383246[0x0]&0x1)throw _0x383246[0x1];return _0x383246[0x1];},'trys':[],'ops':[]},_0x377a44,_0xf84b3d,_0x383246,_0x278ead;return _0x278ead={'next':_0x498dae(0x0),'throw':_0x498dae(0x1),'return':_0x498dae(0x2)},typeof Symbol===_0x31a2c9(0x245)&&(_0x278ead[Symbol[_0x31a2c9(0x1f7)]]=function(){return this;}),_0x278ead;function _0x498dae(_0x5667ce){return function(_0x4ecf4e){return _0x7d1b4d([_0x5667ce,_0x4ecf4e]);};}function _0x7d1b4d(_0x5350eb){var _0x3a914a=_0x31a2c9;if(_0x377a44)throw new TypeError(_0x3a914a(0x20f));while(_0x3c8b7d)try{if(_0x377a44=0x1,_0xf84b3d&&(_0x383246=_0x5350eb[0x0]&0x2?_0xf84b3d['return']:_0x5350eb[0x0]?_0xf84b3d[_0x3a914a(0x216)]||((_0x383246=_0xf84b3d[_0x3a914a(0x23c)])&&_0x383246[_0x3a914a(0x20a)](_0xf84b3d),0x0):_0xf84b3d[_0x3a914a(0x218)])&&!(_0x383246=_0x383246[_0x3a914a(0x20a)](_0xf84b3d,_0x5350eb[0x1]))['done'])return _0x383246;if(_0xf84b3d=0x0,_0x383246)_0x5350eb=[_0x5350eb[0x0]&0x2,_0x383246[_0x3a914a(0x21a)]];switch(_0x5350eb[0x0]){case 0x0:case 0x1:_0x383246=_0x5350eb;break;case 0x4:_0x3c8b7d[_0x3a914a(0x212)]++;return{'value':_0x5350eb[0x1],'done':![]};case 0x5:_0x3c8b7d[_0x3a914a(0x212)]++,_0xf84b3d=_0x5350eb[0x1],_0x5350eb=[0x0];continue;case 0x7:_0x5350eb=_0x3c8b7d[_0x3a914a(0x219)][_0x3a914a(0x1f5)](),_0x3c8b7d[_0x3a914a(0x1d9)][_0x3a914a(0x1f5)]();continue;default:if(!(_0x383246=_0x3c8b7d['trys'],_0x383246=_0x383246[_0x3a914a(0x226)]>0x0&&_0x383246[_0x383246[_0x3a914a(0x226)]-0x1])&&(_0x5350eb[0x0]===0x6||_0x5350eb[0x0]===0x2)){_0x3c8b7d=0x0;continue;}if(_0x5350eb[0x0]===0x3&&(!_0x383246||_0x5350eb[0x1]>_0x383246[0x0]&&_0x5350eb[0x1]<_0x383246[0x3])){_0x3c8b7d[_0x3a914a(0x212)]=_0x5350eb[0x1];break;}if(_0x5350eb[0x0]===0x6&&_0x3c8b7d[_0x3a914a(0x212)]<_0x383246[0x1]){_0x3c8b7d[_0x3a914a(0x212)]=_0x383246[0x1],_0x383246=_0x5350eb;break;}if(_0x383246&&_0x3c8b7d['label']<_0x383246[0x2]){_0x3c8b7d['label']=_0x383246[0x2],_0x3c8b7d[_0x3a914a(0x219)][_0x3a914a(0x204)](_0x5350eb);break;}if(_0x383246[0x2])_0x3c8b7d[_0x3a914a(0x219)][_0x3a914a(0x1f5)]();_0x3c8b7d[_0x3a914a(0x1d9)][_0x3a914a(0x1f5)]();continue;}_0x5350eb=_0x1d5fe8[_0x3a914a(0x20a)](_0x187b6b,_0x3c8b7d);}catch(_0x2c76a5){_0x5350eb=[0x6,_0x2c76a5],_0xf84b3d=0x0;}finally{_0x377a44=_0x383246=0x0;}if(_0x5350eb[0x0]&0x5)throw _0x5350eb[0x1];return{'value':_0x5350eb[0x0]?_0x5350eb[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a12_0x33733e(0x240)]||function(_0x35ee63){var _0x459b65=a12_0x33733e;return _0x35ee63&&_0x35ee63[_0x459b65(0x20d)]?_0x35ee63:{'default':_0x35ee63};};Object['defineProperty'](exports,a12_0x33733e(0x20d),{'value':!![]}),exports['resolveRuntimeToDockerImage']=exports[a12_0x33733e(0x1f3)]=exports[a12_0x33733e(0x1fd)]=exports[a12_0x33733e(0x206)]=exports['generateLocalStartOpts']=exports[a12_0x33733e(0x22b)]=exports[a12_0x33733e(0x1f0)]=exports[a12_0x33733e(0x201)]=exports[a12_0x33733e(0x208)]=exports[a12_0x33733e(0x23d)]=exports[a12_0x33733e(0x239)]=exports[a12_0x33733e(0x1f9)]=exports['generateSboxOpts']=exports[a12_0x33733e(0x235)]=exports[a12_0x33733e(0x252)]=void 0x0;var httpx=__importStar(require(a12_0x33733e(0x247))),_=__importStar(require(a12_0x33733e(0x1eb))),env_1=require(a12_0x33733e(0x23f)),logger_1=__importDefault(require(a12_0x33733e(0x246))),definition_1=require('../definition'),nested_object_assign_1=__importDefault(require('nested-object-assign')),debug_1=require(a12_0x33733e(0x21e)),runtime_1=require('../utils/runtime'),utils_1=require(a12_0x33733e(0x205)),REGISTRY_DEFAULT=a12_0x33733e(0x238),DEFAULT_REGISTRY=REGISTRY_DEFAULT||'registry.hub.docker.com';exports['DOCKER_REGISTRIES']=[a12_0x33733e(0x238),'registry.hub.docker.com'];var IMAGE_VERSION=process[a12_0x33733e(0x20c)]['FC_DOCKER_VERSION']||a12_0x33733e(0x21b),DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':'nodejs6','nodejs8':a12_0x33733e(0x248),'nodejs10':a12_0x33733e(0x1fa),'nodejs12':a12_0x33733e(0x22e),'python2.7':'python2.7','python3':a12_0x33733e(0x1d7),'java8':a12_0x33733e(0x203),'java11':a12_0x33733e(0x1fc),'php7.2':a12_0x33733e(0x1dc),'dotnetcore2.1':a12_0x33733e(0x221),'custom':'custom'};function resolveImageNameForPull(_0x245fa7){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1dee19;return __generator(this,function(_0x5d80ac){var _0x4196fc=a12_0x5e71;switch(_0x5d80ac[_0x4196fc(0x212)]){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x1dee19=_0x5d80ac['sent']();_0x1dee19&&(_0x245fa7=_0x1dee19+'/'+_0x245fa7);return[0x2,_0x245fa7];}});});}function a12_0x5e71(_0x318bbf,_0x3488b1){return a12_0x5e71=function(_0x253dab,_0x5e715b){_0x253dab=_0x253dab-0x1d5;var _0x2edd11=a12_0x253d[_0x253dab];return _0x2edd11;},a12_0x5e71(_0x318bbf,_0x3488b1);}exports[a12_0x33733e(0x235)]=resolveImageNameForPull;function generateSboxOpts(_0x45be6f){var _0x1f8c12=a12_0x33733e,_0x53c4ea=_0x45be6f[_0x1f8c12(0x1d5)],_0x329309=_0x45be6f[_0x1f8c12(0x210)],_0x345b2f=_0x45be6f[_0x1f8c12(0x233)],_0x455f85=_0x45be6f['envs'],_0x4afc1e=_0x45be6f[_0x1f8c12(0x1e0)],_0x4ff549=_0x4afc1e===void 0x0?[]:_0x4afc1e,_0x2dc1ba=_0x45be6f[_0x1f8c12(0x211)],_0x379877=_0x45be6f['isInteractive'];return{'Image':_0x53c4ea,'Hostname':_0x329309,'AttachStdin':_0x379877,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x1f8c12(0x213)}),'Tty':_0x2dc1ba,'OpenStdin':_0x379877,'StdinOnce':!![],'Env':resolveDockerEnv(_0x455f85),'Cmd':_0x4ff549[_0x1f8c12(0x226)]?_0x4ff549:['/bin/bash'],'HostConfig':{'AutoRemove':!![],'Mounts':_0x345b2f}};}exports['generateSboxOpts']=generateSboxOpts;function resolveDockerUser(_0x11591c){var _0x63b670=a12_0x33733e,_0x5f4a34=_0x11591c[_0x63b670(0x251)],_0x4fe2d8=_0x11591c[_0x63b670(0x1d6)],_0x5c9c16=_0x4fe2d8===void 0x0?_0x63b670(0x22a):_0x4fe2d8,_0x748838=definition_1['getUserIdAndGroupId'](_0x5f4a34),_0xf15e10=_0x748838['userId'],_0x4abb8e=_0x748838[_0x63b670(0x1db)];return process[_0x63b670(0x243)]===_0x63b670(0x20e)?(logger_1['default'][_0x63b670(0x1e9)](_0x63b670(0x249)),_0xf15e10=process['getuid'](),_0x4abb8e=process[_0x63b670(0x21c)]()):_0x5c9c16===_0x63b670(0x22a)?((_0xf15e10===-0x1||_0xf15e10===undefined)&&(_0xf15e10=NAS_UID),(_0x4abb8e===-0x1||_0x4abb8e===undefined)&&(_0x4abb8e=NAS_GID)):(_0xf15e10=0x0,_0x4abb8e=0x0),_0xf15e10+':'+_0x4abb8e;}exports['resolveDockerUser']=resolveDockerUser;function generateInstallOpts(_0x3041d3,_0x204668,_0x370a58){return{'Image':_0x3041d3,'Tty':!![],'Env':resolveDockerEnv(_0x370a58),'Cmd':['/bin/bash'],'HostConfig':{'AutoRemove':!![],'Mounts':_0x204668}};}exports[a12_0x33733e(0x239)]=generateInstallOpts;function transformMountsForToolbox(_0x3127d0){var _0x200387=a12_0x33733e;console[_0x200387(0x225)](_0x200387(0x1dd));if(Array[_0x200387(0x22f)](_0x3127d0))return _0x3127d0[_0x200387(0x1f1)](function(_0x46ab86){return transformSourcePathOfMount(_0x46ab86);});return transformSourcePathOfMount(_0x3127d0);}exports[a12_0x33733e(0x23d)]=transformMountsForToolbox;function transformSourcePathOfMount(_0x180005){var _0x2eb469=a12_0x33733e;if(!_['isEmpty'](_0x180005)){var _0x5430ae=Object[_0x2eb469(0x21f)]({},_0x180005);return _0x5430ae[_0x2eb469(0x215)]=transformPathForVirtualBox(_0x180005[_0x2eb469(0x215)]),_0x5430ae;}return{};}function transformPathForVirtualBox(_0x33de74){var _0x53f01=a12_0x33733e,_0x517805=_0x33de74[_0x53f01(0x1f8)](':')['join'](''),_0x586919=_[_0x53f01(0x24c)](_0x517805[_0x53f01(0x1f8)]('\x5c')[_0x53f01(0x1f2)]('/'));return'/'+_0x586919;}exports[a12_0x33733e(0x208)]=transformPathForVirtualBox;function generateLocalInvokeOpts(_0x258dd9,_0x1d6a92,_0x33512e,_0x4b5bee,_0x3eeddc,_0x286698,_0x191396,_0x475943){return __awaiter(this,void 0x0,void 0x0,function(){var _0x5caf75,_0x2f5c9,_0x4a4b1d,_0x7bbe2b,_0x5cf03f,_0x48046e,_0x528c31;return __generator(this,function(_0x1642e5){var _0x4e3dda=a12_0x5e71;switch(_0x1642e5[_0x4e3dda(0x212)]){case 0x0:_0x5caf75={'HostConfig':{'AutoRemove':!![],'Mounts':_0x33512e}},_0x2f5c9={};_0x3eeddc&&(_0x2f5c9=debug_1[_0x4e3dda(0x22c)](_0x258dd9,_0x3eeddc,_0x475943));_0x4a4b1d={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]};return[0x4,resolveRuntimeToDockerImage(_0x258dd9)];case 0x1:_0x7bbe2b=_0x1642e5[_0x4e3dda(0x202)](),supportCustomBootstrapFile(_0x258dd9,_0x286698),_0x5cf03f=nested_object_assign_1[_0x4e3dda(0x209)]({'Env':resolveDockerEnv(_0x286698),'Image':_0x7bbe2b,'name':_0x1d6a92,'Cmd':_0x4b5bee,'User':_0x191396},_0x4a4b1d,_0x5caf75,_0x2f5c9),_0x48046e=_['cloneDeep'](_0x5cf03f);(_0x48046e===null||_0x48046e===void 0x0?void 0x0:_0x48046e[_0x4e3dda(0x22d)])&&(_0x528c31=_0x48046e[_0x4e3dda(0x22d)][_0x4e3dda(0x1f1)](function(_0x2f1ca7){var _0x53aa77=_0x4e3dda;if(_0x2f1ca7[_0x53aa77(0x1d8)](_0x53aa77(0x250))||_0x2f1ca7[_0x53aa77(0x1d8)](_0x53aa77(0x1e1))||_0x2f1ca7[_0x53aa77(0x1d8)](_0x53aa77(0x24b))){var _0x3d3e89=_0x2f1ca7[_0x53aa77(0x1f8)]('='),_0xa5128=utils_1['mark'](_0x3d3e89[0x1]);return _0x3d3e89[0x0]+'='+_0xa5128;}else return _0x2f1ca7;}),_0x48046e[_0x4e3dda(0x22d)]=_0x528c31);logger_1[_0x4e3dda(0x209)]['debug']('fc-docker\x20docker\x20options:\x20'+JSON[_0x4e3dda(0x1ed)](_0x48046e,null,'\x20\x20'));return[0x2,_0x5cf03f];}});});}exports['generateLocalInvokeOpts']=generateLocalInvokeOpts;function generateContainerNameFilter(_0x113226,_0x2f5027){var _0x5deba6=a12_0x33733e;if(_0x2f5027)return'{\x22name\x22:\x20[\x22'+_0x113226+_0x5deba6(0x1fb);return _0x5deba6(0x241)+_0x113226+_0x5deba6(0x1f4);}exports['generateContainerNameFilter']=generateContainerNameFilter;function generateContainerName(_0xdc128f,_0x4eee7a,_0x23c7a1){var _0x4ecd1b=a12_0x33733e;return('fc-local-'+_0xdc128f+'-'+_0x4eee7a)[_0x4ecd1b(0x236)](/ /g,'')+(_0x23c7a1?_0x4ecd1b(0x1f6):_0x4ecd1b(0x229));}exports[a12_0x33733e(0x22b)]=generateContainerName;function generateLocalStartOpts(_0x19a4be,_0x5c176d,_0x5b5e3b,_0x6fcd0b,_0x35d3f6,_0x4ba2dd,_0x305c65){var _0x4bce88=a12_0x33733e,_0x3a3419=_0x305c65[_0x4bce88(0x1e7)],_0x1186f2=_0x305c65[_0x4bce88(0x230)],_0x5431dc=_0x305c65[_0x4bce88(0x1e8)],_0x3239dd=_0x5431dc===void 0x0?null:_0x5431dc,_0x48babd=_0x305c65[_0x4bce88(0x1d5)],_0x4378aa=_0x305c65[_0x4bce88(0x1ee)],_0x5d06cd=_0x4378aa===void 0x0?0x2328:_0x4378aa;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x156201){var _0x2dd59f=a12_0x5e71;switch(_0x156201['label']){case 0x0:if(runtime_1['isCustomContainerRuntime'](_0x5c176d))return[0x2,genCustomContainerLocalStartOpts(_0x19a4be,_0x5b5e3b,_0x6fcd0b,_0x35d3f6,_0x4ba2dd,_0x48babd,_0x5d06cd)];return[0x4,genNonCustomContainerLocalStartOpts(_0x19a4be,_0x5c176d,_0x5b5e3b,_0x6fcd0b,_0x35d3f6,_0x3a3419,_0x4ba2dd,_0x1186f2,_0x3239dd)];case 0x1:return[0x2,_0x156201[_0x2dd59f(0x202)]()];}});});}exports[a12_0x33733e(0x1e6)]=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0x10bf80,_0x4e62ad,_0x4d9b6e,_0x4ed538,_0x182087,_0x13bf18,_0x5d7c5e,_0x63cdb9,_0x348db8){return __awaiter(this,void 0x0,void 0x0,function(){var _0x34bd5b,_0x2fb45b,_0x258cd4,_0x26cb2b,_0x344bdd;return __generator(this,function(_0x145423){var _0x1b0919=a12_0x5e71;switch(_0x145423['label']){case 0x0:_0x34bd5b={'HostConfig':{'AutoRemove':!![],'Mounts':_0x4ed538}};!_[_0x1b0919(0x234)](_0x10bf80)&&(_0x34bd5b[_0x1b0919(0x1ef)][_0x1b0919(0x217)]='container:'+_0x10bf80);return[0x4,resolveRuntimeToDockerImage(_0x4e62ad)];case 0x1:_0x2fb45b=_0x145423[_0x1b0919(0x202)](),supportCustomBootstrapFile(_0x4e62ad,_0x5d7c5e),_0x258cd4=nested_object_assign_1[_0x1b0919(0x209)]({'Env':resolveDockerEnv(_0x5d7c5e),'Image':_0x2fb45b,'name':_0x4d9b6e,'Cmd':_0x182087,'User':_0x63cdb9,'Entrypoint':[resolveMockScript(_0x4e62ad)]},_0x34bd5b),_0x26cb2b=_[_0x1b0919(0x1df)](_0x258cd4);(_0x26cb2b===null||_0x26cb2b===void 0x0?void 0x0:_0x26cb2b[_0x1b0919(0x22d)])&&(_0x344bdd=_0x26cb2b[_0x1b0919(0x22d)][_0x1b0919(0x1f1)](function(_0x55f9f4){var _0x222973=_0x1b0919;if(_0x55f9f4[_0x222973(0x1d8)]('FC_ACCESS_KEY_ID')||_0x55f9f4['startsWith']('FC_ACCESS_KEY_SECRET')||_0x55f9f4['startsWith'](_0x222973(0x24b))){var _0x2148e1=_0x55f9f4[_0x222973(0x1f8)]('='),_0x16acf5=utils_1['mark'](_0x2148e1[0x1]);return _0x2148e1[0x0]+'='+_0x16acf5;}else return _0x55f9f4;}),_0x26cb2b[_0x1b0919(0x22d)]=_0x344bdd);logger_1['default'][_0x1b0919(0x1e9)](_0x1b0919(0x1e2)+JSON[_0x1b0919(0x1ed)](_0x26cb2b,null,'\x20\x20'));return[0x2,_0x258cd4];}});});}function supportCustomBootstrapFile(_0x5151e5,_0x1a578a){var _0x25c668=a12_0x33733e;_0x5151e5===_0x25c668(0x24d)&&(_0x1a578a[_0x25c668(0x200)]&&(_0x1a578a['AGENT_SCRIPT']=_0x1a578a['BOOTSTRAP_FILE']));}function resolveMockScript(_0x423fee){var _0x3458c8=a12_0x33733e;return _0x3458c8(0x24a)+_0x423fee+'/mock';}exports['resolveMockScript']=resolveMockScript;function genCustomContainerLocalStartOpts(_0x4d8d54,_0x1f677a,_0x12f383,_0x455a35,_0x2bb156,_0x5212dc,_0x55f106){var _0x4e2318=a12_0x33733e,_0x572a30,_0x2f5ae8;_0x55f106===void 0x0&&(_0x55f106=0x2328);var _0x49d681=_0x55f106+'/tcp',_0x3f031c={'ExposedPorts':(_0x572a30={},_0x572a30[_0x49d681]={},_0x572a30),'HostConfig':{'AutoRemove':!![],'Mounts':_0x12f383,'PortBindings':(_0x2f5ae8={},_0x2f5ae8[_0x49d681]=[{'HostIp':'','HostPort':''+_0x55f106}],_0x2f5ae8)}};!_[_0x4e2318(0x234)](_0x4d8d54)&&(_0x3f031c['HostConfig'][_0x4e2318(0x217)]=_0x4e2318(0x242)+_0x4d8d54);var _0x57189b={'Env':resolveDockerEnv(_0x2bb156,!![]),'Image':_0x5212dc,'name':_0x1f677a};_0x455a35!==[]&&(_0x57189b[_0x4e2318(0x1e3)]=_0x455a35);var _0x47aefa={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x5ecf0b=nested_object_assign_1[_0x4e2318(0x209)](_0x57189b,_0x3f031c,_0x47aefa),_0x421aef=_[_0x4e2318(0x1df)](_0x5ecf0b);if(_0x421aef===null||_0x421aef===void 0x0?void 0x0:_0x421aef[_0x4e2318(0x22d)]){var _0x28eb01=_0x421aef[_0x4e2318(0x22d)][_0x4e2318(0x1f1)](function(_0xe9c1d){var _0x29797b=_0x4e2318;if(_0xe9c1d[_0x29797b(0x1d8)](_0x29797b(0x250))||_0xe9c1d[_0x29797b(0x1d8)](_0x29797b(0x1e1))||_0xe9c1d[_0x29797b(0x1d8)](_0x29797b(0x24b))){var _0x290604=_0xe9c1d[_0x29797b(0x1f8)]('='),_0x23ab92=utils_1['mark'](_0x290604[0x1]);return _0x290604[0x0]+'='+_0x23ab92;}else return _0xe9c1d;});_0x421aef['Env']=_0x28eb01;}return logger_1[_0x4e2318(0x209)][_0x4e2318(0x1e9)](_0x4e2318(0x1e4)+JSON['stringify'](_0x421aef,null,'\x20\x20')),_0x5ecf0b;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x56307b,_0x19ac18;return __generator(this,function(_0x4c48af){var _0x22504a=a12_0x5e71;switch(_0x4c48af[_0x22504a(0x212)]){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0x56307b=exports['DOCKER_REGISTRIES'][_0x22504a(0x1f1)](function(_0x30a408){var _0x4bdd1b=_0x22504a;return httpx[_0x4bdd1b(0x223)](_0x4bdd1b(0x1e5)+_0x30a408+_0x4bdd1b(0x1da),{'timeout':0xbb8})[_0x4bdd1b(0x244)](function(){return _0x30a408;});}),_0x4c48af[_0x22504a(0x212)]=0x1;case 0x1:_0x4c48af[_0x22504a(0x1d9)][_0x22504a(0x204)]([0x1,0x3,,0x4]);return[0x4,Promise[_0x22504a(0x1ea)](_0x56307b)];case 0x2:DOCKER_REGISTRY_CACHE=_0x4c48af[_0x22504a(0x202)]();return[0x3,0x4];case 0x3:_0x19ac18=_0x4c48af['sent'](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x33733e(0x1fd)]=resolveDockerRegistry;function resolveDockerEnv(_0xa9430d,_0x15ff9f){var _0x5eb725=a12_0x33733e;_0xa9430d===void 0x0&&(_0xa9430d={});_0x15ff9f===void 0x0&&(_0x15ff9f=![]);if(_0x15ff9f)return _[_0x5eb725(0x1f1)](_0xa9430d||{},function(_0x213de9,_0x491805){return _0x491805+'='+_0x213de9;});return _[_0x5eb725(0x1f1)](env_1[_0x5eb725(0x214)](_0xa9430d||{}),function(_0x5f429d,_0x2f8098){return _0x2f8098+'='+_0x5f429d;});}exports['resolveDockerEnv']=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x57ea5e,_0x205786){return __awaiter(this,void 0x0,void 0x0,function(){var _0x488f53,_0x5df345;return __generator(this,function(_0x42e026){var _0x2e8de6=a12_0x5e71;if(runtimeImageMap[_0x57ea5e])return _0x488f53=runtimeImageMap[_0x57ea5e],_0x205786?_0x5df345=_0x2e8de6(0x23b)+_0x488f53+':build-'+IMAGE_VERSION:_0x5df345=_0x2e8de6(0x23b)+_0x488f53+':'+IMAGE_VERSION,logger_1[_0x2e8de6(0x209)]['debug'](_0x2e8de6(0x237)+_0x5df345),[0x2,_0x5df345];throw new Error(_0x2e8de6(0x1de)+_0x57ea5e);});});}exports[a12_0x33733e(0x24e)]=resolveRuntimeToDockerImage;