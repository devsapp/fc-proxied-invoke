'use strict';var a12_0x2cbc=['We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a','assign','isArray','userId','apply','97FAlbbv','resolveDockerRegistry','next','done','registry.cn-beijing.aliyuncs.com','/var/fc/runtime/','811cGuTMD','linux','BOOTSTRAP_FILE','nasConfig','__createBinding','call','nodejs6','map','docker\x20options:\x20','container:','AGENT_SCRIPT','generateLocalStartOpts','FC_DOCKER_VERSION','nodejs8','FC_ACCESS_KEY_ID','java11','__setModuleDefault','imageName','resolveImageNameForPull','../utils/utils','imageName:\x20','Env','custom','1630231MIcvlb','registry.hub.docker.com','lowerFirst','/bin/bash','../definition','value','297095ONPeMF','generateInstallOpts','lodash','dockerUser','request','race','getuid','env','/tcp','java8','Source','fc-local-','mounts','generateDockerDebugOpts','split','mark','resolveDockerUser','trys','142108RpPBnB','default','transformMountsForToolbox',':build-','getUserIdAndGroupId','aliyunfc/runtime-','generateSboxOpts','FC_ACCESS_KEY_SECRET','1.9.18','{\x22name\x22:\x20[\x22','stringify','transformPathForVirtualBox','invalid\x20runtime\x20name\x20','push','__generator','DOCKER_REGISTRIES','isEmpty','startsWith','../utils/runtime','generateContainerNameFilter','label','stage','python3.6','hostname','length','return','python2.7','httpx','ops','../../common/logger','__esModule','pop','__importDefault','resolveRuntimeToDockerImage','replace','FC_ACCOUNT_ID','\x22]}','651883VRPQNM','join','platform','/mock','sbox','isCustomContainerRuntime','generateLocalInvokeOpts','docker\x20options\x20for\x20custom\x20container:\x20','create','1jOFLlF','isInteractive','Generator\x20is\x20already\x20executing.','1039822EovKvl','../local-invoke/debug','../local-invoke/env','resolveDockerEnv','__importStar','nodejs10','php7.2','envs','function','NetworkMode','-run','generateContainerName','sent','cloneDeep','cmd','HostConfig','run','defineProperty','debug','resolveMockScript','975266lYsCFt','then','-debug'];var a12_0x2ac008=a12_0x4c10;(function(_0x58aeb4,_0x58cb0a){var _0x4d8f77=a12_0x4c10;while(!![]){try{var _0x293e23=-parseInt(_0x4d8f77(0xb5))*parseInt(_0x4d8f77(0x131))+-parseInt(_0x4d8f77(0xd2))*parseInt(_0x4d8f77(0x112))+-parseInt(_0x4d8f77(0xe4))+-parseInt(_0x4d8f77(0x109))+-parseInt(_0x4d8f77(0x129))+parseInt(_0x4d8f77(0x115))+parseInt(_0x4d8f77(0xcc));if(_0x293e23===_0x58cb0a)break;else _0x58aeb4['push'](_0x58aeb4['shift']());}catch(_0x2b1390){_0x58aeb4['push'](_0x58aeb4['shift']());}}}(a12_0x2cbc,0x802ea));var __createBinding=this&&this[a12_0x2ac008(0xb9)]||(Object[a12_0x2ac008(0x111)]?function(_0x1ebc1e,_0x128e48,_0x1ed384,_0xcb62fa){if(_0xcb62fa===undefined)_0xcb62fa=_0x1ed384;Object['defineProperty'](_0x1ebc1e,_0xcb62fa,{'enumerable':!![],'get':function(){return _0x128e48[_0x1ed384];}});}:function(_0x3fc13b,_0x41dff1,_0x44e7d1,_0xe4d725){if(_0xe4d725===undefined)_0xe4d725=_0x44e7d1;_0x3fc13b[_0xe4d725]=_0x41dff1[_0x44e7d1];}),__setModuleDefault=this&&this[a12_0x2ac008(0xc5)]||(Object[a12_0x2ac008(0x111)]?function(_0x587217,_0x33ef90){var _0x2e0a93=a12_0x2ac008;Object[_0x2e0a93(0x126)](_0x587217,_0x2e0a93(0xe5),{'enumerable':!![],'value':_0x33ef90});}:function(_0x5d4c4d,_0xfa5f3d){_0x5d4c4d['default']=_0xfa5f3d;}),__importStar=this&&this[a12_0x2ac008(0x119)]||function(_0xc01793){var _0x1e1e41=a12_0x2ac008;if(_0xc01793&&_0xc01793['__esModule'])return _0xc01793;var _0x580e41={};if(_0xc01793!=null){for(var _0x506e3b in _0xc01793)if(_0x506e3b!==_0x1e1e41(0xe5)&&Object['hasOwnProperty'][_0x1e1e41(0xba)](_0xc01793,_0x506e3b))__createBinding(_0x580e41,_0xc01793,_0x506e3b);}return __setModuleDefault(_0x580e41,_0xc01793),_0x580e41;},__awaiter=this&&this['__awaiter']||function(_0x580d3a,_0x586ba7,_0x418875,_0x2e5e82){function _0x5b6c81(_0x2c16ae){return _0x2c16ae instanceof _0x418875?_0x2c16ae:new _0x418875(function(_0x8c3275){_0x8c3275(_0x2c16ae);});}return new(_0x418875||(_0x418875=Promise))(function(_0x46e6bd,_0x225187){var _0x3a8beb=a12_0x4c10;function _0x48de84(_0x4053d5){var _0x5d7830=a12_0x4c10;try{_0x1852f9(_0x2e5e82[_0x5d7830(0x133)](_0x4053d5));}catch(_0x36725f){_0x225187(_0x36725f);}}function _0x21df9e(_0x45f9bf){try{_0x1852f9(_0x2e5e82['throw'](_0x45f9bf));}catch(_0x377952){_0x225187(_0x377952);}}function _0x1852f9(_0x39c66d){var _0x13fc11=a12_0x4c10;_0x39c66d[_0x13fc11(0x134)]?_0x46e6bd(_0x39c66d[_0x13fc11(0xd1)]):_0x5b6c81(_0x39c66d[_0x13fc11(0xd1)])['then'](_0x48de84,_0x21df9e);}_0x1852f9((_0x2e5e82=_0x2e5e82[_0x3a8beb(0x130)](_0x580d3a,_0x586ba7||[]))[_0x3a8beb(0x133)]());});},__generator=this&&this[a12_0x2ac008(0xf2)]||function(_0x12b370,_0xaca3e0){var _0x5e7676=a12_0x2ac008,_0x31b2ac={'label':0x0,'sent':function(){if(_0x22cd93[0x0]&0x1)throw _0x22cd93[0x1];return _0x22cd93[0x1];},'trys':[],'ops':[]},_0x3d92ae,_0x203d32,_0x22cd93,_0x550095;return _0x550095={'next':_0x2bbfa5(0x0),'throw':_0x2bbfa5(0x1),'return':_0x2bbfa5(0x2)},typeof Symbol===_0x5e7676(0x11d)&&(_0x550095[Symbol['iterator']]=function(){return this;}),_0x550095;function _0x2bbfa5(_0x12a9d5){return function(_0x15b3f9){return _0x56ba12([_0x12a9d5,_0x15b3f9]);};}function _0x56ba12(_0x1c13f6){var _0x19acba=_0x5e7676;if(_0x3d92ae)throw new TypeError(_0x19acba(0x114));while(_0x31b2ac)try{if(_0x3d92ae=0x1,_0x203d32&&(_0x22cd93=_0x1c13f6[0x0]&0x2?_0x203d32[_0x19acba(0xfd)]:_0x1c13f6[0x0]?_0x203d32['throw']||((_0x22cd93=_0x203d32[_0x19acba(0xfd)])&&_0x22cd93['call'](_0x203d32),0x0):_0x203d32[_0x19acba(0x133)])&&!(_0x22cd93=_0x22cd93[_0x19acba(0xba)](_0x203d32,_0x1c13f6[0x1]))['done'])return _0x22cd93;if(_0x203d32=0x0,_0x22cd93)_0x1c13f6=[_0x1c13f6[0x0]&0x2,_0x22cd93['value']];switch(_0x1c13f6[0x0]){case 0x0:case 0x1:_0x22cd93=_0x1c13f6;break;case 0x4:_0x31b2ac['label']++;return{'value':_0x1c13f6[0x1],'done':![]};case 0x5:_0x31b2ac['label']++,_0x203d32=_0x1c13f6[0x1],_0x1c13f6=[0x0];continue;case 0x7:_0x1c13f6=_0x31b2ac['ops'][_0x19acba(0x103)](),_0x31b2ac['trys'][_0x19acba(0x103)]();continue;default:if(!(_0x22cd93=_0x31b2ac[_0x19acba(0xe3)],_0x22cd93=_0x22cd93['length']>0x0&&_0x22cd93[_0x22cd93['length']-0x1])&&(_0x1c13f6[0x0]===0x6||_0x1c13f6[0x0]===0x2)){_0x31b2ac=0x0;continue;}if(_0x1c13f6[0x0]===0x3&&(!_0x22cd93||_0x1c13f6[0x1]>_0x22cd93[0x0]&&_0x1c13f6[0x1]<_0x22cd93[0x3])){_0x31b2ac[_0x19acba(0xf8)]=_0x1c13f6[0x1];break;}if(_0x1c13f6[0x0]===0x6&&_0x31b2ac[_0x19acba(0xf8)]<_0x22cd93[0x1]){_0x31b2ac[_0x19acba(0xf8)]=_0x22cd93[0x1],_0x22cd93=_0x1c13f6;break;}if(_0x22cd93&&_0x31b2ac[_0x19acba(0xf8)]<_0x22cd93[0x2]){_0x31b2ac[_0x19acba(0xf8)]=_0x22cd93[0x2],_0x31b2ac[_0x19acba(0x100)][_0x19acba(0xf1)](_0x1c13f6);break;}if(_0x22cd93[0x2])_0x31b2ac[_0x19acba(0x100)]['pop']();_0x31b2ac[_0x19acba(0xe3)][_0x19acba(0x103)]();continue;}_0x1c13f6=_0xaca3e0['call'](_0x12b370,_0x31b2ac);}catch(_0x4b7a89){_0x1c13f6=[0x6,_0x4b7a89],_0x203d32=0x0;}finally{_0x3d92ae=_0x22cd93=0x0;}if(_0x1c13f6[0x0]&0x5)throw _0x1c13f6[0x1];return{'value':_0x1c13f6[0x0]?_0x1c13f6[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a12_0x2ac008(0x104)]||function(_0x54fd55){var _0x51e4fe=a12_0x2ac008;return _0x54fd55&&_0x54fd55[_0x51e4fe(0x102)]?_0x54fd55:{'default':_0x54fd55};};Object[a12_0x2ac008(0x126)](exports,'__esModule',{'value':!![]}),exports[a12_0x2ac008(0x105)]=exports[a12_0x2ac008(0x118)]=exports['resolveDockerRegistry']=exports[a12_0x2ac008(0x128)]=exports[a12_0x2ac008(0xc0)]=exports['generateContainerName']=exports[a12_0x2ac008(0xf7)]=exports[a12_0x2ac008(0x10f)]=exports['transformPathForVirtualBox']=exports[a12_0x2ac008(0xe6)]=exports[a12_0x2ac008(0xd3)]=exports['resolveDockerUser']=exports['generateSboxOpts']=exports[a12_0x2ac008(0xc7)]=exports[a12_0x2ac008(0xf3)]=void 0x0;var httpx=__importStar(require(a12_0x2ac008(0xff))),_=__importStar(require(a12_0x2ac008(0xd4))),env_1=require(a12_0x2ac008(0x117)),logger_1=__importDefault(require(a12_0x2ac008(0x101))),definition_1=require(a12_0x2ac008(0xd0)),nested_object_assign_1=__importDefault(require('nested-object-assign')),debug_1=require(a12_0x2ac008(0x116)),runtime_1=require(a12_0x2ac008(0xf6)),utils_1=require(a12_0x2ac008(0xc8)),REGISTRY_DEFAULT=a12_0x2ac008(0x135),DEFAULT_REGISTRY=REGISTRY_DEFAULT||a12_0x2ac008(0xcd);exports[a12_0x2ac008(0xf3)]=[a12_0x2ac008(0x135),a12_0x2ac008(0xcd)];var IMAGE_VERSION=process[a12_0x2ac008(0xd9)][a12_0x2ac008(0xc1)]||a12_0x2ac008(0xec),DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':a12_0x2ac008(0xbb),'nodejs8':a12_0x2ac008(0xc2),'nodejs10':a12_0x2ac008(0x11a),'nodejs12':'nodejs12','python2.7':a12_0x2ac008(0xfe),'python3':a12_0x2ac008(0xfa),'java8':a12_0x2ac008(0xdb),'java11':a12_0x2ac008(0xc4),'php7.2':a12_0x2ac008(0x11b),'dotnetcore2.1':'dotnetcore2.1','custom':a12_0x2ac008(0xcb)};function resolveImageNameForPull(_0x2c10f5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4f19ea;return __generator(this,function(_0x1947da){var _0x17b8a3=a12_0x4c10;switch(_0x1947da[_0x17b8a3(0xf8)]){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x4f19ea=_0x1947da['sent']();_0x4f19ea&&(_0x2c10f5=_0x4f19ea+'/'+_0x2c10f5);return[0x2,_0x2c10f5];}});});}exports[a12_0x2ac008(0xc7)]=resolveImageNameForPull;function a12_0x4c10(_0x5ffa85,_0x4ccd70){return a12_0x4c10=function(_0x2cbced,_0x4c1094){_0x2cbced=_0x2cbced-0xb5;var _0x2079b7=a12_0x2cbc[_0x2cbced];return _0x2079b7;},a12_0x4c10(_0x5ffa85,_0x4ccd70);}function generateSboxOpts(_0x378d47){var _0x26ca7c=a12_0x2ac008,_0x493d72=_0x378d47[_0x26ca7c(0xc6)],_0x192e2a=_0x378d47[_0x26ca7c(0xfb)],_0x5d0833=_0x378d47[_0x26ca7c(0xde)],_0x2d1e3a=_0x378d47[_0x26ca7c(0x11c)],_0x3e1fc4=_0x378d47[_0x26ca7c(0x123)],_0x12b1f0=_0x3e1fc4===void 0x0?[]:_0x3e1fc4,_0x538b72=_0x378d47['isTty'],_0xa38400=_0x378d47[_0x26ca7c(0x113)];return{'Image':_0x493d72,'Hostname':_0x192e2a,'AttachStdin':_0xa38400,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x26ca7c(0x10d)}),'Tty':_0x538b72,'OpenStdin':_0xa38400,'StdinOnce':!![],'Env':resolveDockerEnv(_0x2d1e3a),'Cmd':_0x12b1f0[_0x26ca7c(0xfc)]?_0x12b1f0:[_0x26ca7c(0xcf)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x5d0833}};}exports[a12_0x2ac008(0xea)]=generateSboxOpts;function resolveDockerUser(_0x588c80){var _0x51a585=a12_0x2ac008,_0x22106c=_0x588c80[_0x51a585(0xb8)],_0x3c7e27=_0x588c80[_0x51a585(0xf9)],_0x23d38f=_0x3c7e27===void 0x0?_0x51a585(0x125):_0x3c7e27,_0x10fbf8=definition_1[_0x51a585(0xe8)](_0x22106c),_0xe8a09b=_0x10fbf8[_0x51a585(0x12f)],_0x466997=_0x10fbf8['groupId'];return process[_0x51a585(0x10b)]===_0x51a585(0xb6)?(logger_1['default'][_0x51a585(0x127)]('For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions'),_0xe8a09b=process[_0x51a585(0xd8)](),_0x466997=process['getgid']()):_0x23d38f==='run'?((_0xe8a09b===-0x1||_0xe8a09b===undefined)&&(_0xe8a09b=NAS_UID),(_0x466997===-0x1||_0x466997===undefined)&&(_0x466997=NAS_GID)):(_0xe8a09b=0x0,_0x466997=0x0),_0xe8a09b+':'+_0x466997;}exports[a12_0x2ac008(0xe2)]=resolveDockerUser;function generateInstallOpts(_0x412805,_0x41979d,_0x3c099d){var _0x5e00a1=a12_0x2ac008;return{'Image':_0x412805,'Tty':!![],'Env':resolveDockerEnv(_0x3c099d),'Cmd':[_0x5e00a1(0xcf)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x41979d}};}exports[a12_0x2ac008(0xd3)]=generateInstallOpts;function transformMountsForToolbox(_0x37f08d){var _0x372777=a12_0x2ac008;console['warn'](_0x372777(0x12c));if(Array[_0x372777(0x12e)](_0x37f08d))return _0x37f08d[_0x372777(0xbc)](function(_0x591f71){return transformSourcePathOfMount(_0x591f71);});return transformSourcePathOfMount(_0x37f08d);}exports[a12_0x2ac008(0xe6)]=transformMountsForToolbox;function transformSourcePathOfMount(_0x5da331){var _0x1a8abe=a12_0x2ac008;if(!_['isEmpty'](_0x5da331)){var _0x539f4a=Object[_0x1a8abe(0x12d)]({},_0x5da331);return _0x539f4a['Source']=transformPathForVirtualBox(_0x5da331[_0x1a8abe(0xdc)]),_0x539f4a;}return{};}function transformPathForVirtualBox(_0x525d74){var _0x1723b1=a12_0x2ac008,_0xd37fc7=_0x525d74['split'](':')[_0x1723b1(0x10a)](''),_0x4020c3=_[_0x1723b1(0xce)](_0xd37fc7['split']('\x5c')['join']('/'));return'/'+_0x4020c3;}exports[a12_0x2ac008(0xef)]=transformPathForVirtualBox;function generateLocalInvokeOpts(_0x49bb,_0xf0347,_0xd12df8,_0x112411,_0x411ac6,_0x3302b5,_0x5186f6,_0x327840){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2cc0e3,_0x1ec4c8,_0x4d8ba4,_0xd5186d,_0x1954e1,_0x560b51,_0x34b4cc;return __generator(this,function(_0x5c6ac2){var _0x495493=a12_0x4c10;switch(_0x5c6ac2[_0x495493(0xf8)]){case 0x0:_0x2cc0e3={'HostConfig':{'AutoRemove':!![],'Mounts':_0xd12df8}},_0x1ec4c8={};_0x411ac6&&(_0x1ec4c8=debug_1[_0x495493(0xdf)](_0x49bb,_0x411ac6,_0x327840));_0x4d8ba4={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]};return[0x4,resolveRuntimeToDockerImage(_0x49bb)];case 0x1:_0xd5186d=_0x5c6ac2[_0x495493(0x121)](),supportCustomBootstrapFile(_0x49bb,_0x3302b5),_0x1954e1=nested_object_assign_1[_0x495493(0xe5)]({'Env':resolveDockerEnv(_0x3302b5),'Image':_0xd5186d,'name':_0xf0347,'Cmd':_0x112411,'User':_0x5186f6},_0x4d8ba4,_0x2cc0e3,_0x1ec4c8),_0x560b51=_[_0x495493(0x122)](_0x1954e1);(_0x560b51===null||_0x560b51===void 0x0?void 0x0:_0x560b51[_0x495493(0xca)])&&(_0x34b4cc=_0x560b51[_0x495493(0xca)][_0x495493(0xbc)](function(_0x320e46){var _0x5bfdc9=_0x495493;if(_0x320e46['startsWith']('FC_ACCESS_KEY_ID')||_0x320e46[_0x5bfdc9(0xf5)](_0x5bfdc9(0xeb))||_0x320e46[_0x5bfdc9(0xf5)]('FC_ACCOUNT_ID')){var _0x2d240e=_0x320e46['split']('='),_0x30e923=utils_1[_0x5bfdc9(0xe1)](_0x2d240e[0x1]);return _0x2d240e[0x0]+'='+_0x30e923;}else return _0x320e46;}),_0x560b51['Env']=_0x34b4cc);logger_1[_0x495493(0xe5)][_0x495493(0x127)]('fc-docker\x20docker\x20options:\x20'+JSON['stringify'](_0x560b51,null,'\x20\x20'));return[0x2,_0x1954e1];}});});}exports[a12_0x2ac008(0x10f)]=generateLocalInvokeOpts;function generateContainerNameFilter(_0x106c0c,_0x44f192){var _0x450705=a12_0x2ac008;if(_0x44f192)return'{\x22name\x22:\x20[\x22'+_0x106c0c+'-inited\x22]}';return _0x450705(0xed)+_0x106c0c+_0x450705(0x108);}exports[a12_0x2ac008(0xf7)]=generateContainerNameFilter;function generateContainerName(_0x1b5478,_0x259ef5,_0x51e939){var _0x2561e2=a12_0x2ac008;return(_0x2561e2(0xdd)+_0x1b5478+'-'+_0x259ef5)[_0x2561e2(0x106)](/ /g,'')+(_0x51e939?_0x2561e2(0x12b):_0x2561e2(0x11f));}exports[a12_0x2ac008(0x120)]=generateContainerName;function generateLocalStartOpts(_0x2a1c0e,_0x151f2a,_0x384532,_0x3de680,_0x5c1142,_0x3644e9,_0x5d55e3){var _0x29650e=a12_0x2ac008,_0x1ed1ce=_0x5d55e3['debugPort'],_0x41a06c=_0x5d55e3[_0x29650e(0xd5)],_0x54dedc=_0x5d55e3['debugIde'],_0x401543=_0x54dedc===void 0x0?null:_0x54dedc,_0x4f20a8=_0x5d55e3[_0x29650e(0xc6)],_0x132aac=_0x5d55e3['caPort'],_0x31ba10=_0x132aac===void 0x0?0x2328:_0x132aac;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x243fdc){var _0x1fed68=a12_0x4c10;switch(_0x243fdc['label']){case 0x0:if(runtime_1[_0x1fed68(0x10e)](_0x151f2a))return[0x2,genCustomContainerLocalStartOpts(_0x2a1c0e,_0x384532,_0x3de680,_0x5c1142,_0x3644e9,_0x4f20a8,_0x31ba10)];return[0x4,genNonCustomContainerLocalStartOpts(_0x2a1c0e,_0x151f2a,_0x384532,_0x3de680,_0x5c1142,_0x1ed1ce,_0x3644e9,_0x41a06c,_0x401543)];case 0x1:return[0x2,_0x243fdc['sent']()];}});});}exports[a12_0x2ac008(0xc0)]=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0x178b16,_0x1c9743,_0x7850ce,_0x582d4e,_0x435012,_0xb35523,_0x371ea4,_0x39dbc8,_0x353b99){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4d6bcd,_0x3420ff,_0x2f1437,_0x1e7724,_0x388a05;return __generator(this,function(_0x430cd5){var _0x33eaf6=a12_0x4c10;switch(_0x430cd5['label']){case 0x0:_0x4d6bcd={'HostConfig':{'AutoRemove':!![],'Mounts':_0x582d4e}};!_[_0x33eaf6(0xf4)](_0x178b16)&&(_0x4d6bcd[_0x33eaf6(0x124)][_0x33eaf6(0x11e)]=_0x33eaf6(0xbe)+_0x178b16);return[0x4,resolveRuntimeToDockerImage(_0x1c9743)];case 0x1:_0x3420ff=_0x430cd5[_0x33eaf6(0x121)](),supportCustomBootstrapFile(_0x1c9743,_0x371ea4),_0x2f1437=nested_object_assign_1['default']({'Env':resolveDockerEnv(_0x371ea4),'Image':_0x3420ff,'name':_0x7850ce,'Cmd':_0x435012,'User':_0x39dbc8,'Entrypoint':[resolveMockScript(_0x1c9743)]},_0x4d6bcd),_0x1e7724=_[_0x33eaf6(0x122)](_0x2f1437);(_0x1e7724===null||_0x1e7724===void 0x0?void 0x0:_0x1e7724[_0x33eaf6(0xca)])&&(_0x388a05=_0x1e7724[_0x33eaf6(0xca)][_0x33eaf6(0xbc)](function(_0x316a2e){var _0x7e3405=_0x33eaf6;if(_0x316a2e['startsWith'](_0x7e3405(0xc3))||_0x316a2e['startsWith']('FC_ACCESS_KEY_SECRET')||_0x316a2e[_0x7e3405(0xf5)](_0x7e3405(0x107))){var _0x38441b=_0x316a2e[_0x7e3405(0xe0)]('='),_0x31cbb9=utils_1[_0x7e3405(0xe1)](_0x38441b[0x1]);return _0x38441b[0x0]+'='+_0x31cbb9;}else return _0x316a2e;}),_0x1e7724[_0x33eaf6(0xca)]=_0x388a05);logger_1[_0x33eaf6(0xe5)][_0x33eaf6(0x127)](_0x33eaf6(0xbd)+JSON[_0x33eaf6(0xee)](_0x1e7724,null,'\x20\x20'));return[0x2,_0x2f1437];}});});}function supportCustomBootstrapFile(_0x48e4ce,_0x3aa276){var _0x1b20db=a12_0x2ac008;_0x48e4ce===_0x1b20db(0xcb)&&(_0x3aa276[_0x1b20db(0xb7)]&&(_0x3aa276[_0x1b20db(0xbf)]=_0x3aa276[_0x1b20db(0xb7)]));}function resolveMockScript(_0x14d672){var _0x1259bf=a12_0x2ac008;return _0x1259bf(0x136)+_0x14d672+_0x1259bf(0x10c);}exports[a12_0x2ac008(0x128)]=resolveMockScript;function genCustomContainerLocalStartOpts(_0x1444b1,_0x2c09a5,_0x412ce6,_0x760cd2,_0x1c711a,_0x2a8eca,_0x2b8bb0){var _0x3b13f6=a12_0x2ac008,_0x58d075,_0x1f86b4;_0x2b8bb0===void 0x0&&(_0x2b8bb0=0x2328);var _0x556cdb=_0x2b8bb0+_0x3b13f6(0xda),_0x3b7f29={'ExposedPorts':(_0x58d075={},_0x58d075[_0x556cdb]={},_0x58d075),'HostConfig':{'AutoRemove':!![],'Mounts':_0x412ce6,'PortBindings':(_0x1f86b4={},_0x1f86b4[_0x556cdb]=[{'HostIp':'','HostPort':''+_0x2b8bb0}],_0x1f86b4)}};!_['isEmpty'](_0x1444b1)&&(_0x3b7f29[_0x3b13f6(0x124)][_0x3b13f6(0x11e)]=_0x3b13f6(0xbe)+_0x1444b1);var _0x139c1c={'Env':resolveDockerEnv(_0x1c711a,!![]),'Image':_0x2a8eca,'name':_0x2c09a5};_0x760cd2!==[]&&(_0x139c1c['Cmd']=_0x760cd2);var _0x435472={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x1e69e5=nested_object_assign_1[_0x3b13f6(0xe5)](_0x139c1c,_0x3b7f29,_0x435472),_0x1843b5=_[_0x3b13f6(0x122)](_0x1e69e5);if(_0x1843b5===null||_0x1843b5===void 0x0?void 0x0:_0x1843b5['Env']){var _0x24bec4=_0x1843b5[_0x3b13f6(0xca)][_0x3b13f6(0xbc)](function(_0x172e9d){var _0x33fb2c=_0x3b13f6;if(_0x172e9d[_0x33fb2c(0xf5)](_0x33fb2c(0xc3))||_0x172e9d[_0x33fb2c(0xf5)]('FC_ACCESS_KEY_SECRET')||_0x172e9d[_0x33fb2c(0xf5)](_0x33fb2c(0x107))){var _0x2c4bee=_0x172e9d['split']('='),_0x4c093d=utils_1[_0x33fb2c(0xe1)](_0x2c4bee[0x1]);return _0x2c4bee[0x0]+'='+_0x4c093d;}else return _0x172e9d;});_0x1843b5[_0x3b13f6(0xca)]=_0x24bec4;}return logger_1[_0x3b13f6(0xe5)][_0x3b13f6(0x127)](_0x3b13f6(0x110)+JSON['stringify'](_0x1843b5,null,'\x20\x20')),_0x1e69e5;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x57c4f4,_0x2b50ae;return __generator(this,function(_0x5ed0e5){var _0x3e9256=a12_0x4c10;switch(_0x5ed0e5[_0x3e9256(0xf8)]){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0x57c4f4=exports[_0x3e9256(0xf3)][_0x3e9256(0xbc)](function(_0x2b246c){var _0x4108ca=_0x3e9256;return httpx[_0x4108ca(0xd6)]('https://'+_0x2b246c+'/v2/aliyunfc/runtime-nodejs8/tags/list',{'timeout':0xbb8})[_0x4108ca(0x12a)](function(){return _0x2b246c;});}),_0x5ed0e5['label']=0x1;case 0x1:_0x5ed0e5[_0x3e9256(0xe3)][_0x3e9256(0xf1)]([0x1,0x3,,0x4]);return[0x4,Promise[_0x3e9256(0xd7)](_0x57c4f4)];case 0x2:DOCKER_REGISTRY_CACHE=_0x5ed0e5[_0x3e9256(0x121)]();return[0x3,0x4];case 0x3:_0x2b50ae=_0x5ed0e5[_0x3e9256(0x121)](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x2ac008(0x132)]=resolveDockerRegistry;function resolveDockerEnv(_0x32323c,_0x4b7c1d){var _0x212e88=a12_0x2ac008;_0x32323c===void 0x0&&(_0x32323c={});_0x4b7c1d===void 0x0&&(_0x4b7c1d=![]);if(_0x4b7c1d)return _['map'](_0x32323c||{},function(_0x355de2,_0x2808b8){return _0x2808b8+'='+_0x355de2;});return _[_0x212e88(0xbc)](env_1['addEnv'](_0x32323c||{}),function(_0x11ca20,_0x11c730){return _0x11c730+'='+_0x11ca20;});}exports[a12_0x2ac008(0x118)]=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x3885cf,_0x32676f){return __awaiter(this,void 0x0,void 0x0,function(){var _0x30e7a9,_0x49fccb;return __generator(this,function(_0x8cd42a){var _0x5313bd=a12_0x4c10;if(runtimeImageMap[_0x3885cf])return _0x30e7a9=runtimeImageMap[_0x3885cf],_0x32676f?_0x49fccb='aliyunfc/runtime-'+_0x30e7a9+_0x5313bd(0xe7)+IMAGE_VERSION:_0x49fccb=_0x5313bd(0xe9)+_0x30e7a9+':'+IMAGE_VERSION,logger_1[_0x5313bd(0xe5)]['debug'](_0x5313bd(0xc9)+_0x49fccb),[0x2,_0x49fccb];throw new Error(_0x5313bd(0xf0)+_0x3885cf);});});}exports[a12_0x2ac008(0x105)]=resolveRuntimeToDockerImage;