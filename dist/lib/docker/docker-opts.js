'use strict';var a12_0x2f36=['342779SgcXIu','__esModule','hostname','/tcp','3835ZQORuw','split','caPort','mark','then','transformPathForVirtualBox','getUserIdAndGroupId','FC_ACCESS_KEY_SECRET','{\x22name\x22:\x20[\x22','AGENT_SCRIPT','done','Source','generateLocalStartOpts','123117UjKrCH','isTty','next','1.9.18','__awaiter','isArray','__importDefault','dockerUser','https://','hasOwnProperty','-debug','6NjONVH','23gOElcr','__setModuleDefault','__createBinding','resolveMockScript','function','resolveDockerEnv','-run','resolveDockerUser','default','startsWith','pop','Cmd','join','generateInstallOpts','debug','imageName:\x20','DOCKER_REGISTRIES','/mock','label','defineProperty','map','stage','assign','../utils/utils','aliyunfc/runtime-','generateSboxOpts','debugIde','imageName','sent','iterator','throw','debugPort','mounts','cloneDeep','465691UlmAWf','../definition','lowerFirst','106026vphNUt','getgid','generateLocalInvokeOpts','docker\x20options:\x20','php7.2','sbox','generateContainerNameFilter','run','resolveRuntimeToDockerImage','../utils/runtime',':build-','docker\x20options\x20for\x20custom\x20container:\x20','6YjXYXJ','race','transformMountsForToolbox','Env','trys','custom','resolveImageNameForPull','nodejs12','83AxLKPT','registry.cn-beijing.aliyuncs.com','return','generateDockerDebugOpts','invalid\x20runtime\x20name\x20','push','stringify','__importStar','container:','../local-invoke/env','length','call','8443QijmBl','java8','1IMFAmC','BOOTSTRAP_FILE','groupId','../local-invoke/debug','replace','FC_ACCOUNT_ID','ops','getuid','resolveDockerRegistry','registry.hub.docker.com','For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions','NetworkMode','value','apply','/var/fc/runtime/','809767qKCHGw','python3.6','userId','FC_ACCESS_KEY_ID','FC_DOCKER_VERSION','nodejs8','HostConfig','isInteractive','addEnv','nodejs6','warn','envs','isEmpty','generateContainerName','fc-docker\x20docker\x20options:\x20','fc-local-','dotnetcore2.1'];var a12_0x8f93fd=a12_0x28ab;(function(_0x5cce7b,_0x3fe2a2){var _0x2d93ff=a12_0x28ab;while(!![]){try{var _0x277b4b=parseInt(_0x2d93ff(0x15d))+parseInt(_0x2d93ff(0xe8))*-parseInt(_0x2d93ff(0x160))+-parseInt(_0x2d93ff(0xfe))*parseInt(_0x2d93ff(0x11e))+parseInt(_0x2d93ff(0x13b))*parseInt(_0x2d93ff(0x122))+parseInt(_0x2d93ff(0x12f))*parseInt(_0x2d93ff(0x13a))+parseInt(_0x2d93ff(0x10d))+-parseInt(_0x2d93ff(0xfc))*parseInt(_0x2d93ff(0xf0));if(_0x277b4b===_0x3fe2a2)break;else _0x5cce7b['push'](_0x5cce7b['shift']());}catch(_0x6b5890){_0x5cce7b['push'](_0x5cce7b['shift']());}}}(a12_0x2f36,0x67305));var __createBinding=this&&this[a12_0x8f93fd(0x13d)]||(Object['create']?function(_0xc12daa,_0x51853a,_0xc10d74,_0xe1174b){var _0x10e165=a12_0x8f93fd;if(_0xe1174b===undefined)_0xe1174b=_0xc10d74;Object[_0x10e165(0x14e)](_0xc12daa,_0xe1174b,{'enumerable':!![],'get':function(){return _0x51853a[_0xc10d74];}});}:function(_0x1866e0,_0x15e5d0,_0x189a13,_0x5c76d3){if(_0x5c76d3===undefined)_0x5c76d3=_0x189a13;_0x1866e0[_0x5c76d3]=_0x15e5d0[_0x189a13];}),__setModuleDefault=this&&this[a12_0x8f93fd(0x13c)]||(Object['create']?function(_0x4e26a1,_0x4509d6){var _0x327842=a12_0x8f93fd;Object[_0x327842(0x14e)](_0x4e26a1,'default',{'enumerable':!![],'value':_0x4509d6});}:function(_0x2e239c,_0x18cf2d){var _0x5f5446=a12_0x8f93fd;_0x2e239c[_0x5f5446(0x143)]=_0x18cf2d;}),__importStar=this&&this[a12_0x8f93fd(0xf7)]||function(_0x3e51b2){var _0x544f4b=a12_0x8f93fd;if(_0x3e51b2&&_0x3e51b2[_0x544f4b(0x11f)])return _0x3e51b2;var _0x2cf7a4={};if(_0x3e51b2!=null){for(var _0x2a89c4 in _0x3e51b2)if(_0x2a89c4!==_0x544f4b(0x143)&&Object[_0x544f4b(0x138)]['call'](_0x3e51b2,_0x2a89c4))__createBinding(_0x2cf7a4,_0x3e51b2,_0x2a89c4);}return __setModuleDefault(_0x2cf7a4,_0x3e51b2),_0x2cf7a4;},__awaiter=this&&this[a12_0x8f93fd(0x133)]||function(_0x9a2d53,_0x4f7073,_0x3cbbda,_0x5f3f2d){function _0x47221c(_0x55ecb8){return _0x55ecb8 instanceof _0x3cbbda?_0x55ecb8:new _0x3cbbda(function(_0x524bad){_0x524bad(_0x55ecb8);});}return new(_0x3cbbda||(_0x3cbbda=Promise))(function(_0x4d03c4,_0x3e1482){var _0x32ef55=a12_0x28ab;function _0x458b33(_0x56fe16){var _0x4fa7a1=a12_0x28ab;try{_0x21074f(_0x5f3f2d[_0x4fa7a1(0x131)](_0x56fe16));}catch(_0x11a953){_0x3e1482(_0x11a953);}}function _0x369307(_0x44a701){var _0x4c5ece=a12_0x28ab;try{_0x21074f(_0x5f3f2d[_0x4c5ece(0x159)](_0x44a701));}catch(_0x48a29d){_0x3e1482(_0x48a29d);}}function _0x21074f(_0xcb2d91){var _0x256d73=a12_0x28ab;_0xcb2d91['done']?_0x4d03c4(_0xcb2d91[_0x256d73(0x10a)]):_0x47221c(_0xcb2d91['value'])[_0x256d73(0x126)](_0x458b33,_0x369307);}_0x21074f((_0x5f3f2d=_0x5f3f2d[_0x32ef55(0x10b)](_0x9a2d53,_0x4f7073||[]))[_0x32ef55(0x131)]());});},__generator=this&&this['__generator']||function(_0x3fb177,_0x23411b){var _0x3abbbe=a12_0x8f93fd,_0x32f055={'label':0x0,'sent':function(){if(_0x5c4483[0x0]&0x1)throw _0x5c4483[0x1];return _0x5c4483[0x1];},'trys':[],'ops':[]},_0x5e14ee,_0x38957d,_0x5c4483,_0x24271f;return _0x24271f={'next':_0x1d9c6b(0x0),'throw':_0x1d9c6b(0x1),'return':_0x1d9c6b(0x2)},typeof Symbol===_0x3abbbe(0x13f)&&(_0x24271f[Symbol[_0x3abbbe(0x158)]]=function(){return this;}),_0x24271f;function _0x1d9c6b(_0x4183b3){return function(_0x5275c0){return _0x4b4f06([_0x4183b3,_0x5275c0]);};}function _0x4b4f06(_0x17db9c){var _0x3473ee=_0x3abbbe;if(_0x5e14ee)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x32f055)try{if(_0x5e14ee=0x1,_0x38957d&&(_0x5c4483=_0x17db9c[0x0]&0x2?_0x38957d[_0x3473ee(0xf2)]:_0x17db9c[0x0]?_0x38957d[_0x3473ee(0x159)]||((_0x5c4483=_0x38957d['return'])&&_0x5c4483['call'](_0x38957d),0x0):_0x38957d[_0x3473ee(0x131)])&&!(_0x5c4483=_0x5c4483[_0x3473ee(0xfb)](_0x38957d,_0x17db9c[0x1]))[_0x3473ee(0x12c)])return _0x5c4483;if(_0x38957d=0x0,_0x5c4483)_0x17db9c=[_0x17db9c[0x0]&0x2,_0x5c4483['value']];switch(_0x17db9c[0x0]){case 0x0:case 0x1:_0x5c4483=_0x17db9c;break;case 0x4:_0x32f055['label']++;return{'value':_0x17db9c[0x1],'done':![]};case 0x5:_0x32f055[_0x3473ee(0x14d)]++,_0x38957d=_0x17db9c[0x1],_0x17db9c=[0x0];continue;case 0x7:_0x17db9c=_0x32f055['ops'][_0x3473ee(0x145)](),_0x32f055[_0x3473ee(0xec)]['pop']();continue;default:if(!(_0x5c4483=_0x32f055['trys'],_0x5c4483=_0x5c4483['length']>0x0&&_0x5c4483[_0x5c4483[_0x3473ee(0xfa)]-0x1])&&(_0x17db9c[0x0]===0x6||_0x17db9c[0x0]===0x2)){_0x32f055=0x0;continue;}if(_0x17db9c[0x0]===0x3&&(!_0x5c4483||_0x17db9c[0x1]>_0x5c4483[0x0]&&_0x17db9c[0x1]<_0x5c4483[0x3])){_0x32f055[_0x3473ee(0x14d)]=_0x17db9c[0x1];break;}if(_0x17db9c[0x0]===0x6&&_0x32f055[_0x3473ee(0x14d)]<_0x5c4483[0x1]){_0x32f055[_0x3473ee(0x14d)]=_0x5c4483[0x1],_0x5c4483=_0x17db9c;break;}if(_0x5c4483&&_0x32f055[_0x3473ee(0x14d)]<_0x5c4483[0x2]){_0x32f055[_0x3473ee(0x14d)]=_0x5c4483[0x2],_0x32f055[_0x3473ee(0x104)][_0x3473ee(0xf5)](_0x17db9c);break;}if(_0x5c4483[0x2])_0x32f055[_0x3473ee(0x104)][_0x3473ee(0x145)]();_0x32f055['trys'][_0x3473ee(0x145)]();continue;}_0x17db9c=_0x23411b[_0x3473ee(0xfb)](_0x3fb177,_0x32f055);}catch(_0x110aec){_0x17db9c=[0x6,_0x110aec],_0x38957d=0x0;}finally{_0x5e14ee=_0x5c4483=0x0;}if(_0x17db9c[0x0]&0x5)throw _0x17db9c[0x1];return{'value':_0x17db9c[0x0]?_0x17db9c[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a12_0x8f93fd(0x135)]||function(_0x406ce1){return _0x406ce1&&_0x406ce1['__esModule']?_0x406ce1:{'default':_0x406ce1};};Object[a12_0x8f93fd(0x14e)](exports,a12_0x8f93fd(0x11f),{'value':!![]}),exports[a12_0x8f93fd(0xe4)]=exports[a12_0x8f93fd(0x140)]=exports[a12_0x8f93fd(0x106)]=exports[a12_0x8f93fd(0x13e)]=exports[a12_0x8f93fd(0x12e)]=exports[a12_0x8f93fd(0x11a)]=exports[a12_0x8f93fd(0x166)]=exports['generateLocalInvokeOpts']=exports[a12_0x8f93fd(0x127)]=exports[a12_0x8f93fd(0xea)]=exports[a12_0x8f93fd(0x148)]=exports[a12_0x8f93fd(0x142)]=exports[a12_0x8f93fd(0x154)]=exports[a12_0x8f93fd(0xee)]=exports[a12_0x8f93fd(0x14b)]=void 0x0;var httpx=__importStar(require('httpx')),_=__importStar(require('lodash')),env_1=require(a12_0x8f93fd(0xf9)),logger_1=__importDefault(require('../../common/logger')),definition_1=require(a12_0x8f93fd(0x15e)),nested_object_assign_1=__importDefault(require('nested-object-assign')),debug_1=require(a12_0x8f93fd(0x101)),runtime_1=require(a12_0x8f93fd(0xe5)),utils_1=require(a12_0x8f93fd(0x152)),REGISTRY_DEFAULT='registry.cn-beijing.aliyuncs.com',DEFAULT_REGISTRY=REGISTRY_DEFAULT||a12_0x8f93fd(0x107);exports[a12_0x8f93fd(0x14b)]=[a12_0x8f93fd(0xf1),'registry.hub.docker.com'];var IMAGE_VERSION=process['env'][a12_0x8f93fd(0x111)]||a12_0x8f93fd(0x132),DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':a12_0x8f93fd(0x116),'nodejs8':a12_0x8f93fd(0x112),'nodejs10':'nodejs10','nodejs12':a12_0x8f93fd(0xef),'python2.7':'python2.7','python3':a12_0x8f93fd(0x10e),'java8':a12_0x8f93fd(0xfd),'java11':'java11','php7.2':a12_0x8f93fd(0x164),'dotnetcore2.1':a12_0x8f93fd(0x11d),'custom':'custom'};function resolveImageNameForPull(_0x3a62a3){return __awaiter(this,void 0x0,void 0x0,function(){var _0x20369e;return __generator(this,function(_0x2ed7d6){var _0x2a1d3c=a12_0x28ab;switch(_0x2ed7d6[_0x2a1d3c(0x14d)]){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x20369e=_0x2ed7d6[_0x2a1d3c(0x157)]();_0x20369e&&(_0x3a62a3=_0x20369e+'/'+_0x3a62a3);return[0x2,_0x3a62a3];}});});}exports[a12_0x8f93fd(0xee)]=resolveImageNameForPull;function generateSboxOpts(_0x49dedd){var _0x526d1f=a12_0x8f93fd,_0x2b7012=_0x49dedd[_0x526d1f(0x156)],_0x406d59=_0x49dedd[_0x526d1f(0x120)],_0x3e18f7=_0x49dedd[_0x526d1f(0x15b)],_0x1c059e=_0x49dedd[_0x526d1f(0x118)],_0x322091=_0x49dedd['cmd'],_0x288adf=_0x322091===void 0x0?[]:_0x322091,_0x205c0f=_0x49dedd[_0x526d1f(0x130)],_0x537d8a=_0x49dedd[_0x526d1f(0x114)];return{'Image':_0x2b7012,'Hostname':_0x406d59,'AttachStdin':_0x537d8a,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x526d1f(0x165)}),'Tty':_0x205c0f,'OpenStdin':_0x537d8a,'StdinOnce':!![],'Env':resolveDockerEnv(_0x1c059e),'Cmd':_0x288adf[_0x526d1f(0xfa)]?_0x288adf:['/bin/bash'],'HostConfig':{'AutoRemove':!![],'Mounts':_0x3e18f7}};}exports[a12_0x8f93fd(0x154)]=generateSboxOpts;function resolveDockerUser(_0x41d62a){var _0x14a5ab=a12_0x8f93fd,_0x56f0bf=_0x41d62a['nasConfig'],_0x56d45e=_0x41d62a[_0x14a5ab(0x150)],_0x109771=_0x56d45e===void 0x0?_0x14a5ab(0xe3):_0x56d45e,_0x4df7f3=definition_1[_0x14a5ab(0x128)](_0x56f0bf),_0x17880a=_0x4df7f3[_0x14a5ab(0x10f)],_0xac942f=_0x4df7f3[_0x14a5ab(0x100)];return process['platform']==='linux'?(logger_1[_0x14a5ab(0x143)][_0x14a5ab(0x149)](_0x14a5ab(0x108)),_0x17880a=process[_0x14a5ab(0x105)](),_0xac942f=process[_0x14a5ab(0x161)]()):_0x109771===_0x14a5ab(0xe3)?((_0x17880a===-0x1||_0x17880a===undefined)&&(_0x17880a=NAS_UID),(_0xac942f===-0x1||_0xac942f===undefined)&&(_0xac942f=NAS_GID)):(_0x17880a=0x0,_0xac942f=0x0),_0x17880a+':'+_0xac942f;}exports[a12_0x8f93fd(0x142)]=resolveDockerUser;function generateInstallOpts(_0x32b1fd,_0x492b7e,_0x45ad89){return{'Image':_0x32b1fd,'Tty':!![],'Env':resolveDockerEnv(_0x45ad89),'Cmd':['/bin/bash'],'HostConfig':{'AutoRemove':!![],'Mounts':_0x492b7e}};}exports[a12_0x8f93fd(0x148)]=generateInstallOpts;function transformMountsForToolbox(_0x11a979){var _0x974036=a12_0x8f93fd;console[_0x974036(0x117)]('We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a');if(Array[_0x974036(0x134)](_0x11a979))return _0x11a979[_0x974036(0x14f)](function(_0x4dd548){return transformSourcePathOfMount(_0x4dd548);});return transformSourcePathOfMount(_0x11a979);}exports[a12_0x8f93fd(0xea)]=transformMountsForToolbox;function transformSourcePathOfMount(_0x140621){var _0x377b30=a12_0x8f93fd;if(!_[_0x377b30(0x119)](_0x140621)){var _0xfc7c96=Object[_0x377b30(0x151)]({},_0x140621);return _0xfc7c96[_0x377b30(0x12d)]=transformPathForVirtualBox(_0x140621['Source']),_0xfc7c96;}return{};}function transformPathForVirtualBox(_0x5d5930){var _0x3e33c6=a12_0x8f93fd,_0x482cf8=_0x5d5930[_0x3e33c6(0x123)](':')['join'](''),_0xa088de=_[_0x3e33c6(0x15f)](_0x482cf8['split']('\x5c')[_0x3e33c6(0x147)]('/'));return'/'+_0xa088de;}function a12_0x28ab(_0xa71d7e,_0x3b240d){return a12_0x28ab=function(_0x2f36b4,_0x28ab68){_0x2f36b4=_0x2f36b4-0xe3;var _0x5b40da=a12_0x2f36[_0x2f36b4];return _0x5b40da;},a12_0x28ab(_0xa71d7e,_0x3b240d);}exports[a12_0x8f93fd(0x127)]=transformPathForVirtualBox;function generateLocalInvokeOpts(_0x2e4d3a,_0x110efc,_0x117ade,_0x2f239d,_0x1666b6,_0x35ce61,_0x24cbbe,_0x27bf7b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x5deb12,_0x773a6b,_0x58f867,_0x3464bb,_0x384cb8,_0x1bde43,_0x52156e;return __generator(this,function(_0x14e1d1){var _0xddc453=a12_0x28ab;switch(_0x14e1d1['label']){case 0x0:_0x5deb12={'HostConfig':{'AutoRemove':!![],'Mounts':_0x117ade}},_0x773a6b={};_0x1666b6&&(_0x773a6b=debug_1[_0xddc453(0xf3)](_0x2e4d3a,_0x1666b6,_0x27bf7b));_0x58f867={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]};return[0x4,resolveRuntimeToDockerImage(_0x2e4d3a)];case 0x1:_0x3464bb=_0x14e1d1[_0xddc453(0x157)](),supportCustomBootstrapFile(_0x2e4d3a,_0x35ce61),_0x384cb8=nested_object_assign_1[_0xddc453(0x143)]({'Env':resolveDockerEnv(_0x35ce61),'Image':_0x3464bb,'name':_0x110efc,'Cmd':_0x2f239d,'User':_0x24cbbe},_0x58f867,_0x5deb12,_0x773a6b),_0x1bde43=_[_0xddc453(0x15c)](_0x384cb8);(_0x1bde43===null||_0x1bde43===void 0x0?void 0x0:_0x1bde43[_0xddc453(0xeb)])&&(_0x52156e=_0x1bde43[_0xddc453(0xeb)][_0xddc453(0x14f)](function(_0x38d5bc){var _0x7e152c=_0xddc453;if(_0x38d5bc['startsWith']('FC_ACCESS_KEY_ID')||_0x38d5bc['startsWith'](_0x7e152c(0x129))||_0x38d5bc[_0x7e152c(0x144)](_0x7e152c(0x103))){var _0x54b012=_0x38d5bc[_0x7e152c(0x123)]('='),_0x2dbf68=utils_1[_0x7e152c(0x125)](_0x54b012[0x1]);return _0x54b012[0x0]+'='+_0x2dbf68;}else return _0x38d5bc;}),_0x1bde43['Env']=_0x52156e);logger_1[_0xddc453(0x143)][_0xddc453(0x149)](_0xddc453(0x11b)+JSON[_0xddc453(0xf6)](_0x1bde43,null,'\x20\x20'));return[0x2,_0x384cb8];}});});}exports[a12_0x8f93fd(0x162)]=generateLocalInvokeOpts;function generateContainerNameFilter(_0x44e24d,_0x357d4d){var _0x45c3a6=a12_0x8f93fd;if(_0x357d4d)return _0x45c3a6(0x12a)+_0x44e24d+'-inited\x22]}';return _0x45c3a6(0x12a)+_0x44e24d+'\x22]}';}exports[a12_0x8f93fd(0x166)]=generateContainerNameFilter;function generateContainerName(_0x45def5,_0x43e887,_0x51e263){var _0x7cf2d4=a12_0x8f93fd;return(_0x7cf2d4(0x11c)+_0x45def5+'-'+_0x43e887)[_0x7cf2d4(0x102)](/ /g,'')+(_0x51e263?_0x7cf2d4(0x139):_0x7cf2d4(0x141));}exports[a12_0x8f93fd(0x11a)]=generateContainerName;function generateLocalStartOpts(_0xb48f5c,_0xf806ab,_0x13983a,_0x321b33,_0x2f4728,_0xec4a38,_0x443f31){var _0x1800cb=a12_0x8f93fd,_0x547f83=_0x443f31[_0x1800cb(0x15a)],_0x4a26cb=_0x443f31[_0x1800cb(0x136)],_0x293dc7=_0x443f31[_0x1800cb(0x155)],_0x5b6529=_0x293dc7===void 0x0?null:_0x293dc7,_0x3b42d2=_0x443f31[_0x1800cb(0x156)],_0x169454=_0x443f31[_0x1800cb(0x124)],_0x27c351=_0x169454===void 0x0?0x2328:_0x169454;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x152735){var _0x412946=a12_0x28ab;switch(_0x152735[_0x412946(0x14d)]){case 0x0:if(runtime_1['isCustomContainerRuntime'](_0xf806ab))return[0x2,genCustomContainerLocalStartOpts(_0xb48f5c,_0x13983a,_0x321b33,_0x2f4728,_0xec4a38,_0x3b42d2,_0x27c351)];return[0x4,genNonCustomContainerLocalStartOpts(_0xb48f5c,_0xf806ab,_0x13983a,_0x321b33,_0x2f4728,_0x547f83,_0xec4a38,_0x4a26cb,_0x5b6529)];case 0x1:return[0x2,_0x152735[_0x412946(0x157)]()];}});});}exports[a12_0x8f93fd(0x12e)]=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0x1e7f82,_0x2338a3,_0x17bd32,_0x46de6c,_0x16497e,_0x10dd7d,_0x480263,_0x2e6f27,_0x21ff6d){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4c8027,_0x19c5c5,_0x2ec3f4,_0x211a6b,_0x90c149;return __generator(this,function(_0x135d79){var _0x590d7c=a12_0x28ab;switch(_0x135d79['label']){case 0x0:_0x4c8027={'HostConfig':{'AutoRemove':!![],'Mounts':_0x46de6c}};!_[_0x590d7c(0x119)](_0x1e7f82)&&(_0x4c8027[_0x590d7c(0x113)][_0x590d7c(0x109)]=_0x590d7c(0xf8)+_0x1e7f82);return[0x4,resolveRuntimeToDockerImage(_0x2338a3)];case 0x1:_0x19c5c5=_0x135d79['sent'](),supportCustomBootstrapFile(_0x2338a3,_0x480263),_0x2ec3f4=nested_object_assign_1[_0x590d7c(0x143)]({'Env':resolveDockerEnv(_0x480263),'Image':_0x19c5c5,'name':_0x17bd32,'Cmd':_0x16497e,'User':_0x2e6f27,'Entrypoint':[resolveMockScript(_0x2338a3)]},_0x4c8027),_0x211a6b=_[_0x590d7c(0x15c)](_0x2ec3f4);(_0x211a6b===null||_0x211a6b===void 0x0?void 0x0:_0x211a6b['Env'])&&(_0x90c149=_0x211a6b['Env'][_0x590d7c(0x14f)](function(_0x596fc1){var _0x4bd0a5=_0x590d7c;if(_0x596fc1[_0x4bd0a5(0x144)](_0x4bd0a5(0x110))||_0x596fc1[_0x4bd0a5(0x144)]('FC_ACCESS_KEY_SECRET')||_0x596fc1['startsWith'](_0x4bd0a5(0x103))){var _0x7fcc1a=_0x596fc1[_0x4bd0a5(0x123)]('='),_0x36a9b9=utils_1[_0x4bd0a5(0x125)](_0x7fcc1a[0x1]);return _0x7fcc1a[0x0]+'='+_0x36a9b9;}else return _0x596fc1;}),_0x211a6b['Env']=_0x90c149);logger_1['default'][_0x590d7c(0x149)](_0x590d7c(0x163)+JSON['stringify'](_0x211a6b,null,'\x20\x20'));return[0x2,_0x2ec3f4];}});});}function supportCustomBootstrapFile(_0x43e2be,_0x50169b){var _0x41f3e6=a12_0x8f93fd;_0x43e2be===_0x41f3e6(0xed)&&(_0x50169b['BOOTSTRAP_FILE']&&(_0x50169b[_0x41f3e6(0x12b)]=_0x50169b[_0x41f3e6(0xff)]));}function resolveMockScript(_0x5a307b){var _0xc155d6=a12_0x8f93fd;return _0xc155d6(0x10c)+_0x5a307b+_0xc155d6(0x14c);}exports[a12_0x8f93fd(0x13e)]=resolveMockScript;function genCustomContainerLocalStartOpts(_0x35f736,_0xdd0f64,_0x15533a,_0x36521e,_0x1c2d19,_0x5dbac4,_0x25c7ea){var _0x465396=a12_0x8f93fd,_0x2098cd,_0x148077;_0x25c7ea===void 0x0&&(_0x25c7ea=0x2328);var _0x1c7ef7=_0x25c7ea+_0x465396(0x121),_0x4fdabf={'ExposedPorts':(_0x2098cd={},_0x2098cd[_0x1c7ef7]={},_0x2098cd),'HostConfig':{'AutoRemove':!![],'Mounts':_0x15533a,'PortBindings':(_0x148077={},_0x148077[_0x1c7ef7]=[{'HostIp':'','HostPort':''+_0x25c7ea}],_0x148077)}};!_['isEmpty'](_0x35f736)&&(_0x4fdabf[_0x465396(0x113)][_0x465396(0x109)]=_0x465396(0xf8)+_0x35f736);var _0x23722d={'Env':resolveDockerEnv(_0x1c2d19,!![]),'Image':_0x5dbac4,'name':_0xdd0f64};_0x36521e!==[]&&(_0x23722d[_0x465396(0x146)]=_0x36521e);var _0x18c02a={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x10c677=nested_object_assign_1['default'](_0x23722d,_0x4fdabf,_0x18c02a),_0x2681c3=_[_0x465396(0x15c)](_0x10c677);if(_0x2681c3===null||_0x2681c3===void 0x0?void 0x0:_0x2681c3[_0x465396(0xeb)]){var _0x46ded7=_0x2681c3[_0x465396(0xeb)][_0x465396(0x14f)](function(_0x563f2b){var _0x130b1e=_0x465396;if(_0x563f2b[_0x130b1e(0x144)](_0x130b1e(0x110))||_0x563f2b['startsWith']('FC_ACCESS_KEY_SECRET')||_0x563f2b[_0x130b1e(0x144)](_0x130b1e(0x103))){var _0x5cea0f=_0x563f2b['split']('='),_0x2d7d99=utils_1[_0x130b1e(0x125)](_0x5cea0f[0x1]);return _0x5cea0f[0x0]+'='+_0x2d7d99;}else return _0x563f2b;});_0x2681c3['Env']=_0x46ded7;}return logger_1['default'][_0x465396(0x149)](_0x465396(0xe7)+JSON[_0x465396(0xf6)](_0x2681c3,null,'\x20\x20')),_0x10c677;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2aa2b4,_0x4c2e51;return __generator(this,function(_0x368f80){var _0x22b6eb=a12_0x28ab;switch(_0x368f80['label']){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0x2aa2b4=exports[_0x22b6eb(0x14b)][_0x22b6eb(0x14f)](function(_0x2ee2da){var _0x13409e=_0x22b6eb;return httpx['request'](_0x13409e(0x137)+_0x2ee2da+'/v2/aliyunfc/runtime-nodejs8/tags/list',{'timeout':0xbb8})['then'](function(){return _0x2ee2da;});}),_0x368f80[_0x22b6eb(0x14d)]=0x1;case 0x1:_0x368f80['trys']['push']([0x1,0x3,,0x4]);return[0x4,Promise[_0x22b6eb(0xe9)](_0x2aa2b4)];case 0x2:DOCKER_REGISTRY_CACHE=_0x368f80[_0x22b6eb(0x157)]();return[0x3,0x4];case 0x3:_0x4c2e51=_0x368f80[_0x22b6eb(0x157)](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x8f93fd(0x106)]=resolveDockerRegistry;function resolveDockerEnv(_0x37b233,_0x2b9a93){var _0xdab62c=a12_0x8f93fd;_0x37b233===void 0x0&&(_0x37b233={});_0x2b9a93===void 0x0&&(_0x2b9a93=![]);if(_0x2b9a93)return _['map'](_0x37b233||{},function(_0x1f6b18,_0x51b380){return _0x51b380+'='+_0x1f6b18;});return _[_0xdab62c(0x14f)](env_1[_0xdab62c(0x115)](_0x37b233||{}),function(_0x15e073,_0xcc26a0){return _0xcc26a0+'='+_0x15e073;});}exports[a12_0x8f93fd(0x140)]=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x51359d,_0x5e4d59){return __awaiter(this,void 0x0,void 0x0,function(){var _0x460116,_0x32c3fb;return __generator(this,function(_0x3fb38f){var _0x1f606e=a12_0x28ab;if(runtimeImageMap[_0x51359d])return _0x460116=runtimeImageMap[_0x51359d],_0x5e4d59?_0x32c3fb=_0x1f606e(0x153)+_0x460116+_0x1f606e(0xe6)+IMAGE_VERSION:_0x32c3fb=_0x1f606e(0x153)+_0x460116+':'+IMAGE_VERSION,logger_1[_0x1f606e(0x143)][_0x1f606e(0x149)](_0x1f606e(0x14a)+_0x32c3fb),[0x2,_0x32c3fb];throw new Error(_0x1f606e(0xf4)+_0x51359d);});});}exports[a12_0x8f93fd(0xe4)]=resolveRuntimeToDockerImage;