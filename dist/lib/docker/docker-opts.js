'use strict';var a12_0x5efe=['httpx','docker\x20options:\x20','generateContainerNameFilter','5MYedhQ','BOOTSTRAP_FILE','call','generateSboxOpts','registry.hub.docker.com','../utils/runtime','resolveDockerRegistry','/bin/bash','FC_DOCKER_VERSION','throw','generateLocalInvokeOpts','isInteractive','cloneDeep','42fFpPSu','4MJoltA','generateLocalStartOpts','generateDockerDebugOpts','2ealPAm','startsWith','\x22]}','resolveRuntimeToDockerImage','java8','custom','resolveMockScript','dockerUser','nodejs12','linux','python2.7','defineProperty','docker\x20options\x20for\x20custom\x20container:\x20','apply','isArray','return','pop','done','nodejs10','mark','split','1.9.18','caPort','resolveDockerEnv','We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a','lowerFirst','nasConfig','getuid','aliyunfc/runtime-','Env','hostname','run','create','value','race','__awaiter','FC_ACCESS_KEY_ID','23141GUTLHT','getgid','isCustomContainerRuntime','-debug','NetworkMode','{\x22name\x22:\x20[\x22','userId','lodash','isTty','__createBinding','sbox','warn','/v2/aliyunfc/runtime-nodejs8/tags/list','generateInstallOpts','groupId','ops','__esModule','resolveImageNameForPull','then','label','../utils/utils','/var/fc/runtime/','../local-invoke/debug','nodejs6','function','nodejs8','resolveDockerUser','__generator','iterator','-inited\x22]}','push','map','Generator\x20is\x20already\x20executing.','https://','invalid\x20runtime\x20name\x20','nested-object-assign','sent','getUserIdAndGroupId','container:','platform','FC_ACCOUNT_ID','join','HostConfig','DOCKER_REGISTRIES','1444350kcdgeR','replace','trys','146241RiXmfJ','default','AGENT_SCRIPT','generateContainerName','registry.cn-beijing.aliyuncs.com','next','dotnetcore2.1','154631dltbUe','length','python3.6','../local-invoke/env','debug','java11','imageName:\x20','fc-docker\x20docker\x20options:\x20','isEmpty','debugIde','transformMountsForToolbox','transformPathForVirtualBox','Source','stringify','528895nirKQn','1554007XrKRri','imageName','mounts','__setModuleDefault','debugPort','cmd','38232fiqCrd','FC_ACCESS_KEY_SECRET'];var a12_0x4c72bd=a12_0x42c5;(function(_0x58fa9f,_0x133c02){var _0x4fc936=a12_0x42c5;while(!![]){try{var _0x134f82=-parseInt(_0x4fc936(0x1ee))*parseInt(_0x4fc936(0x1dc))+parseInt(_0x4fc936(0x217))*parseInt(_0x4fc936(0x1ef))+parseInt(_0x4fc936(0x243))+parseInt(_0x4fc936(0x25c))+parseInt(_0x4fc936(0x25b))+parseInt(_0x4fc936(0x1e1))*-parseInt(_0x4fc936(0x24d))+-parseInt(_0x4fc936(0x246))*parseInt(_0x4fc936(0x1f2));if(_0x134f82===_0x133c02)break;else _0x58fa9f['push'](_0x58fa9f['shift']());}catch(_0x35c595){_0x58fa9f['push'](_0x58fa9f['shift']());}}}(a12_0x5efe,0xe78d3));var __createBinding=this&&this[a12_0x4c72bd(0x220)]||(Object[a12_0x4c72bd(0x212)]?function(_0x526ea7,_0xc7a368,_0x340544,_0xc55c0b){var _0x3b4ca3=a12_0x4c72bd;if(_0xc55c0b===undefined)_0xc55c0b=_0x340544;Object[_0x3b4ca3(0x1fd)](_0x526ea7,_0xc55c0b,{'enumerable':!![],'get':function(){return _0xc7a368[_0x340544];}});}:function(_0x3828a7,_0x59d1df,_0x246f20,_0x585247){if(_0x585247===undefined)_0x585247=_0x246f20;_0x3828a7[_0x585247]=_0x59d1df[_0x246f20];}),__setModuleDefault=this&&this[a12_0x4c72bd(0x1d9)]||(Object[a12_0x4c72bd(0x212)]?function(_0x39337a,_0x2b6fea){var _0x59494e=a12_0x4c72bd;Object[_0x59494e(0x1fd)](_0x39337a,_0x59494e(0x247),{'enumerable':!![],'value':_0x2b6fea});}:function(_0x4dfd42,_0x4ae349){_0x4dfd42['default']=_0x4ae349;}),__importStar=this&&this['__importStar']||function(_0x5c7fde){var _0x4659c7=a12_0x4c72bd;if(_0x5c7fde&&_0x5c7fde[_0x4659c7(0x227)])return _0x5c7fde;var _0x1b819e={};if(_0x5c7fde!=null){for(var _0x31b5cd in _0x5c7fde)if(_0x31b5cd!==_0x4659c7(0x247)&&Object['hasOwnProperty']['call'](_0x5c7fde,_0x31b5cd))__createBinding(_0x1b819e,_0x5c7fde,_0x31b5cd);}return __setModuleDefault(_0x1b819e,_0x5c7fde),_0x1b819e;},__awaiter=this&&this[a12_0x4c72bd(0x215)]||function(_0x5bba98,_0x1357a1,_0x1073fc,_0x14d593){function _0x4c350f(_0x12f1a7){return _0x12f1a7 instanceof _0x1073fc?_0x12f1a7:new _0x1073fc(function(_0x408dd8){_0x408dd8(_0x12f1a7);});}return new(_0x1073fc||(_0x1073fc=Promise))(function(_0x55e1e4,_0x779152){var _0x290198=a12_0x42c5;function _0x1319af(_0x1365d2){var _0x132f71=a12_0x42c5;try{_0x4fb605(_0x14d593[_0x132f71(0x24b)](_0x1365d2));}catch(_0x1b9fc1){_0x779152(_0x1b9fc1);}}function _0x25aa78(_0x58f7af){try{_0x4fb605(_0x14d593['throw'](_0x58f7af));}catch(_0x301b25){_0x779152(_0x301b25);}}function _0x4fb605(_0x20ef92){var _0xd11fa3=a12_0x42c5;_0x20ef92['done']?_0x55e1e4(_0x20ef92[_0xd11fa3(0x213)]):_0x4c350f(_0x20ef92[_0xd11fa3(0x213)])[_0xd11fa3(0x229)](_0x1319af,_0x25aa78);}_0x4fb605((_0x14d593=_0x14d593[_0x290198(0x1ff)](_0x5bba98,_0x1357a1||[]))[_0x290198(0x24b)]());});},__generator=this&&this[a12_0x4c72bd(0x232)]||function(_0x3b5da7,_0x297dd9){var _0x3bfb83=a12_0x4c72bd,_0x13fb5e={'label':0x0,'sent':function(){if(_0x38d9ee[0x0]&0x1)throw _0x38d9ee[0x1];return _0x38d9ee[0x1];},'trys':[],'ops':[]},_0x5b4bbe,_0x421563,_0x38d9ee,_0x293af0;return _0x293af0={'next':_0xa0f06a(0x0),'throw':_0xa0f06a(0x1),'return':_0xa0f06a(0x2)},typeof Symbol===_0x3bfb83(0x22f)&&(_0x293af0[Symbol[_0x3bfb83(0x233)]]=function(){return this;}),_0x293af0;function _0xa0f06a(_0x521894){return function(_0x53680a){return _0x1da743([_0x521894,_0x53680a]);};}function _0x1da743(_0x101e17){var _0x2ec8da=_0x3bfb83;if(_0x5b4bbe)throw new TypeError(_0x2ec8da(0x237));while(_0x13fb5e)try{if(_0x5b4bbe=0x1,_0x421563&&(_0x38d9ee=_0x101e17[0x0]&0x2?_0x421563[_0x2ec8da(0x201)]:_0x101e17[0x0]?_0x421563[_0x2ec8da(0x1ea)]||((_0x38d9ee=_0x421563[_0x2ec8da(0x201)])&&_0x38d9ee[_0x2ec8da(0x1e3)](_0x421563),0x0):_0x421563['next'])&&!(_0x38d9ee=_0x38d9ee[_0x2ec8da(0x1e3)](_0x421563,_0x101e17[0x1]))[_0x2ec8da(0x203)])return _0x38d9ee;if(_0x421563=0x0,_0x38d9ee)_0x101e17=[_0x101e17[0x0]&0x2,_0x38d9ee[_0x2ec8da(0x213)]];switch(_0x101e17[0x0]){case 0x0:case 0x1:_0x38d9ee=_0x101e17;break;case 0x4:_0x13fb5e[_0x2ec8da(0x22a)]++;return{'value':_0x101e17[0x1],'done':![]};case 0x5:_0x13fb5e['label']++,_0x421563=_0x101e17[0x1],_0x101e17=[0x0];continue;case 0x7:_0x101e17=_0x13fb5e[_0x2ec8da(0x226)][_0x2ec8da(0x202)](),_0x13fb5e[_0x2ec8da(0x245)][_0x2ec8da(0x202)]();continue;default:if(!(_0x38d9ee=_0x13fb5e['trys'],_0x38d9ee=_0x38d9ee[_0x2ec8da(0x24e)]>0x0&&_0x38d9ee[_0x38d9ee['length']-0x1])&&(_0x101e17[0x0]===0x6||_0x101e17[0x0]===0x2)){_0x13fb5e=0x0;continue;}if(_0x101e17[0x0]===0x3&&(!_0x38d9ee||_0x101e17[0x1]>_0x38d9ee[0x0]&&_0x101e17[0x1]<_0x38d9ee[0x3])){_0x13fb5e['label']=_0x101e17[0x1];break;}if(_0x101e17[0x0]===0x6&&_0x13fb5e['label']<_0x38d9ee[0x1]){_0x13fb5e[_0x2ec8da(0x22a)]=_0x38d9ee[0x1],_0x38d9ee=_0x101e17;break;}if(_0x38d9ee&&_0x13fb5e[_0x2ec8da(0x22a)]<_0x38d9ee[0x2]){_0x13fb5e[_0x2ec8da(0x22a)]=_0x38d9ee[0x2],_0x13fb5e['ops'][_0x2ec8da(0x235)](_0x101e17);break;}if(_0x38d9ee[0x2])_0x13fb5e[_0x2ec8da(0x226)][_0x2ec8da(0x202)]();_0x13fb5e[_0x2ec8da(0x245)][_0x2ec8da(0x202)]();continue;}_0x101e17=_0x297dd9[_0x2ec8da(0x1e3)](_0x3b5da7,_0x13fb5e);}catch(_0x3734d3){_0x101e17=[0x6,_0x3734d3],_0x421563=0x0;}finally{_0x5b4bbe=_0x38d9ee=0x0;}if(_0x101e17[0x0]&0x5)throw _0x101e17[0x1];return{'value':_0x101e17[0x0]?_0x101e17[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this['__importDefault']||function(_0x325b5e){var _0x1125e3=a12_0x4c72bd;return _0x325b5e&&_0x325b5e[_0x1125e3(0x227)]?_0x325b5e:{'default':_0x325b5e};};Object[a12_0x4c72bd(0x1fd)](exports,a12_0x4c72bd(0x227),{'value':!![]}),exports[a12_0x4c72bd(0x1f5)]=exports[a12_0x4c72bd(0x209)]=exports[a12_0x4c72bd(0x1e7)]=exports[a12_0x4c72bd(0x1f8)]=exports[a12_0x4c72bd(0x1f0)]=exports[a12_0x4c72bd(0x249)]=exports[a12_0x4c72bd(0x1e0)]=exports[a12_0x4c72bd(0x1eb)]=exports[a12_0x4c72bd(0x258)]=exports[a12_0x4c72bd(0x257)]=exports['generateInstallOpts']=exports[a12_0x4c72bd(0x231)]=exports[a12_0x4c72bd(0x1e4)]=exports['resolveImageNameForPull']=exports[a12_0x4c72bd(0x242)]=void 0x0;var httpx=__importStar(require(a12_0x4c72bd(0x1de))),_=__importStar(require(a12_0x4c72bd(0x21e))),env_1=require(a12_0x4c72bd(0x250)),logger_1=__importDefault(require('../../common/logger')),definition_1=require('../definition'),nested_object_assign_1=__importDefault(require(a12_0x4c72bd(0x23a))),debug_1=require(a12_0x4c72bd(0x22d)),runtime_1=require(a12_0x4c72bd(0x1e6)),utils_1=require(a12_0x4c72bd(0x22b)),REGISTRY_DEFAULT=a12_0x4c72bd(0x24a),DEFAULT_REGISTRY=REGISTRY_DEFAULT||a12_0x4c72bd(0x1e5);function a12_0x42c5(_0xd1d68d,_0x3c8093){return a12_0x42c5=function(_0x5efeef,_0x42c5a7){_0x5efeef=_0x5efeef-0x1d9;var _0x4df9e9=a12_0x5efe[_0x5efeef];return _0x4df9e9;},a12_0x42c5(_0xd1d68d,_0x3c8093);}exports[a12_0x4c72bd(0x242)]=[a12_0x4c72bd(0x24a),a12_0x4c72bd(0x1e5)];var IMAGE_VERSION=process['env'][a12_0x4c72bd(0x1e9)]||a12_0x4c72bd(0x207),DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':a12_0x4c72bd(0x22e),'nodejs8':a12_0x4c72bd(0x230),'nodejs10':a12_0x4c72bd(0x204),'nodejs12':a12_0x4c72bd(0x1fa),'python2.7':a12_0x4c72bd(0x1fc),'python3':a12_0x4c72bd(0x24f),'java8':a12_0x4c72bd(0x1f6),'java11':a12_0x4c72bd(0x252),'php7.2':'php7.2','dotnetcore2.1':a12_0x4c72bd(0x24c),'custom':a12_0x4c72bd(0x1f7)};function resolveImageNameForPull(_0x218aae){return __awaiter(this,void 0x0,void 0x0,function(){var _0x98b4e7;return __generator(this,function(_0x4886a8){var _0x18cbac=a12_0x42c5;switch(_0x4886a8['label']){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x98b4e7=_0x4886a8[_0x18cbac(0x23b)]();_0x98b4e7&&(_0x218aae=_0x98b4e7+'/'+_0x218aae);return[0x2,_0x218aae];}});});}exports[a12_0x4c72bd(0x228)]=resolveImageNameForPull;function generateSboxOpts(_0x413d8f){var _0x39876f=a12_0x4c72bd,_0x246728=_0x413d8f[_0x39876f(0x25d)],_0x36626e=_0x413d8f[_0x39876f(0x210)],_0x46096b=_0x413d8f[_0x39876f(0x25e)],_0x231f0e=_0x413d8f['envs'],_0x589b88=_0x413d8f[_0x39876f(0x1db)],_0x8ba64b=_0x589b88===void 0x0?[]:_0x589b88,_0x204130=_0x413d8f[_0x39876f(0x21f)],_0x32cd75=_0x413d8f[_0x39876f(0x1ec)];return{'Image':_0x246728,'Hostname':_0x36626e,'AttachStdin':_0x32cd75,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x39876f(0x221)}),'Tty':_0x204130,'OpenStdin':_0x32cd75,'StdinOnce':!![],'Env':resolveDockerEnv(_0x231f0e),'Cmd':_0x8ba64b['length']?_0x8ba64b:[_0x39876f(0x1e8)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x46096b}};}exports[a12_0x4c72bd(0x1e4)]=generateSboxOpts;function resolveDockerUser(_0x1b685c){var _0x4aa525=a12_0x4c72bd,_0x2ea4d5=_0x1b685c[_0x4aa525(0x20c)],_0x4690c9=_0x1b685c['stage'],_0x564fd3=_0x4690c9===void 0x0?'run':_0x4690c9,_0x59c0e4=definition_1[_0x4aa525(0x23c)](_0x2ea4d5),_0x20176a=_0x59c0e4[_0x4aa525(0x21d)],_0xa1a6b7=_0x59c0e4[_0x4aa525(0x225)];return process[_0x4aa525(0x23e)]===_0x4aa525(0x1fb)?(logger_1[_0x4aa525(0x247)]['debug']('For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions'),_0x20176a=process[_0x4aa525(0x20d)](),_0xa1a6b7=process[_0x4aa525(0x218)]()):_0x564fd3===_0x4aa525(0x211)?((_0x20176a===-0x1||_0x20176a===undefined)&&(_0x20176a=NAS_UID),(_0xa1a6b7===-0x1||_0xa1a6b7===undefined)&&(_0xa1a6b7=NAS_GID)):(_0x20176a=0x0,_0xa1a6b7=0x0),_0x20176a+':'+_0xa1a6b7;}exports[a12_0x4c72bd(0x231)]=resolveDockerUser;function generateInstallOpts(_0x1f0917,_0xa5b8e6,_0x4b441){var _0x169a86=a12_0x4c72bd;return{'Image':_0x1f0917,'Tty':!![],'Env':resolveDockerEnv(_0x4b441),'Cmd':[_0x169a86(0x1e8)],'HostConfig':{'AutoRemove':!![],'Mounts':_0xa5b8e6}};}exports[a12_0x4c72bd(0x224)]=generateInstallOpts;function transformMountsForToolbox(_0x3eaa74){var _0xfb1fd2=a12_0x4c72bd;console[_0xfb1fd2(0x222)](_0xfb1fd2(0x20a));if(Array[_0xfb1fd2(0x200)](_0x3eaa74))return _0x3eaa74[_0xfb1fd2(0x236)](function(_0x315228){return transformSourcePathOfMount(_0x315228);});return transformSourcePathOfMount(_0x3eaa74);}exports[a12_0x4c72bd(0x257)]=transformMountsForToolbox;function transformSourcePathOfMount(_0x501dfb){var _0x29c276=a12_0x4c72bd;if(!_[_0x29c276(0x255)](_0x501dfb)){var _0x3d45c9=Object['assign']({},_0x501dfb);return _0x3d45c9[_0x29c276(0x259)]=transformPathForVirtualBox(_0x501dfb[_0x29c276(0x259)]),_0x3d45c9;}return{};}function transformPathForVirtualBox(_0x546482){var _0x4fdce6=a12_0x4c72bd,_0x3d2669=_0x546482[_0x4fdce6(0x206)](':')[_0x4fdce6(0x240)](''),_0x541585=_[_0x4fdce6(0x20b)](_0x3d2669[_0x4fdce6(0x206)]('\x5c')['join']('/'));return'/'+_0x541585;}exports[a12_0x4c72bd(0x258)]=transformPathForVirtualBox;function generateLocalInvokeOpts(_0x415553,_0x42b815,_0x3c57a1,_0x57997a,_0x4be4b0,_0x192f08,_0x400548,_0x444e90){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2356d8,_0x25d037,_0x3b1629,_0x7aada5,_0x93b6c2,_0x2af7a2,_0x577c92;return __generator(this,function(_0x1864b9){var _0x5b985f=a12_0x42c5;switch(_0x1864b9[_0x5b985f(0x22a)]){case 0x0:_0x2356d8={'HostConfig':{'AutoRemove':!![],'Mounts':_0x3c57a1}},_0x25d037={};_0x4be4b0&&(_0x25d037=debug_1[_0x5b985f(0x1f1)](_0x415553,_0x4be4b0,_0x444e90));_0x3b1629={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]};return[0x4,resolveRuntimeToDockerImage(_0x415553)];case 0x1:_0x7aada5=_0x1864b9['sent'](),supportCustomBootstrapFile(_0x415553,_0x192f08),_0x93b6c2=nested_object_assign_1[_0x5b985f(0x247)]({'Env':resolveDockerEnv(_0x192f08),'Image':_0x7aada5,'name':_0x42b815,'Cmd':_0x57997a,'User':_0x400548},_0x3b1629,_0x2356d8,_0x25d037),_0x2af7a2=_[_0x5b985f(0x1ed)](_0x93b6c2);(_0x2af7a2===null||_0x2af7a2===void 0x0?void 0x0:_0x2af7a2[_0x5b985f(0x20f)])&&(_0x577c92=_0x2af7a2[_0x5b985f(0x20f)][_0x5b985f(0x236)](function(_0x22684a){var _0x2f10e4=_0x5b985f;if(_0x22684a['startsWith'](_0x2f10e4(0x216))||_0x22684a[_0x2f10e4(0x1f3)](_0x2f10e4(0x1dd))||_0x22684a['startsWith']('FC_ACCOUNT_ID')){var _0x1980d2=_0x22684a[_0x2f10e4(0x206)]('='),_0x487737=utils_1[_0x2f10e4(0x205)](_0x1980d2[0x1]);return _0x1980d2[0x0]+'='+_0x487737;}else return _0x22684a;}),_0x2af7a2[_0x5b985f(0x20f)]=_0x577c92);logger_1[_0x5b985f(0x247)][_0x5b985f(0x251)](_0x5b985f(0x254)+JSON[_0x5b985f(0x25a)](_0x2af7a2,null,'\x20\x20'));return[0x2,_0x93b6c2];}});});}exports[a12_0x4c72bd(0x1eb)]=generateLocalInvokeOpts;function generateContainerNameFilter(_0x4fd6d8,_0x3fe384){var _0x2ac987=a12_0x4c72bd;if(_0x3fe384)return _0x2ac987(0x21c)+_0x4fd6d8+_0x2ac987(0x234);return _0x2ac987(0x21c)+_0x4fd6d8+_0x2ac987(0x1f4);}exports[a12_0x4c72bd(0x1e0)]=generateContainerNameFilter;function generateContainerName(_0x558646,_0x1012bd,_0x858479){var _0x5b6f69=a12_0x4c72bd;return('fc-local-'+_0x558646+'-'+_0x1012bd)[_0x5b6f69(0x244)](/ /g,'')+(_0x858479?_0x5b6f69(0x21a):'-run');}exports[a12_0x4c72bd(0x249)]=generateContainerName;function generateLocalStartOpts(_0x3c9a9c,_0x43afaf,_0x3a74e0,_0x2535c5,_0x305e27,_0x3190cf,_0x118da2){var _0x7115f7=a12_0x4c72bd,_0x1c7463=_0x118da2[_0x7115f7(0x1da)],_0x5a7a4e=_0x118da2[_0x7115f7(0x1f9)],_0x24dec4=_0x118da2[_0x7115f7(0x256)],_0x30c3ee=_0x24dec4===void 0x0?null:_0x24dec4,_0xbf71d1=_0x118da2['imageName'],_0x2c0fdf=_0x118da2[_0x7115f7(0x208)],_0x5561be=_0x2c0fdf===void 0x0?0x2328:_0x2c0fdf;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3656a8){var _0x123d15=a12_0x42c5;switch(_0x3656a8[_0x123d15(0x22a)]){case 0x0:if(runtime_1[_0x123d15(0x219)](_0x43afaf))return[0x2,genCustomContainerLocalStartOpts(_0x3c9a9c,_0x3a74e0,_0x2535c5,_0x305e27,_0x3190cf,_0xbf71d1,_0x5561be)];return[0x4,genNonCustomContainerLocalStartOpts(_0x3c9a9c,_0x43afaf,_0x3a74e0,_0x2535c5,_0x305e27,_0x1c7463,_0x3190cf,_0x5a7a4e,_0x30c3ee)];case 0x1:return[0x2,_0x3656a8[_0x123d15(0x23b)]()];}});});}exports[a12_0x4c72bd(0x1f0)]=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0x2d371e,_0x3e35e8,_0x2d78d1,_0x3db8f9,_0x359baa,_0x5018a2,_0x29b2f1,_0x116d79,_0xabfba7){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4b39fe,_0x2119c0,_0x43e8dd,_0x239461,_0x2ed498;return __generator(this,function(_0x54762a){var _0xc71433=a12_0x42c5;switch(_0x54762a[_0xc71433(0x22a)]){case 0x0:_0x4b39fe={'HostConfig':{'AutoRemove':!![],'Mounts':_0x3db8f9}};!_[_0xc71433(0x255)](_0x2d371e)&&(_0x4b39fe['HostConfig'][_0xc71433(0x21b)]=_0xc71433(0x23d)+_0x2d371e);return[0x4,resolveRuntimeToDockerImage(_0x3e35e8)];case 0x1:_0x2119c0=_0x54762a[_0xc71433(0x23b)](),supportCustomBootstrapFile(_0x3e35e8,_0x29b2f1),_0x43e8dd=nested_object_assign_1['default']({'Env':resolveDockerEnv(_0x29b2f1),'Image':_0x2119c0,'name':_0x2d78d1,'Cmd':_0x359baa,'User':_0x116d79,'Entrypoint':[resolveMockScript(_0x3e35e8)]},_0x4b39fe),_0x239461=_[_0xc71433(0x1ed)](_0x43e8dd);(_0x239461===null||_0x239461===void 0x0?void 0x0:_0x239461[_0xc71433(0x20f)])&&(_0x2ed498=_0x239461[_0xc71433(0x20f)][_0xc71433(0x236)](function(_0x1a24cc){var _0x3e4b38=_0xc71433;if(_0x1a24cc[_0x3e4b38(0x1f3)](_0x3e4b38(0x216))||_0x1a24cc[_0x3e4b38(0x1f3)](_0x3e4b38(0x1dd))||_0x1a24cc['startsWith'](_0x3e4b38(0x23f))){var _0x4b192f=_0x1a24cc[_0x3e4b38(0x206)]('='),_0x1ef746=utils_1[_0x3e4b38(0x205)](_0x4b192f[0x1]);return _0x4b192f[0x0]+'='+_0x1ef746;}else return _0x1a24cc;}),_0x239461[_0xc71433(0x20f)]=_0x2ed498);logger_1[_0xc71433(0x247)][_0xc71433(0x251)](_0xc71433(0x1df)+JSON['stringify'](_0x239461,null,'\x20\x20'));return[0x2,_0x43e8dd];}});});}function supportCustomBootstrapFile(_0x136160,_0x16c51a){var _0xc76801=a12_0x4c72bd;_0x136160===_0xc76801(0x1f7)&&(_0x16c51a[_0xc76801(0x1e2)]&&(_0x16c51a[_0xc76801(0x248)]=_0x16c51a[_0xc76801(0x1e2)]));}function resolveMockScript(_0x4c31df){var _0x264423=a12_0x4c72bd;return _0x264423(0x22c)+_0x4c31df+'/mock';}exports[a12_0x4c72bd(0x1f8)]=resolveMockScript;function genCustomContainerLocalStartOpts(_0x4e1a61,_0x4bb191,_0x4f1d3c,_0x278cbc,_0xea489f,_0xa2463,_0x3c0dc8){var _0x1f4581=a12_0x4c72bd,_0x18623e,_0x31eadb;_0x3c0dc8===void 0x0&&(_0x3c0dc8=0x2328);var _0x1ce987=_0x3c0dc8+'/tcp',_0x259e66={'ExposedPorts':(_0x18623e={},_0x18623e[_0x1ce987]={},_0x18623e),'HostConfig':{'AutoRemove':!![],'Mounts':_0x4f1d3c,'PortBindings':(_0x31eadb={},_0x31eadb[_0x1ce987]=[{'HostIp':'','HostPort':''+_0x3c0dc8}],_0x31eadb)}};!_[_0x1f4581(0x255)](_0x4e1a61)&&(_0x259e66[_0x1f4581(0x241)]['NetworkMode']=_0x1f4581(0x23d)+_0x4e1a61);var _0x2f65b0={'Env':resolveDockerEnv(_0xea489f,!![]),'Image':_0xa2463,'name':_0x4bb191};_0x278cbc!==[]&&(_0x2f65b0['Cmd']=_0x278cbc);var _0x27a4d7={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x593395=nested_object_assign_1[_0x1f4581(0x247)](_0x2f65b0,_0x259e66,_0x27a4d7),_0xba6294=_[_0x1f4581(0x1ed)](_0x593395);if(_0xba6294===null||_0xba6294===void 0x0?void 0x0:_0xba6294[_0x1f4581(0x20f)]){var _0x22f053=_0xba6294[_0x1f4581(0x20f)][_0x1f4581(0x236)](function(_0x1131bb){var _0x36258b=_0x1f4581;if(_0x1131bb[_0x36258b(0x1f3)]('FC_ACCESS_KEY_ID')||_0x1131bb[_0x36258b(0x1f3)](_0x36258b(0x1dd))||_0x1131bb[_0x36258b(0x1f3)](_0x36258b(0x23f))){var _0x2712ac=_0x1131bb[_0x36258b(0x206)]('='),_0x34f185=utils_1[_0x36258b(0x205)](_0x2712ac[0x1]);return _0x2712ac[0x0]+'='+_0x34f185;}else return _0x1131bb;});_0xba6294[_0x1f4581(0x20f)]=_0x22f053;}return logger_1[_0x1f4581(0x247)][_0x1f4581(0x251)](_0x1f4581(0x1fe)+JSON[_0x1f4581(0x25a)](_0xba6294,null,'\x20\x20')),_0x593395;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x53c918,_0xcc329e;return __generator(this,function(_0x3316f0){var _0x165e14=a12_0x42c5;switch(_0x3316f0[_0x165e14(0x22a)]){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0x53c918=exports[_0x165e14(0x242)]['map'](function(_0x28b093){var _0x33719c=_0x165e14;return httpx['request'](_0x33719c(0x238)+_0x28b093+_0x33719c(0x223),{'timeout':0xbb8})[_0x33719c(0x229)](function(){return _0x28b093;});}),_0x3316f0[_0x165e14(0x22a)]=0x1;case 0x1:_0x3316f0[_0x165e14(0x245)]['push']([0x1,0x3,,0x4]);return[0x4,Promise[_0x165e14(0x214)](_0x53c918)];case 0x2:DOCKER_REGISTRY_CACHE=_0x3316f0['sent']();return[0x3,0x4];case 0x3:_0xcc329e=_0x3316f0[_0x165e14(0x23b)](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x4c72bd(0x1e7)]=resolveDockerRegistry;function resolveDockerEnv(_0x36136a,_0x530c41){var _0x47ef17=a12_0x4c72bd;_0x36136a===void 0x0&&(_0x36136a={});_0x530c41===void 0x0&&(_0x530c41=![]);if(_0x530c41)return _[_0x47ef17(0x236)](_0x36136a||{},function(_0x194f58,_0xcfde06){return _0xcfde06+'='+_0x194f58;});return _[_0x47ef17(0x236)](env_1['addEnv'](_0x36136a||{}),function(_0x558dfc,_0x54d0b0){return _0x54d0b0+'='+_0x558dfc;});}exports['resolveDockerEnv']=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x460781,_0x13548c){return __awaiter(this,void 0x0,void 0x0,function(){var _0xb81f69,_0x301524;return __generator(this,function(_0x240cfd){var _0x1a47a7=a12_0x42c5;if(runtimeImageMap[_0x460781])return _0xb81f69=runtimeImageMap[_0x460781],_0x13548c?_0x301524=_0x1a47a7(0x20e)+_0xb81f69+':build-'+IMAGE_VERSION:_0x301524=_0x1a47a7(0x20e)+_0xb81f69+':'+IMAGE_VERSION,logger_1[_0x1a47a7(0x247)][_0x1a47a7(0x251)](_0x1a47a7(0x253)+_0x301524),[0x2,_0x301524];throw new Error(_0x1a47a7(0x239)+_0x460781);});});}exports[a12_0x4c72bd(0x1f5)]=resolveRuntimeToDockerImage;