'use strict';var a12_0xb357=['sent','{\x22name\x22:\x20[\x22','envs','docker\x20options\x20for\x20custom\x20container:\x20','isTty','resolveDockerUser','7BLuVlX','AGENT_SCRIPT','debugPort','/bin/bash','transformMountsForToolbox','replace','-run','return','then','resolveImageNameForPull','Env','lowerFirst','race','debug','26yTavVM','7859xNWvfk','isEmpty','done','__setModuleDefault','82JRlMeZ','__esModule','assign','transformPathForVirtualBox','imageName:\x20','label','resolveMockScript','aliyunfc/runtime-','/mock','553110XyNMIn','throw','join','393931yAwTBb','map','create','generateLocalStartOpts','groupId','dockerUser','Source','startsWith','java8','length','python2.7','../../common/logger','split','next','mounts',':build-','nodejs10','sbox','generateContainerName','value','dotnetcore2.1','env','platform','debugIde','getgid','HostConfig','run','1.9.18','FC_ACCESS_KEY_SECRET','default','For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions','\x22]}','generateInstallOpts','../local-invoke/env','defineProperty','registry.hub.docker.com','isInteractive','hasOwnProperty','java11','trys','2gLfIzT','php7.2','addEnv','pop','function','userId','hostname','stringify','generateContainerNameFilter','nodejs6','container:','1179340upCtom','/var/fc/runtime/','-inited\x22]}','request','push','../utils/utils','494586WVnRDI','call','__createBinding','14815yKZMOL','../utils/runtime','https://','linux','3TcnMTg','DOCKER_REGISTRIES','docker\x20options:\x20','warn','registry.cn-beijing.aliyuncs.com','__generator','21002FPwSRE','BOOTSTRAP_FILE','ops','generateSboxOpts','FC_ACCESS_KEY_ID','cmd','resolveDockerRegistry','NetworkMode','/v2/aliyunfc/runtime-nodejs8/tags/list','resolveRuntimeToDockerImage','custom','getUserIdAndGroupId','nodejs8','We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a'];var a12_0x3e6a04=a12_0x3567;(function(_0x24ba1c,_0x4c55f7){var _0x3ee168=a12_0x3567;while(!![]){try{var _0x21f3fa=parseInt(_0x3ee168(0x112))*parseInt(_0x3ee168(0x116))+-parseInt(_0x3ee168(0x155))+-parseInt(_0x3ee168(0x15b))+parseInt(_0x3ee168(0x162))*parseInt(_0x3ee168(0x122))+-parseInt(_0x3ee168(0x15e))*parseInt(_0x3ee168(0x103))+-parseInt(_0x3ee168(0x14a))*-parseInt(_0x3ee168(0x11f))+parseInt(_0x3ee168(0x168))*-parseInt(_0x3ee168(0x111));if(_0x21f3fa===_0x4c55f7)break;else _0x24ba1c['push'](_0x24ba1c['shift']());}catch(_0x4fd3bd){_0x24ba1c['push'](_0x24ba1c['shift']());}}}(a12_0xb357,0x94a00));var __createBinding=this&&this[a12_0x3e6a04(0x15d)]||(Object[a12_0x3e6a04(0x124)]?function(_0x398979,_0x23fadc,_0x3b9b2b,_0x4d5709){var _0x2d9f39=a12_0x3e6a04;if(_0x4d5709===undefined)_0x4d5709=_0x3b9b2b;Object[_0x2d9f39(0x144)](_0x398979,_0x4d5709,{'enumerable':!![],'get':function(){return _0x23fadc[_0x3b9b2b];}});}:function(_0x15e56e,_0xe7e745,_0x22ae74,_0x4533ff){if(_0x4533ff===undefined)_0x4533ff=_0x22ae74;_0x15e56e[_0x4533ff]=_0xe7e745[_0x22ae74];}),__setModuleDefault=this&&this[a12_0x3e6a04(0x115)]||(Object[a12_0x3e6a04(0x124)]?function(_0x31aa75,_0x561303){var _0x4013e1=a12_0x3e6a04;Object[_0x4013e1(0x144)](_0x31aa75,_0x4013e1(0x13f),{'enumerable':!![],'value':_0x561303});}:function(_0x1d7755,_0x19f49e){var _0x39f07a=a12_0x3e6a04;_0x1d7755[_0x39f07a(0x13f)]=_0x19f49e;}),__importStar=this&&this['__importStar']||function(_0x425bc3){var _0x4b19cb=a12_0x3e6a04;if(_0x425bc3&&_0x425bc3['__esModule'])return _0x425bc3;var _0x144dd7={};if(_0x425bc3!=null){for(var _0x2e3d23 in _0x425bc3)if(_0x2e3d23!==_0x4b19cb(0x13f)&&Object[_0x4b19cb(0x147)][_0x4b19cb(0x15c)](_0x425bc3,_0x2e3d23))__createBinding(_0x144dd7,_0x425bc3,_0x2e3d23);}return __setModuleDefault(_0x144dd7,_0x425bc3),_0x144dd7;},__awaiter=this&&this['__awaiter']||function(_0x2603dc,_0x7792a8,_0x2cbf97,_0x82b912){function _0xa0d4a2(_0x44ba47){return _0x44ba47 instanceof _0x2cbf97?_0x44ba47:new _0x2cbf97(function(_0x641f8e){_0x641f8e(_0x44ba47);});}return new(_0x2cbf97||(_0x2cbf97=Promise))(function(_0x48e6de,_0x47494b){var _0x533b83=a12_0x3567;function _0x2b1c3e(_0x4f5275){try{_0x181041(_0x82b912['next'](_0x4f5275));}catch(_0x2bda00){_0x47494b(_0x2bda00);}}function _0x1d5ba1(_0x3fd2f4){var _0x533d48=a12_0x3567;try{_0x181041(_0x82b912[_0x533d48(0x120)](_0x3fd2f4));}catch(_0x1a8c12){_0x47494b(_0x1a8c12);}}function _0x181041(_0x47a9d2){var _0xb0196d=a12_0x3567;_0x47a9d2[_0xb0196d(0x114)]?_0x48e6de(_0x47a9d2[_0xb0196d(0x135)]):_0xa0d4a2(_0x47a9d2['value'])[_0xb0196d(0x10b)](_0x2b1c3e,_0x1d5ba1);}_0x181041((_0x82b912=_0x82b912['apply'](_0x2603dc,_0x7792a8||[]))[_0x533b83(0x12f)]());});},__generator=this&&this[a12_0x3e6a04(0x167)]||function(_0x45c2f5,_0x1b2792){var _0x464e9e=a12_0x3e6a04,_0x2bc24f={'label':0x0,'sent':function(){if(_0x378f4a[0x0]&0x1)throw _0x378f4a[0x1];return _0x378f4a[0x1];},'trys':[],'ops':[]},_0x22db52,_0x5e66fe,_0x378f4a,_0x5d5546;return _0x5d5546={'next':_0x51735f(0x0),'throw':_0x51735f(0x1),'return':_0x51735f(0x2)},typeof Symbol===_0x464e9e(0x14e)&&(_0x5d5546[Symbol['iterator']]=function(){return this;}),_0x5d5546;function _0x51735f(_0x3fc89a){return function(_0x11380c){return _0x278cb7([_0x3fc89a,_0x11380c]);};}function _0x278cb7(_0x5db796){var _0x911fde=_0x464e9e;if(_0x22db52)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x2bc24f)try{if(_0x22db52=0x1,_0x5e66fe&&(_0x378f4a=_0x5db796[0x0]&0x2?_0x5e66fe['return']:_0x5db796[0x0]?_0x5e66fe[_0x911fde(0x120)]||((_0x378f4a=_0x5e66fe[_0x911fde(0x10a)])&&_0x378f4a['call'](_0x5e66fe),0x0):_0x5e66fe['next'])&&!(_0x378f4a=_0x378f4a[_0x911fde(0x15c)](_0x5e66fe,_0x5db796[0x1]))[_0x911fde(0x114)])return _0x378f4a;if(_0x5e66fe=0x0,_0x378f4a)_0x5db796=[_0x5db796[0x0]&0x2,_0x378f4a[_0x911fde(0x135)]];switch(_0x5db796[0x0]){case 0x0:case 0x1:_0x378f4a=_0x5db796;break;case 0x4:_0x2bc24f['label']++;return{'value':_0x5db796[0x1],'done':![]};case 0x5:_0x2bc24f[_0x911fde(0x11b)]++,_0x5e66fe=_0x5db796[0x1],_0x5db796=[0x0];continue;case 0x7:_0x5db796=_0x2bc24f[_0x911fde(0x16a)][_0x911fde(0x14d)](),_0x2bc24f[_0x911fde(0x149)][_0x911fde(0x14d)]();continue;default:if(!(_0x378f4a=_0x2bc24f[_0x911fde(0x149)],_0x378f4a=_0x378f4a[_0x911fde(0x12b)]>0x0&&_0x378f4a[_0x378f4a[_0x911fde(0x12b)]-0x1])&&(_0x5db796[0x0]===0x6||_0x5db796[0x0]===0x2)){_0x2bc24f=0x0;continue;}if(_0x5db796[0x0]===0x3&&(!_0x378f4a||_0x5db796[0x1]>_0x378f4a[0x0]&&_0x5db796[0x1]<_0x378f4a[0x3])){_0x2bc24f[_0x911fde(0x11b)]=_0x5db796[0x1];break;}if(_0x5db796[0x0]===0x6&&_0x2bc24f[_0x911fde(0x11b)]<_0x378f4a[0x1]){_0x2bc24f[_0x911fde(0x11b)]=_0x378f4a[0x1],_0x378f4a=_0x5db796;break;}if(_0x378f4a&&_0x2bc24f[_0x911fde(0x11b)]<_0x378f4a[0x2]){_0x2bc24f[_0x911fde(0x11b)]=_0x378f4a[0x2],_0x2bc24f[_0x911fde(0x16a)][_0x911fde(0x159)](_0x5db796);break;}if(_0x378f4a[0x2])_0x2bc24f[_0x911fde(0x16a)][_0x911fde(0x14d)]();_0x2bc24f[_0x911fde(0x149)][_0x911fde(0x14d)]();continue;}_0x5db796=_0x1b2792[_0x911fde(0x15c)](_0x45c2f5,_0x2bc24f);}catch(_0x321502){_0x5db796=[0x6,_0x321502],_0x5e66fe=0x0;}finally{_0x22db52=_0x378f4a=0x0;}if(_0x5db796[0x0]&0x5)throw _0x5db796[0x1];return{'value':_0x5db796[0x0]?_0x5db796[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this['__importDefault']||function(_0x38426a){var _0x389557=a12_0x3e6a04;return _0x38426a&&_0x38426a[_0x389557(0x117)]?_0x38426a:{'default':_0x38426a};};Object['defineProperty'](exports,a12_0x3e6a04(0x117),{'value':!![]}),exports['resolveRuntimeToDockerImage']=exports['resolveDockerEnv']=exports[a12_0x3e6a04(0x16e)]=exports[a12_0x3e6a04(0x11c)]=exports[a12_0x3e6a04(0x125)]=exports[a12_0x3e6a04(0x134)]=exports['generateContainerNameFilter']=exports[a12_0x3e6a04(0x119)]=exports[a12_0x3e6a04(0x107)]=exports[a12_0x3e6a04(0x142)]=exports[a12_0x3e6a04(0x102)]=exports[a12_0x3e6a04(0x16b)]=exports[a12_0x3e6a04(0x10c)]=exports['DOCKER_REGISTRIES']=void 0x0;var httpx=__importStar(require('httpx')),_=__importStar(require('lodash')),env_1=require(a12_0x3e6a04(0x143)),logger_1=__importDefault(require(a12_0x3e6a04(0x12d))),definition_1=require('../definition'),nested_object_assign_1=__importDefault(require('nested-object-assign')),runtime_1=require(a12_0x3e6a04(0x15f)),utils_1=require(a12_0x3e6a04(0x15a)),REGISTRY_DEFAULT=a12_0x3e6a04(0x166),DEFAULT_REGISTRY=REGISTRY_DEFAULT||a12_0x3e6a04(0x145);exports['DOCKER_REGISTRIES']=[a12_0x3e6a04(0x166),a12_0x3e6a04(0x145)];var IMAGE_VERSION=process[a12_0x3e6a04(0x137)]['FC_DOCKER_VERSION']||a12_0x3e6a04(0x13d),DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':a12_0x3e6a04(0x153),'nodejs8':a12_0x3e6a04(0xfb),'nodejs10':a12_0x3e6a04(0x132),'nodejs12':'nodejs12','python2.7':a12_0x3e6a04(0x12c),'python3':'python3.6','java8':a12_0x3e6a04(0x12a),'java11':a12_0x3e6a04(0x148),'php7.2':a12_0x3e6a04(0x14b),'dotnetcore2.1':a12_0x3e6a04(0x136),'custom':a12_0x3e6a04(0xf9)};function resolveImageNameForPull(_0x26ebd0){return __awaiter(this,void 0x0,void 0x0,function(){var _0x181eb2;return __generator(this,function(_0x5499ff){var _0x3aded6=a12_0x3567;switch(_0x5499ff[_0x3aded6(0x11b)]){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x181eb2=_0x5499ff[_0x3aded6(0xfd)]();_0x181eb2&&(_0x26ebd0=_0x181eb2+'/'+_0x26ebd0);return[0x2,_0x26ebd0];}});});}exports[a12_0x3e6a04(0x10c)]=resolveImageNameForPull;function generateSboxOpts(_0x47a8fe){var _0x445236=a12_0x3e6a04,_0x40aab3=_0x47a8fe['imageName'],_0x428566=_0x47a8fe[_0x445236(0x150)],_0x4ff16a=_0x47a8fe[_0x445236(0x130)],_0x3ae189=_0x47a8fe[_0x445236(0xff)],_0x31dfb2=_0x47a8fe[_0x445236(0x16d)],_0x3b7880=_0x31dfb2===void 0x0?[]:_0x31dfb2,_0xc5f517=_0x47a8fe[_0x445236(0x101)],_0x1cabcb=_0x47a8fe[_0x445236(0x146)];return{'Image':_0x40aab3,'Hostname':_0x428566,'AttachStdin':_0x1cabcb,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x445236(0x133)}),'Tty':_0xc5f517,'OpenStdin':_0x1cabcb,'StdinOnce':!![],'Env':resolveDockerEnv(_0x3ae189),'Cmd':_0x3b7880['length']?_0x3b7880:[_0x445236(0x106)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x4ff16a}};}exports[a12_0x3e6a04(0x16b)]=generateSboxOpts;function resolveDockerUser(_0x3302d9){var _0x2f8308=a12_0x3e6a04,_0x4fe1f0=_0x3302d9['nasConfig'],_0x5e1b46=_0x3302d9['stage'],_0x1c9eba=_0x5e1b46===void 0x0?_0x2f8308(0x13c):_0x5e1b46,_0x1c3085=definition_1[_0x2f8308(0xfa)](_0x4fe1f0),_0x48093e=_0x1c3085[_0x2f8308(0x14f)],_0x3c99b2=_0x1c3085[_0x2f8308(0x126)];return process[_0x2f8308(0x138)]===_0x2f8308(0x161)?(logger_1['default']['debug'](_0x2f8308(0x140)),_0x48093e=process['getuid'](),_0x3c99b2=process[_0x2f8308(0x13a)]()):_0x1c9eba===_0x2f8308(0x13c)?((_0x48093e===-0x1||_0x48093e===undefined)&&(_0x48093e=NAS_UID),(_0x3c99b2===-0x1||_0x3c99b2===undefined)&&(_0x3c99b2=NAS_GID)):(_0x48093e=0x0,_0x3c99b2=0x0),_0x48093e+':'+_0x3c99b2;}exports[a12_0x3e6a04(0x102)]=resolveDockerUser;function generateInstallOpts(_0x4b9d07,_0x2d59cd,_0x5c859a){var _0x1c16b7=a12_0x3e6a04;return{'Image':_0x4b9d07,'Tty':!![],'Env':resolveDockerEnv(_0x5c859a),'Cmd':[_0x1c16b7(0x106)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x2d59cd}};}exports[a12_0x3e6a04(0x142)]=generateInstallOpts;function transformMountsForToolbox(_0xa8172){var _0x190c22=a12_0x3e6a04;console[_0x190c22(0x165)](_0x190c22(0xfc));if(Array['isArray'](_0xa8172))return _0xa8172[_0x190c22(0x123)](function(_0x89e4bb){return transformSourcePathOfMount(_0x89e4bb);});return transformSourcePathOfMount(_0xa8172);}exports['transformMountsForToolbox']=transformMountsForToolbox;function a12_0x3567(_0x567d70,_0x41af74){return a12_0x3567=function(_0xb35714,_0x35677b){_0xb35714=_0xb35714-0xf9;var _0x4043e7=a12_0xb357[_0xb35714];return _0x4043e7;},a12_0x3567(_0x567d70,_0x41af74);}function transformSourcePathOfMount(_0x19a7cd){var _0x3a8185=a12_0x3e6a04;if(!_['isEmpty'](_0x19a7cd)){var _0x4d4cb7=Object[_0x3a8185(0x118)]({},_0x19a7cd);return _0x4d4cb7[_0x3a8185(0x128)]=transformPathForVirtualBox(_0x19a7cd['Source']),_0x4d4cb7;}return{};}function transformPathForVirtualBox(_0x441916){var _0x636542=a12_0x3e6a04,_0x4fe86b=_0x441916[_0x636542(0x12e)](':')[_0x636542(0x121)](''),_0x303ebc=_[_0x636542(0x10e)](_0x4fe86b[_0x636542(0x12e)]('\x5c')[_0x636542(0x121)]('/'));return'/'+_0x303ebc;}exports[a12_0x3e6a04(0x119)]=transformPathForVirtualBox;function generateContainerNameFilter(_0xd25015,_0x266098){var _0xca9929=a12_0x3e6a04;if(_0x266098)return _0xca9929(0xfe)+_0xd25015+_0xca9929(0x157);return _0xca9929(0xfe)+_0xd25015+_0xca9929(0x141);}exports[a12_0x3e6a04(0x152)]=generateContainerNameFilter;function generateContainerName(_0x334a18,_0xac9557,_0x3876ac){var _0x5e26a6=a12_0x3e6a04;return('fc-local-'+_0x334a18+'-'+_0xac9557)[_0x5e26a6(0x108)](/ /g,'')+(_0x3876ac?'-debug':_0x5e26a6(0x109));}exports[a12_0x3e6a04(0x134)]=generateContainerName;function generateLocalStartOpts(_0x24b137,_0x3a9862,_0x24f36a,_0x31b839,_0x3cea74,_0x3360e3,_0x215792){var _0x4a73f1=a12_0x3e6a04,_0x41613e=_0x215792[_0x4a73f1(0x105)],_0xe0ee83=_0x215792[_0x4a73f1(0x127)],_0x1500f3=_0x215792[_0x4a73f1(0x139)],_0x268bc8=_0x1500f3===void 0x0?null:_0x1500f3,_0x55fc83=_0x215792['imageName'];return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x5f1f65){var _0x43ea5b=a12_0x3567;switch(_0x5f1f65[_0x43ea5b(0x11b)]){case 0x0:if(runtime_1['isCustomContainerRuntime'](_0x3a9862))return[0x2,genCustomContainerLocalStartOpts(_0x24b137,_0x24f36a,_0x31b839,_0x3cea74,_0x3360e3,_0x55fc83)];return[0x4,genNonCustomContainerLocalStartOpts(_0x24b137,_0x3a9862,_0x24f36a,_0x31b839,_0x3cea74,_0x41613e,_0x3360e3,_0xe0ee83,_0x268bc8)];case 0x1:return[0x2,_0x5f1f65[_0x43ea5b(0xfd)]()];}});});}exports[a12_0x3e6a04(0x125)]=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0x163998,_0x257c75,_0x1f846d,_0x32969a,_0x3c6807,_0x5f2959,_0x2e8e0e,_0x5087d0,_0x544f05){return __awaiter(this,void 0x0,void 0x0,function(){var _0x51d847,_0x4b229a,_0x4b63c5,_0x14e2ee;return __generator(this,function(_0x334e37){var _0x35dd43=a12_0x3567;switch(_0x334e37[_0x35dd43(0x11b)]){case 0x0:_0x51d847={'HostConfig':{'AutoRemove':!![],'Mounts':_0x32969a}};!_[_0x35dd43(0x113)](_0x163998)&&(_0x51d847[_0x35dd43(0x13b)][_0x35dd43(0x16f)]=_0x35dd43(0x154)+_0x163998);return[0x4,resolveRuntimeToDockerImage(_0x257c75)];case 0x1:_0x4b229a=_0x334e37['sent'](),supportCustomBootstrapFile(_0x257c75,_0x2e8e0e),_0x4b63c5=nested_object_assign_1[_0x35dd43(0x13f)]({'Env':resolveDockerEnv(_0x2e8e0e),'Image':_0x4b229a,'name':_0x1f846d,'Cmd':_0x3c6807,'User':_0x5087d0,'Entrypoint':[resolveMockScript(_0x257c75)]},_0x51d847),_0x14e2ee=encryptDockerOpts(_0x4b63c5),logger_1[_0x35dd43(0x13f)][_0x35dd43(0x110)](_0x35dd43(0x164)+JSON[_0x35dd43(0x151)](_0x14e2ee,null,'\x20\x20'));return[0x2,_0x4b63c5];}});});}function supportCustomBootstrapFile(_0x312115,_0x22772b){var _0x49199a=a12_0x3e6a04;_0x312115===_0x49199a(0xf9)&&(_0x22772b[_0x49199a(0x169)]&&(_0x22772b[_0x49199a(0x104)]=_0x22772b[_0x49199a(0x169)]));}function resolveMockScript(_0x211524){var _0x28909f=a12_0x3e6a04;return _0x28909f(0x156)+_0x211524+_0x28909f(0x11e);}exports['resolveMockScript']=resolveMockScript;function encryptDockerOpts(_0xf79bf6){var _0x55c17c=a12_0x3e6a04,_0x20aa54=_['cloneDeep'](_0xf79bf6);if(_0x20aa54===null||_0x20aa54===void 0x0?void 0x0:_0x20aa54[_0x55c17c(0x10d)]){var _0x3f2cc3=_0x20aa54[_0x55c17c(0x10d)]['map'](function(_0x262603){var _0x2bfc2f=_0x55c17c;if(_0x262603[_0x2bfc2f(0x129)](_0x2bfc2f(0x16c))||_0x262603[_0x2bfc2f(0x129)](_0x2bfc2f(0x13e))||_0x262603['startsWith']('FC_ACCOUNT_ID')){var _0x45aad7=_0x262603[_0x2bfc2f(0x12e)]('='),_0x55eb73=utils_1['mark'](_0x45aad7[0x1]);return _0x45aad7[0x0]+'='+_0x55eb73;}else return _0x262603;});_0x20aa54['Env']=_0x3f2cc3;}return _0x20aa54;}function genCustomContainerLocalStartOpts(_0x342ae4,_0x5331aa,_0x5d1442,_0x4dbb2a,_0x12a223,_0x2f91e9){var _0xd8b1e=a12_0x3e6a04,_0x58e5e7={'HostConfig':{'AutoRemove':!![],'Mounts':_0x5d1442}};!_[_0xd8b1e(0x113)](_0x342ae4)&&(_0x58e5e7[_0xd8b1e(0x13b)]['NetworkMode']=_0xd8b1e(0x154)+_0x342ae4);var _0x4b5aff={'Env':resolveDockerEnv(_0x12a223,!![]),'Image':_0x2f91e9,'name':_0x5331aa};_0x4dbb2a!==[]&&(_0x4b5aff['Cmd']=_0x4dbb2a);var _0x38bd1f={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0x552b78=nested_object_assign_1[_0xd8b1e(0x13f)](_0x4b5aff,_0x58e5e7,_0x38bd1f),_0x3138a9=encryptDockerOpts(_0x552b78);return logger_1[_0xd8b1e(0x13f)][_0xd8b1e(0x110)](_0xd8b1e(0x100)+JSON[_0xd8b1e(0x151)](_0x3138a9,null,'\x20\x20')),_0x552b78;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4b9333,_0xe0c982;return __generator(this,function(_0x1c9ced){var _0x45ec3f=a12_0x3567;switch(_0x1c9ced[_0x45ec3f(0x11b)]){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0x4b9333=exports[_0x45ec3f(0x163)][_0x45ec3f(0x123)](function(_0x25f1ba){var _0x501d14=_0x45ec3f;return httpx[_0x501d14(0x158)](_0x501d14(0x160)+_0x25f1ba+_0x501d14(0x170),{'timeout':0xbb8})[_0x501d14(0x10b)](function(){return _0x25f1ba;});}),_0x1c9ced[_0x45ec3f(0x11b)]=0x1;case 0x1:_0x1c9ced[_0x45ec3f(0x149)][_0x45ec3f(0x159)]([0x1,0x3,,0x4]);return[0x4,Promise[_0x45ec3f(0x10f)](_0x4b9333)];case 0x2:DOCKER_REGISTRY_CACHE=_0x1c9ced[_0x45ec3f(0xfd)]();return[0x3,0x4];case 0x3:_0xe0c982=_0x1c9ced[_0x45ec3f(0xfd)](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x3e6a04(0x16e)]=resolveDockerRegistry;function resolveDockerEnv(_0x11b335,_0x3cb879){var _0x41c0e9=a12_0x3e6a04;_0x11b335===void 0x0&&(_0x11b335={});_0x3cb879===void 0x0&&(_0x3cb879=![]);if(_0x3cb879)return _[_0x41c0e9(0x123)](_0x11b335||{},function(_0x4aace2,_0x5c80c9){return _0x5c80c9+'='+_0x4aace2;});return _['map'](env_1[_0x41c0e9(0x14c)](_0x11b335||{}),function(_0xb89e84,_0x4d0e40){return _0x4d0e40+'='+_0xb89e84;});}exports['resolveDockerEnv']=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x89b691,_0x596203){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3ed43d,_0x33de63;return __generator(this,function(_0x4475f4){var _0x401faa=a12_0x3567;if(runtimeImageMap[_0x89b691])return _0x3ed43d=runtimeImageMap[_0x89b691],_0x596203?_0x33de63=_0x401faa(0x11d)+_0x3ed43d+_0x401faa(0x131)+IMAGE_VERSION:_0x33de63=_0x401faa(0x11d)+_0x3ed43d+':'+IMAGE_VERSION,logger_1[_0x401faa(0x13f)]['debug'](_0x401faa(0x11a)+_0x33de63),[0x2,_0x33de63];throw new Error('invalid\x20runtime\x20name\x20'+_0x89b691);});});}exports[a12_0x3e6a04(0x171)]=resolveRuntimeToDockerImage;