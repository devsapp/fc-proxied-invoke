'use strict';var a12_0x7770=['-debug','python3.6','container:','length','-inited\x22]}','AGENT_SCRIPT','addEnv','push','generateSboxOpts','{\x22name\x22:\x20[\x22','caPort','/bin/bash','request','next','race','replace','getUserIdAndGroupId','../definition','generateContainerNameFilter','isInteractive','java11','HostConfig','Cmd','-run','httpx','mark','transformMountsForToolbox','split','FC_ACCESS_KEY_SECRET','cloneDeep','FC_ACCOUNT_ID','resolveDockerUser','resolveRuntimeToDockerImage','nodejs8','../local-invoke/debug','apply','call','DOCKER_REGISTRIES','invalid\x20runtime\x20name\x20','defineProperty','join','../../common/logger','label','7067SziQGn','105516GBDoJm','groupId',':build-','java8','sbox','resolveMockScript','nested-object-assign','nodejs12','/tcp','FC_ACCESS_KEY_ID','1ZtZSet','isEmpty','BOOTSTRAP_FILE','__setModuleDefault','default','platform','fc-docker\x20docker\x20options:\x20','map','For\x20linux\x20platform,\x20Fc\x20will\x20use\x20host\x20userId\x20and\x20groupId\x20to\x20build\x20or\x20run\x20your\x20functions','69661fMTEwz','cmd','stage','imageName','81572ZCQWGX','__generator','return','getuid','value','custom','dockerUser','ops','envs','php7.2','debug','create','\x22]}','Source','startsWith','6OvTXZg','resolveDockerEnv','lodash','dotnetcore2.1','throw','trys','/var/fc/runtime/','isArray','1mdUHLD','__importDefault','stringify','transformPathForVirtualBox','hostname','sent','assign','debugPort','resolveDockerRegistry','/v2/aliyunfc/runtime-nodejs8/tags/list','7261fXgFKI','180969pdxswS','nasConfig','debugIde','generateLocalInvokeOpts','env','resolveImageNameForPull','registry.cn-beijing.aliyuncs.com','isTty','NetworkMode','Generator\x20is\x20already\x20executing.','generateLocalStartOpts','1kZhaTx','../local-invoke/env','function','/mock','nodejs10','../utils/utils','__esModule','Env','userId','__createBinding','generateContainerName','iterator','done','pop','18141QYjIVR','hasOwnProperty','4uImiqK','docker\x20options\x20for\x20custom\x20container:\x20'];var a12_0x120cc7=a12_0x1137;(function(_0xd678d7,_0x49ddbf){var _0x21ed9d=a12_0x1137;while(!![]){try{var _0x2f887f=parseInt(_0x21ed9d(0x18b))*-parseInt(_0x21ed9d(0x1b7))+parseInt(_0x21ed9d(0x1a9))*parseInt(_0x21ed9d(0x178))+parseInt(_0x21ed9d(0x17c))*-parseInt(_0x21ed9d(0x16f))+-parseInt(_0x21ed9d(0x19d))+parseInt(_0x21ed9d(0x164))+-parseInt(_0x21ed9d(0x193))*parseInt(_0x21ed9d(0x19e))+-parseInt(_0x21ed9d(0x165))*-parseInt(_0x21ed9d(0x1b9));if(_0x2f887f===_0x49ddbf)break;else _0xd678d7['push'](_0xd678d7['shift']());}catch(_0x28dcc2){_0xd678d7['push'](_0xd678d7['shift']());}}}(a12_0x7770,0x1d550));var __createBinding=this&&this[a12_0x120cc7(0x1b2)]||(Object['create']?function(_0x16c506,_0x327bf8,_0xd9913b,_0x256e02){var _0x37663b=a12_0x120cc7;if(_0x256e02===undefined)_0x256e02=_0xd9913b;Object[_0x37663b(0x160)](_0x16c506,_0x256e02,{'enumerable':!![],'get':function(){return _0x327bf8[_0xd9913b];}});}:function(_0x54d53a,_0x438dea,_0x52c4ab,_0x34304c){if(_0x34304c===undefined)_0x34304c=_0x52c4ab;_0x54d53a[_0x34304c]=_0x438dea[_0x52c4ab];}),__setModuleDefault=this&&this[a12_0x120cc7(0x172)]||(Object[a12_0x120cc7(0x187)]?function(_0x19330d,_0xfd6ccc){var _0x57c53c=a12_0x120cc7;Object['defineProperty'](_0x19330d,_0x57c53c(0x173),{'enumerable':!![],'value':_0xfd6ccc});}:function(_0x2acff0,_0x55d7ce){var _0x468e98=a12_0x120cc7;_0x2acff0[_0x468e98(0x173)]=_0x55d7ce;}),__importStar=this&&this['__importStar']||function(_0x5941f9){var _0x1996e1=a12_0x120cc7;if(_0x5941f9&&_0x5941f9[_0x1996e1(0x1af)])return _0x5941f9;var _0x264706={};if(_0x5941f9!=null){for(var _0x57e45c in _0x5941f9)if(_0x57e45c!=='default'&&Object[_0x1996e1(0x1b8)][_0x1996e1(0x15d)](_0x5941f9,_0x57e45c))__createBinding(_0x264706,_0x5941f9,_0x57e45c);}return __setModuleDefault(_0x264706,_0x5941f9),_0x264706;},__awaiter=this&&this['__awaiter']||function(_0x2aac2a,_0x4f513f,_0xb852d5,_0x6951df){function _0x468489(_0xabd91d){return _0xabd91d instanceof _0xb852d5?_0xabd91d:new _0xb852d5(function(_0x16cf42){_0x16cf42(_0xabd91d);});}return new(_0xb852d5||(_0xb852d5=Promise))(function(_0x4f403c,_0xa4adcc){var _0x3141ce=a12_0x1137;function _0x4d4106(_0x5b5e03){var _0x5d4a70=a12_0x1137;try{_0x51b113(_0x6951df[_0x5d4a70(0x1c8)](_0x5b5e03));}catch(_0x4aa6c0){_0xa4adcc(_0x4aa6c0);}}function _0x4799d2(_0x1c16f5){try{_0x51b113(_0x6951df['throw'](_0x1c16f5));}catch(_0x16cb76){_0xa4adcc(_0x16cb76);}}function _0x51b113(_0x35837a){var _0x27a742=a12_0x1137;_0x35837a[_0x27a742(0x1b5)]?_0x4f403c(_0x35837a['value']):_0x468489(_0x35837a[_0x27a742(0x180)])['then'](_0x4d4106,_0x4799d2);}_0x51b113((_0x6951df=_0x6951df[_0x3141ce(0x15c)](_0x2aac2a,_0x4f513f||[]))[_0x3141ce(0x1c8)]());});},__generator=this&&this[a12_0x120cc7(0x17d)]||function(_0x32860f,_0x16c1d0){var _0x29702a=a12_0x120cc7,_0x39cbd2={'label':0x0,'sent':function(){if(_0x30cc23[0x0]&0x1)throw _0x30cc23[0x1];return _0x30cc23[0x1];},'trys':[],'ops':[]},_0x4b6475,_0x11822b,_0x30cc23,_0x210eda;return _0x210eda={'next':_0x7c9cc4(0x0),'throw':_0x7c9cc4(0x1),'return':_0x7c9cc4(0x2)},typeof Symbol===_0x29702a(0x1ab)&&(_0x210eda[Symbol[_0x29702a(0x1b4)]]=function(){return this;}),_0x210eda;function _0x7c9cc4(_0x4a432d){return function(_0x7344e3){return _0x312ec9([_0x4a432d,_0x7344e3]);};}function _0x312ec9(_0xc31b6e){var _0x22b5cb=_0x29702a;if(_0x4b6475)throw new TypeError(_0x22b5cb(0x1a7));while(_0x39cbd2)try{if(_0x4b6475=0x1,_0x11822b&&(_0x30cc23=_0xc31b6e[0x0]&0x2?_0x11822b[_0x22b5cb(0x17e)]:_0xc31b6e[0x0]?_0x11822b[_0x22b5cb(0x18f)]||((_0x30cc23=_0x11822b[_0x22b5cb(0x17e)])&&_0x30cc23[_0x22b5cb(0x15d)](_0x11822b),0x0):_0x11822b[_0x22b5cb(0x1c8)])&&!(_0x30cc23=_0x30cc23['call'](_0x11822b,_0xc31b6e[0x1]))[_0x22b5cb(0x1b5)])return _0x30cc23;if(_0x11822b=0x0,_0x30cc23)_0xc31b6e=[_0xc31b6e[0x0]&0x2,_0x30cc23[_0x22b5cb(0x180)]];switch(_0xc31b6e[0x0]){case 0x0:case 0x1:_0x30cc23=_0xc31b6e;break;case 0x4:_0x39cbd2[_0x22b5cb(0x163)]++;return{'value':_0xc31b6e[0x1],'done':![]};case 0x5:_0x39cbd2['label']++,_0x11822b=_0xc31b6e[0x1],_0xc31b6e=[0x0];continue;case 0x7:_0xc31b6e=_0x39cbd2['ops']['pop'](),_0x39cbd2['trys']['pop']();continue;default:if(!(_0x30cc23=_0x39cbd2['trys'],_0x30cc23=_0x30cc23[_0x22b5cb(0x1be)]>0x0&&_0x30cc23[_0x30cc23['length']-0x1])&&(_0xc31b6e[0x0]===0x6||_0xc31b6e[0x0]===0x2)){_0x39cbd2=0x0;continue;}if(_0xc31b6e[0x0]===0x3&&(!_0x30cc23||_0xc31b6e[0x1]>_0x30cc23[0x0]&&_0xc31b6e[0x1]<_0x30cc23[0x3])){_0x39cbd2[_0x22b5cb(0x163)]=_0xc31b6e[0x1];break;}if(_0xc31b6e[0x0]===0x6&&_0x39cbd2['label']<_0x30cc23[0x1]){_0x39cbd2[_0x22b5cb(0x163)]=_0x30cc23[0x1],_0x30cc23=_0xc31b6e;break;}if(_0x30cc23&&_0x39cbd2[_0x22b5cb(0x163)]<_0x30cc23[0x2]){_0x39cbd2[_0x22b5cb(0x163)]=_0x30cc23[0x2],_0x39cbd2[_0x22b5cb(0x183)]['push'](_0xc31b6e);break;}if(_0x30cc23[0x2])_0x39cbd2['ops'][_0x22b5cb(0x1b6)]();_0x39cbd2[_0x22b5cb(0x190)][_0x22b5cb(0x1b6)]();continue;}_0xc31b6e=_0x16c1d0[_0x22b5cb(0x15d)](_0x32860f,_0x39cbd2);}catch(_0x78cce8){_0xc31b6e=[0x6,_0x78cce8],_0x11822b=0x0;}finally{_0x4b6475=_0x30cc23=0x0;}if(_0xc31b6e[0x0]&0x5)throw _0xc31b6e[0x1];return{'value':_0xc31b6e[0x0]?_0xc31b6e[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a12_0x120cc7(0x194)]||function(_0x1d7f8a){var _0x1622f3=a12_0x120cc7;return _0x1d7f8a&&_0x1d7f8a[_0x1622f3(0x1af)]?_0x1d7f8a:{'default':_0x1d7f8a};};Object[a12_0x120cc7(0x160)](exports,'__esModule',{'value':!![]}),exports[a12_0x120cc7(0x1db)]=exports[a12_0x120cc7(0x18c)]=exports['resolveDockerRegistry']=exports[a12_0x120cc7(0x16a)]=exports[a12_0x120cc7(0x1a8)]=exports[a12_0x120cc7(0x1b3)]=exports[a12_0x120cc7(0x1cd)]=exports[a12_0x120cc7(0x1a1)]=exports[a12_0x120cc7(0x196)]=exports[a12_0x120cc7(0x1d5)]=exports['generateInstallOpts']=exports[a12_0x120cc7(0x1da)]=exports[a12_0x120cc7(0x1c3)]=exports[a12_0x120cc7(0x1a3)]=exports[a12_0x120cc7(0x15e)]=void 0x0;var httpx=__importStar(require(a12_0x120cc7(0x1d3))),_=__importStar(require(a12_0x120cc7(0x18d))),env_1=require(a12_0x120cc7(0x1aa)),logger_1=__importDefault(require(a12_0x120cc7(0x162))),definition_1=require(a12_0x120cc7(0x1cc)),nested_object_assign_1=__importDefault(require(a12_0x120cc7(0x16b))),debug_1=require(a12_0x120cc7(0x15b)),runtime_1=require('../utils/runtime'),utils_1=require(a12_0x120cc7(0x1ae)),REGISTRY_DEFAULT=a12_0x120cc7(0x1a4),DEFAULT_REGISTRY=REGISTRY_DEFAULT||'registry.hub.docker.com';exports[a12_0x120cc7(0x15e)]=[a12_0x120cc7(0x1a4),'registry.hub.docker.com'];function a12_0x1137(_0x1f040a,_0x4420af){return a12_0x1137=function(_0x777092,_0x1137ef){_0x777092=_0x777092-0x15a;var _0x4d5898=a12_0x7770[_0x777092];return _0x4d5898;},a12_0x1137(_0x1f040a,_0x4420af);}var IMAGE_VERSION=process[a12_0x120cc7(0x1a2)]['FC_DOCKER_VERSION']||'1.9.18',DOCKER_REGISTRY_CACHE,NAS_UID=0x2713,NAS_GID=0x2713,runtimeImageMap={'nodejs6':'nodejs6','nodejs8':a12_0x120cc7(0x15a),'nodejs10':a12_0x120cc7(0x1ad),'nodejs12':a12_0x120cc7(0x16c),'python2.7':'python2.7','python3':a12_0x120cc7(0x1bc),'java8':a12_0x120cc7(0x168),'java11':a12_0x120cc7(0x1cf),'php7.2':a12_0x120cc7(0x185),'dotnetcore2.1':a12_0x120cc7(0x18e),'custom':a12_0x120cc7(0x181)};function resolveImageNameForPull(_0x584b05){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1d41bd;return __generator(this,function(_0x18e9ba){var _0x439b1e=a12_0x1137;switch(_0x18e9ba['label']){case 0x0:return[0x4,resolveDockerRegistry()];case 0x1:_0x1d41bd=_0x18e9ba[_0x439b1e(0x198)]();_0x1d41bd&&(_0x584b05=_0x1d41bd+'/'+_0x584b05);return[0x2,_0x584b05];}});});}exports['resolveImageNameForPull']=resolveImageNameForPull;function generateSboxOpts(_0x47cd7a){var _0x1c1aa7=a12_0x120cc7,_0x1bc5e0=_0x47cd7a[_0x1c1aa7(0x17b)],_0x3b5951=_0x47cd7a[_0x1c1aa7(0x197)],_0x3fa9a7=_0x47cd7a['mounts'],_0x493e1e=_0x47cd7a[_0x1c1aa7(0x184)],_0x20d77e=_0x47cd7a[_0x1c1aa7(0x179)],_0x4488c1=_0x20d77e===void 0x0?[]:_0x20d77e,_0x4e1e40=_0x47cd7a[_0x1c1aa7(0x1a5)],_0x2a98a7=_0x47cd7a[_0x1c1aa7(0x1ce)];return{'Image':_0x1bc5e0,'Hostname':_0x3b5951,'AttachStdin':_0x2a98a7,'AttachStdout':!![],'AttachStderr':!![],'User':resolveDockerUser({'stage':_0x1c1aa7(0x169)}),'Tty':_0x4e1e40,'OpenStdin':_0x2a98a7,'StdinOnce':!![],'Env':resolveDockerEnv(_0x493e1e),'Cmd':_0x4488c1[_0x1c1aa7(0x1be)]?_0x4488c1:[_0x1c1aa7(0x1c6)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x3fa9a7}};}exports[a12_0x120cc7(0x1c3)]=generateSboxOpts;function resolveDockerUser(_0x49f8db){var _0x4b92a5=a12_0x120cc7,_0x4bb630=_0x49f8db[_0x4b92a5(0x19f)],_0x41b91b=_0x49f8db[_0x4b92a5(0x17a)],_0x368360=_0x41b91b===void 0x0?'run':_0x41b91b,_0x39a218=definition_1[_0x4b92a5(0x1cb)](_0x4bb630),_0x202209=_0x39a218[_0x4b92a5(0x1b1)],_0x55c795=_0x39a218[_0x4b92a5(0x166)];return process[_0x4b92a5(0x174)]==='linux'?(logger_1['default'][_0x4b92a5(0x186)](_0x4b92a5(0x177)),_0x202209=process[_0x4b92a5(0x17f)](),_0x55c795=process['getgid']()):_0x368360==='run'?((_0x202209===-0x1||_0x202209===undefined)&&(_0x202209=NAS_UID),(_0x55c795===-0x1||_0x55c795===undefined)&&(_0x55c795=NAS_GID)):(_0x202209=0x0,_0x55c795=0x0),_0x202209+':'+_0x55c795;}exports['resolveDockerUser']=resolveDockerUser;function generateInstallOpts(_0x2c3cef,_0x438c26,_0x4ba2ba){var _0x3eeea8=a12_0x120cc7;return{'Image':_0x2c3cef,'Tty':!![],'Env':resolveDockerEnv(_0x4ba2ba),'Cmd':[_0x3eeea8(0x1c6)],'HostConfig':{'AutoRemove':!![],'Mounts':_0x438c26}};}exports['generateInstallOpts']=generateInstallOpts;function transformMountsForToolbox(_0x189e5d){var _0x44bba1=a12_0x120cc7;console['warn']('We\x20detected\x20that\x20you\x20are\x20using\x20docker\x20toolbox.\x20For\x20a\x20better\x20experience,\x20please\x20upgrade\x20\x27docker\x20for\x20windows\x27.\x0aYou\x20can\x20refer\x20to\x20Chinese\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation-zh.md#windows-%E5%AE%89%E8%A3%85-docker\x20or\x20English\x20doc\x20https://github.com/alibaba/funcraft/blob/master/docs/usage/installation.md.\x0a');if(Array[_0x44bba1(0x192)](_0x189e5d))return _0x189e5d[_0x44bba1(0x176)](function(_0x31a958){return transformSourcePathOfMount(_0x31a958);});return transformSourcePathOfMount(_0x189e5d);}exports[a12_0x120cc7(0x1d5)]=transformMountsForToolbox;function transformSourcePathOfMount(_0x54d2af){var _0x221528=a12_0x120cc7;if(!_[_0x221528(0x170)](_0x54d2af)){var _0x1b2b2c=Object[_0x221528(0x199)]({},_0x54d2af);return _0x1b2b2c[_0x221528(0x189)]=transformPathForVirtualBox(_0x54d2af['Source']),_0x1b2b2c;}return{};}function transformPathForVirtualBox(_0x3f9af2){var _0x1bdecb=a12_0x120cc7,_0x260359=_0x3f9af2[_0x1bdecb(0x1d6)](':')[_0x1bdecb(0x161)](''),_0x46ad24=_['lowerFirst'](_0x260359[_0x1bdecb(0x1d6)]('\x5c')['join']('/'));return'/'+_0x46ad24;}exports[a12_0x120cc7(0x196)]=transformPathForVirtualBox;function generateLocalInvokeOpts(_0x29a1ad,_0xcc2b8b,_0x548547,_0x4e626a,_0x4de850,_0x3a8c63,_0x22ff2f,_0x5a9b9a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1e99ec,_0x3c41bb,_0x49d704,_0x3a4fe6,_0x5162b0,_0x9a27bb,_0x543efa;return __generator(this,function(_0x4d3f4c){var _0x4d82ae=a12_0x1137;switch(_0x4d3f4c[_0x4d82ae(0x163)]){case 0x0:_0x1e99ec={'HostConfig':{'AutoRemove':!![],'Mounts':_0x548547}},_0x3c41bb={};_0x4de850&&(_0x3c41bb=debug_1['generateDockerDebugOpts'](_0x29a1ad,_0x4de850,_0x5a9b9a));_0x49d704={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]};return[0x4,resolveRuntimeToDockerImage(_0x29a1ad)];case 0x1:_0x3a4fe6=_0x4d3f4c['sent'](),supportCustomBootstrapFile(_0x29a1ad,_0x3a8c63),_0x5162b0=nested_object_assign_1[_0x4d82ae(0x173)]({'Env':resolveDockerEnv(_0x3a8c63),'Image':_0x3a4fe6,'name':_0xcc2b8b,'Cmd':_0x4e626a,'User':_0x22ff2f},_0x49d704,_0x1e99ec,_0x3c41bb),_0x9a27bb=_[_0x4d82ae(0x1d8)](_0x5162b0);(_0x9a27bb===null||_0x9a27bb===void 0x0?void 0x0:_0x9a27bb[_0x4d82ae(0x1b0)])&&(_0x543efa=_0x9a27bb[_0x4d82ae(0x1b0)]['map'](function(_0x58914b){var _0x2987e0=_0x4d82ae;if(_0x58914b[_0x2987e0(0x18a)](_0x2987e0(0x16e))||_0x58914b['startsWith'](_0x2987e0(0x1d7))||_0x58914b[_0x2987e0(0x18a)]('FC_ACCOUNT_ID')){var _0x465b89=_0x58914b[_0x2987e0(0x1d6)]('='),_0x1eed2c=utils_1['mark'](_0x465b89[0x1]);return _0x465b89[0x0]+'='+_0x1eed2c;}else return _0x58914b;}),_0x9a27bb['Env']=_0x543efa);logger_1['default'][_0x4d82ae(0x186)](_0x4d82ae(0x175)+JSON[_0x4d82ae(0x195)](_0x9a27bb,null,'\x20\x20'));return[0x2,_0x5162b0];}});});}exports[a12_0x120cc7(0x1a1)]=generateLocalInvokeOpts;function generateContainerNameFilter(_0x1f4558,_0x2670ae){var _0x32c8e4=a12_0x120cc7;if(_0x2670ae)return _0x32c8e4(0x1c4)+_0x1f4558+_0x32c8e4(0x1bf);return'{\x22name\x22:\x20[\x22'+_0x1f4558+_0x32c8e4(0x188);}exports[a12_0x120cc7(0x1cd)]=generateContainerNameFilter;function generateContainerName(_0x478add,_0x4d8461,_0xa74227){var _0x4f695f=a12_0x120cc7;return('fc-local-'+_0x478add+'-'+_0x4d8461)[_0x4f695f(0x1ca)](/ /g,'')+(_0xa74227?_0x4f695f(0x1bb):_0x4f695f(0x1d2));}exports[a12_0x120cc7(0x1b3)]=generateContainerName;function generateLocalStartOpts(_0x18f729,_0x400579,_0x2d1962,_0x1330b1,_0x1bf3f6,_0x2513b3,_0x18332b){var _0x5adda0=a12_0x120cc7,_0x1f6a25=_0x18332b[_0x5adda0(0x19a)],_0x230967=_0x18332b[_0x5adda0(0x182)],_0x560e04=_0x18332b[_0x5adda0(0x1a0)],_0x1bed8e=_0x560e04===void 0x0?null:_0x560e04,_0x392b94=_0x18332b['imageName'],_0xf6a96c=_0x18332b[_0x5adda0(0x1c5)],_0x555931=_0xf6a96c===void 0x0?0x2328:_0xf6a96c;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x13ff10){var _0x2c86b2=a12_0x1137;switch(_0x13ff10[_0x2c86b2(0x163)]){case 0x0:if(runtime_1['isCustomContainerRuntime'](_0x400579))return[0x2,genCustomContainerLocalStartOpts(_0x18f729,_0x2d1962,_0x1330b1,_0x1bf3f6,_0x2513b3,_0x392b94,_0x555931)];return[0x4,genNonCustomContainerLocalStartOpts(_0x18f729,_0x400579,_0x2d1962,_0x1330b1,_0x1bf3f6,_0x1f6a25,_0x2513b3,_0x230967,_0x1bed8e)];case 0x1:return[0x2,_0x13ff10[_0x2c86b2(0x198)]()];}});});}exports['generateLocalStartOpts']=generateLocalStartOpts;function genNonCustomContainerLocalStartOpts(_0xd30639,_0x157ddc,_0x9e9324,_0x1bbce5,_0x4e7e20,_0x347b60,_0x1af0e5,_0x6fd65b,_0x116d26){return __awaiter(this,void 0x0,void 0x0,function(){var _0x58d12c,_0x4b6c86,_0x86a7a8,_0x181fb8,_0x3d6f4c;return __generator(this,function(_0x437ca1){var _0x4a13da=a12_0x1137;switch(_0x437ca1['label']){case 0x0:_0x58d12c={'HostConfig':{'AutoRemove':!![],'Mounts':_0x1bbce5}};!_[_0x4a13da(0x170)](_0xd30639)&&(_0x58d12c[_0x4a13da(0x1d0)][_0x4a13da(0x1a6)]=_0x4a13da(0x1bd)+_0xd30639);return[0x4,resolveRuntimeToDockerImage(_0x157ddc)];case 0x1:_0x4b6c86=_0x437ca1[_0x4a13da(0x198)](),supportCustomBootstrapFile(_0x157ddc,_0x1af0e5),_0x86a7a8=nested_object_assign_1[_0x4a13da(0x173)]({'Env':resolveDockerEnv(_0x1af0e5),'Image':_0x4b6c86,'name':_0x9e9324,'Cmd':_0x4e7e20,'User':_0x6fd65b,'Entrypoint':[resolveMockScript(_0x157ddc)]},_0x58d12c),_0x181fb8=_[_0x4a13da(0x1d8)](_0x86a7a8);(_0x181fb8===null||_0x181fb8===void 0x0?void 0x0:_0x181fb8[_0x4a13da(0x1b0)])&&(_0x3d6f4c=_0x181fb8[_0x4a13da(0x1b0)]['map'](function(_0x469913){var _0x4d6db1=_0x4a13da;if(_0x469913['startsWith'](_0x4d6db1(0x16e))||_0x469913['startsWith'](_0x4d6db1(0x1d7))||_0x469913[_0x4d6db1(0x18a)](_0x4d6db1(0x1d9))){var _0x29efda=_0x469913[_0x4d6db1(0x1d6)]('='),_0x4d7f0a=utils_1[_0x4d6db1(0x1d4)](_0x29efda[0x1]);return _0x29efda[0x0]+'='+_0x4d7f0a;}else return _0x469913;}),_0x181fb8[_0x4a13da(0x1b0)]=_0x3d6f4c);logger_1['default'][_0x4a13da(0x186)]('docker\x20options:\x20'+JSON[_0x4a13da(0x195)](_0x181fb8,null,'\x20\x20'));return[0x2,_0x86a7a8];}});});}function supportCustomBootstrapFile(_0x3327bc,_0x17dc8c){var _0x573431=a12_0x120cc7;_0x3327bc===_0x573431(0x181)&&(_0x17dc8c[_0x573431(0x171)]&&(_0x17dc8c[_0x573431(0x1c0)]=_0x17dc8c[_0x573431(0x171)]));}function resolveMockScript(_0x240b66){var _0x241980=a12_0x120cc7;return _0x241980(0x191)+_0x240b66+_0x241980(0x1ac);}exports[a12_0x120cc7(0x16a)]=resolveMockScript;function genCustomContainerLocalStartOpts(_0x4ddb30,_0x44fa79,_0x43ff76,_0x56fa1d,_0x126ac1,_0x80d785,_0x231c1e){var _0x3f4ae0=a12_0x120cc7,_0x5011f7,_0x3481e9;_0x231c1e===void 0x0&&(_0x231c1e=0x2328);var _0x43ebc8=_0x231c1e+_0x3f4ae0(0x16d),_0x3cf818={'ExposedPorts':(_0x5011f7={},_0x5011f7[_0x43ebc8]={},_0x5011f7),'HostConfig':{'AutoRemove':!![],'Mounts':_0x43ff76,'PortBindings':(_0x3481e9={},_0x3481e9[_0x43ebc8]=[{'HostIp':'','HostPort':''+_0x231c1e}],_0x3481e9)}};!_['isEmpty'](_0x4ddb30)&&(_0x3cf818['HostConfig'][_0x3f4ae0(0x1a6)]=_0x3f4ae0(0x1bd)+_0x4ddb30);var _0x3bb783={'Env':resolveDockerEnv(_0x126ac1,!![]),'Image':_0x80d785,'name':_0x44fa79};_0x56fa1d!==[]&&(_0x3bb783[_0x3f4ae0(0x1d1)]=_0x56fa1d);var _0x360390={'OpenStdin':!![],'Tty':![],'StdinOnce':!![],'AttachStdin':!![],'AttachStdout':!![],'AttachStderr':!![]},_0xc8deef=nested_object_assign_1['default'](_0x3bb783,_0x3cf818,_0x360390),_0x5e4f52=_[_0x3f4ae0(0x1d8)](_0xc8deef);if(_0x5e4f52===null||_0x5e4f52===void 0x0?void 0x0:_0x5e4f52['Env']){var _0x14d2c4=_0x5e4f52[_0x3f4ae0(0x1b0)]['map'](function(_0x377c17){var _0x46e2e2=_0x3f4ae0;if(_0x377c17['startsWith'](_0x46e2e2(0x16e))||_0x377c17[_0x46e2e2(0x18a)](_0x46e2e2(0x1d7))||_0x377c17[_0x46e2e2(0x18a)](_0x46e2e2(0x1d9))){var _0xb9e527=_0x377c17['split']('='),_0x5a0bce=utils_1['mark'](_0xb9e527[0x1]);return _0xb9e527[0x0]+'='+_0x5a0bce;}else return _0x377c17;});_0x5e4f52[_0x3f4ae0(0x1b0)]=_0x14d2c4;}return logger_1[_0x3f4ae0(0x173)][_0x3f4ae0(0x186)](_0x3f4ae0(0x1ba)+JSON['stringify'](_0x5e4f52,null,'\x20\x20')),_0xc8deef;}function resolveDockerRegistry(){return __awaiter(this,void 0x0,void 0x0,function(){var _0xc062aa,_0x23610c;return __generator(this,function(_0xdb9755){var _0x431ca6=a12_0x1137;switch(_0xdb9755[_0x431ca6(0x163)]){case 0x0:if(DOCKER_REGISTRY_CACHE)return[0x2,DOCKER_REGISTRY_CACHE];_0xc062aa=exports['DOCKER_REGISTRIES'][_0x431ca6(0x176)](function(_0x21eafb){var _0x16fa05=_0x431ca6;return httpx[_0x16fa05(0x1c7)]('https://'+_0x21eafb+_0x16fa05(0x19c),{'timeout':0xbb8})['then'](function(){return _0x21eafb;});}),_0xdb9755['label']=0x1;case 0x1:_0xdb9755[_0x431ca6(0x190)][_0x431ca6(0x1c2)]([0x1,0x3,,0x4]);return[0x4,Promise[_0x431ca6(0x1c9)](_0xc062aa)];case 0x2:DOCKER_REGISTRY_CACHE=_0xdb9755[_0x431ca6(0x198)]();return[0x3,0x4];case 0x3:_0x23610c=_0xdb9755['sent'](),DOCKER_REGISTRY_CACHE=DEFAULT_REGISTRY;return[0x3,0x4];case 0x4:return[0x2,DOCKER_REGISTRY_CACHE];}});});}exports[a12_0x120cc7(0x19b)]=resolveDockerRegistry;function resolveDockerEnv(_0x133d12,_0x23b324){var _0x8f2dba=a12_0x120cc7;_0x133d12===void 0x0&&(_0x133d12={});_0x23b324===void 0x0&&(_0x23b324=![]);if(_0x23b324)return _[_0x8f2dba(0x176)](_0x133d12||{},function(_0x34ac8d,_0x24eb11){return _0x24eb11+'='+_0x34ac8d;});return _['map'](env_1[_0x8f2dba(0x1c1)](_0x133d12||{}),function(_0x38d8c7,_0x3c87c5){return _0x3c87c5+'='+_0x38d8c7;});}exports[a12_0x120cc7(0x18c)]=resolveDockerEnv;function resolveRuntimeToDockerImage(_0x17966d,_0x2f00b5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x226892,_0x4d2757;return __generator(this,function(_0x43bffc){var _0x2819d9=a12_0x1137;if(runtimeImageMap[_0x17966d])return _0x226892=runtimeImageMap[_0x17966d],_0x2f00b5?_0x4d2757='aliyunfc/runtime-'+_0x226892+_0x2819d9(0x167)+IMAGE_VERSION:_0x4d2757='aliyunfc/runtime-'+_0x226892+':'+IMAGE_VERSION,logger_1[_0x2819d9(0x173)][_0x2819d9(0x186)]('imageName:\x20'+_0x4d2757),[0x2,_0x4d2757];throw new Error(_0x2819d9(0x15f)+_0x17966d);});});}exports[a12_0x120cc7(0x1db)]=resolveRuntimeToDockerImage;