'use strict';var a31_0x2ebd=['saveInvokeContainerId','41327jmFScr','stderr','Server\x20in\x20function\x20container\x20is\x20up!','trys','stdoutFormatter','__createBinding','../../definition','Restart\x20function\x20container\x20timeout\x20after\x20300s!Please\x20check\x20if\x20docker\x20runs\x20normally,\x20then\x20runs\x20\x27clean\x27\x20method\x20and\x20try\x20\x27setup\x27\x20again.','_disableRunner','done','default','Generator\x20is\x20already\x20executing.','call','setPrototypeOf','sleep','create','invokeContainerId','generateDockerEnvs','imageName','fail','Restart\x20function\x20container\x20failed,\x20error\x20is:\x20\x0a','debug','return','__generator','\x0aFunction\x20container\x20starts\x20failed.Start\x20cleaning\x20now.','setKVInState','__importDefault','functionConfig','detect\x20code\x20changes,\x20but\x20no\x20runner\x20found,\x20starting....','16JtNqGn','Stop\x20old\x20function\x20container\x20successfully','next','AccountID','spinner','__awaiter','../../docker/docker','init','../../component/stdout-formatter','serviceName','SIGINT','../../utils/state','info','server\x20in\x20function\x20container','clean','kill','debugArgs','1xFVfVr','Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running','539623kRxqQw','checking\x20server\x20in\x20function\x20container','Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running,\x20please\x20retry\x20\x27setup\x27\x20method.','211LDnKhF','Received\x20canncel\x20request,\x20stopping\x20running\x20function\x20container...','unsetInvokeContainerId','push','stdout','containerId','../../utils/process','close','Restart\x20function\x20container\x20failed!','isCustomContainerRuntime','ops','../../../common/logger','value','416734XevmYv','iterator','__proto__','Stop\x20function\x20container\x20failed.','region','Kill\x20old\x20container\x20successfully','Kill\x20old\x20container\x20failed,\x20please\x20kill\x20it\x20manually.','hasOwnProperty','setSigint','check','generateDockerCmd','prototype','__extends','creds','restart','__setModuleDefault','sessionId','debugPort','apply','label','733678viUTDE','__importStar','win32','isIgnored','tunnelService','Detect\x20code\x20changes,\x20file\x20is\x20','dev-null','promiseRetry','dockerode','Function\x20container\x20is\x20closed,\x20exit!','348458VwpMKL','warning','../ignore','28012ULRXJm','debugIde','nasConfig','rimraf','retry','succeed','generateRamdomContainerName','exit','throw','genProxyContainerName','Detecting\x20code\x20changes\x20and\x20Restarting\x20funtion\x20container...','initWatch','Kill\x20function\x20container\x20failed,\x20error:\x20','cleanUnzippedCodeDir','node-watch','sync','caPort','defineProperty','runtime','curl','serviceConfig','Stop\x20function\x20container\x20error:\x20','Killing\x20old\x20container...','containerName','Stop\x20function\x20container\x20failed,\x20please\x20stop\x20it\x20manually.','pop','sent','Kill\x20function\x20container\x20successfully','message','runner','getInvokeContainerIdFromState','length','env','functionName','watcher','Stop\x20function\x20container\x20failed,\x20error:\x20','dockerUser','./invoke','is\x20up.','1skMbxb','stop','Stop\x20function\x20container\x20successfully','mounts','is\x20up','error','Reloading\x20success,\x20stopping\x20old\x20function\x20container...','../../utils/devs','601dGfazA','baseDir','includes','function\x20container','_startRunner','../../retry'];var a31_0x20cb5c=a31_0x1e79;(function(_0xd65755,_0x4f1d78){var _0x28c1cc=a31_0x1e79;while(!![]){try{var _0xd8a133=-parseInt(_0x28c1cc(0xd2))+-parseInt(_0x28c1cc(0xf0))*-parseInt(_0x28c1cc(0xc0))+parseInt(_0x28c1cc(0xf3))*parseInt(_0x28c1cc(0xaf))+parseInt(_0x28c1cc(0xc2))+-parseInt(_0x28c1cc(0xc5))*-parseInt(_0x28c1cc(0x122))+-parseInt(_0x28c1cc(0x92))+parseInt(_0x28c1cc(0x11a))*-parseInt(_0x28c1cc(0xe6));if(_0xd8a133===_0x4f1d78)break;else _0xd65755['push'](_0xd65755['shift']());}catch(_0x2ca8f6){_0xd65755['push'](_0xd65755['shift']());}}}(a31_0x2ebd,0x423f1));var __extends=this&&this[a31_0x20cb5c(0xde)]||function(){var _0x130e62=function(_0x4f7ad7,_0xbbb01c){var _0x18e203=a31_0x1e79;return _0x130e62=Object[_0x18e203(0x9f)]||{'__proto__':[]}instanceof Array&&function(_0x31f9c1,_0x593d96){var _0x3a90ee=_0x18e203;_0x31f9c1[_0x3a90ee(0xd4)]=_0x593d96;}||function(_0x58e316,_0x265e34){var _0x46b184=_0x18e203;for(var _0x53f655 in _0x265e34)if(_0x265e34[_0x46b184(0xd9)](_0x53f655))_0x58e316[_0x53f655]=_0x265e34[_0x53f655];},_0x130e62(_0x4f7ad7,_0xbbb01c);};return function(_0xffad26,_0x46edb2){var _0x35dc38=a31_0x1e79;_0x130e62(_0xffad26,_0x46edb2);function _0x5ea808(){this['constructor']=_0xffad26;}_0xffad26[_0x35dc38(0xdd)]=_0x46edb2===null?Object[_0x35dc38(0xa1)](_0x46edb2):(_0x5ea808[_0x35dc38(0xdd)]=_0x46edb2['prototype'],new _0x5ea808());};}(),__createBinding=this&&this[a31_0x20cb5c(0x97)]||(Object[a31_0x20cb5c(0xa1)]?function(_0x4bb6c4,_0x4e4617,_0x39c08d,_0x3e34c0){var _0x4c28a0=a31_0x20cb5c;if(_0x3e34c0===undefined)_0x3e34c0=_0x39c08d;Object[_0x4c28a0(0x104)](_0x4bb6c4,_0x3e34c0,{'enumerable':!![],'get':function(){return _0x4e4617[_0x39c08d];}});}:function(_0x183c7a,_0x519193,_0x35bba9,_0x7cceab){if(_0x7cceab===undefined)_0x7cceab=_0x35bba9;_0x183c7a[_0x7cceab]=_0x519193[_0x35bba9];}),__setModuleDefault=this&&this[a31_0x20cb5c(0xe1)]||(Object[a31_0x20cb5c(0xa1)]?function(_0x2962d8,_0x32800c){var _0x1567b4=a31_0x20cb5c;Object[_0x1567b4(0x104)](_0x2962d8,_0x1567b4(0x9c),{'enumerable':!![],'value':_0x32800c});}:function(_0x4913b0,_0x405a2b){var _0x5ca288=a31_0x20cb5c;_0x4913b0[_0x5ca288(0x9c)]=_0x405a2b;}),__importStar=this&&this[a31_0x20cb5c(0xe7)]||function(_0x4dede6){var _0x2b2f52=a31_0x20cb5c;if(_0x4dede6&&_0x4dede6['__esModule'])return _0x4dede6;var _0x4885ee={};if(_0x4dede6!=null){for(var _0x401505 in _0x4dede6)if(_0x401505!==_0x2b2f52(0x9c)&&Object[_0x2b2f52(0xd9)][_0x2b2f52(0x9e)](_0x4dede6,_0x401505))__createBinding(_0x4885ee,_0x4dede6,_0x401505);}return __setModuleDefault(_0x4885ee,_0x4dede6),_0x4885ee;},__awaiter=this&&this[a31_0x20cb5c(0xb4)]||function(_0x37160d,_0x577a76,_0x7ab28d,_0x485223){function _0x4c9f9c(_0x280698){return _0x280698 instanceof _0x7ab28d?_0x280698:new _0x7ab28d(function(_0x2b8690){_0x2b8690(_0x280698);});}return new(_0x7ab28d||(_0x7ab28d=Promise))(function(_0x2fe46a,_0x317b83){var _0x4f7820=a31_0x1e79;function _0x360abc(_0x48b2da){var _0x1ab1fc=a31_0x1e79;try{_0x30320d(_0x485223[_0x1ab1fc(0xb1)](_0x48b2da));}catch(_0x5ea988){_0x317b83(_0x5ea988);}}function _0x2b2dbb(_0x497ccf){try{_0x30320d(_0x485223['throw'](_0x497ccf));}catch(_0x475fa4){_0x317b83(_0x475fa4);}}function _0x30320d(_0x2f7bfe){var _0x1572b0=a31_0x1e79;_0x2f7bfe[_0x1572b0(0x9b)]?_0x2fe46a(_0x2f7bfe[_0x1572b0(0xd1)]):_0x4c9f9c(_0x2f7bfe['value'])['then'](_0x360abc,_0x2b2dbb);}_0x30320d((_0x485223=_0x485223[_0x4f7820(0xe4)](_0x37160d,_0x577a76||[]))[_0x4f7820(0xb1)]());});},__generator=this&&this[a31_0x20cb5c(0xa9)]||function(_0x2d3194,_0x24de28){var _0x3aad89=a31_0x20cb5c,_0x2d0324={'label':0x0,'sent':function(){if(_0x2102af[0x0]&0x1)throw _0x2102af[0x1];return _0x2102af[0x1];},'trys':[],'ops':[]},_0x4569aa,_0x3e8c75,_0x2102af,_0x5987f1;return _0x5987f1={'next':_0x12f1b2(0x0),'throw':_0x12f1b2(0x1),'return':_0x12f1b2(0x2)},typeof Symbol==='function'&&(_0x5987f1[Symbol[_0x3aad89(0xd3)]]=function(){return this;}),_0x5987f1;function _0x12f1b2(_0x5e53ff){return function(_0x50a20f){return _0x11693f([_0x5e53ff,_0x50a20f]);};}function _0x11693f(_0x4e1a5a){var _0x5e36ec=_0x3aad89;if(_0x4569aa)throw new TypeError(_0x5e36ec(0x9d));while(_0x2d0324)try{if(_0x4569aa=0x1,_0x3e8c75&&(_0x2102af=_0x4e1a5a[0x0]&0x2?_0x3e8c75[_0x5e36ec(0xa8)]:_0x4e1a5a[0x0]?_0x3e8c75[_0x5e36ec(0xfb)]||((_0x2102af=_0x3e8c75[_0x5e36ec(0xa8)])&&_0x2102af[_0x5e36ec(0x9e)](_0x3e8c75),0x0):_0x3e8c75[_0x5e36ec(0xb1)])&&!(_0x2102af=_0x2102af[_0x5e36ec(0x9e)](_0x3e8c75,_0x4e1a5a[0x1]))[_0x5e36ec(0x9b)])return _0x2102af;if(_0x3e8c75=0x0,_0x2102af)_0x4e1a5a=[_0x4e1a5a[0x0]&0x2,_0x2102af['value']];switch(_0x4e1a5a[0x0]){case 0x0:case 0x1:_0x2102af=_0x4e1a5a;break;case 0x4:_0x2d0324[_0x5e36ec(0xe5)]++;return{'value':_0x4e1a5a[0x1],'done':![]};case 0x5:_0x2d0324['label']++,_0x3e8c75=_0x4e1a5a[0x1],_0x4e1a5a=[0x0];continue;case 0x7:_0x4e1a5a=_0x2d0324[_0x5e36ec(0xcf)]['pop'](),_0x2d0324[_0x5e36ec(0x95)][_0x5e36ec(0x10c)]();continue;default:if(!(_0x2102af=_0x2d0324[_0x5e36ec(0x95)],_0x2102af=_0x2102af[_0x5e36ec(0x112)]>0x0&&_0x2102af[_0x2102af['length']-0x1])&&(_0x4e1a5a[0x0]===0x6||_0x4e1a5a[0x0]===0x2)){_0x2d0324=0x0;continue;}if(_0x4e1a5a[0x0]===0x3&&(!_0x2102af||_0x4e1a5a[0x1]>_0x2102af[0x0]&&_0x4e1a5a[0x1]<_0x2102af[0x3])){_0x2d0324['label']=_0x4e1a5a[0x1];break;}if(_0x4e1a5a[0x0]===0x6&&_0x2d0324[_0x5e36ec(0xe5)]<_0x2102af[0x1]){_0x2d0324[_0x5e36ec(0xe5)]=_0x2102af[0x1],_0x2102af=_0x4e1a5a;break;}if(_0x2102af&&_0x2d0324['label']<_0x2102af[0x2]){_0x2d0324['label']=_0x2102af[0x2],_0x2d0324[_0x5e36ec(0xcf)][_0x5e36ec(0xc8)](_0x4e1a5a);break;}if(_0x2102af[0x2])_0x2d0324['ops']['pop']();_0x2d0324['trys']['pop']();continue;}_0x4e1a5a=_0x24de28[_0x5e36ec(0x9e)](_0x2d3194,_0x2d0324);}catch(_0x4dd84e){_0x4e1a5a=[0x6,_0x4dd84e],_0x3e8c75=0x0;}finally{_0x4569aa=_0x2102af=0x0;}if(_0x4e1a5a[0x0]&0x5)throw _0x4e1a5a[0x1];return{'value':_0x4e1a5a[0x0]?_0x4e1a5a[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a31_0x20cb5c(0xac)]||function(_0x16c82d){return _0x16c82d&&_0x16c82d['__esModule']?_0x16c82d:{'default':_0x16c82d};};Object[a31_0x20cb5c(0x104)](exports,'__esModule',{'value':!![]});function a31_0x1e79(_0x66e676,_0x292941){return a31_0x1e79=function(_0x2ebd49,_0x1e79fe){_0x2ebd49=_0x2ebd49-0x91;var _0xdd26c7=a31_0x2ebd[_0x2ebd49];return _0xdd26c7;},a31_0x1e79(_0x66e676,_0x292941);}var node_watch_1=__importDefault(require(a31_0x20cb5c(0x101))),rimraf=__importStar(require(a31_0x20cb5c(0xf6))),ignore_1=require(a31_0x20cb5c(0xf2)),invoke_1=__importDefault(require(a31_0x20cb5c(0x118))),docker=__importStar(require(a31_0x20cb5c(0xb5))),dockerOpts=__importStar(require('../../docker/docker-opts')),dockerode_1=__importDefault(require(a31_0x20cb5c(0xee))),runtime_1=require('../../utils/runtime'),logger_1=__importDefault(require(a31_0x20cb5c(0xd0))),definition_1=require(a31_0x20cb5c(0x98)),time_1=require('../../utils/time'),process_1=require(a31_0x20cb5c(0xcb)),devs_1=require(a31_0x20cb5c(0x121)),retry_1=require(a31_0x20cb5c(0x127)),core=__importStar(require('@serverless-devs/core')),stdout_formatter_1=__importDefault(require(a31_0x20cb5c(0xb7))),state_1=require(a31_0x20cb5c(0xba)),dev_null_1=__importDefault(require(a31_0x20cb5c(0xec))),dockerClient=new dockerode_1[(a31_0x20cb5c(0x9c))](),HttpInvoke=function(_0x2cbaa1){var _0xdcd446=a31_0x20cb5c;__extends(_0x232929,_0x2cbaa1);function _0x232929(_0x426d61,_0x252bc6,_0x131fd2,_0x20b8ce,_0x114d60,_0xe9d8ad,_0x57249f,_0x2bea65,_0x4e3786,_0x1ad985,_0x4d17b6,_0x14fde9,_0x46faf6,_0xdb4b61){var _0x14c81f=a31_0x1e79,_0x140919=_0x2cbaa1['call'](this,_0x426d61,_0x252bc6,_0x131fd2,_0x20b8ce,_0x114d60,_0xe9d8ad,_0x57249f,_0x2bea65,_0x4e3786,_0x1ad985,_0x4d17b6,_0x14fde9,_0x46faf6,_0xdb4b61)||this;return process_1[_0x14c81f(0xda)](),process['on'](_0x14c81f(0xb9),function(){return __awaiter(_0x140919,void 0x0,void 0x0,function(){var _0x36503d,_0x1d0d81,_0x1eeece,_0x4f0b0b,_0x3ea797;return __generator(this,function(_0xdf199a){var _0x5ed022=a31_0x1e79;switch(_0xdf199a[_0x5ed022(0xe5)]){case 0x0:this[_0x5ed022(0x115)]&&this[_0x5ed022(0x115)][_0x5ed022(0xcc)]();this[_0x5ed022(0x100)]();if(!this[_0x5ed022(0x110)])return[0x3,0xa];_0x36503d=core[_0x5ed022(0xb3)](_0x5ed022(0xc6)),_0xdf199a[_0x5ed022(0xe5)]=0x1;case 0x1:_0xdf199a['trys']['push']([0x1,0x3,,0x8]);return[0x4,this[_0x5ed022(0x110)][_0x5ed022(0x11b)]()];case 0x2:_0xdf199a['sent'](),_0x36503d[_0x5ed022(0xf8)](_0x5ed022(0x11c));return[0x3,0x8];case 0x3:_0x1d0d81=_0xdf199a[_0x5ed022(0x10d)](),_0x36503d['fail']('Stop\x20function\x20container\x20failed.'),logger_1[_0x5ed022(0x9c)][_0x5ed022(0xa7)](_0x5ed022(0x116)+_0x1d0d81),_0x1eeece=core[_0x5ed022(0xb3)](_0x5ed022(0x109)),_0xdf199a[_0x5ed022(0xe5)]=0x4;case 0x4:_0xdf199a[_0x5ed022(0x95)][_0x5ed022(0xc8)]([0x4,0x6,,0x7]);return[0x4,this['runner'][_0x5ed022(0xbe)]()];case 0x5:_0xdf199a[_0x5ed022(0x10d)](),_0x1eeece['succeed'](_0x5ed022(0x10e));return[0x3,0x7];case 0x6:_0x4f0b0b=_0xdf199a[_0x5ed022(0x10d)](),_0x1eeece[_0x5ed022(0xa5)]('Kill\x20old\x20container\x20failed,\x20please\x20kill\x20it\x20manually.'),logger_1['default'][_0x5ed022(0xa7)](_0x5ed022(0xff)+_0x4f0b0b);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x4,state_1[_0x5ed022(0xc7)]((_0x3ea797=this[_0x5ed022(0xdf)])===null||_0x3ea797===void 0x0?void 0x0:_0x3ea797[_0x5ed022(0xb2)],this[_0x5ed022(0xd6)],this[_0x5ed022(0xb8)],this[_0x5ed022(0x114)])];case 0x9:_0xdf199a[_0x5ed022(0x10d)](),this[_0x5ed022(0x110)]=null,_0xdf199a[_0x5ed022(0xe5)]=0xa;case 0xa:if(!this[_0x5ed022(0xea)])return[0x3,0xc];return[0x4,this['tunnelService'][_0x5ed022(0xbd)]()];case 0xb:_0xdf199a[_0x5ed022(0x10d)](),_0xdf199a[_0x5ed022(0xe5)]=0xc;case 0xc:process['platform']===_0x5ed022(0xe8)&&process[_0x5ed022(0xfa)](0x0);return[0x2];}});});}),_0x140919;}return _0x232929[_0xdcd446(0xdd)][_0xdcd446(0x9a)]=function(_0xba6074,_0x291be9){var _0x53c60c;return __awaiter(this,void 0x0,void 0x0,function(){var _0x143907,_0x23aaf9,_0x14444b,_0x80d22e,_0x4cf9a9,_0x1a5b01;return __generator(this,function(_0x20ec0d){var _0xb325da=a31_0x1e79;switch(_0x20ec0d[_0xb325da(0xe5)]){case 0x0:if(!this[_0xb325da(0x110)])return[0x2];logger_1[_0xb325da(0x9c)]['info'](_0xb325da(0xeb)+_0x291be9+',\x20event\x20is\x20'+_0xba6074+',\x20auto\x20reloading...'),_0x143907=this[_0xb325da(0x110)],_0x23aaf9=this['unzippedCodeDir'],this[_0xb325da(0x110)]=null;return[0x4,this[_0xb325da(0xb6)]()];case 0x1:_0x20ec0d['sent']();return[0x4,time_1[_0xb325da(0xa0)](0x1f4)];case 0x2:_0x20ec0d[_0xb325da(0x10d)](),_0x14444b=core[_0xb325da(0xb3)](_0xb325da(0x120)),_0x20ec0d['label']=0x3;case 0x3:_0x20ec0d[_0xb325da(0x95)][_0xb325da(0xc8)]([0x3,0x5,,0xa]);return[0x4,_0x143907[_0xb325da(0x11b)]()];case 0x4:_0x20ec0d[_0xb325da(0x10d)](),_0x14444b['succeed'](_0xb325da(0xb0));return[0x3,0xa];case 0x5:_0x80d22e=_0x20ec0d['sent'](),_0x14444b[_0xb325da(0xa5)](_0xb325da(0xd5)),logger_1[_0xb325da(0x9c)][_0xb325da(0xa7)]('Stop\x20function\x20container\x20failed,\x20error:\x20'+_0x80d22e),_0x4cf9a9=core['spinner']('Killing\x20old\x20container...'),_0x20ec0d['label']=0x6;case 0x6:_0x20ec0d[_0xb325da(0x95)][_0xb325da(0xc8)]([0x6,0x8,,0x9]);return[0x4,_0x143907[_0xb325da(0xbe)]()];case 0x7:_0x20ec0d[_0xb325da(0x10d)](),_0x4cf9a9[_0xb325da(0xf8)](_0xb325da(0xd7));return[0x3,0x9];case 0x8:_0x1a5b01=_0x20ec0d[_0xb325da(0x10d)](),_0x4cf9a9['fail'](_0xb325da(0xd8)),logger_1[_0xb325da(0x9c)][_0xb325da(0xa7)](_0xb325da(0xff)+_0x1a5b01);return[0x3,0x9];case 0x9:return[0x3,0xa];case 0xa:return[0x4,state_1[_0xb325da(0xc7)]((_0x53c60c=this['creds'])===null||_0x53c60c===void 0x0?void 0x0:_0x53c60c['AccountID'],this[_0xb325da(0xd6)],this[_0xb325da(0xb8)],this[_0xb325da(0x114)])];case 0xb:_0x20ec0d['sent']();_0x23aaf9&&(rimraf[_0xb325da(0x102)](_0x23aaf9),logger_1['default'][_0xb325da(0xbb)]('Clean\x20tmp\x20code\x20dir\x20'+_0x23aaf9+'\x20successfully.\x0a'));return[0x2];}});});},_0x232929['prototype']['_startRunner']=function(){var _0x507155,_0x5e1e39,_0x3eae94;return __awaiter(this,void 0x0,void 0x0,function(){var _0x52df51,_0xb2bdd9,_0x225814,_0x49b3d9,_0x58b233,_0x34dad3,_0x565aa5,_0x27e7aa=this;return __generator(this,function(_0x490531){var _0x4e4a97=a31_0x1e79;switch(_0x490531[_0x4e4a97(0xe5)]){case 0x0:_0x52df51=this[_0x4e4a97(0xea)];if(!_0x52df51)return[0x3,0x2];return[0x4,this[_0x4e4a97(0xea)]['checkIfProxyContainerRunning']()];case 0x1:_0x52df51=!_0x490531[_0x4e4a97(0x10d)](),_0x490531[_0x4e4a97(0xe5)]=0x2;case 0x2:if(!_0x52df51)return[0x3,0x5];console['log'](),logger_1[_0x4e4a97(0x9c)][_0x4e4a97(0x11f)](_0x4e4a97(0xaa));if(!this['tunnelService'])return[0x3,0x4];return[0x4,this[_0x4e4a97(0xea)]['clean']()];case 0x3:_0x490531['sent'](),_0x490531['label']=0x4;case 0x4:throw new Error(_0x4e4a97(0xc4));case 0x5:return[0x4,docker[_0x4e4a97(0xa3)](this[_0x4e4a97(0xdf)],this['region'],this[_0x4e4a97(0x123)],this['serviceName'],this[_0x4e4a97(0x107)],this[_0x4e4a97(0x114)],this[_0x4e4a97(0xad)],this['debugPort'],null,this[_0x4e4a97(0xf5)],this[_0x4e4a97(0xf4)],this[_0x4e4a97(0xbf)])];case 0x6:_0xb2bdd9=_0x490531[_0x4e4a97(0x10d)](),_0x225814=docker[_0x4e4a97(0xdc)](this['runtime'],!![],this[_0x4e4a97(0xad)]),_0x49b3d9=definition_1[_0x4e4a97(0xfc)](this[_0x4e4a97(0xe2)]),this[_0x4e4a97(0x10a)]=docker[_0x4e4a97(0xf9)]();return[0x4,dockerOpts['generateLocalStartOpts'](_0x49b3d9,this['runtime'],this['containerName'],this[_0x4e4a97(0x11d)],_0x225814,_0xb2bdd9,{'debugPort':this[_0x4e4a97(0xe3)],'dockerUser':this[_0x4e4a97(0x117)],'imageName':this[_0x4e4a97(0xa4)]})];case 0x7:_0x58b233=_0x490531[_0x4e4a97(0x10d)](),_0x34dad3=this;return[0x4,docker['startContainer'](_0x58b233,process[_0x4e4a97(0xc9)],process[_0x4e4a97(0x93)],{'serviceName':this[_0x4e4a97(0xb8)],'functionName':this['functionName']})];case 0x8:_0x34dad3['runner']=_0x490531[_0x4e4a97(0x10d)]();return[0x4,this['saveInvokeContainerId']()];case 0x9:_0x490531['sent'](),_0x565aa5=(_0x5e1e39=(_0x507155=process[_0x4e4a97(0x113)])===null||_0x507155===void 0x0?void 0x0:_0x507155['temp_params'])===null||_0x5e1e39===void 0x0?void 0x0:_0x5e1e39['includes']('--debug');if(!!runtime_1[_0x4e4a97(0xce)]((_0x3eae94=this['functionConfig'])===null||_0x3eae94===void 0x0?void 0x0:_0x3eae94[_0x4e4a97(0x105)]))return[0x3,0xb];logger_1[_0x4e4a97(0x9c)][_0x4e4a97(0xbb)](stdout_formatter_1[_0x4e4a97(0x9c)][_0x4e4a97(0x96)][_0x4e4a97(0xdb)](_0x4e4a97(0xbc),_0x4e4a97(0x119)));return[0x4,retry_1[_0x4e4a97(0xed)](function(_0x222033,_0x3da464){return __awaiter(_0x27e7aa,void 0x0,void 0x0,function(){var _0x278350,_0x529bf4,_0x366a34,_0x24fdd0;return __generator(this,function(_0x2b90b0){var _0x238245=a31_0x1e79;switch(_0x2b90b0[_0x238245(0xe5)]){case 0x0:_0x2b90b0[_0x238245(0x95)][_0x238245(0xc8)]([0x0,0x3,,0x4]);if(!this[_0x238245(0x110)])throw new Error(_0x238245(0xef));return[0x4,time_1[_0x238245(0xa0)](0x3e8)];case 0x1:_0x2b90b0['sent'](),_0x278350=((_0x24fdd0=this[_0x238245(0xad)])===null||_0x24fdd0===void 0x0?void 0x0:_0x24fdd0[_0x238245(0x103)])||0x2328;return[0x4,this['runner']['exec']([_0x238245(0x106),'127.0.0.1:'+_0x278350],{'outputStream':_0x565aa5?process[_0x238245(0xc9)]:dev_null_1[_0x238245(0x9c)](),'errorStream':_0x565aa5?process[_0x238245(0x93)]:dev_null_1[_0x238245(0x9c)]()})];case 0x2:_0x529bf4=_0x2b90b0['sent']();if(_0x529bf4===0x0)return logger_1['default'][_0x238245(0xbb)](_0x238245(0x94)),[0x2];logger_1[_0x238245(0x9c)]['debug']('Server\x20is\x20not\x20up.\x20Result\x20is\x20:'+_0x529bf4),logger_1['default'][_0x238245(0xbb)](stdout_formatter_1[_0x238245(0x9c)][_0x238245(0x96)][_0x238245(0xf7)]('checking\x20server\x20in\x20function\x20container',_0x238245(0x11e),'',_0x3da464)),_0x222033(_0x529bf4);return[0x3,0x4];case 0x3:_0x366a34=_0x2b90b0['sent']();if(_0x366a34[_0x238245(0x10f)]===_0x238245(0xef))throw _0x366a34;logger_1[_0x238245(0x9c)][_0x238245(0xa7)]('Checking\x20server\x20in\x20function\x20container\x20failed,\x20error:\x20'+_0x366a34),logger_1[_0x238245(0x9c)][_0x238245(0xbb)](stdout_formatter_1[_0x238245(0x9c)][_0x238245(0x96)]['retry'](_0x238245(0xc3),'is\x20up','',_0x3da464)),_0x222033(_0x366a34);return[0x3,0x4];case 0x4:return[0x2];}});});},0x14)];case 0xa:_0x490531[_0x4e4a97(0x10d)](),_0x490531[_0x4e4a97(0xe5)]=0xb;case 0xb:return[0x2];}});});},_0x232929['prototype'][_0xdcd446(0x91)]=function(){var _0x1339e9,_0x4b0c16;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3c8dbe){var _0x3b31f5=a31_0x1e79;switch(_0x3c8dbe['label']){case 0x0:return[0x4,devs_1[_0x3b31f5(0xab)](_0x3b31f5(0xa2),(_0x1339e9=this[_0x3b31f5(0x110)])===null||_0x1339e9===void 0x0?void 0x0:_0x1339e9[_0x3b31f5(0xca)],state_1['genStateId']((_0x4b0c16=this['creds'])===null||_0x4b0c16===void 0x0?void 0x0:_0x4b0c16['AccountID'],this[_0x3b31f5(0xd6)],this[_0x3b31f5(0xb8)],this[_0x3b31f5(0x114)]))];case 0x1:_0x3c8dbe[_0x3b31f5(0x10d)]();return[0x2];}});});},_0x232929[_0xdcd446(0xdd)]['initWatch']=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1247a4,_0x5bcdb9,_0x3cf6ee,_0x1490df=this;return __generator(this,function(_0x12f75f){var _0x45b79c=a31_0x1e79;switch(_0x12f75f[_0x45b79c(0xe5)]){case 0x0:if(!(!this[_0x45b79c(0x115)]&&!runtime_1[_0x45b79c(0xce)](this['runtime'])))return[0x3,0x2];return[0x4,ignore_1[_0x45b79c(0xe9)](this['baseDir'])];case 0x1:_0x1247a4=_0x12f75f['sent'](),_0x5bcdb9=![],_0x3cf6ee=![],this[_0x45b79c(0x115)]=node_watch_1[_0x45b79c(0x9c)](this['codeUri'],{'recursive':!![],'persistent':![],'filter':function(_0x435925){return _0x1247a4&&!_0x1247a4(_0x435925);}},function(_0x2d7b28,_0x452b03){return __awaiter(_0x1490df,void 0x0,void 0x0,function(){var _0x112afc,_0x4dd363,_0x5b4e9e,_0xede87f=this;return __generator(this,function(_0x517a1e){var _0x118596=a31_0x1e79;switch(_0x517a1e[_0x118596(0xe5)]){case 0x0:if(_0x5bcdb9)return[0x2];_0x112afc=0x12c,_0x4dd363=0x0;if(!_0x3cf6ee)return[0x3,0x7];_0x517a1e[_0x118596(0xe5)]=0x1;case 0x1:if(!_0x3cf6ee)return[0x3,0x7];if(_0x5bcdb9)return[0x2];return[0x4,time_1[_0x118596(0xa0)](0xbb8)];case 0x2:_0x517a1e['sent'](),_0x4dd363=_0x4dd363+0x3;if(!(_0x4dd363>_0x112afc))return[0x3,0x6];return[0x4,this[_0x118596(0xbd)]()];case 0x3:_0x517a1e[_0x118596(0x10d)]();if(!this['tunnelService'])return[0x3,0x5];return[0x4,this['tunnelService'][_0x118596(0xbd)]()];case 0x4:_0x517a1e[_0x118596(0x10d)](),_0x517a1e[_0x118596(0xe5)]=0x5;case 0x5:throw new Error(_0x118596(0x99));case 0x6:return[0x3,0x1];case 0x7:_0x5bcdb9=!![],_0x517a1e[_0x118596(0xe5)]=0x8;case 0x8:_0x517a1e[_0x118596(0x95)]['push']([0x8,0xc,,0xd]);if(!this[_0x118596(0x110)])return[0x3,0xa];return[0x4,this['_disableRunner'](_0x2d7b28,_0x452b03)];case 0x9:_0x517a1e[_0x118596(0x10d)]();return[0x3,0xb];case 0xa:logger_1[_0x118596(0x9c)][_0x118596(0xa7)](_0x118596(0xae)),_0x517a1e[_0x118596(0xe5)]=0xb;case 0xb:return[0x3,0xd];case 0xc:_0x5b4e9e=_0x517a1e['sent'](),logger_1[_0x118596(0x9c)][_0x118596(0xf1)](_0x118596(0x10b)),logger_1[_0x118596(0x9c)][_0x118596(0xa7)](_0x118596(0x108)+_0x5b4e9e);return[0x3,0xd];case 0xd:_0x3cf6ee=!![],_0x5bcdb9=![],logger_1[_0x118596(0x9c)]['info'](_0x118596(0xfd));return[0x4,retry_1[_0x118596(0xed)](function(_0xd5b38f,_0x27bb6b){return __awaiter(_0xede87f,void 0x0,void 0x0,function(){var _0x1fa8fa;return __generator(this,function(_0x171665){var _0x1f0864=a31_0x1e79;switch(_0x171665[_0x1f0864(0xe5)]){case 0x0:_0x171665[_0x1f0864(0x95)][_0x1f0864(0xc8)]([0x0,0x2,,0x4]);return[0x4,this[_0x1f0864(0x126)]()];case 0x1:_0x171665['sent'](),logger_1[_0x1f0864(0x9c)][_0x1f0864(0xbb)]('Restart\x20function\x20container\x20succeed!\x20Please\x20try\x20\x27invoke\x27\x20again.');return[0x2];case 0x2:_0x1fa8fa=_0x171665[_0x1f0864(0x10d)](),logger_1['default']['error'](_0x1f0864(0xcd));if(_0x1fa8fa===null||_0x1fa8fa===void 0x0?void 0x0:_0x1fa8fa[_0x1f0864(0x10f)][_0x1f0864(0x124)](_0x1f0864(0xc1)))throw _0x1fa8fa;logger_1[_0x1f0864(0x9c)][_0x1f0864(0xa7)](_0x1f0864(0xa6)+_0x1fa8fa),logger_1['default'][_0x1f0864(0xbb)](stdout_formatter_1[_0x1f0864(0x9c)][_0x1f0864(0x96)][_0x1f0864(0xf7)](_0x1f0864(0x125),_0x1f0864(0xe0),'',_0x27bb6b));return[0x4,time_1[_0x1f0864(0xa0)](0x64)];case 0x3:_0x171665[_0x1f0864(0x10d)](),_0xd5b38f(_0x1fa8fa);return[0x3,0x4];case 0x4:return[0x2];}});});})];case 0xe:_0x517a1e['sent'](),_0x3cf6ee=![];return[0x2];}});});}),this[_0x45b79c(0x115)]['on']('error',function(_0x3552b3){throw _0x3552b3;}),_0x12f75f[_0x45b79c(0xe5)]=0x2;case 0x2:return[0x2];}});});},_0x232929['prototype']['initAndStartRunner']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x5c947e){var _0x5e4d5c=a31_0x1e79;switch(_0x5c947e[_0x5e4d5c(0xe5)]){case 0x0:return[0x4,this[_0x5e4d5c(0xb6)]()];case 0x1:_0x5c947e[_0x5e4d5c(0x10d)]();return[0x4,this[_0x5e4d5c(0x126)]()];case 0x2:_0x5c947e[_0x5e4d5c(0x10d)]();return[0x4,this[_0x5e4d5c(0xfe)]()];case 0x3:_0x5c947e[_0x5e4d5c(0x10d)]();return[0x4,this['setDebugIdeConfig']()];case 0x4:_0x5c947e['sent']();return[0x2];}});});},_0x232929[_0xdcd446(0xdd)][_0xdcd446(0xbd)]=function(){var _0x380082,_0x609050;return __awaiter(this,void 0x0,void 0x0,function(){var _0x4957f5,_0x22215c;return __generator(this,function(_0x5ddf4e){var _0x2dae0=a31_0x1e79;switch(_0x5ddf4e['label']){case 0x0:return[0x4,state_1[_0x2dae0(0x111)]((_0x380082=this[_0x2dae0(0xdf)])===null||_0x380082===void 0x0?void 0x0:_0x380082[_0x2dae0(0xb2)],this[_0x2dae0(0xd6)],this[_0x2dae0(0xb8)],this[_0x2dae0(0x114)])];case 0x1:_0x4957f5=_0x5ddf4e[_0x2dae0(0x10d)]();return[0x4,dockerClient['getContainer'](_0x4957f5)];case 0x2:_0x22215c=_0x5ddf4e[_0x2dae0(0x10d)]();return[0x4,docker['stopContainer'](_0x22215c)];case 0x3:_0x5ddf4e['sent']();return[0x4,state_1[_0x2dae0(0xc7)]((_0x609050=this[_0x2dae0(0xdf)])===null||_0x609050===void 0x0?void 0x0:_0x609050[_0x2dae0(0xb2)],this[_0x2dae0(0xd6)],this['serviceName'],this['functionName'])];case 0x4:_0x5ddf4e['sent']();return[0x2];}});});},_0x232929;}(invoke_1[a31_0x20cb5c(0x9c)]);exports[a31_0x20cb5c(0x9c)]=HttpInvoke;