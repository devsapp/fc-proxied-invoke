'use strict';var a31_0x325c=['Checking\x20server\x20in\x20function\x20container\x20failed,\x20error:\x20','server\x20in\x20function\x20container','Kill\x20function\x20container\x20failed,\x20error:\x20','_disableRunner','mounts','debugArgs','clean','Generator\x20is\x20already\x20executing.','../../docker/docker-opts','8867DkHDcU','detect\x20code\x20changes,\x20but\x20no\x20runner\x20found,\x20starting....','stdoutFormatter','1181rxSLkY','runtime','push','Stop\x20function\x20container\x20error:\x20','../../utils/devs','exec','Function\x20container\x20is\x20closed,\x20exit!','generateRamdomContainerName','34377Zbglim','Detect\x20code\x20changes,\x20file\x20is\x20','11NLWPHr','promiseRetry','genStateId','setSigint','dockerUser','done','init','__importDefault','invokeContainerId','watcher','is\x20up','retry','generateDockerCmd','stdout','tunnelService','next','containerId','close','succeed','Stop\x20function\x20container\x20successfully','node-watch',',\x20auto\x20reloading...','containerName','getContainer','__proto__','sent','serviceName','functionName','initWatch','creds','../../../common/logger','create','return','Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running,\x20please\x20retry\x20\x27setup\x27\x20method.','debug','label','prototype','../../retry','../../utils/process','Stop\x20function\x20container\x20failed,\x20error:\x20','sleep','85AbzRJP','Restart\x20function\x20container\x20failed,\x20error\x20is:\x20\x0a','restart','isCustomContainerRuntime','setKVInState','hasOwnProperty','unzippedCodeDir','includes','stopContainer','__esModule','Kill\x20function\x20container\x20successfully','Server\x20is\x20not\x20up.\x20Result\x20is\x20:','curl','ops','functionConfig','../ignore','dockerode','Killing\x20old\x20container...','Detecting\x20code\x20changes\x20and\x20Restarting\x20funtion\x20container...','cleanUnzippedCodeDir','function\x20container','Received\x20canncel\x20request,\x20stopping\x20running\x20function\x20container...','Restart\x20function\x20container\x20timeout\x20after\x20300s!Please\x20check\x20if\x20docker\x20runs\x20normally,\x20then\x20runs\x20\x27clean\x27\x20method\x20and\x20try\x20\x27setup\x27\x20again.','saveInvokeContainerId','rimraf','default','debugIde','957mjrklT','call','__awaiter','getInvokeContainerIdFromState','89UbyLyl','length','@serverless-devs/core','Restart\x20function\x20container\x20succeed!\x20Please\x20try\x20\x27invoke\x27\x20again.','1339010XSzBCL','region','startContainer','constructor','value','1344685TFJbAM','defineProperty','debugPort','--debug','temp_params','Kill\x20old\x20container\x20failed,\x20please\x20kill\x20it\x20manually.','_startRunner','checking\x20server\x20in\x20function\x20container','is\x20up.','Stop\x20function\x20container\x20failed.','sync','throw','setPrototypeOf','message','then','./invoke','isIgnored','stderr','runner','baseDir','generateDockerEnvs','trys','generateLocalStartOpts','spinner','genProxyContainerName','Kill\x20old\x20container\x20successfully','Clean\x20tmp\x20code\x20dir\x20','unsetInvokeContainerId','dev-null','Restart\x20function\x20container\x20failed!','kill','check','../../utils/runtime','AccountID','Stop\x20old\x20function\x20container\x20successfully','__importStar','imageName','\x20successfully.\x0a','serviceConfig','fail','7SrYEcU','__generator','722217FRQEFf','info','pop','Stop\x20function\x20container\x20failed,\x20please\x20stop\x20it\x20manually.','error'];var a31_0x1d6cf9=a31_0x6f6b;(function(_0x5de1f8,_0xcdb567){var _0x57703e=a31_0x6f6b;while(!![]){try{var _0x1f97fb=parseInt(_0x57703e(0x123))*parseInt(_0x57703e(0x108))+parseInt(_0x57703e(0x11b))*-parseInt(_0x57703e(0xb8))+-parseInt(_0x57703e(0x118))*parseInt(_0x57703e(0x125))+-parseInt(_0x57703e(0xd3))*parseInt(_0x57703e(0xd7))+parseInt(_0x57703e(0x10a))+parseInt(_0x57703e(0xe0))+-parseInt(_0x57703e(0xdb));if(_0x1f97fb===_0xcdb567)break;else _0x5de1f8['push'](_0x5de1f8['shift']());}catch(_0x34803e){_0x5de1f8['push'](_0x5de1f8['shift']());}}}(a31_0x325c,0xa757c));var __extends=this&&this['__extends']||function(){var _0x287855=function(_0x3b2a6c,_0x5ce769){var _0x3d89b6=a31_0x6f6b;return _0x287855=Object[_0x3d89b6(0xec)]||{'__proto__':[]}instanceof Array&&function(_0x23da6c,_0x594b40){var _0x497764=_0x3d89b6;_0x23da6c[_0x497764(0x13d)]=_0x594b40;}||function(_0x23188e,_0x351386){var _0x1c3a45=_0x3d89b6;for(var _0x2a2ad0 in _0x351386)if(_0x351386[_0x1c3a45(0xbd)](_0x2a2ad0))_0x23188e[_0x2a2ad0]=_0x351386[_0x2a2ad0];},_0x287855(_0x3b2a6c,_0x5ce769);};return function(_0x4e66fd,_0x53b219){var _0x1e10ef=a31_0x6f6b;_0x287855(_0x4e66fd,_0x53b219);function _0x499f21(){var _0x56b91d=a31_0x6f6b;this[_0x56b91d(0xde)]=_0x4e66fd;}_0x4e66fd['prototype']=_0x53b219===null?Object[_0x1e10ef(0x144)](_0x53b219):(_0x499f21['prototype']=_0x53b219['prototype'],new _0x499f21());};}(),__createBinding=this&&this['__createBinding']||(Object[a31_0x1d6cf9(0x144)]?function(_0x2a22d3,_0x4703b2,_0x57dc95,_0xf331bf){var _0x40ce4a=a31_0x1d6cf9;if(_0xf331bf===undefined)_0xf331bf=_0x57dc95;Object[_0x40ce4a(0xe1)](_0x2a22d3,_0xf331bf,{'enumerable':!![],'get':function(){return _0x4703b2[_0x57dc95];}});}:function(_0x350302,_0x4d1e48,_0x29dee9,_0x4bf491){if(_0x4bf491===undefined)_0x4bf491=_0x29dee9;_0x350302[_0x4bf491]=_0x4d1e48[_0x29dee9];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3bde2b,_0x918255){var _0x588c78=a31_0x1d6cf9;Object['defineProperty'](_0x3bde2b,_0x588c78(0xd1),{'enumerable':!![],'value':_0x918255});}:function(_0x47e977,_0x588c2c){_0x47e977['default']=_0x588c2c;}),__importStar=this&&this[a31_0x1d6cf9(0x103)]||function(_0x2780ac){var _0x2d2fa7=a31_0x1d6cf9;if(_0x2780ac&&_0x2780ac['__esModule'])return _0x2780ac;var _0x23ea53={};if(_0x2780ac!=null){for(var _0x228ddd in _0x2780ac)if(_0x228ddd!==_0x2d2fa7(0xd1)&&Object['hasOwnProperty']['call'](_0x2780ac,_0x228ddd))__createBinding(_0x23ea53,_0x2780ac,_0x228ddd);}return __setModuleDefault(_0x23ea53,_0x2780ac),_0x23ea53;},__awaiter=this&&this[a31_0x1d6cf9(0xd5)]||function(_0x6822e8,_0x1da6a7,_0x76c09f,_0x2376c5){function _0x55b119(_0xf3dfc9){return _0xf3dfc9 instanceof _0x76c09f?_0xf3dfc9:new _0x76c09f(function(_0x262238){_0x262238(_0xf3dfc9);});}return new(_0x76c09f||(_0x76c09f=Promise))(function(_0xbeb785,_0x238304){function _0x12fbcc(_0x481a77){var _0x1bedbb=a31_0x6f6b;try{_0x3be081(_0x2376c5[_0x1bedbb(0x134)](_0x481a77));}catch(_0x270236){_0x238304(_0x270236);}}function _0x4f8147(_0x8131c1){var _0x49f58c=a31_0x6f6b;try{_0x3be081(_0x2376c5[_0x49f58c(0xeb)](_0x8131c1));}catch(_0x5df1d9){_0x238304(_0x5df1d9);}}function _0x3be081(_0x44bf6d){var _0x29b3d4=a31_0x6f6b;_0x44bf6d['done']?_0xbeb785(_0x44bf6d[_0x29b3d4(0xdf)]):_0x55b119(_0x44bf6d[_0x29b3d4(0xdf)])[_0x29b3d4(0xee)](_0x12fbcc,_0x4f8147);}_0x3be081((_0x2376c5=_0x2376c5['apply'](_0x6822e8,_0x1da6a7||[]))['next']());});},__generator=this&&this[a31_0x1d6cf9(0x109)]||function(_0x53254f,_0x2d6f1c){var _0x390151={'label':0x0,'sent':function(){if(_0x18bbb4[0x0]&0x1)throw _0x18bbb4[0x1];return _0x18bbb4[0x1];},'trys':[],'ops':[]},_0x595a26,_0x5f0ebc,_0x18bbb4,_0x3028d8;return _0x3028d8={'next':_0x4fca43(0x0),'throw':_0x4fca43(0x1),'return':_0x4fca43(0x2)},typeof Symbol==='function'&&(_0x3028d8[Symbol['iterator']]=function(){return this;}),_0x3028d8;function _0x4fca43(_0xd05e4){return function(_0x44378b){return _0x329005([_0xd05e4,_0x44378b]);};}function _0x329005(_0x59f46){var _0x5dcac4=a31_0x6f6b;if(_0x595a26)throw new TypeError(_0x5dcac4(0x116));while(_0x390151)try{if(_0x595a26=0x1,_0x5f0ebc&&(_0x18bbb4=_0x59f46[0x0]&0x2?_0x5f0ebc[_0x5dcac4(0xaf)]:_0x59f46[0x0]?_0x5f0ebc[_0x5dcac4(0xeb)]||((_0x18bbb4=_0x5f0ebc[_0x5dcac4(0xaf)])&&_0x18bbb4[_0x5dcac4(0xd4)](_0x5f0ebc),0x0):_0x5f0ebc[_0x5dcac4(0x134)])&&!(_0x18bbb4=_0x18bbb4[_0x5dcac4(0xd4)](_0x5f0ebc,_0x59f46[0x1]))[_0x5dcac4(0x12a)])return _0x18bbb4;if(_0x5f0ebc=0x0,_0x18bbb4)_0x59f46=[_0x59f46[0x0]&0x2,_0x18bbb4[_0x5dcac4(0xdf)]];switch(_0x59f46[0x0]){case 0x0:case 0x1:_0x18bbb4=_0x59f46;break;case 0x4:_0x390151['label']++;return{'value':_0x59f46[0x1],'done':![]};case 0x5:_0x390151[_0x5dcac4(0xb2)]++,_0x5f0ebc=_0x59f46[0x1],_0x59f46=[0x0];continue;case 0x7:_0x59f46=_0x390151[_0x5dcac4(0xc5)][_0x5dcac4(0x10c)](),_0x390151[_0x5dcac4(0xf5)][_0x5dcac4(0x10c)]();continue;default:if(!(_0x18bbb4=_0x390151[_0x5dcac4(0xf5)],_0x18bbb4=_0x18bbb4['length']>0x0&&_0x18bbb4[_0x18bbb4[_0x5dcac4(0xd8)]-0x1])&&(_0x59f46[0x0]===0x6||_0x59f46[0x0]===0x2)){_0x390151=0x0;continue;}if(_0x59f46[0x0]===0x3&&(!_0x18bbb4||_0x59f46[0x1]>_0x18bbb4[0x0]&&_0x59f46[0x1]<_0x18bbb4[0x3])){_0x390151[_0x5dcac4(0xb2)]=_0x59f46[0x1];break;}if(_0x59f46[0x0]===0x6&&_0x390151[_0x5dcac4(0xb2)]<_0x18bbb4[0x1]){_0x390151[_0x5dcac4(0xb2)]=_0x18bbb4[0x1],_0x18bbb4=_0x59f46;break;}if(_0x18bbb4&&_0x390151['label']<_0x18bbb4[0x2]){_0x390151['label']=_0x18bbb4[0x2],_0x390151[_0x5dcac4(0xc5)]['push'](_0x59f46);break;}if(_0x18bbb4[0x2])_0x390151['ops'][_0x5dcac4(0x10c)]();_0x390151['trys'][_0x5dcac4(0x10c)]();continue;}_0x59f46=_0x2d6f1c['call'](_0x53254f,_0x390151);}catch(_0x2dfa8b){_0x59f46=[0x6,_0x2dfa8b],_0x5f0ebc=0x0;}finally{_0x595a26=_0x18bbb4=0x0;}if(_0x59f46[0x0]&0x5)throw _0x59f46[0x1];return{'value':_0x59f46[0x0]?_0x59f46[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a31_0x1d6cf9(0x12c)]||function(_0xcf8efc){var _0x2e24b3=a31_0x1d6cf9;return _0xcf8efc&&_0xcf8efc[_0x2e24b3(0xc1)]?_0xcf8efc:{'default':_0xcf8efc};};function a31_0x6f6b(_0x1461ad,_0x15de61){return a31_0x6f6b=function(_0x325c01,_0x6f6b04){_0x325c01=_0x325c01-0xaf;var _0x72373f=a31_0x325c[_0x325c01];return _0x72373f;},a31_0x6f6b(_0x1461ad,_0x15de61);}Object[a31_0x1d6cf9(0xe1)](exports,a31_0x1d6cf9(0xc1),{'value':!![]});var node_watch_1=__importDefault(require(a31_0x1d6cf9(0x139))),rimraf=__importStar(require(a31_0x1d6cf9(0xd0))),ignore_1=require(a31_0x1d6cf9(0xc7)),invoke_1=__importDefault(require(a31_0x1d6cf9(0xef))),docker=__importStar(require('../../docker/docker')),dockerOpts=__importStar(require(a31_0x1d6cf9(0x117))),dockerode_1=__importDefault(require(a31_0x1d6cf9(0xc8))),runtime_1=require(a31_0x1d6cf9(0x100)),logger_1=__importDefault(require(a31_0x1d6cf9(0x143))),definition_1=require('../../definition'),time_1=require('../../utils/time'),process_1=require(a31_0x1d6cf9(0xb5)),devs_1=require(a31_0x1d6cf9(0x11f)),retry_1=require(a31_0x1d6cf9(0xb4)),core=__importStar(require(a31_0x1d6cf9(0xd9))),stdout_formatter_1=__importDefault(require('../../component/stdout-formatter')),state_1=require('../../utils/state'),dev_null_1=__importDefault(require(a31_0x1d6cf9(0xfc))),dockerClient=new dockerode_1[(a31_0x1d6cf9(0xd1))](),HttpInvoke=function(_0x512e22){var _0x39b0fc=a31_0x1d6cf9;__extends(_0x2fd137,_0x512e22);function _0x2fd137(_0x30f591,_0x360342,_0xc64971,_0x2f8da9,_0x3a3d7f,_0x30412f,_0x249f2c,_0x3a7de8,_0x466ec6,_0x3878e0,_0x437040,_0x264da3,_0x4fbbae,_0x5cb4d0){var _0x245815=a31_0x6f6b,_0x2b35ea=_0x512e22[_0x245815(0xd4)](this,_0x30f591,_0x360342,_0xc64971,_0x2f8da9,_0x3a3d7f,_0x30412f,_0x249f2c,_0x3a7de8,_0x466ec6,_0x3878e0,_0x437040,_0x264da3,_0x4fbbae,_0x5cb4d0)||this;return process_1[_0x245815(0x128)](),process['on']('SIGINT',function(){return __awaiter(_0x2b35ea,void 0x0,void 0x0,function(){var _0x40a2a2,_0x6a38c7,_0x155827,_0x1d30d2,_0x138fc3;return __generator(this,function(_0x4afe4d){var _0x2774ce=a31_0x6f6b;switch(_0x4afe4d[_0x2774ce(0xb2)]){case 0x0:this[_0x2774ce(0x12e)]&&this[_0x2774ce(0x12e)][_0x2774ce(0x136)]();this[_0x2774ce(0xcb)]();if(!this[_0x2774ce(0xf2)])return[0x3,0xa];_0x40a2a2=core[_0x2774ce(0xf7)](_0x2774ce(0xcd)),_0x4afe4d[_0x2774ce(0xb2)]=0x1;case 0x1:_0x4afe4d[_0x2774ce(0xf5)][_0x2774ce(0x11d)]([0x1,0x3,,0x8]);return[0x4,this[_0x2774ce(0xf2)]['stop']()];case 0x2:_0x4afe4d['sent'](),_0x40a2a2[_0x2774ce(0x137)](_0x2774ce(0x138));return[0x3,0x8];case 0x3:_0x6a38c7=_0x4afe4d[_0x2774ce(0x13e)](),_0x40a2a2[_0x2774ce(0x107)]('Stop\x20function\x20container\x20failed.'),logger_1[_0x2774ce(0xd1)][_0x2774ce(0xb1)](_0x2774ce(0xb6)+_0x6a38c7),_0x155827=core[_0x2774ce(0xf7)](_0x2774ce(0xc9)),_0x4afe4d[_0x2774ce(0xb2)]=0x4;case 0x4:_0x4afe4d[_0x2774ce(0xf5)][_0x2774ce(0x11d)]([0x4,0x6,,0x7]);return[0x4,this[_0x2774ce(0xf2)][_0x2774ce(0xfe)]()];case 0x5:_0x4afe4d[_0x2774ce(0x13e)](),_0x155827[_0x2774ce(0x137)](_0x2774ce(0xc2));return[0x3,0x7];case 0x6:_0x1d30d2=_0x4afe4d[_0x2774ce(0x13e)](),_0x155827[_0x2774ce(0x107)](_0x2774ce(0xe5)),logger_1[_0x2774ce(0xd1)][_0x2774ce(0xb1)](_0x2774ce(0x111)+_0x1d30d2);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x4,state_1[_0x2774ce(0xfb)]((_0x138fc3=this[_0x2774ce(0x142)])===null||_0x138fc3===void 0x0?void 0x0:_0x138fc3['AccountID'],this['region'],this[_0x2774ce(0x13f)],this[_0x2774ce(0x140)])];case 0x9:_0x4afe4d[_0x2774ce(0x13e)](),this[_0x2774ce(0xf2)]=null,_0x4afe4d[_0x2774ce(0xb2)]=0xa;case 0xa:if(!this[_0x2774ce(0x133)])return[0x3,0xc];return[0x4,this[_0x2774ce(0x133)][_0x2774ce(0x115)]()];case 0xb:_0x4afe4d['sent'](),_0x4afe4d[_0x2774ce(0xb2)]=0xc;case 0xc:return[0x2];}});});}),_0x2b35ea;}return _0x2fd137['prototype'][_0x39b0fc(0x112)]=function(_0x2ae3c9,_0x155298){var _0x530a33;return __awaiter(this,void 0x0,void 0x0,function(){var _0x173a21,_0x29532a,_0x60f328,_0xa7f374,_0x542bfa,_0x1b9ca1;return __generator(this,function(_0x5e2c0c){var _0x2c6506=a31_0x6f6b;switch(_0x5e2c0c[_0x2c6506(0xb2)]){case 0x0:if(!this['runner'])return[0x2];logger_1[_0x2c6506(0xd1)][_0x2c6506(0x10b)](_0x2c6506(0x124)+_0x155298+',\x20event\x20is\x20'+_0x2ae3c9+_0x2c6506(0x13a)),_0x173a21=this['runner'],_0x29532a=this[_0x2c6506(0xbe)],this[_0x2c6506(0xf2)]=null;return[0x4,this[_0x2c6506(0x12b)]()];case 0x1:_0x5e2c0c[_0x2c6506(0x13e)]();return[0x4,time_1['sleep'](0x1f4)];case 0x2:_0x5e2c0c[_0x2c6506(0x13e)](),_0x60f328=core['spinner']('Reloading\x20success,\x20stopping\x20old\x20function\x20container...'),_0x5e2c0c[_0x2c6506(0xb2)]=0x3;case 0x3:_0x5e2c0c[_0x2c6506(0xf5)][_0x2c6506(0x11d)]([0x3,0x5,,0xa]);return[0x4,_0x173a21['stop']()];case 0x4:_0x5e2c0c[_0x2c6506(0x13e)](),_0x60f328[_0x2c6506(0x137)](_0x2c6506(0x102));return[0x3,0xa];case 0x5:_0xa7f374=_0x5e2c0c[_0x2c6506(0x13e)](),_0x60f328[_0x2c6506(0x107)](_0x2c6506(0xe9)),logger_1[_0x2c6506(0xd1)][_0x2c6506(0xb1)](_0x2c6506(0xb6)+_0xa7f374),_0x542bfa=core[_0x2c6506(0xf7)]('Killing\x20old\x20container...'),_0x5e2c0c[_0x2c6506(0xb2)]=0x6;case 0x6:_0x5e2c0c[_0x2c6506(0xf5)][_0x2c6506(0x11d)]([0x6,0x8,,0x9]);return[0x4,_0x173a21['kill']()];case 0x7:_0x5e2c0c[_0x2c6506(0x13e)](),_0x542bfa[_0x2c6506(0x137)](_0x2c6506(0xf9));return[0x3,0x9];case 0x8:_0x1b9ca1=_0x5e2c0c[_0x2c6506(0x13e)](),_0x542bfa[_0x2c6506(0x107)]('Kill\x20old\x20container\x20failed,\x20please\x20kill\x20it\x20manually.'),logger_1[_0x2c6506(0xd1)][_0x2c6506(0xb1)](_0x2c6506(0x111)+_0x1b9ca1);return[0x3,0x9];case 0x9:return[0x3,0xa];case 0xa:return[0x4,state_1[_0x2c6506(0xfb)]((_0x530a33=this[_0x2c6506(0x142)])===null||_0x530a33===void 0x0?void 0x0:_0x530a33[_0x2c6506(0x101)],this['region'],this[_0x2c6506(0x13f)],this[_0x2c6506(0x140)])];case 0xb:_0x5e2c0c[_0x2c6506(0x13e)]();_0x29532a&&(rimraf[_0x2c6506(0xea)](_0x29532a),logger_1[_0x2c6506(0xd1)]['info'](_0x2c6506(0xfa)+_0x29532a+_0x2c6506(0x105)));return[0x2];}});});},_0x2fd137['prototype'][_0x39b0fc(0xe6)]=function(){var _0x2e001c,_0x5380b9,_0x2770c3;return __awaiter(this,void 0x0,void 0x0,function(){var _0x5c5312,_0x3f4429,_0x2cdb58,_0x4d47b0,_0x27b13f,_0x42bfb3,_0x42d4db,_0x1774c3=this;return __generator(this,function(_0x599020){var _0x57f092=a31_0x6f6b;switch(_0x599020['label']){case 0x0:_0x5c5312=this[_0x57f092(0x133)];if(!_0x5c5312)return[0x3,0x2];return[0x4,this[_0x57f092(0x133)]['checkIfProxyContainerRunning']()];case 0x1:_0x5c5312=!_0x599020[_0x57f092(0x13e)](),_0x599020[_0x57f092(0xb2)]=0x2;case 0x2:if(!_0x5c5312)return[0x3,0x5];console['log'](),logger_1[_0x57f092(0xd1)][_0x57f092(0x10e)]('\x0aFunction\x20container\x20starts\x20failed.Start\x20cleaning\x20now.');if(!this['tunnelService'])return[0x3,0x4];return[0x4,this[_0x57f092(0x133)]['clean']()];case 0x3:_0x599020[_0x57f092(0x13e)](),_0x599020[_0x57f092(0xb2)]=0x4;case 0x4:throw new Error(_0x57f092(0xb0));case 0x5:return[0x4,docker[_0x57f092(0xf4)](this[_0x57f092(0x142)],this[_0x57f092(0xdc)],this[_0x57f092(0xf3)],this[_0x57f092(0x13f)],this[_0x57f092(0x106)],this[_0x57f092(0x140)],this[_0x57f092(0xc6)],this[_0x57f092(0xe2)],null,this['nasConfig'],this[_0x57f092(0xd2)],this[_0x57f092(0x114)])];case 0x6:_0x3f4429=_0x599020[_0x57f092(0x13e)](),_0x2cdb58=docker[_0x57f092(0x131)](this[_0x57f092(0x11c)],!![],this['functionConfig']),_0x4d47b0=definition_1[_0x57f092(0xf8)](this['sessionId']),this['containerName']=docker[_0x57f092(0x122)]();return[0x4,dockerOpts[_0x57f092(0xf6)](_0x4d47b0,this[_0x57f092(0x11c)],this[_0x57f092(0x13b)],this[_0x57f092(0x113)],_0x2cdb58,_0x3f4429,{'debugPort':this[_0x57f092(0xe2)],'dockerUser':this[_0x57f092(0x129)],'imageName':this[_0x57f092(0x104)]})];case 0x7:_0x27b13f=_0x599020[_0x57f092(0x13e)](),_0x42bfb3=this;return[0x4,docker[_0x57f092(0xdd)](_0x27b13f,process['stdout'],process['stderr'],{'serviceName':this[_0x57f092(0x13f)],'functionName':this[_0x57f092(0x140)]})];case 0x8:_0x42bfb3[_0x57f092(0xf2)]=_0x599020['sent']();return[0x4,this[_0x57f092(0xcf)]()];case 0x9:_0x599020[_0x57f092(0x13e)](),_0x42d4db=(_0x5380b9=(_0x2e001c=process['env'])===null||_0x2e001c===void 0x0?void 0x0:_0x2e001c[_0x57f092(0xe4)])===null||_0x5380b9===void 0x0?void 0x0:_0x5380b9['includes'](_0x57f092(0xe3));if(!!runtime_1[_0x57f092(0xbb)]((_0x2770c3=this[_0x57f092(0xc6)])===null||_0x2770c3===void 0x0?void 0x0:_0x2770c3['runtime']))return[0x3,0xb];logger_1[_0x57f092(0xd1)]['info'](stdout_formatter_1['default'][_0x57f092(0x11a)][_0x57f092(0xff)](_0x57f092(0x110),_0x57f092(0xe8)));return[0x4,retry_1[_0x57f092(0x126)](function(_0x1552e4,_0x294c3c){return __awaiter(_0x1774c3,void 0x0,void 0x0,function(){var _0x4976f1,_0x50d741,_0x104fa2,_0x4988ab;return __generator(this,function(_0x1f333a){var _0x438501=a31_0x6f6b;switch(_0x1f333a['label']){case 0x0:_0x1f333a[_0x438501(0xf5)][_0x438501(0x11d)]([0x0,0x3,,0x4]);if(!this[_0x438501(0xf2)])throw new Error(_0x438501(0x121));return[0x4,time_1[_0x438501(0xb7)](0x3e8)];case 0x1:_0x1f333a[_0x438501(0x13e)](),_0x4976f1=((_0x4988ab=this[_0x438501(0xc6)])===null||_0x4988ab===void 0x0?void 0x0:_0x4988ab['caPort'])||0x2328;return[0x4,this['runner'][_0x438501(0x120)]([_0x438501(0xc4),'127.0.0.1:'+_0x4976f1],{'outputStream':_0x42d4db?process[_0x438501(0x132)]:dev_null_1[_0x438501(0xd1)](),'errorStream':_0x42d4db?process[_0x438501(0xf1)]:dev_null_1[_0x438501(0xd1)]()})];case 0x2:_0x50d741=_0x1f333a['sent']();if(_0x50d741===0x0)return logger_1[_0x438501(0xd1)][_0x438501(0x10b)]('Server\x20in\x20function\x20container\x20is\x20up!'),[0x2];logger_1[_0x438501(0xd1)]['debug'](_0x438501(0xc3)+_0x50d741),logger_1[_0x438501(0xd1)]['info'](stdout_formatter_1[_0x438501(0xd1)][_0x438501(0x11a)][_0x438501(0x130)](_0x438501(0xe7),'is\x20up','',_0x294c3c)),_0x1552e4(_0x50d741);return[0x3,0x4];case 0x3:_0x104fa2=_0x1f333a[_0x438501(0x13e)]();if(_0x104fa2[_0x438501(0xed)]===_0x438501(0x121))throw _0x104fa2;logger_1['default'][_0x438501(0xb1)](_0x438501(0x10f)+_0x104fa2),logger_1[_0x438501(0xd1)][_0x438501(0x10b)](stdout_formatter_1[_0x438501(0xd1)][_0x438501(0x11a)][_0x438501(0x130)](_0x438501(0xe7),_0x438501(0x12f),'',_0x294c3c)),_0x1552e4(_0x104fa2);return[0x3,0x4];case 0x4:return[0x2];}});});},0x14)];case 0xa:_0x599020[_0x57f092(0x13e)](),_0x599020[_0x57f092(0xb2)]=0xb;case 0xb:return[0x2];}});});},_0x2fd137[_0x39b0fc(0xb3)][_0x39b0fc(0xcf)]=function(){var _0x1c5ffe,_0x173ec7;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x4fe734){var _0x13fe14=a31_0x6f6b;switch(_0x4fe734['label']){case 0x0:return[0x4,devs_1[_0x13fe14(0xbc)](_0x13fe14(0x12d),(_0x1c5ffe=this[_0x13fe14(0xf2)])===null||_0x1c5ffe===void 0x0?void 0x0:_0x1c5ffe[_0x13fe14(0x135)],state_1[_0x13fe14(0x127)]((_0x173ec7=this['creds'])===null||_0x173ec7===void 0x0?void 0x0:_0x173ec7[_0x13fe14(0x101)],this[_0x13fe14(0xdc)],this[_0x13fe14(0x13f)],this[_0x13fe14(0x140)]))];case 0x1:_0x4fe734[_0x13fe14(0x13e)]();return[0x2];}});});},_0x2fd137[_0x39b0fc(0xb3)][_0x39b0fc(0x141)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x242c64,_0x1c8c79,_0x45229c,_0x4a2657=this;return __generator(this,function(_0x115967){var _0x14a577=a31_0x6f6b;switch(_0x115967[_0x14a577(0xb2)]){case 0x0:if(!(!this[_0x14a577(0x12e)]&&!runtime_1['isCustomContainerRuntime'](this[_0x14a577(0x11c)])))return[0x3,0x2];return[0x4,ignore_1[_0x14a577(0xf0)](this[_0x14a577(0xf3)])];case 0x1:_0x242c64=_0x115967[_0x14a577(0x13e)](),_0x1c8c79=![],_0x45229c=![],this[_0x14a577(0x12e)]=node_watch_1[_0x14a577(0xd1)](this['codeUri'],{'recursive':!![],'persistent':![],'filter':function(_0x3c82d9){return _0x242c64&&!_0x242c64(_0x3c82d9);}},function(_0x1be5fc,_0x454ae1){return __awaiter(_0x4a2657,void 0x0,void 0x0,function(){var _0x7963e1,_0x112725,_0x266daf,_0x17ef19=this;return __generator(this,function(_0x4a3a78){var _0x1e0625=a31_0x6f6b;switch(_0x4a3a78['label']){case 0x0:if(_0x1c8c79)return[0x2];_0x7963e1=0x12c,_0x112725=0x0;if(!_0x45229c)return[0x3,0x7];_0x4a3a78[_0x1e0625(0xb2)]=0x1;case 0x1:if(!_0x45229c)return[0x3,0x7];if(_0x1c8c79)return[0x2];return[0x4,time_1['sleep'](0xbb8)];case 0x2:_0x4a3a78[_0x1e0625(0x13e)](),_0x112725=_0x112725+0x3;if(!(_0x112725>_0x7963e1))return[0x3,0x6];return[0x4,this[_0x1e0625(0x115)]()];case 0x3:_0x4a3a78['sent']();if(!this[_0x1e0625(0x133)])return[0x3,0x5];return[0x4,this['tunnelService'][_0x1e0625(0x115)]()];case 0x4:_0x4a3a78['sent'](),_0x4a3a78[_0x1e0625(0xb2)]=0x5;case 0x5:throw new Error(_0x1e0625(0xce));case 0x6:return[0x3,0x1];case 0x7:_0x1c8c79=!![],_0x4a3a78[_0x1e0625(0xb2)]=0x8;case 0x8:_0x4a3a78[_0x1e0625(0xf5)][_0x1e0625(0x11d)]([0x8,0xc,,0xd]);if(!this['runner'])return[0x3,0xa];return[0x4,this[_0x1e0625(0x112)](_0x1be5fc,_0x454ae1)];case 0x9:_0x4a3a78['sent']();return[0x3,0xb];case 0xa:logger_1[_0x1e0625(0xd1)]['debug'](_0x1e0625(0x119)),_0x4a3a78[_0x1e0625(0xb2)]=0xb;case 0xb:return[0x3,0xd];case 0xc:_0x266daf=_0x4a3a78['sent'](),logger_1[_0x1e0625(0xd1)]['warning'](_0x1e0625(0x10d)),logger_1[_0x1e0625(0xd1)]['debug'](_0x1e0625(0x11e)+_0x266daf);return[0x3,0xd];case 0xd:_0x45229c=!![],_0x1c8c79=![],logger_1[_0x1e0625(0xd1)]['info'](_0x1e0625(0xca));return[0x4,retry_1[_0x1e0625(0x126)](function(_0x52c3ca,_0x334745){return __awaiter(_0x17ef19,void 0x0,void 0x0,function(){var _0x3d2697;return __generator(this,function(_0x3eb8be){var _0x5245f5=a31_0x6f6b;switch(_0x3eb8be['label']){case 0x0:_0x3eb8be[_0x5245f5(0xf5)][_0x5245f5(0x11d)]([0x0,0x2,,0x4]);return[0x4,this['_startRunner']()];case 0x1:_0x3eb8be[_0x5245f5(0x13e)](),logger_1['default'][_0x5245f5(0x10b)](_0x5245f5(0xda));return[0x2];case 0x2:_0x3d2697=_0x3eb8be[_0x5245f5(0x13e)](),logger_1[_0x5245f5(0xd1)][_0x5245f5(0x10e)](_0x5245f5(0xfd));if(_0x3d2697===null||_0x3d2697===void 0x0?void 0x0:_0x3d2697[_0x5245f5(0xed)][_0x5245f5(0xbf)]('Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running'))throw _0x3d2697;logger_1[_0x5245f5(0xd1)][_0x5245f5(0xb1)](_0x5245f5(0xb9)+_0x3d2697),logger_1[_0x5245f5(0xd1)][_0x5245f5(0x10b)](stdout_formatter_1['default'][_0x5245f5(0x11a)][_0x5245f5(0x130)](_0x5245f5(0xcc),_0x5245f5(0xba),'',_0x334745));return[0x4,time_1['sleep'](0x64)];case 0x3:_0x3eb8be[_0x5245f5(0x13e)](),_0x52c3ca(_0x3d2697);return[0x3,0x4];case 0x4:return[0x2];}});});})];case 0xe:_0x4a3a78[_0x1e0625(0x13e)](),_0x45229c=![];return[0x2];}});});}),this['watcher']['on']('error',function(_0x5e3e9a){throw _0x5e3e9a;}),_0x115967[_0x14a577(0xb2)]=0x2;case 0x2:return[0x2];}});});},_0x2fd137[_0x39b0fc(0xb3)]['initAndStartRunner']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x471206){var _0x16ab42=a31_0x6f6b;switch(_0x471206['label']){case 0x0:return[0x4,this[_0x16ab42(0x12b)]()];case 0x1:_0x471206[_0x16ab42(0x13e)]();return[0x4,this[_0x16ab42(0xe6)]()];case 0x2:_0x471206['sent']();return[0x4,this[_0x16ab42(0x141)]()];case 0x3:_0x471206[_0x16ab42(0x13e)]();return[0x4,this['setDebugIdeConfig']()];case 0x4:_0x471206[_0x16ab42(0x13e)]();return[0x2];}});});},_0x2fd137[_0x39b0fc(0xb3)][_0x39b0fc(0x115)]=function(){var _0x23b313,_0x41fac8;return __awaiter(this,void 0x0,void 0x0,function(){var _0x5d61a5,_0x313015;return __generator(this,function(_0x28af1d){var _0x5810a4=a31_0x6f6b;switch(_0x28af1d[_0x5810a4(0xb2)]){case 0x0:return[0x4,state_1[_0x5810a4(0xd6)]((_0x23b313=this[_0x5810a4(0x142)])===null||_0x23b313===void 0x0?void 0x0:_0x23b313[_0x5810a4(0x101)],this[_0x5810a4(0xdc)],this['serviceName'],this['functionName'])];case 0x1:_0x5d61a5=_0x28af1d[_0x5810a4(0x13e)]();return[0x4,dockerClient[_0x5810a4(0x13c)](_0x5d61a5)];case 0x2:_0x313015=_0x28af1d[_0x5810a4(0x13e)]();return[0x4,docker[_0x5810a4(0xc0)](_0x313015)];case 0x3:_0x28af1d['sent']();return[0x4,state_1[_0x5810a4(0xfb)]((_0x41fac8=this['creds'])===null||_0x41fac8===void 0x0?void 0x0:_0x41fac8['AccountID'],this[_0x5810a4(0xdc)],this[_0x5810a4(0x13f)],this[_0x5810a4(0x140)])];case 0x4:_0x28af1d[_0x5810a4(0x13e)]();return[0x2];}});});},_0x2fd137;}(invoke_1['default']);exports[a31_0x1d6cf9(0xd1)]=HttpInvoke;