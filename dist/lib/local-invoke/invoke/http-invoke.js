'use strict';var a31_0x56fd=['../../../common/logger','region','Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running,\x20please\x20retry\x20\x27setup\x27\x20method.','initAndStartRunner','then','Function\x20container\x20starts\x20failed\x20because\x20proxy\x20container\x20is\x20not\x20running','close','Server\x20in\x20function\x20container\x20is\x20up!','--debug','saveInvokeContainerId','debugPort','win32','Stop\x20function\x20container\x20error:\x20','env','baseDir','Stop\x20old\x20function\x20container\x20successfully','__generator','Received\x20canncel\x20request,\x20stopping\x20running\x20function\x20container...','17085mBnEzZ','ops','setDebugIdeConfig','stdoutFormatter','sync','\x20successfully.\x0a','push','sleep','functionName','exit','_disableRunner','detect\x20code\x20changes,\x20but\x20no\x20runner\x20found,\x20starting....','dockerUser','__setModuleDefault','checking\x20server\x20in\x20function\x20container','nasConfig','@serverless-devs/core','Stop\x20function\x20container\x20successfully','runner','imageName','dev-null',',\x20auto\x20reloading...','info','generateDockerEnvs','setKVInState','platform','return','debug','server\x20in\x20function\x20container','Restart\x20function\x20container\x20timeout\x20after\x20300s!Please\x20check\x20if\x20docker\x20runs\x20normally,\x20then\x20runs\x20\x27clean\x27\x20method\x20and\x20try\x20\x27setup\x27\x20again.','Kill\x20old\x20container\x20failed,\x20please\x20kill\x20it\x20manually.','watcher','invokeContainerId','function\x20container','dockerode','create','generateRamdomContainerName','error','hasOwnProperty','__importDefault','kill','init','message','creds','../../definition','Kill\x20function\x20container\x20failed,\x20error:\x20','__esModule','rimraf','146983cYZSuh','511509vpXDDC','454029dttjYH','done','Killing\x20old\x20container...','Stop\x20function\x20container\x20failed,\x20error:\x20','generateLocalStartOpts','__createBinding','Server\x20is\x20not\x20up.\x20Result\x20is\x20:','isCustomContainerRuntime','startContainer','genStateId','log','sent','is\x20up','trys','getContainer','constructor','3jTVANx','stdout','cleanUnzippedCodeDir','apply','unsetInvokeContainerId','isIgnored','../../utils/devs','warning','Kill\x20old\x20container\x20successfully',',\x20event\x20is\x20','debugArgs','function','_startRunner','1LcelZf','serviceName','94791ARcaor','prototype','iterator','../../docker/docker-opts','temp_params','curl','clean','stderr','../../utils/time','Function\x20container\x20is\x20closed,\x20exit!','includes','genProxyContainerName','Stop\x20function\x20container\x20failed,\x20please\x20stop\x20it\x20manually.','46YyUflP','fail','defineProperty','succeed','call','Restart\x20function\x20container\x20failed,\x20error\x20is:\x20\x0a','stop','Detecting\x20code\x20changes\x20and\x20Restarting\x20funtion\x20container...','setPrototypeOf','pop','../ignore','150828KYkmSE','checkIfProxyContainerRunning','__extends','Checking\x20server\x20in\x20function\x20container\x20failed,\x20error:\x20','functionConfig','127.0.0.1:','SIGINT','__importStar','check','throw','Stop\x20function\x20container\x20failed.','AccountID','239542jERkTL','4YEZvmr','tunnelService','../../component/stdout-formatter','runtime','next','is\x20up.','node-watch','initWatch','Clean\x20tmp\x20code\x20dir\x20','Generator\x20is\x20already\x20executing.','restart','./invoke','stopContainer','promiseRetry','label','spinner','default','retry','length','__proto__','Restart\x20function\x20container\x20succeed!\x20Please\x20try\x20\x27invoke\x27\x20again.','value'];var a31_0x3bdb30=a31_0x1817;(function(_0x555bb8,_0x1a9b86){var _0x22b8eb=a31_0x1817;while(!![]){try{var _0xd70e18=parseInt(_0x22b8eb(0x24c))+-parseInt(_0x22b8eb(0x1fb))*-parseInt(_0x22b8eb(0x1bb))+parseInt(_0x22b8eb(0x1d3))*-parseInt(_0x22b8eb(0x1c6))+parseInt(_0x22b8eb(0x24a))*parseInt(_0x22b8eb(0x22d))+-parseInt(_0x22b8eb(0x1d2))+-parseInt(_0x22b8eb(0x22b))*-parseInt(_0x22b8eb(0x23d))+-parseInt(_0x22b8eb(0x22c));if(_0xd70e18===_0x1a9b86)break;else _0x555bb8['push'](_0x555bb8['shift']());}catch(_0x101dc1){_0x555bb8['push'](_0x555bb8['shift']());}}}(a31_0x56fd,0x66dc4));var __extends=this&&this[a31_0x3bdb30(0x1c8)]||function(){var _0x3a15ca=function(_0x3b1913,_0xa4b19c){var _0x53ed47=a31_0x1817;return _0x3a15ca=Object[_0x53ed47(0x1c3)]||{'__proto__':[]}instanceof Array&&function(_0x2ad362,_0x4aabdc){var _0x254f20=_0x53ed47;_0x2ad362[_0x254f20(0x1e6)]=_0x4aabdc;}||function(_0x98b6ac,_0x4742f2){for(var _0x344555 in _0x4742f2)if(_0x4742f2['hasOwnProperty'](_0x344555))_0x98b6ac[_0x344555]=_0x4742f2[_0x344555];},_0x3a15ca(_0x3b1913,_0xa4b19c);};return function(_0x259a91,_0x4d6186){var _0x29e073=a31_0x1817;_0x3a15ca(_0x259a91,_0x4d6186);function _0x399dd2(){var _0x3146ba=a31_0x1817;this[_0x3146ba(0x23c)]=_0x259a91;}_0x259a91['prototype']=_0x4d6186===null?Object[_0x29e073(0x21e)](_0x4d6186):(_0x399dd2[_0x29e073(0x24d)]=_0x4d6186['prototype'],new _0x399dd2());};}(),__createBinding=this&&this[a31_0x3bdb30(0x232)]||(Object['create']?function(_0x50deee,_0x7413cf,_0x155250,_0x5ee2a9){var _0x19dd69=a31_0x3bdb30;if(_0x5ee2a9===undefined)_0x5ee2a9=_0x155250;Object[_0x19dd69(0x1bd)](_0x50deee,_0x5ee2a9,{'enumerable':!![],'get':function(){return _0x7413cf[_0x155250];}});}:function(_0x3ef771,_0xdc5e0c,_0x31ef1d,_0xb72c26){if(_0xb72c26===undefined)_0xb72c26=_0x31ef1d;_0x3ef771[_0xb72c26]=_0xdc5e0c[_0x31ef1d];}),__setModuleDefault=this&&this[a31_0x3bdb30(0x208)]||(Object[a31_0x3bdb30(0x21e)]?function(_0x479b23,_0x243ec8){var _0x263143=a31_0x3bdb30;Object[_0x263143(0x1bd)](_0x479b23,_0x263143(0x1e3),{'enumerable':!![],'value':_0x243ec8});}:function(_0x10b2a1,_0x5701a5){_0x10b2a1['default']=_0x5701a5;}),__importStar=this&&this[a31_0x3bdb30(0x1cd)]||function(_0x306ce9){var _0x227b08=a31_0x3bdb30;if(_0x306ce9&&_0x306ce9[_0x227b08(0x229)])return _0x306ce9;var _0x45c511={};if(_0x306ce9!=null){for(var _0x331815 in _0x306ce9)if(_0x331815!==_0x227b08(0x1e3)&&Object[_0x227b08(0x221)][_0x227b08(0x1bf)](_0x306ce9,_0x331815))__createBinding(_0x45c511,_0x306ce9,_0x331815);}return __setModuleDefault(_0x45c511,_0x306ce9),_0x45c511;},__awaiter=this&&this['__awaiter']||function(_0x2bca69,_0x24c207,_0x5c5d69,_0x103e0a){function _0xb77b86(_0x5efdfd){return _0x5efdfd instanceof _0x5c5d69?_0x5efdfd:new _0x5c5d69(function(_0x4b8d21){_0x4b8d21(_0x5efdfd);});}return new(_0x5c5d69||(_0x5c5d69=Promise))(function(_0x236c1f,_0x248768){var _0x339941=a31_0x1817;function _0x4535ad(_0x5f27ad){var _0x4d3abc=a31_0x1817;try{_0x4645d8(_0x103e0a[_0x4d3abc(0x1d7)](_0x5f27ad));}catch(_0x53f94b){_0x248768(_0x53f94b);}}function _0x483191(_0xfaa298){try{_0x4645d8(_0x103e0a['throw'](_0xfaa298));}catch(_0x340769){_0x248768(_0x340769);}}function _0x4645d8(_0x281ff0){var _0x446538=a31_0x1817;_0x281ff0['done']?_0x236c1f(_0x281ff0['value']):_0xb77b86(_0x281ff0[_0x446538(0x1e8)])[_0x446538(0x1ed)](_0x4535ad,_0x483191);}_0x4645d8((_0x103e0a=_0x103e0a[_0x339941(0x240)](_0x2bca69,_0x24c207||[]))[_0x339941(0x1d7)]());});},__generator=this&&this[a31_0x3bdb30(0x1f9)]||function(_0x13fe6b,_0x3494d1){var _0x491326=a31_0x3bdb30,_0x319717={'label':0x0,'sent':function(){if(_0xd19964[0x0]&0x1)throw _0xd19964[0x1];return _0xd19964[0x1];},'trys':[],'ops':[]},_0x61ef1,_0x488484,_0xd19964,_0x2ec41e;return _0x2ec41e={'next':_0x166497(0x0),'throw':_0x166497(0x1),'return':_0x166497(0x2)},typeof Symbol===_0x491326(0x248)&&(_0x2ec41e[Symbol[_0x491326(0x24e)]]=function(){return this;}),_0x2ec41e;function _0x166497(_0x36d445){return function(_0x12fe84){return _0x1c5257([_0x36d445,_0x12fe84]);};}function _0x1c5257(_0x573d13){var _0x38966b=_0x491326;if(_0x61ef1)throw new TypeError(_0x38966b(0x1dc));while(_0x319717)try{if(_0x61ef1=0x1,_0x488484&&(_0xd19964=_0x573d13[0x0]&0x2?_0x488484[_0x38966b(0x215)]:_0x573d13[0x0]?_0x488484[_0x38966b(0x1cf)]||((_0xd19964=_0x488484[_0x38966b(0x215)])&&_0xd19964[_0x38966b(0x1bf)](_0x488484),0x0):_0x488484[_0x38966b(0x1d7)])&&!(_0xd19964=_0xd19964[_0x38966b(0x1bf)](_0x488484,_0x573d13[0x1]))[_0x38966b(0x22e)])return _0xd19964;if(_0x488484=0x0,_0xd19964)_0x573d13=[_0x573d13[0x0]&0x2,_0xd19964[_0x38966b(0x1e8)]];switch(_0x573d13[0x0]){case 0x0:case 0x1:_0xd19964=_0x573d13;break;case 0x4:_0x319717[_0x38966b(0x1e1)]++;return{'value':_0x573d13[0x1],'done':![]};case 0x5:_0x319717[_0x38966b(0x1e1)]++,_0x488484=_0x573d13[0x1],_0x573d13=[0x0];continue;case 0x7:_0x573d13=_0x319717[_0x38966b(0x1fc)][_0x38966b(0x1c4)](),_0x319717[_0x38966b(0x23a)]['pop']();continue;default:if(!(_0xd19964=_0x319717[_0x38966b(0x23a)],_0xd19964=_0xd19964['length']>0x0&&_0xd19964[_0xd19964[_0x38966b(0x1e5)]-0x1])&&(_0x573d13[0x0]===0x6||_0x573d13[0x0]===0x2)){_0x319717=0x0;continue;}if(_0x573d13[0x0]===0x3&&(!_0xd19964||_0x573d13[0x1]>_0xd19964[0x0]&&_0x573d13[0x1]<_0xd19964[0x3])){_0x319717['label']=_0x573d13[0x1];break;}if(_0x573d13[0x0]===0x6&&_0x319717[_0x38966b(0x1e1)]<_0xd19964[0x1]){_0x319717[_0x38966b(0x1e1)]=_0xd19964[0x1],_0xd19964=_0x573d13;break;}if(_0xd19964&&_0x319717['label']<_0xd19964[0x2]){_0x319717[_0x38966b(0x1e1)]=_0xd19964[0x2],_0x319717[_0x38966b(0x1fc)][_0x38966b(0x201)](_0x573d13);break;}if(_0xd19964[0x2])_0x319717['ops'][_0x38966b(0x1c4)]();_0x319717[_0x38966b(0x23a)][_0x38966b(0x1c4)]();continue;}_0x573d13=_0x3494d1[_0x38966b(0x1bf)](_0x13fe6b,_0x319717);}catch(_0x534885){_0x573d13=[0x6,_0x534885],_0x488484=0x0;}finally{_0x61ef1=_0xd19964=0x0;}if(_0x573d13[0x0]&0x5)throw _0x573d13[0x1];return{'value':_0x573d13[0x0]?_0x573d13[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a31_0x3bdb30(0x222)]||function(_0x140503){var _0xe8477b=a31_0x3bdb30;return _0x140503&&_0x140503[_0xe8477b(0x229)]?_0x140503:{'default':_0x140503};};Object['defineProperty'](exports,a31_0x3bdb30(0x229),{'value':!![]});function a31_0x1817(_0x68cfea,_0x48f252){return a31_0x1817=function(_0x56fdc,_0x18179a){_0x56fdc=_0x56fdc-0x1ba;var _0x57fa52=a31_0x56fd[_0x56fdc];return _0x57fa52;},a31_0x1817(_0x68cfea,_0x48f252);}var node_watch_1=__importDefault(require(a31_0x3bdb30(0x1d9))),rimraf=__importStar(require(a31_0x3bdb30(0x22a))),ignore_1=require(a31_0x3bdb30(0x1c5)),invoke_1=__importDefault(require(a31_0x3bdb30(0x1de))),docker=__importStar(require('../../docker/docker')),dockerOpts=__importStar(require(a31_0x3bdb30(0x24f))),dockerode_1=__importDefault(require(a31_0x3bdb30(0x21d))),runtime_1=require('../../utils/runtime'),logger_1=__importDefault(require(a31_0x3bdb30(0x1e9))),definition_1=require(a31_0x3bdb30(0x227)),time_1=require(a31_0x3bdb30(0x254)),process_1=require('../../utils/process'),devs_1=require(a31_0x3bdb30(0x243)),retry_1=require('../../retry'),core=__importStar(require(a31_0x3bdb30(0x20b))),stdout_formatter_1=__importDefault(require(a31_0x3bdb30(0x1d5))),state_1=require('../../utils/state'),dev_null_1=__importDefault(require(a31_0x3bdb30(0x20f))),dockerClient=new dockerode_1[(a31_0x3bdb30(0x1e3))](),HttpInvoke=function(_0x418e07){var _0x963aec=a31_0x3bdb30;__extends(_0x39d414,_0x418e07);function _0x39d414(_0x2ec541,_0xd6cc9f,_0x4e503f,_0x166bff,_0x230210,_0x3a7979,_0x19665b,_0x5f4e02,_0x4e1464,_0x2fd533,_0x11c65f,_0x590f82,_0x4544b2,_0x59ac32){var _0x56018a=a31_0x1817,_0x47aaba=_0x418e07[_0x56018a(0x1bf)](this,_0x2ec541,_0xd6cc9f,_0x4e503f,_0x166bff,_0x230210,_0x3a7979,_0x19665b,_0x5f4e02,_0x4e1464,_0x2fd533,_0x11c65f,_0x590f82,_0x4544b2,_0x59ac32)||this;return process_1['setSigint'](),process['on'](_0x56018a(0x1cc),function(){return __awaiter(_0x47aaba,void 0x0,void 0x0,function(){var _0x567e02,_0x4c317d,_0x2602dc,_0xb8928c,_0x4aab41;return __generator(this,function(_0x4282e5){var _0x2489cc=a31_0x1817;switch(_0x4282e5[_0x2489cc(0x1e1)]){case 0x0:this[_0x2489cc(0x21a)]&&this[_0x2489cc(0x21a)][_0x2489cc(0x1ef)]();this[_0x2489cc(0x23f)]();if(!this[_0x2489cc(0x20d)])return[0x3,0xa];_0x567e02=core['spinner'](_0x2489cc(0x1fa)),_0x4282e5[_0x2489cc(0x1e1)]=0x1;case 0x1:_0x4282e5[_0x2489cc(0x23a)][_0x2489cc(0x201)]([0x1,0x3,,0x8]);return[0x4,this[_0x2489cc(0x20d)][_0x2489cc(0x1c1)]()];case 0x2:_0x4282e5[_0x2489cc(0x238)](),_0x567e02['succeed'](_0x2489cc(0x20c));return[0x3,0x8];case 0x3:_0x4c317d=_0x4282e5[_0x2489cc(0x238)](),_0x567e02[_0x2489cc(0x1bc)](_0x2489cc(0x1d0)),logger_1[_0x2489cc(0x1e3)][_0x2489cc(0x216)](_0x2489cc(0x230)+_0x4c317d),_0x2602dc=core[_0x2489cc(0x1e2)](_0x2489cc(0x22f)),_0x4282e5[_0x2489cc(0x1e1)]=0x4;case 0x4:_0x4282e5['trys'][_0x2489cc(0x201)]([0x4,0x6,,0x7]);return[0x4,this[_0x2489cc(0x20d)][_0x2489cc(0x223)]()];case 0x5:_0x4282e5[_0x2489cc(0x238)](),_0x2602dc[_0x2489cc(0x1be)]('Kill\x20function\x20container\x20successfully');return[0x3,0x7];case 0x6:_0xb8928c=_0x4282e5['sent'](),_0x2602dc[_0x2489cc(0x1bc)](_0x2489cc(0x219)),logger_1[_0x2489cc(0x1e3)]['debug'](_0x2489cc(0x228)+_0xb8928c);return[0x3,0x7];case 0x7:return[0x3,0x8];case 0x8:return[0x4,state_1[_0x2489cc(0x241)]((_0x4aab41=this[_0x2489cc(0x226)])===null||_0x4aab41===void 0x0?void 0x0:_0x4aab41[_0x2489cc(0x1d1)],this[_0x2489cc(0x1ea)],this[_0x2489cc(0x24b)],this[_0x2489cc(0x203)])];case 0x9:_0x4282e5[_0x2489cc(0x238)](),this['runner']=null,_0x4282e5[_0x2489cc(0x1e1)]=0xa;case 0xa:if(!this[_0x2489cc(0x1d4)])return[0x3,0xc];return[0x4,this['tunnelService'][_0x2489cc(0x252)]()];case 0xb:_0x4282e5[_0x2489cc(0x238)](),_0x4282e5[_0x2489cc(0x1e1)]=0xc;case 0xc:process[_0x2489cc(0x214)]===_0x2489cc(0x1f4)&&process[_0x2489cc(0x204)](0x0);return[0x2];}});});}),_0x47aaba;}return _0x39d414[_0x963aec(0x24d)]['_disableRunner']=function(_0x4ccad0,_0x4e92f9){var _0x1c842b;return __awaiter(this,void 0x0,void 0x0,function(){var _0x47e7c0,_0x355563,_0x576827,_0x1e6ce1,_0x277f02,_0x98f70d;return __generator(this,function(_0x7dd9ed){var _0x6ac73b=a31_0x1817;switch(_0x7dd9ed[_0x6ac73b(0x1e1)]){case 0x0:if(!this[_0x6ac73b(0x20d)])return[0x2];logger_1[_0x6ac73b(0x1e3)]['info']('Detect\x20code\x20changes,\x20file\x20is\x20'+_0x4e92f9+_0x6ac73b(0x246)+_0x4ccad0+_0x6ac73b(0x210)),_0x47e7c0=this['runner'],_0x355563=this['unzippedCodeDir'],this['runner']=null;return[0x4,this[_0x6ac73b(0x224)]()];case 0x1:_0x7dd9ed['sent']();return[0x4,time_1[_0x6ac73b(0x202)](0x1f4)];case 0x2:_0x7dd9ed[_0x6ac73b(0x238)](),_0x576827=core['spinner']('Reloading\x20success,\x20stopping\x20old\x20function\x20container...'),_0x7dd9ed[_0x6ac73b(0x1e1)]=0x3;case 0x3:_0x7dd9ed['trys']['push']([0x3,0x5,,0xa]);return[0x4,_0x47e7c0['stop']()];case 0x4:_0x7dd9ed[_0x6ac73b(0x238)](),_0x576827[_0x6ac73b(0x1be)](_0x6ac73b(0x1f8));return[0x3,0xa];case 0x5:_0x1e6ce1=_0x7dd9ed['sent'](),_0x576827[_0x6ac73b(0x1bc)](_0x6ac73b(0x1d0)),logger_1['default'][_0x6ac73b(0x216)](_0x6ac73b(0x230)+_0x1e6ce1),_0x277f02=core[_0x6ac73b(0x1e2)](_0x6ac73b(0x22f)),_0x7dd9ed[_0x6ac73b(0x1e1)]=0x6;case 0x6:_0x7dd9ed[_0x6ac73b(0x23a)][_0x6ac73b(0x201)]([0x6,0x8,,0x9]);return[0x4,_0x47e7c0[_0x6ac73b(0x223)]()];case 0x7:_0x7dd9ed[_0x6ac73b(0x238)](),_0x277f02['succeed'](_0x6ac73b(0x245));return[0x3,0x9];case 0x8:_0x98f70d=_0x7dd9ed[_0x6ac73b(0x238)](),_0x277f02[_0x6ac73b(0x1bc)](_0x6ac73b(0x219)),logger_1[_0x6ac73b(0x1e3)][_0x6ac73b(0x216)](_0x6ac73b(0x228)+_0x98f70d);return[0x3,0x9];case 0x9:return[0x3,0xa];case 0xa:return[0x4,state_1[_0x6ac73b(0x241)]((_0x1c842b=this['creds'])===null||_0x1c842b===void 0x0?void 0x0:_0x1c842b[_0x6ac73b(0x1d1)],this[_0x6ac73b(0x1ea)],this['serviceName'],this[_0x6ac73b(0x203)])];case 0xb:_0x7dd9ed[_0x6ac73b(0x238)]();_0x355563&&(rimraf[_0x6ac73b(0x1ff)](_0x355563),logger_1[_0x6ac73b(0x1e3)][_0x6ac73b(0x211)](_0x6ac73b(0x1db)+_0x355563+_0x6ac73b(0x200)));return[0x2];}});});},_0x39d414['prototype'][_0x963aec(0x249)]=function(){var _0x4eab92,_0x294521,_0x241a61;return __awaiter(this,void 0x0,void 0x0,function(){var _0x2ee24a,_0x5c794a,_0x63f5ec,_0x320dd9,_0x535e7b,_0x463a35,_0x5d2387,_0xa8139f=this;return __generator(this,function(_0x5aeba4){var _0x5351fb=a31_0x1817;switch(_0x5aeba4['label']){case 0x0:_0x2ee24a=this[_0x5351fb(0x1d4)];if(!_0x2ee24a)return[0x3,0x2];return[0x4,this[_0x5351fb(0x1d4)][_0x5351fb(0x1c7)]()];case 0x1:_0x2ee24a=!_0x5aeba4[_0x5351fb(0x238)](),_0x5aeba4[_0x5351fb(0x1e1)]=0x2;case 0x2:if(!_0x2ee24a)return[0x3,0x5];console[_0x5351fb(0x237)](),logger_1[_0x5351fb(0x1e3)][_0x5351fb(0x220)]('\x0aFunction\x20container\x20starts\x20failed.Start\x20cleaning\x20now.');if(!this[_0x5351fb(0x1d4)])return[0x3,0x4];return[0x4,this[_0x5351fb(0x1d4)]['clean']()];case 0x3:_0x5aeba4['sent'](),_0x5aeba4[_0x5351fb(0x1e1)]=0x4;case 0x4:throw new Error(_0x5351fb(0x1eb));case 0x5:return[0x4,docker[_0x5351fb(0x212)](this[_0x5351fb(0x226)],this[_0x5351fb(0x1ea)],this[_0x5351fb(0x1f7)],this['serviceName'],this['serviceConfig'],this['functionName'],this[_0x5351fb(0x1ca)],this[_0x5351fb(0x1f3)],null,this[_0x5351fb(0x20a)],this['debugIde'],this[_0x5351fb(0x247)])];case 0x6:_0x5c794a=_0x5aeba4[_0x5351fb(0x238)](),_0x63f5ec=docker['generateDockerCmd'](this[_0x5351fb(0x1d6)],!![],this['functionConfig']),_0x320dd9=definition_1[_0x5351fb(0x257)](this['sessionId']),this['containerName']=docker[_0x5351fb(0x21f)]();return[0x4,dockerOpts[_0x5351fb(0x231)](_0x320dd9,this[_0x5351fb(0x1d6)],this['containerName'],this['mounts'],_0x63f5ec,_0x5c794a,{'debugPort':this[_0x5351fb(0x1f3)],'dockerUser':this[_0x5351fb(0x207)],'imageName':this[_0x5351fb(0x20e)]})];case 0x7:_0x535e7b=_0x5aeba4[_0x5351fb(0x238)](),_0x463a35=this;return[0x4,docker[_0x5351fb(0x235)](_0x535e7b,process[_0x5351fb(0x23e)],process['stderr'],{'serviceName':this[_0x5351fb(0x24b)],'functionName':this[_0x5351fb(0x203)]})];case 0x8:_0x463a35['runner']=_0x5aeba4[_0x5351fb(0x238)]();return[0x4,this['saveInvokeContainerId']()];case 0x9:_0x5aeba4[_0x5351fb(0x238)](),_0x5d2387=(_0x294521=(_0x4eab92=process[_0x5351fb(0x1f6)])===null||_0x4eab92===void 0x0?void 0x0:_0x4eab92[_0x5351fb(0x250)])===null||_0x294521===void 0x0?void 0x0:_0x294521[_0x5351fb(0x256)](_0x5351fb(0x1f1));if(!!runtime_1[_0x5351fb(0x234)]((_0x241a61=this['functionConfig'])===null||_0x241a61===void 0x0?void 0x0:_0x241a61[_0x5351fb(0x1d6)]))return[0x3,0xb];logger_1[_0x5351fb(0x1e3)][_0x5351fb(0x211)](stdout_formatter_1[_0x5351fb(0x1e3)]['stdoutFormatter'][_0x5351fb(0x1ce)](_0x5351fb(0x217),_0x5351fb(0x1d8)));return[0x4,retry_1['promiseRetry'](function(_0x37748e,_0x2f59c0){return __awaiter(_0xa8139f,void 0x0,void 0x0,function(){var _0x39bc2a,_0x5f38f6,_0x22715a,_0x152eb0;return __generator(this,function(_0x5bda6f){var _0x4b7783=a31_0x1817;switch(_0x5bda6f[_0x4b7783(0x1e1)]){case 0x0:_0x5bda6f['trys'][_0x4b7783(0x201)]([0x0,0x3,,0x4]);if(!this[_0x4b7783(0x20d)])throw new Error(_0x4b7783(0x255));return[0x4,time_1[_0x4b7783(0x202)](0x3e8)];case 0x1:_0x5bda6f[_0x4b7783(0x238)](),_0x39bc2a=((_0x152eb0=this[_0x4b7783(0x1ca)])===null||_0x152eb0===void 0x0?void 0x0:_0x152eb0['caPort'])||0x2328;return[0x4,this[_0x4b7783(0x20d)]['exec']([_0x4b7783(0x251),_0x4b7783(0x1cb)+_0x39bc2a],{'outputStream':_0x5d2387?process[_0x4b7783(0x23e)]:dev_null_1[_0x4b7783(0x1e3)](),'errorStream':_0x5d2387?process[_0x4b7783(0x253)]:dev_null_1[_0x4b7783(0x1e3)]()})];case 0x2:_0x5f38f6=_0x5bda6f['sent']();if(_0x5f38f6===0x0)return logger_1['default'][_0x4b7783(0x211)](_0x4b7783(0x1f0)),[0x2];logger_1[_0x4b7783(0x1e3)][_0x4b7783(0x216)](_0x4b7783(0x233)+_0x5f38f6),logger_1[_0x4b7783(0x1e3)][_0x4b7783(0x211)](stdout_formatter_1[_0x4b7783(0x1e3)][_0x4b7783(0x1fe)]['retry'](_0x4b7783(0x209),'is\x20up','',_0x2f59c0)),_0x37748e(_0x5f38f6);return[0x3,0x4];case 0x3:_0x22715a=_0x5bda6f[_0x4b7783(0x238)]();if(_0x22715a[_0x4b7783(0x225)]==='Function\x20container\x20is\x20closed,\x20exit!')throw _0x22715a;logger_1[_0x4b7783(0x1e3)][_0x4b7783(0x216)](_0x4b7783(0x1c9)+_0x22715a),logger_1[_0x4b7783(0x1e3)][_0x4b7783(0x211)](stdout_formatter_1['default'][_0x4b7783(0x1fe)][_0x4b7783(0x1e4)](_0x4b7783(0x209),_0x4b7783(0x239),'',_0x2f59c0)),_0x37748e(_0x22715a);return[0x3,0x4];case 0x4:return[0x2];}});});},0x14)];case 0xa:_0x5aeba4[_0x5351fb(0x238)](),_0x5aeba4[_0x5351fb(0x1e1)]=0xb;case 0xb:return[0x2];}});});},_0x39d414['prototype'][_0x963aec(0x1f2)]=function(){var _0x4df2c9,_0x5cd7a2;return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x23b65b){var _0x2764ff=a31_0x1817;switch(_0x23b65b[_0x2764ff(0x1e1)]){case 0x0:return[0x4,devs_1[_0x2764ff(0x213)](_0x2764ff(0x21b),(_0x4df2c9=this[_0x2764ff(0x20d)])===null||_0x4df2c9===void 0x0?void 0x0:_0x4df2c9['containerId'],state_1[_0x2764ff(0x236)]((_0x5cd7a2=this['creds'])===null||_0x5cd7a2===void 0x0?void 0x0:_0x5cd7a2[_0x2764ff(0x1d1)],this[_0x2764ff(0x1ea)],this[_0x2764ff(0x24b)],this[_0x2764ff(0x203)]))];case 0x1:_0x23b65b[_0x2764ff(0x238)]();return[0x2];}});});},_0x39d414['prototype'][_0x963aec(0x1da)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x474ca8,_0x4d5e94,_0x4e5a32,_0x5c2923=this;return __generator(this,function(_0xd6ca38){var _0x3d3b8b=a31_0x1817;switch(_0xd6ca38[_0x3d3b8b(0x1e1)]){case 0x0:if(!(!this['watcher']&&!runtime_1[_0x3d3b8b(0x234)](this[_0x3d3b8b(0x1d6)])))return[0x3,0x2];return[0x4,ignore_1[_0x3d3b8b(0x242)](this[_0x3d3b8b(0x1f7)])];case 0x1:_0x474ca8=_0xd6ca38['sent'](),_0x4d5e94=![],_0x4e5a32=![],this[_0x3d3b8b(0x21a)]=node_watch_1['default'](this['codeUri'],{'recursive':!![],'persistent':![],'filter':function(_0x57774c){return _0x474ca8&&!_0x474ca8(_0x57774c);}},function(_0x49945d,_0x51ae5e){return __awaiter(_0x5c2923,void 0x0,void 0x0,function(){var _0x3b1368,_0x39ad39,_0xb7d23d,_0x23dbb3=this;return __generator(this,function(_0x57be17){var _0x1d16bf=a31_0x1817;switch(_0x57be17['label']){case 0x0:if(_0x4d5e94)return[0x2];_0x3b1368=0x12c,_0x39ad39=0x0;if(!_0x4e5a32)return[0x3,0x7];_0x57be17[_0x1d16bf(0x1e1)]=0x1;case 0x1:if(!_0x4e5a32)return[0x3,0x7];if(_0x4d5e94)return[0x2];return[0x4,time_1[_0x1d16bf(0x202)](0xbb8)];case 0x2:_0x57be17['sent'](),_0x39ad39=_0x39ad39+0x3;if(!(_0x39ad39>_0x3b1368))return[0x3,0x6];return[0x4,this[_0x1d16bf(0x252)]()];case 0x3:_0x57be17[_0x1d16bf(0x238)]();if(!this['tunnelService'])return[0x3,0x5];return[0x4,this[_0x1d16bf(0x1d4)][_0x1d16bf(0x252)]()];case 0x4:_0x57be17['sent'](),_0x57be17[_0x1d16bf(0x1e1)]=0x5;case 0x5:throw new Error(_0x1d16bf(0x218));case 0x6:return[0x3,0x1];case 0x7:_0x4d5e94=!![],_0x57be17[_0x1d16bf(0x1e1)]=0x8;case 0x8:_0x57be17['trys']['push']([0x8,0xc,,0xd]);if(!this['runner'])return[0x3,0xa];return[0x4,this[_0x1d16bf(0x205)](_0x49945d,_0x51ae5e)];case 0x9:_0x57be17[_0x1d16bf(0x238)]();return[0x3,0xb];case 0xa:logger_1[_0x1d16bf(0x1e3)][_0x1d16bf(0x216)](_0x1d16bf(0x206)),_0x57be17[_0x1d16bf(0x1e1)]=0xb;case 0xb:return[0x3,0xd];case 0xc:_0xb7d23d=_0x57be17[_0x1d16bf(0x238)](),logger_1[_0x1d16bf(0x1e3)][_0x1d16bf(0x244)](_0x1d16bf(0x1ba)),logger_1[_0x1d16bf(0x1e3)][_0x1d16bf(0x216)](_0x1d16bf(0x1f5)+_0xb7d23d);return[0x3,0xd];case 0xd:_0x4e5a32=!![],_0x4d5e94=![],logger_1[_0x1d16bf(0x1e3)][_0x1d16bf(0x211)](_0x1d16bf(0x1c2));return[0x4,retry_1[_0x1d16bf(0x1e0)](function(_0x1e078c,_0x308cd5){return __awaiter(_0x23dbb3,void 0x0,void 0x0,function(){var _0x2a0da5;return __generator(this,function(_0x5b8b29){var _0x3ad5db=a31_0x1817;switch(_0x5b8b29[_0x3ad5db(0x1e1)]){case 0x0:_0x5b8b29[_0x3ad5db(0x23a)][_0x3ad5db(0x201)]([0x0,0x2,,0x4]);return[0x4,this[_0x3ad5db(0x249)]()];case 0x1:_0x5b8b29[_0x3ad5db(0x238)](),logger_1[_0x3ad5db(0x1e3)][_0x3ad5db(0x211)](_0x3ad5db(0x1e7));return[0x2];case 0x2:_0x2a0da5=_0x5b8b29[_0x3ad5db(0x238)](),logger_1[_0x3ad5db(0x1e3)][_0x3ad5db(0x220)]('Restart\x20function\x20container\x20failed!');if(_0x2a0da5===null||_0x2a0da5===void 0x0?void 0x0:_0x2a0da5[_0x3ad5db(0x225)]['includes'](_0x3ad5db(0x1ee)))throw _0x2a0da5;logger_1[_0x3ad5db(0x1e3)][_0x3ad5db(0x216)](_0x3ad5db(0x1c0)+_0x2a0da5),logger_1[_0x3ad5db(0x1e3)][_0x3ad5db(0x211)](stdout_formatter_1[_0x3ad5db(0x1e3)][_0x3ad5db(0x1fe)][_0x3ad5db(0x1e4)](_0x3ad5db(0x21c),_0x3ad5db(0x1dd),'',_0x308cd5));return[0x4,time_1[_0x3ad5db(0x202)](0x64)];case 0x3:_0x5b8b29[_0x3ad5db(0x238)](),_0x1e078c(_0x2a0da5);return[0x3,0x4];case 0x4:return[0x2];}});});})];case 0xe:_0x57be17['sent'](),_0x4e5a32=![];return[0x2];}});});}),this['watcher']['on'](_0x3d3b8b(0x220),function(_0x428328){throw _0x428328;}),_0xd6ca38[_0x3d3b8b(0x1e1)]=0x2;case 0x2:return[0x2];}});});},_0x39d414[_0x963aec(0x24d)][_0x963aec(0x1ec)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3daad9){var _0x487135=a31_0x1817;switch(_0x3daad9['label']){case 0x0:return[0x4,this['init']()];case 0x1:_0x3daad9[_0x487135(0x238)]();return[0x4,this[_0x487135(0x249)]()];case 0x2:_0x3daad9['sent']();return[0x4,this[_0x487135(0x1da)]()];case 0x3:_0x3daad9[_0x487135(0x238)]();return[0x4,this[_0x487135(0x1fd)]()];case 0x4:_0x3daad9['sent']();return[0x2];}});});},_0x39d414['prototype'][_0x963aec(0x252)]=function(){var _0x35ea63,_0xffa062;return __awaiter(this,void 0x0,void 0x0,function(){var _0x2d0857,_0x2231fa;return __generator(this,function(_0x3fa132){var _0x4c4969=a31_0x1817;switch(_0x3fa132['label']){case 0x0:return[0x4,state_1['getInvokeContainerIdFromState']((_0x35ea63=this[_0x4c4969(0x226)])===null||_0x35ea63===void 0x0?void 0x0:_0x35ea63[_0x4c4969(0x1d1)],this['region'],this[_0x4c4969(0x24b)],this[_0x4c4969(0x203)])];case 0x1:_0x2d0857=_0x3fa132[_0x4c4969(0x238)]();return[0x4,dockerClient[_0x4c4969(0x23b)](_0x2d0857)];case 0x2:_0x2231fa=_0x3fa132['sent']();return[0x4,docker[_0x4c4969(0x1df)](_0x2231fa)];case 0x3:_0x3fa132['sent']();return[0x4,state_1[_0x4c4969(0x241)]((_0xffa062=this[_0x4c4969(0x226)])===null||_0xffa062===void 0x0?void 0x0:_0xffa062['AccountID'],this[_0x4c4969(0x1ea)],this[_0x4c4969(0x24b)],this[_0x4c4969(0x203)])];case 0x4:_0x3fa132[_0x4c4969(0x238)]();return[0x2];}});});},_0x39d414;}(invoke_1[a31_0x3bdb30(0x1e3)]);exports[a31_0x3bdb30(0x1e3)]=HttpInvoke;