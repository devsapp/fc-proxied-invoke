'use strict';var a32_0x2b1d=['sync','resolveCodeUriToMount','serviceName','baseDir','resolvePasswdMount','name','__esModule','debug','1105614JtZUlT','sessionId','unzippedCodeDir','path','showDebugIdeTipsForPycharm','__importDefault','../../docker/docker','codeUri','sent','done','debugIde','join','741668GxjdFt','function','defineProperty','create','iterator','showDebugIdeTips','vscode','region','__spreadArrays','1302905XQxLJl','codeUri\x20is\x20a\x20zip\x20format,\x20will\x20unzipping\x20to\x20','endsWith','tmpDirMount','../../docker/docker-opts','__createBinding','lodash','isDockerToolBoxAndEnsureDockerVersion','pop','nasConfig','throw','17tWljSX','resolveRuntimeToDockerImage','push','imageName','.jar','Source','ensureDir','resolveDebuggerPathToMount','362710nsLQJA','passwdMount','resolveNasConfigToMounts','triggerConfig','customContainerConfig','stringify','../../../common/logger','serviceConfig','pullFcImageIfNeed','debugPort','image','value','creds','__setModuleDefault','83192gtoIEg','tmpDir','nasMounts','dockerUser','containerName','fs-extra','runtime','writeDebugIdeConfigForVscode','toLowerCase','trys','.zip','__awaiter','4621lKZgJI','isEmpty','185PxEFQj','cleanUnzippedCodeDir','mounts','277gUqSoj','resolveTmpDirToMount','../../utils/runtime','hasOwnProperty','inited','3008YFJITc','functionConfig','resolve','length','next','label','debuggerPath','clean\x20tmp\x20code\x20dir\x20','isCustomContainerRuntime','default','uuid','compact','afterInvoke','init','prototype','../../devs','transformMountsForToolbox','pycharm','then','.war','setDebugIdeConfig','nasBaseDir','debugArgs','call','1cjQzME','codeMount','log','return','functionName','debuggerMount','resolveDockerUser','temp-dir','ops'];var a32_0x394aa9=a32_0x3f3e;(function(_0x5cde59,_0x43586a){var _0xc800b8=a32_0x3f3e;while(!![]){try{var _0x5d647c=parseInt(_0xc800b8(0x1ed))+-parseInt(_0xc800b8(0x1d0))*parseInt(_0xc800b8(0x181))+parseInt(_0xc800b8(0x18c))*parseInt(_0xc800b8(0x1a2))+-parseInt(_0xc800b8(0x194))+-parseInt(_0xc800b8(0x1ae))*parseInt(_0xc800b8(0x1b3))+-parseInt(_0xc800b8(0x1b8))*-parseInt(_0xc800b8(0x1b0))+parseInt(_0xc800b8(0x1e1));if(_0x5d647c===_0x43586a)break;else _0x5cde59['push'](_0x5cde59['shift']());}catch(_0x31f8c0){_0x5cde59['push'](_0x5cde59['shift']());}}}(a32_0x2b1d,0xd4fca));var __createBinding=this&&this[a32_0x394aa9(0x186)]||(Object[a32_0x394aa9(0x1f0)]?function(_0x3ab9d1,_0x2ef898,_0x3c9c9c,_0xac4cda){if(_0xac4cda===undefined)_0xac4cda=_0x3c9c9c;Object['defineProperty'](_0x3ab9d1,_0xac4cda,{'enumerable':!![],'get':function(){return _0x2ef898[_0x3c9c9c];}});}:function(_0x999f68,_0x3fa5d2,_0x7ae545,_0x347498){if(_0x347498===undefined)_0x347498=_0x7ae545;_0x999f68[_0x347498]=_0x3fa5d2[_0x7ae545];}),__setModuleDefault=this&&this[a32_0x394aa9(0x1a1)]||(Object[a32_0x394aa9(0x1f0)]?function(_0xb6689b,_0xb5cf){var _0xa1e304=a32_0x394aa9;Object[_0xa1e304(0x1ef)](_0xb6689b,'default',{'enumerable':!![],'value':_0xb5cf});}:function(_0x4d3bf9,_0x405111){var _0x4797bd=a32_0x394aa9;_0x4d3bf9[_0x4797bd(0x1c1)]=_0x405111;}),__importStar=this&&this['__importStar']||function(_0x2788d7){var _0x58ec8a=a32_0x394aa9;if(_0x2788d7&&_0x2788d7[_0x58ec8a(0x1df)])return _0x2788d7;var _0x189f91={};if(_0x2788d7!=null){for(var _0x51aae9 in _0x2788d7)if(_0x51aae9!=='default'&&Object[_0x58ec8a(0x1b6)][_0x58ec8a(0x1cf)](_0x2788d7,_0x51aae9))__createBinding(_0x189f91,_0x2788d7,_0x51aae9);}return __setModuleDefault(_0x189f91,_0x2788d7),_0x189f91;},__awaiter=this&&this[a32_0x394aa9(0x1ad)]||function(_0x52edee,_0x13e97c,_0x40bf3a,_0x30d66c){function _0x22203c(_0x5c50ca){return _0x5c50ca instanceof _0x40bf3a?_0x5c50ca:new _0x40bf3a(function(_0x39f0ca){_0x39f0ca(_0x5c50ca);});}return new(_0x40bf3a||(_0x40bf3a=Promise))(function(_0x3990e3,_0x34e161){var _0x402f11=a32_0x3f3e;function _0x29752f(_0x3a6692){var _0x3f44c5=a32_0x3f3e;try{_0x24db3f(_0x30d66c[_0x3f44c5(0x1bc)](_0x3a6692));}catch(_0x50824d){_0x34e161(_0x50824d);}}function _0x490d78(_0x586c1a){var _0x3948a6=a32_0x3f3e;try{_0x24db3f(_0x30d66c[_0x3948a6(0x18b)](_0x586c1a));}catch(_0x3e89d0){_0x34e161(_0x3e89d0);}}function _0x24db3f(_0x53420e){var _0x10e157=a32_0x3f3e;_0x53420e[_0x10e157(0x1ea)]?_0x3990e3(_0x53420e[_0x10e157(0x19f)]):_0x22203c(_0x53420e[_0x10e157(0x19f)])[_0x10e157(0x1ca)](_0x29752f,_0x490d78);}_0x24db3f((_0x30d66c=_0x30d66c['apply'](_0x52edee,_0x13e97c||[]))[_0x402f11(0x1bc)]());});},__generator=this&&this['__generator']||function(_0x14c0f1,_0x38b9fd){var _0x340bd6=a32_0x394aa9,_0x3c4de2={'label':0x0,'sent':function(){if(_0x9d7709[0x0]&0x1)throw _0x9d7709[0x1];return _0x9d7709[0x1];},'trys':[],'ops':[]},_0x590d56,_0x3dd9f5,_0x9d7709,_0x397b2d;return _0x397b2d={'next':_0x4c2560(0x0),'throw':_0x4c2560(0x1),'return':_0x4c2560(0x2)},typeof Symbol===_0x340bd6(0x1ee)&&(_0x397b2d[Symbol[_0x340bd6(0x17c)]]=function(){return this;}),_0x397b2d;function _0x4c2560(_0x5d85ee){return function(_0x111c03){return _0x34a766([_0x5d85ee,_0x111c03]);};}function _0x34a766(_0x53eda9){var _0x4d7ebd=_0x340bd6;if(_0x590d56)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x3c4de2)try{if(_0x590d56=0x1,_0x3dd9f5&&(_0x9d7709=_0x53eda9[0x0]&0x2?_0x3dd9f5[_0x4d7ebd(0x1d3)]:_0x53eda9[0x0]?_0x3dd9f5[_0x4d7ebd(0x18b)]||((_0x9d7709=_0x3dd9f5['return'])&&_0x9d7709[_0x4d7ebd(0x1cf)](_0x3dd9f5),0x0):_0x3dd9f5[_0x4d7ebd(0x1bc)])&&!(_0x9d7709=_0x9d7709[_0x4d7ebd(0x1cf)](_0x3dd9f5,_0x53eda9[0x1]))[_0x4d7ebd(0x1ea)])return _0x9d7709;if(_0x3dd9f5=0x0,_0x9d7709)_0x53eda9=[_0x53eda9[0x0]&0x2,_0x9d7709[_0x4d7ebd(0x19f)]];switch(_0x53eda9[0x0]){case 0x0:case 0x1:_0x9d7709=_0x53eda9;break;case 0x4:_0x3c4de2[_0x4d7ebd(0x1bd)]++;return{'value':_0x53eda9[0x1],'done':![]};case 0x5:_0x3c4de2[_0x4d7ebd(0x1bd)]++,_0x3dd9f5=_0x53eda9[0x1],_0x53eda9=[0x0];continue;case 0x7:_0x53eda9=_0x3c4de2['ops']['pop'](),_0x3c4de2[_0x4d7ebd(0x1ab)][_0x4d7ebd(0x189)]();continue;default:if(!(_0x9d7709=_0x3c4de2[_0x4d7ebd(0x1ab)],_0x9d7709=_0x9d7709[_0x4d7ebd(0x1bb)]>0x0&&_0x9d7709[_0x9d7709[_0x4d7ebd(0x1bb)]-0x1])&&(_0x53eda9[0x0]===0x6||_0x53eda9[0x0]===0x2)){_0x3c4de2=0x0;continue;}if(_0x53eda9[0x0]===0x3&&(!_0x9d7709||_0x53eda9[0x1]>_0x9d7709[0x0]&&_0x53eda9[0x1]<_0x9d7709[0x3])){_0x3c4de2[_0x4d7ebd(0x1bd)]=_0x53eda9[0x1];break;}if(_0x53eda9[0x0]===0x6&&_0x3c4de2['label']<_0x9d7709[0x1]){_0x3c4de2['label']=_0x9d7709[0x1],_0x9d7709=_0x53eda9;break;}if(_0x9d7709&&_0x3c4de2[_0x4d7ebd(0x1bd)]<_0x9d7709[0x2]){_0x3c4de2[_0x4d7ebd(0x1bd)]=_0x9d7709[0x2],_0x3c4de2['ops'][_0x4d7ebd(0x18e)](_0x53eda9);break;}if(_0x9d7709[0x2])_0x3c4de2[_0x4d7ebd(0x1d8)]['pop']();_0x3c4de2[_0x4d7ebd(0x1ab)][_0x4d7ebd(0x189)]();continue;}_0x53eda9=_0x38b9fd['call'](_0x14c0f1,_0x3c4de2);}catch(_0x40d641){_0x53eda9=[0x6,_0x40d641],_0x3dd9f5=0x0;}finally{_0x590d56=_0x9d7709=0x0;}if(_0x53eda9[0x0]&0x5)throw _0x53eda9[0x1];return{'value':_0x53eda9[0x0]?_0x53eda9[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this[a32_0x394aa9(0x180)]||function(){var _0x51f08c=a32_0x394aa9;for(var _0x2875f9=0x0,_0x2a7d28=0x0,_0x594197=arguments[_0x51f08c(0x1bb)];_0x2a7d28<_0x594197;_0x2a7d28++)_0x2875f9+=arguments[_0x2a7d28][_0x51f08c(0x1bb)];for(var _0x48637d=Array(_0x2875f9),_0xd70844=0x0,_0x2a7d28=0x0;_0x2a7d28<_0x594197;_0x2a7d28++)for(var _0x251e25=arguments[_0x2a7d28],_0x5cb96b=0x0,_0x1eb97a=_0x251e25['length'];_0x5cb96b<_0x1eb97a;_0x5cb96b++,_0xd70844++)_0x48637d[_0xd70844]=_0x251e25[_0x5cb96b];return _0x48637d;},__importDefault=this&&this[a32_0x394aa9(0x1e6)]||function(_0x150e0c){var _0x2bdea5=a32_0x394aa9;return _0x150e0c&&_0x150e0c[_0x2bdea5(0x1df)]?_0x150e0c:{'default':_0x150e0c};};Object[a32_0x394aa9(0x1ef)](exports,a32_0x394aa9(0x1df),{'value':!![]});function a32_0x3f3e(_0x178b13,_0x4b4a4c){return a32_0x3f3e=function(_0x2b1dbf,_0x3f3e8e){_0x2b1dbf=_0x2b1dbf-0x17c;var _0x1073c1=a32_0x2b1d[_0x2b1dbf];return _0x1073c1;},a32_0x3f3e(_0x178b13,_0x4b4a4c);}var path=__importStar(require(a32_0x394aa9(0x1e4))),_=__importStar(require(a32_0x394aa9(0x187))),docker=__importStar(require('../../docker/docker')),logger_1=__importDefault(require(a32_0x394aa9(0x19a))),dockerOpts=__importStar(require(a32_0x394aa9(0x185))),fs=__importStar(require(a32_0x394aa9(0x1a7))),uuid_1=require(a32_0x394aa9(0x1c2)),rimraf=__importStar(require('rimraf')),extract_zip_1=__importDefault(require('extract-zip')),tmpDir=__importStar(require(a32_0x394aa9(0x1d7))),devs_1=require(a32_0x394aa9(0x1c7)),runtime_1=require(a32_0x394aa9(0x1b5)),docker_1=require(a32_0x394aa9(0x1e7));function isZipArchive(_0x39bf49){var _0x2099e8=a32_0x394aa9;return _0x39bf49?_0x39bf49[_0x2099e8(0x183)](_0x2099e8(0x1ac))||_0x39bf49[_0x2099e8(0x183)](_0x2099e8(0x190))||_0x39bf49[_0x2099e8(0x183)](_0x2099e8(0x1cb)):![];}function processZipCodeIfNecessary(_0x1ca8a4){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3f05be;return __generator(this,function(_0x28fe2b){var _0x2e5aab=a32_0x3f3e;switch(_0x28fe2b[_0x2e5aab(0x1bd)]){case 0x0:if(!isZipArchive(_0x1ca8a4))return[0x2,null];_0x3f05be=path['join'](tmpDir,uuid_1['v4']());return[0x4,fs[_0x2e5aab(0x192)](_0x3f05be)];case 0x1:_0x28fe2b[_0x2e5aab(0x1e9)](),logger_1[_0x2e5aab(0x1c1)][_0x2e5aab(0x1d2)](_0x2e5aab(0x182)+_0x3f05be);return[0x4,extract_zip_1[_0x2e5aab(0x1c1)](_0x1ca8a4,{'dir':_0x3f05be})];case 0x2:_0x28fe2b[_0x2e5aab(0x1e9)]();return[0x2,_0x3f05be];}});});}var Invoke=function(){var _0x4b65bf=a32_0x394aa9;function _0x68d7b6(_0x35ec97,_0x5a33cf,_0x4a281b,_0xac542e,_0x5c8c67,_0x23513e,_0x539ba1,_0x7a80e1,_0x2fc898,_0x2a7f09,_0x2149c6,_0x4f6de1,_0x416585,_0x5b04e3){var _0xaadad6=a32_0x3f3e;this['tunnelService']=_0x35ec97,this[_0xaadad6(0x1e2)]=_0x5a33cf,this[_0xaadad6(0x1a0)]=_0x4a281b,this[_0xaadad6(0x17f)]=_0xac542e,this[_0xaadad6(0x1db)]=_0x23513e[_0xaadad6(0x1de)],this[_0xaadad6(0x19b)]=_0x23513e,this['functionName']=_0x539ba1[_0xaadad6(0x1de)],this['functionConfig']=_0x539ba1,this[_0xaadad6(0x197)]=_0x7a80e1,this[_0xaadad6(0x19d)]=_0x2fc898,this[_0xaadad6(0x1eb)]=_0x2a7f09,this[_0xaadad6(0x1cd)]=_0x5b04e3,this[_0xaadad6(0x1a8)]=this[_0xaadad6(0x1b9)][_0xaadad6(0x1a8)],this[_0xaadad6(0x1dc)]=_0x5c8c67,this['codeUri']=this['functionConfig'][_0xaadad6(0x1e8)]?path[_0xaadad6(0x1ba)](this[_0xaadad6(0x1dc)],this['functionConfig'][_0xaadad6(0x1e8)]):null,this[_0xaadad6(0x1a3)]=_0x2149c6,this[_0xaadad6(0x1be)]=_0x4f6de1,this[_0xaadad6(0x1ce)]=_0x416585;}return _0x68d7b6['prototype'][_0x4b65bf(0x1c5)]=function(){var _0x368a31;return __awaiter(this,void 0x0,void 0x0,function(){var _0x15ec49,_0x39bdef,_0x3ca42d,_0x49f100,_0x2db38f,_0x4deda5,_0x25023e,_0x3b5c67,_0x8dfc1c,_0x2f848d,_0x25c25b;return __generator(this,function(_0x144402){var _0x1592ae=a32_0x3f3e;switch(_0x144402[_0x1592ae(0x1bd)]){case 0x0:this[_0x1592ae(0x18a)]=(_0x368a31=this[_0x1592ae(0x19b)])===null||_0x368a31===void 0x0?void 0x0:_0x368a31[_0x1592ae(0x18a)],_0x15ec49=this;return[0x4,dockerOpts[_0x1592ae(0x1d6)]({'nasConfig':this[_0x1592ae(0x18a)]})];case 0x1:_0x15ec49[_0x1592ae(0x1a5)]=_0x144402[_0x1592ae(0x1e9)](),_0x39bdef=this;return[0x4,docker[_0x1592ae(0x196)](this['baseDir'],this[_0x1592ae(0x1db)],this['nasConfig'],this[_0x1592ae(0x1cd)]||path[_0x1592ae(0x1ec)](this[_0x1592ae(0x1dc)],devs_1['DEFAULT_NAS_PATH_SUFFIX']))];case 0x2:_0x39bdef[_0x1592ae(0x1a4)]=_0x144402[_0x1592ae(0x1e9)](),_0x3ca42d=this;return[0x4,processZipCodeIfNecessary(this[_0x1592ae(0x1e8)])];case 0x3:_0x3ca42d[_0x1592ae(0x1e3)]=_0x144402[_0x1592ae(0x1e9)](),_0x49f100=this;return[0x4,docker[_0x1592ae(0x1da)](this[_0x1592ae(0x1e3)]||this['codeUri'])];case 0x4:_0x49f100['codeMount']=_0x144402[_0x1592ae(0x1e9)](),_0x2db38f=this;return[0x4,docker[_0x1592ae(0x1b4)](this[_0x1592ae(0x1a3)])];case 0x5:_0x2db38f[_0x1592ae(0x184)]=_0x144402[_0x1592ae(0x1e9)](),_0x4deda5=this;return[0x4,docker[_0x1592ae(0x193)](this[_0x1592ae(0x1be)])];case 0x6:_0x4deda5[_0x1592ae(0x1d5)]=_0x144402['sent'](),_0x25023e=this;return[0x4,docker[_0x1592ae(0x1dd)]()];case 0x7:_0x25023e[_0x1592ae(0x195)]=_0x144402[_0x1592ae(0x1e9)](),_0x3b5c67=_[_0x1592ae(0x1c3)](__spreadArrays([this[_0x1592ae(0x1d1)]],this[_0x1592ae(0x1a4)],[this[_0x1592ae(0x195)]]));!_['isEmpty'](this[_0x1592ae(0x184)])&&_0x3b5c67['push'](this['tmpDirMount']);!_[_0x1592ae(0x1af)](this['debuggerMount'])&&_0x3b5c67[_0x1592ae(0x18e)](this[_0x1592ae(0x1d5)]);return[0x4,docker[_0x1592ae(0x188)]()];case 0x8:_0x8dfc1c=_0x144402[_0x1592ae(0x1e9)]();_0x8dfc1c?this[_0x1592ae(0x1b2)]=dockerOpts[_0x1592ae(0x1c8)](_0x3b5c67):this[_0x1592ae(0x1b2)]=_0x3b5c67;logger_1['default'][_0x1592ae(0x1e0)]('docker\x20mounts:\x20'+JSON[_0x1592ae(0x199)](this[_0x1592ae(0x1b2)],null,0x4)),this[_0x1592ae(0x1a6)]=docker['generateRamdomContainerName'](),_0x2f848d=runtime_1[_0x1592ae(0x1c0)](this['runtime']);if(!_0x2f848d)return[0x3,0x9];this['imageName']=this[_0x1592ae(0x1b9)][_0x1592ae(0x198)][_0x1592ae(0x19e)];return[0x3,0xb];case 0x9:_0x25c25b=this;return[0x4,dockerOpts[_0x1592ae(0x18d)](this[_0x1592ae(0x1a8)])];case 0xa:_0x25c25b[_0x1592ae(0x18f)]=_0x144402[_0x1592ae(0x1e9)](),_0x144402['label']=0xb;case 0xb:return[0x4,docker[_0x1592ae(0x19c)](this[_0x1592ae(0x18f)])];case 0xc:_0x144402[_0x1592ae(0x1e9)](),this[_0x1592ae(0x1b7)]=!![];return[0x2];}});});},_0x68d7b6[_0x4b65bf(0x1c6)]['beforeInvoke']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x4a9b83){return[0x2];});});},_0x68d7b6[_0x4b65bf(0x1c6)][_0x4b65bf(0x17d)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x42bf5d){var _0x1750a3=a32_0x3f3e;switch(_0x42bf5d[_0x1750a3(0x1bd)]){case 0x0:if(!(this[_0x1750a3(0x19d)]&&this[_0x1750a3(0x1eb)]))return[0x3,0x4];if(!(this[_0x1750a3(0x1eb)][_0x1750a3(0x1aa)]()===_0x1750a3(0x17e)))return[0x3,0x2];return[0x4,docker['showDebugIdeTipsForVscode'](this[_0x1750a3(0x1db)],this['functionName'],this[_0x1750a3(0x1a8)],this[_0x1750a3(0x1d1)][_0x1750a3(0x191)],this['debugPort'])];case 0x1:_0x42bf5d['sent']();return[0x3,0x4];case 0x2:if(!(this[_0x1750a3(0x1eb)]['toLowerCase']()===_0x1750a3(0x1c9)))return[0x3,0x4];return[0x4,docker[_0x1750a3(0x1e5)](this[_0x1750a3(0x1d1)][_0x1750a3(0x191)],this['debugPort'])];case 0x3:_0x42bf5d[_0x1750a3(0x1e9)](),_0x42bf5d['label']=0x4;case 0x4:return[0x2];}});});},_0x68d7b6[_0x4b65bf(0x1c6)][_0x4b65bf(0x1cc)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x540db9){var _0x45ff15=a32_0x3f3e;switch(_0x540db9['label']){case 0x0:if(!(this[_0x45ff15(0x19d)]&&this[_0x45ff15(0x1eb)]))return[0x3,0x2];if(!(this[_0x45ff15(0x1eb)][_0x45ff15(0x1aa)]()==='vscode'))return[0x3,0x2];return[0x4,docker_1[_0x45ff15(0x1a9)](this[_0x45ff15(0x1dc)],this[_0x45ff15(0x1db)],this[_0x45ff15(0x1d4)],this[_0x45ff15(0x1a8)],this[_0x45ff15(0x1d1)]['Source'],this[_0x45ff15(0x19d)])];case 0x1:_0x540db9['sent'](),_0x540db9[_0x45ff15(0x1bd)]=0x2;case 0x2:return[0x2];}});});},_0x68d7b6[_0x4b65bf(0x1c6)][_0x4b65bf(0x1b1)]=function(){var _0x52622e=_0x4b65bf;this['unzippedCodeDir']&&(rimraf[_0x52622e(0x1d9)](this['unzippedCodeDir']),console['log'](_0x52622e(0x1bf)+this['unzippedCodeDir']+'\x20successfully'),this['unzippedCodeDir']=null);},_0x68d7b6[_0x4b65bf(0x1c6)][_0x4b65bf(0x1c4)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x5d824a){var _0x7faf86=a32_0x3f3e;return this[_0x7faf86(0x1b1)](),[0x2];});});},_0x68d7b6;}();exports[a32_0x394aa9(0x1c1)]=Invoke;