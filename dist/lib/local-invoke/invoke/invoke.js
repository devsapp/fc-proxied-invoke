'use strict';var a31_0x5ade=['../../devs','return','resolve','isEmpty','log','clean\x20tmp\x20code\x20dir\x20','resolveRuntimeToDockerImage','create','afterInvoke','defineProperty','ops','uuid','beforeInvoke','creds','resolveNasConfigToMounts','transformMountsForToolbox','temp-dir','then','join','sessionId','codeUri','nasBaseDir','next','isDockerToolBoxAndEnsureDockerVersion','pycharm','resolveDockerUser','length','value','487536GZtrRN','prototype','compact','done','2uaLJsT','customContainerConfig','function','Source','rimraf','showDebugIdeTipsForPycharm','2OoWYnm','endsWith','showDebugIdeTipsForVscode','serviceConfig','throw','hasOwnProperty','tmpDir','ensureDir','__awaiter','nasConfig','serviceName','56228tvWTRm','codeMount','__createBinding','imageName','__importDefault','AccountID','debugArgs','\x20successfully','toLowerCase','__spreadArrays','370723jxYSBk','cleanUnzippedCodeDir','29soOZxh','codeUri\x20is\x20a\x20zip\x20format,\x20will\x20unzipping\x20to\x20','runtime','apply','containerName','lodash','resolveDebuggerPathToMount','__importStar','resolveCodeUriToMount','fs-extra','region','__esModule','image','genStateId','DEFAULT_NAS_PATH_SUFFIX','getState','nasMounts','debuggerMount','passwdMount','call','push','trys','sync','../../utils/runtime','tmpDirMount','unzippedCodeDir','vscode','pullFcImageIfNeed','dockerUser','name','isCustomContainerRuntime','baseDir','debug','1qEkOkL','triggerConfig','generateRamdomContainerName','label','__setModuleDefault','resolvePasswdMount','functionName','path','.war','debuggerPath','.jar','262769rGMhLS','default','docker\x20mounts:\x20','../../docker/docker-opts','1451609pGUNNg','@serverless-devs/core','debugIde','sent','debugPort','.zip','extract-zip','47911vBZYsq','../../docker/docker','functionConfig','inited','25986UzYKfg','pop'];function a31_0x9972(_0x5d64a1,_0x58e3e1){return a31_0x9972=function(_0x5ade01,_0x997205){_0x5ade01=_0x5ade01-0xcd;var _0x58e250=a31_0x5ade[_0x5ade01];return _0x58e250;},a31_0x9972(_0x5d64a1,_0x58e3e1);}var a31_0x1f2199=a31_0x9972;(function(_0x4c9de7,_0x1468bb){var _0x5212c8=a31_0x9972;while(!![]){try{var _0x29e175=parseInt(_0x5212c8(0x121))*parseInt(_0x5212c8(0x112))+-parseInt(_0x5212c8(0x128))*parseInt(_0x5212c8(0xf1))+-parseInt(_0x5212c8(0xe5))*parseInt(_0x5212c8(0xda))+parseInt(_0x5212c8(0xd0))+-parseInt(_0x5212c8(0x11d))+-parseInt(_0x5212c8(0x12c))+parseInt(_0x5212c8(0xd4))*parseInt(_0x5212c8(0xef));if(_0x29e175===_0x1468bb)break;else _0x4c9de7['push'](_0x4c9de7['shift']());}catch(_0x7810c6){_0x4c9de7['push'](_0x4c9de7['shift']());}}}(a31_0x5ade,0xd9469));var __createBinding=this&&this[a31_0x1f2199(0xe7)]||(Object['create']?function(_0x544500,_0x5d7a9e,_0x484230,_0x272e3c){if(_0x272e3c===undefined)_0x272e3c=_0x484230;Object['defineProperty'](_0x544500,_0x272e3c,{'enumerable':!![],'get':function(){return _0x5d7a9e[_0x484230];}});}:function(_0x3b2cf7,_0x38d78e,_0x48f526,_0x417749){if(_0x417749===undefined)_0x417749=_0x48f526;_0x3b2cf7[_0x417749]=_0x38d78e[_0x48f526];}),__setModuleDefault=this&&this[a31_0x1f2199(0x116)]||(Object[a31_0x1f2199(0x135)]?function(_0x199511,_0x128b4a){var _0x8297ae=a31_0x1f2199;Object[_0x8297ae(0x137)](_0x199511,'default',{'enumerable':!![],'value':_0x128b4a});}:function(_0x42212b,_0x2f5eb9){_0x42212b['default']=_0x2f5eb9;}),__importStar=this&&this[a31_0x1f2199(0xf8)]||function(_0x2a9f36){var _0x2d4427=a31_0x1f2199;if(_0x2a9f36&&_0x2a9f36['__esModule'])return _0x2a9f36;var _0x551c17={};if(_0x2a9f36!=null){for(var _0x58278f in _0x2a9f36)if(_0x58278f!==_0x2d4427(0x11e)&&Object[_0x2d4427(0xdf)][_0x2d4427(0x104)](_0x2a9f36,_0x58278f))__createBinding(_0x551c17,_0x2a9f36,_0x58278f);}return __setModuleDefault(_0x551c17,_0x2a9f36),_0x551c17;},__awaiter=this&&this[a31_0x1f2199(0xe2)]||function(_0x45db5a,_0x41489c,_0x38503d,_0x2b105f){function _0x51afa(_0x1f08ec){return _0x1f08ec instanceof _0x38503d?_0x1f08ec:new _0x38503d(function(_0x6a6f5a){_0x6a6f5a(_0x1f08ec);});}return new(_0x38503d||(_0x38503d=Promise))(function(_0x2277e1,_0x3d12c5){var _0x251457=a31_0x9972;function _0x5841b9(_0x429555){var _0x4454ed=a31_0x9972;try{_0x20553a(_0x2b105f[_0x4454ed(0x144)](_0x429555));}catch(_0x4a5d5a){_0x3d12c5(_0x4a5d5a);}}function _0x4b9e9a(_0x7ee8b1){var _0x294bf9=a31_0x9972;try{_0x20553a(_0x2b105f[_0x294bf9(0xde)](_0x7ee8b1));}catch(_0x1c7e82){_0x3d12c5(_0x1c7e82);}}function _0x20553a(_0x3b0472){var _0x3e8ea5=a31_0x9972;_0x3b0472[_0x3e8ea5(0xd3)]?_0x2277e1(_0x3b0472['value']):_0x51afa(_0x3b0472['value'])[_0x3e8ea5(0x13f)](_0x5841b9,_0x4b9e9a);}_0x20553a((_0x2b105f=_0x2b105f[_0x251457(0xf4)](_0x45db5a,_0x41489c||[]))[_0x251457(0x144)]());});},__generator=this&&this['__generator']||function(_0x54ca3d,_0x586804){var _0x45aa1e=a31_0x1f2199,_0x149ffd={'label':0x0,'sent':function(){if(_0x875827[0x0]&0x1)throw _0x875827[0x1];return _0x875827[0x1];},'trys':[],'ops':[]},_0x8adbb4,_0x57f3a2,_0x875827,_0x4201ea;return _0x4201ea={'next':_0x5b6244(0x0),'throw':_0x5b6244(0x1),'return':_0x5b6244(0x2)},typeof Symbol===_0x45aa1e(0xd6)&&(_0x4201ea[Symbol['iterator']]=function(){return this;}),_0x4201ea;function _0x5b6244(_0x245210){return function(_0x14582f){return _0x4953b8([_0x245210,_0x14582f]);};}function _0x4953b8(_0x284b2b){var _0x48c9af=_0x45aa1e;if(_0x8adbb4)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x149ffd)try{if(_0x8adbb4=0x1,_0x57f3a2&&(_0x875827=_0x284b2b[0x0]&0x2?_0x57f3a2['return']:_0x284b2b[0x0]?_0x57f3a2['throw']||((_0x875827=_0x57f3a2[_0x48c9af(0x12f)])&&_0x875827[_0x48c9af(0x104)](_0x57f3a2),0x0):_0x57f3a2[_0x48c9af(0x144)])&&!(_0x875827=_0x875827[_0x48c9af(0x104)](_0x57f3a2,_0x284b2b[0x1]))[_0x48c9af(0xd3)])return _0x875827;if(_0x57f3a2=0x0,_0x875827)_0x284b2b=[_0x284b2b[0x0]&0x2,_0x875827[_0x48c9af(0xcf)]];switch(_0x284b2b[0x0]){case 0x0:case 0x1:_0x875827=_0x284b2b;break;case 0x4:_0x149ffd[_0x48c9af(0x115)]++;return{'value':_0x284b2b[0x1],'done':![]};case 0x5:_0x149ffd[_0x48c9af(0x115)]++,_0x57f3a2=_0x284b2b[0x1],_0x284b2b=[0x0];continue;case 0x7:_0x284b2b=_0x149ffd[_0x48c9af(0x138)]['pop'](),_0x149ffd[_0x48c9af(0x106)][_0x48c9af(0x12d)]();continue;default:if(!(_0x875827=_0x149ffd[_0x48c9af(0x106)],_0x875827=_0x875827[_0x48c9af(0xce)]>0x0&&_0x875827[_0x875827[_0x48c9af(0xce)]-0x1])&&(_0x284b2b[0x0]===0x6||_0x284b2b[0x0]===0x2)){_0x149ffd=0x0;continue;}if(_0x284b2b[0x0]===0x3&&(!_0x875827||_0x284b2b[0x1]>_0x875827[0x0]&&_0x284b2b[0x1]<_0x875827[0x3])){_0x149ffd[_0x48c9af(0x115)]=_0x284b2b[0x1];break;}if(_0x284b2b[0x0]===0x6&&_0x149ffd[_0x48c9af(0x115)]<_0x875827[0x1]){_0x149ffd['label']=_0x875827[0x1],_0x875827=_0x284b2b;break;}if(_0x875827&&_0x149ffd[_0x48c9af(0x115)]<_0x875827[0x2]){_0x149ffd[_0x48c9af(0x115)]=_0x875827[0x2],_0x149ffd[_0x48c9af(0x138)][_0x48c9af(0x105)](_0x284b2b);break;}if(_0x875827[0x2])_0x149ffd[_0x48c9af(0x138)][_0x48c9af(0x12d)]();_0x149ffd[_0x48c9af(0x106)][_0x48c9af(0x12d)]();continue;}_0x284b2b=_0x586804[_0x48c9af(0x104)](_0x54ca3d,_0x149ffd);}catch(_0x178ccf){_0x284b2b=[0x6,_0x178ccf],_0x57f3a2=0x0;}finally{_0x8adbb4=_0x875827=0x0;}if(_0x284b2b[0x0]&0x5)throw _0x284b2b[0x1];return{'value':_0x284b2b[0x0]?_0x284b2b[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this[a31_0x1f2199(0xee)]||function(){var _0x244686=a31_0x1f2199;for(var _0x48f5c0=0x0,_0x39d79d=0x0,_0x1d9186=arguments[_0x244686(0xce)];_0x39d79d<_0x1d9186;_0x39d79d++)_0x48f5c0+=arguments[_0x39d79d][_0x244686(0xce)];for(var _0x25b9d7=Array(_0x48f5c0),_0x3c0d93=0x0,_0x39d79d=0x0;_0x39d79d<_0x1d9186;_0x39d79d++)for(var _0x54a7d2=arguments[_0x39d79d],_0x1cfdae=0x0,_0x531263=_0x54a7d2[_0x244686(0xce)];_0x1cfdae<_0x531263;_0x1cfdae++,_0x3c0d93++)_0x25b9d7[_0x3c0d93]=_0x54a7d2[_0x1cfdae];return _0x25b9d7;},__importDefault=this&&this[a31_0x1f2199(0xe9)]||function(_0x5a26f7){var _0x20441e=a31_0x1f2199;return _0x5a26f7&&_0x5a26f7[_0x20441e(0xfc)]?_0x5a26f7:{'default':_0x5a26f7};};Object['defineProperty'](exports,a31_0x1f2199(0xfc),{'value':!![]});var path=__importStar(require(a31_0x1f2199(0x119))),_=__importStar(require(a31_0x1f2199(0xf6))),docker=__importStar(require(a31_0x1f2199(0x129))),logger_1=__importDefault(require('../../../common/logger')),dockerOpts=__importStar(require(a31_0x1f2199(0x120))),fs=__importStar(require(a31_0x1f2199(0xfa))),uuid_1=require(a31_0x1f2199(0x139)),rimraf=__importStar(require(a31_0x1f2199(0xd8))),extract_zip_1=__importDefault(require(a31_0x1f2199(0x127))),tmpDir=__importStar(require(a31_0x1f2199(0x13e))),devs_1=require(a31_0x1f2199(0x12e)),runtime_1=require(a31_0x1f2199(0x108)),core=__importStar(require(a31_0x1f2199(0x122)));function isZipArchive(_0x497f8c){var _0x99f189=a31_0x1f2199;return _0x497f8c?_0x497f8c[_0x99f189(0xdb)](_0x99f189(0x126))||_0x497f8c[_0x99f189(0xdb)](_0x99f189(0x11c))||_0x497f8c[_0x99f189(0xdb)](_0x99f189(0x11a)):![];}function processZipCodeIfNecessary(_0x4b62b8){return __awaiter(this,void 0x0,void 0x0,function(){var _0xd51efe;return __generator(this,function(_0x160d80){var _0x5e93b6=a31_0x9972;switch(_0x160d80['label']){case 0x0:if(!isZipArchive(_0x4b62b8))return[0x2,null];_0xd51efe=path['join'](tmpDir,uuid_1['v4']());return[0x4,fs[_0x5e93b6(0xe1)](_0xd51efe)];case 0x1:_0x160d80['sent'](),logger_1[_0x5e93b6(0x11e)]['log'](_0x5e93b6(0xf2)+_0xd51efe);return[0x4,extract_zip_1[_0x5e93b6(0x11e)](_0x4b62b8,{'dir':_0xd51efe})];case 0x2:_0x160d80['sent']();return[0x2,_0xd51efe];}});});}var Invoke=function(){var _0x1a1ca0=a31_0x1f2199;function _0x269940(_0x15192c,_0x53ae54,_0x42323e,_0xdab457,_0xc75cf,_0x2b6d7e,_0x4ca853,_0x14e5e9,_0x345784,_0x457a16,_0x6044c3,_0x242d76,_0x534bce){var _0x4eaf53=a31_0x9972;this[_0x4eaf53(0x141)]=_0x15192c,this[_0x4eaf53(0x13b)]=_0x53ae54,this['region']=_0x42323e,this['serviceName']=_0xc75cf[_0x4eaf53(0x10e)],this[_0x4eaf53(0xdd)]=_0xc75cf,this[_0x4eaf53(0x118)]=_0x2b6d7e[_0x4eaf53(0x10e)],this[_0x4eaf53(0x12a)]=_0x2b6d7e,this[_0x4eaf53(0x113)]=_0x4ca853,this['debugPort']=_0x14e5e9,this[_0x4eaf53(0x123)]=_0x345784,this['nasBaseDir']=_0x534bce,this['runtime']=this['functionConfig']['runtime'],this['baseDir']=_0xdab457,this[_0x4eaf53(0x142)]=this['functionConfig'][_0x4eaf53(0x142)]?path[_0x4eaf53(0x130)](this[_0x4eaf53(0x110)],this[_0x4eaf53(0x12a)][_0x4eaf53(0x142)]):null,this['tmpDir']=_0x457a16,this[_0x4eaf53(0x11b)]=_0x6044c3,this[_0x4eaf53(0xeb)]=_0x242d76;}return _0x269940[_0x1a1ca0(0xd1)]['init']=function(){var _0x4da3b1;return __awaiter(this,void 0x0,void 0x0,function(){var _0x3de4de,_0x4ae907,_0x3a22a7,_0x4483de,_0x1c1f8d,_0x43962c,_0xc5d821,_0x310df3,_0x44eaae,_0x52bb46,_0x205f28;return __generator(this,function(_0x49b840){var _0x287f08=a31_0x9972;switch(_0x49b840[_0x287f08(0x115)]){case 0x0:this[_0x287f08(0xe3)]=(_0x4da3b1=this[_0x287f08(0xdd)])===null||_0x4da3b1===void 0x0?void 0x0:_0x4da3b1[_0x287f08(0xe3)],_0x3de4de=this;return[0x4,dockerOpts[_0x287f08(0xcd)]({'nasConfig':this['nasConfig']})];case 0x1:_0x3de4de[_0x287f08(0x10d)]=_0x49b840[_0x287f08(0x124)](),_0x4ae907=this;return[0x4,docker[_0x287f08(0x13c)](this['baseDir'],this[_0x287f08(0xe4)],this[_0x287f08(0xe3)],this[_0x287f08(0x143)]||path[_0x287f08(0x140)](this[_0x287f08(0x110)],devs_1[_0x287f08(0xff)]))];case 0x2:_0x4ae907['nasMounts']=_0x49b840[_0x287f08(0x124)](),_0x3a22a7=this;return[0x4,processZipCodeIfNecessary(this[_0x287f08(0x142)])];case 0x3:_0x3a22a7['unzippedCodeDir']=_0x49b840[_0x287f08(0x124)](),_0x4483de=this;return[0x4,docker[_0x287f08(0xf9)](this['unzippedCodeDir']||this[_0x287f08(0x142)])];case 0x4:_0x4483de[_0x287f08(0xe6)]=_0x49b840[_0x287f08(0x124)](),_0x1c1f8d=this;return[0x4,docker['resolveTmpDirToMount'](this[_0x287f08(0xe0)])];case 0x5:_0x1c1f8d[_0x287f08(0x109)]=_0x49b840['sent'](),_0x43962c=this;return[0x4,docker[_0x287f08(0xf7)](this['debuggerPath'])];case 0x6:_0x43962c['debuggerMount']=_0x49b840['sent'](),_0xc5d821=this;return[0x4,docker[_0x287f08(0x117)]()];case 0x7:_0xc5d821[_0x287f08(0x103)]=_0x49b840[_0x287f08(0x124)](),_0x310df3=_[_0x287f08(0xd2)](__spreadArrays([this[_0x287f08(0xe6)]],this[_0x287f08(0x101)],[this[_0x287f08(0x103)]]));!_[_0x287f08(0x131)](this[_0x287f08(0x109)])&&_0x310df3[_0x287f08(0x105)](this[_0x287f08(0x109)]);!_[_0x287f08(0x131)](this[_0x287f08(0x102)])&&_0x310df3[_0x287f08(0x105)](this[_0x287f08(0x102)]);return[0x4,docker[_0x287f08(0x145)]()];case 0x8:_0x44eaae=_0x49b840[_0x287f08(0x124)]();_0x44eaae?this['mounts']=dockerOpts[_0x287f08(0x13d)](_0x310df3):this['mounts']=_0x310df3;logger_1[_0x287f08(0x11e)][_0x287f08(0x111)](_0x287f08(0x11f)+JSON['stringify'](this['mounts'],null,0x4)),this[_0x287f08(0xf5)]=docker[_0x287f08(0x114)](),_0x52bb46=runtime_1[_0x287f08(0x10f)](this[_0x287f08(0xf3)]);if(!_0x52bb46)return[0x3,0x9];this[_0x287f08(0xe8)]=this[_0x287f08(0x12a)][_0x287f08(0xd5)][_0x287f08(0xfd)];return[0x3,0xb];case 0x9:_0x205f28=this;return[0x4,dockerOpts[_0x287f08(0x134)](this[_0x287f08(0xf3)])];case 0xa:_0x205f28[_0x287f08(0xe8)]=_0x49b840[_0x287f08(0x124)](),_0x49b840[_0x287f08(0x115)]=0xb;case 0xb:return[0x4,docker[_0x287f08(0x10c)](this[_0x287f08(0xe8)])];case 0xc:_0x49b840['sent'](),this[_0x287f08(0x12b)]=!![];return[0x2];}});});},_0x269940[_0x1a1ca0(0xd1)][_0x1a1ca0(0x13a)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x33df6c){return[0x2];});});},_0x269940[_0x1a1ca0(0xd1)]['showDebugIdeTips']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x243d21){var _0x438b9f=a31_0x9972;switch(_0x243d21['label']){case 0x0:if(!(this[_0x438b9f(0x125)]&&this['debugIde']))return[0x3,0x4];if(!(this[_0x438b9f(0x123)][_0x438b9f(0xed)]()===_0x438b9f(0x10b)))return[0x3,0x2];return[0x4,docker[_0x438b9f(0xdc)](this[_0x438b9f(0xe4)],this['functionName'],this[_0x438b9f(0xf3)],this['codeMount'][_0x438b9f(0xd7)],this[_0x438b9f(0x125)])];case 0x1:_0x243d21['sent']();return[0x3,0x4];case 0x2:if(!(this['debugIde']['toLowerCase']()===_0x438b9f(0x146)))return[0x3,0x4];return[0x4,docker[_0x438b9f(0xd9)](this[_0x438b9f(0xe6)][_0x438b9f(0xd7)],this[_0x438b9f(0x125)])];case 0x3:_0x243d21[_0x438b9f(0x124)](),_0x243d21['label']=0x4;case 0x4:return[0x2];}});});},_0x269940['prototype'][_0x1a1ca0(0xf0)]=function(){var _0x1d2d81=_0x1a1ca0;this['unzippedCodeDir']&&(rimraf[_0x1d2d81(0x107)](this[_0x1d2d81(0x10a)]),console[_0x1d2d81(0x132)](_0x1d2d81(0x133)+this['unzippedCodeDir']+_0x1d2d81(0xec)),this[_0x1d2d81(0x10a)]=null);},_0x269940[_0x1a1ca0(0xd1)][_0x1a1ca0(0x136)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0xaf04ab){var _0x64a5bc=a31_0x9972;return this[_0x64a5bc(0xf0)](),[0x2];});});},_0x269940['prototype'][_0x1a1ca0(0xfe)]=function(){var _0x124791=_0x1a1ca0,_0x420f91,_0x3d3858;return this['creds'][_0x124791(0xea)]+'-'+this[_0x124791(0xfb)]+'-'+((_0x420f91=this['serviceConfig'])===null||_0x420f91===void 0x0?void 0x0:_0x420f91['name'])+'-'+((_0x3d3858=this[_0x124791(0x12a)])===null||_0x3d3858===void 0x0?void 0x0:_0x3d3858[_0x124791(0x10e)]);},_0x269940[_0x1a1ca0(0xd1)][_0x1a1ca0(0x100)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){var _0x250041;return __generator(this,function(_0x1285d9){var _0x48cf32=a31_0x9972;switch(_0x1285d9[_0x48cf32(0x115)]){case 0x0:_0x250041=this[_0x48cf32(0xfe)]();return[0x4,core[_0x48cf32(0x100)](_0x250041)];case 0x1:return[0x2,_0x1285d9[_0x48cf32(0x124)]()];}});});},_0x269940;}();exports[a31_0x1f2199(0x11e)]=Invoke;