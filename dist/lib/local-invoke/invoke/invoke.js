'use strict';var a32_0x1832=['cleanUnzippedCodeDir','prototype','sync','unzippedCodeDir','transformMountsForToolbox','74gBhbhh','isCustomContainerRuntime','DEFAULT_NAS_PATH_SUFFIX','functionName','12CDnbnN','length','baseDir','debugIde','171878CSMolO','__awaiter','mounts','nasMounts','showDebugIdeTipsForPycharm','endsWith','pullFcImageIfNeed','__esModule','codeMount','.jar','call','region','serviceName','1958lIzyuc','init','imageName','Source','nasBaseDir','stringify','value','path','afterInvoke','../../../common/logger','pycharm','passwdMount','debug','image','.war','1089OpOBtr','ops','resolveNasConfigToMounts','vscode','resolveCodeUriToMount','uuid','__setModuleDefault','908NQhrSm','default','../../docker/docker','showDebugIdeTipsForVscode','join','writeDebugIdeConfigForVscode','function','resolve','isEmpty','hasOwnProperty','lodash','throw','1IICssG','codeUri\x20is\x20a\x20zip\x20format,\x20will\x20unzipping\x20to\x20','codeUri','__importStar','rimraf','../../docker/docker-opts','debugPort','done','functionConfig','defineProperty','63937xYmZvq','push','toLowerCase','clean\x20tmp\x20code\x20dir\x20','pop','__importDefault','resolveDockerUser','containerName','trys','debugArgs','label','nasConfig','iterator','tmpDir','extract-zip','19CzoYiB','\x20successfully','sessionId','beforeInvoke','return','../../utils/runtime','8579JHbqwi','299pVdTMO','then','name','create','docker\x20mounts:\x20','compact','tmpDirMount','debuggerMount','resolveTmpDirToMount','runtime','debuggerPath','tunnelService','creds','log','inited','next','serviceConfig','ensureDir','isDockerToolBoxAndEnsureDockerVersion','resolveRuntimeToDockerImage','resolveDebuggerPathToMount','sent','309223okErxQ','.zip','resolvePasswdMount','apply'];var a32_0xa24862=a32_0x42ca;(function(_0x4503f7,_0x119d7d){var _0x9d448c=a32_0x42ca;while(!![]){try{var _0x57fec3=parseInt(_0x9d448c(0x22c))*parseInt(_0x9d448c(0x250))+-parseInt(_0x9d448c(0x234))+parseInt(_0x9d448c(0x1f7))+-parseInt(_0x9d448c(0x206))*-parseInt(_0x9d448c(0x20c))+-parseInt(_0x9d448c(0x257))*parseInt(_0x9d448c(0x20d))+-parseInt(_0x9d448c(0x241))*parseInt(_0x9d448c(0x230))+parseInt(_0x9d448c(0x223))*parseInt(_0x9d448c(0x1ed));if(_0x57fec3===_0x119d7d)break;else _0x4503f7['push'](_0x4503f7['shift']());}catch(_0x36c4b6){_0x4503f7['push'](_0x4503f7['shift']());}}}(a32_0x1832,0x24979));function a32_0x42ca(_0x3943f7,_0xe5ed2){return a32_0x42ca=function(_0x1832ea,_0x42cac1){_0x1832ea=_0x1832ea-0x1ea;var _0xd68f52=a32_0x1832[_0x1832ea];return _0xd68f52;},a32_0x42ca(_0x3943f7,_0xe5ed2);}var __createBinding=this&&this['__createBinding']||(Object[a32_0xa24862(0x210)]?function(_0x474461,_0x258951,_0x595ab4,_0x20579d){if(_0x20579d===undefined)_0x20579d=_0x595ab4;Object['defineProperty'](_0x474461,_0x20579d,{'enumerable':!![],'get':function(){return _0x258951[_0x595ab4];}});}:function(_0x114b9f,_0x4888c7,_0x4f4e26,_0x406415){if(_0x406415===undefined)_0x406415=_0x4f4e26;_0x114b9f[_0x406415]=_0x4888c7[_0x4f4e26];}),__setModuleDefault=this&&this[a32_0xa24862(0x256)]||(Object[a32_0xa24862(0x210)]?function(_0x167c66,_0x570eda){var _0x2144b8=a32_0xa24862;Object[_0x2144b8(0x1f6)](_0x167c66,_0x2144b8(0x258),{'enumerable':!![],'value':_0x570eda});}:function(_0x39c0d2,_0x65c18a){var _0x415cd0=a32_0xa24862;_0x39c0d2[_0x415cd0(0x258)]=_0x65c18a;}),__importStar=this&&this[a32_0xa24862(0x1f0)]||function(_0x14d8d3){var _0x5e75d8=a32_0xa24862;if(_0x14d8d3&&_0x14d8d3[_0x5e75d8(0x23b)])return _0x14d8d3;var _0x466ece={};if(_0x14d8d3!=null){for(var _0x3c52bd in _0x14d8d3)if(_0x3c52bd!=='default'&&Object[_0x5e75d8(0x1ea)][_0x5e75d8(0x23e)](_0x14d8d3,_0x3c52bd))__createBinding(_0x466ece,_0x14d8d3,_0x3c52bd);}return __setModuleDefault(_0x466ece,_0x14d8d3),_0x466ece;},__awaiter=this&&this[a32_0xa24862(0x235)]||function(_0xbdd179,_0x1a4cdf,_0x3bab57,_0x3237c7){function _0xcca0b9(_0x108b6b){return _0x108b6b instanceof _0x3bab57?_0x108b6b:new _0x3bab57(function(_0x17e11d){_0x17e11d(_0x108b6b);});}return new(_0x3bab57||(_0x3bab57=Promise))(function(_0x55f40c,_0x5361cf){var _0x1aa119=a32_0x42ca;function _0x3a01b8(_0x35020b){var _0x27bc60=a32_0x42ca;try{_0x4858ee(_0x3237c7[_0x27bc60(0x21c)](_0x35020b));}catch(_0x3f1796){_0x5361cf(_0x3f1796);}}function _0x53f0e2(_0x3ee2a6){var _0x1274f8=a32_0x42ca;try{_0x4858ee(_0x3237c7[_0x1274f8(0x1ec)](_0x3ee2a6));}catch(_0x7051d8){_0x5361cf(_0x7051d8);}}function _0x4858ee(_0x14f01a){var _0x5b506c=a32_0x42ca;_0x14f01a[_0x5b506c(0x1f4)]?_0x55f40c(_0x14f01a[_0x5b506c(0x247)]):_0xcca0b9(_0x14f01a['value'])[_0x5b506c(0x20e)](_0x3a01b8,_0x53f0e2);}_0x4858ee((_0x3237c7=_0x3237c7[_0x1aa119(0x226)](_0xbdd179,_0x1a4cdf||[]))[_0x1aa119(0x21c)]());});},__generator=this&&this['__generator']||function(_0x126f58,_0x7783fb){var _0x2d9857=a32_0xa24862,_0x2f0f09={'label':0x0,'sent':function(){if(_0x485bfe[0x0]&0x1)throw _0x485bfe[0x1];return _0x485bfe[0x1];},'trys':[],'ops':[]},_0x515e76,_0x3e4a94,_0x485bfe,_0x3b7240;return _0x3b7240={'next':_0x56ebb1(0x0),'throw':_0x56ebb1(0x1),'return':_0x56ebb1(0x2)},typeof Symbol===_0x2d9857(0x25d)&&(_0x3b7240[Symbol[_0x2d9857(0x203)]]=function(){return this;}),_0x3b7240;function _0x56ebb1(_0x2b49eb){return function(_0x3d1966){return _0x55f50a([_0x2b49eb,_0x3d1966]);};}function _0x55f50a(_0x1f421e){var _0x3e8f1f=_0x2d9857;if(_0x515e76)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x2f0f09)try{if(_0x515e76=0x1,_0x3e4a94&&(_0x485bfe=_0x1f421e[0x0]&0x2?_0x3e4a94['return']:_0x1f421e[0x0]?_0x3e4a94[_0x3e8f1f(0x1ec)]||((_0x485bfe=_0x3e4a94[_0x3e8f1f(0x20a)])&&_0x485bfe[_0x3e8f1f(0x23e)](_0x3e4a94),0x0):_0x3e4a94['next'])&&!(_0x485bfe=_0x485bfe[_0x3e8f1f(0x23e)](_0x3e4a94,_0x1f421e[0x1]))[_0x3e8f1f(0x1f4)])return _0x485bfe;if(_0x3e4a94=0x0,_0x485bfe)_0x1f421e=[_0x1f421e[0x0]&0x2,_0x485bfe[_0x3e8f1f(0x247)]];switch(_0x1f421e[0x0]){case 0x0:case 0x1:_0x485bfe=_0x1f421e;break;case 0x4:_0x2f0f09[_0x3e8f1f(0x201)]++;return{'value':_0x1f421e[0x1],'done':![]};case 0x5:_0x2f0f09[_0x3e8f1f(0x201)]++,_0x3e4a94=_0x1f421e[0x1],_0x1f421e=[0x0];continue;case 0x7:_0x1f421e=_0x2f0f09['ops'][_0x3e8f1f(0x1fb)](),_0x2f0f09[_0x3e8f1f(0x1ff)][_0x3e8f1f(0x1fb)]();continue;default:if(!(_0x485bfe=_0x2f0f09[_0x3e8f1f(0x1ff)],_0x485bfe=_0x485bfe['length']>0x0&&_0x485bfe[_0x485bfe[_0x3e8f1f(0x231)]-0x1])&&(_0x1f421e[0x0]===0x6||_0x1f421e[0x0]===0x2)){_0x2f0f09=0x0;continue;}if(_0x1f421e[0x0]===0x3&&(!_0x485bfe||_0x1f421e[0x1]>_0x485bfe[0x0]&&_0x1f421e[0x1]<_0x485bfe[0x3])){_0x2f0f09[_0x3e8f1f(0x201)]=_0x1f421e[0x1];break;}if(_0x1f421e[0x0]===0x6&&_0x2f0f09[_0x3e8f1f(0x201)]<_0x485bfe[0x1]){_0x2f0f09[_0x3e8f1f(0x201)]=_0x485bfe[0x1],_0x485bfe=_0x1f421e;break;}if(_0x485bfe&&_0x2f0f09[_0x3e8f1f(0x201)]<_0x485bfe[0x2]){_0x2f0f09[_0x3e8f1f(0x201)]=_0x485bfe[0x2],_0x2f0f09[_0x3e8f1f(0x251)][_0x3e8f1f(0x1f8)](_0x1f421e);break;}if(_0x485bfe[0x2])_0x2f0f09[_0x3e8f1f(0x251)][_0x3e8f1f(0x1fb)]();_0x2f0f09[_0x3e8f1f(0x1ff)][_0x3e8f1f(0x1fb)]();continue;}_0x1f421e=_0x7783fb[_0x3e8f1f(0x23e)](_0x126f58,_0x2f0f09);}catch(_0x46be30){_0x1f421e=[0x6,_0x46be30],_0x3e4a94=0x0;}finally{_0x515e76=_0x485bfe=0x0;}if(_0x1f421e[0x0]&0x5)throw _0x1f421e[0x1];return{'value':_0x1f421e[0x0]?_0x1f421e[0x1]:void 0x0,'done':!![]};}},__spreadArrays=this&&this['__spreadArrays']||function(){var _0x2c834e=a32_0xa24862;for(var _0x52fc58=0x0,_0x4a111f=0x0,_0x564a5e=arguments[_0x2c834e(0x231)];_0x4a111f<_0x564a5e;_0x4a111f++)_0x52fc58+=arguments[_0x4a111f][_0x2c834e(0x231)];for(var _0x9cb8cc=Array(_0x52fc58),_0x5570fa=0x0,_0x4a111f=0x0;_0x4a111f<_0x564a5e;_0x4a111f++)for(var _0x44be90=arguments[_0x4a111f],_0x3669a3=0x0,_0x389025=_0x44be90[_0x2c834e(0x231)];_0x3669a3<_0x389025;_0x3669a3++,_0x5570fa++)_0x9cb8cc[_0x5570fa]=_0x44be90[_0x3669a3];return _0x9cb8cc;},__importDefault=this&&this[a32_0xa24862(0x1fc)]||function(_0x179a5f){return _0x179a5f&&_0x179a5f['__esModule']?_0x179a5f:{'default':_0x179a5f};};Object[a32_0xa24862(0x1f6)](exports,'__esModule',{'value':!![]});var path=__importStar(require(a32_0xa24862(0x248))),_=__importStar(require(a32_0xa24862(0x1eb))),docker=__importStar(require(a32_0xa24862(0x259))),logger_1=__importDefault(require(a32_0xa24862(0x24a))),dockerOpts=__importStar(require(a32_0xa24862(0x1f2))),fs=__importStar(require('fs-extra')),uuid_1=require(a32_0xa24862(0x255)),rimraf=__importStar(require(a32_0xa24862(0x1f1))),extract_zip_1=__importDefault(require(a32_0xa24862(0x205))),tmpDir=__importStar(require('temp-dir')),devs_1=require('../../devs'),runtime_1=require(a32_0xa24862(0x20b)),docker_1=require(a32_0xa24862(0x259));function isZipArchive(_0x2685d2){var _0x4bad25=a32_0xa24862;return _0x2685d2?_0x2685d2[_0x4bad25(0x239)](_0x4bad25(0x224))||_0x2685d2[_0x4bad25(0x239)](_0x4bad25(0x23d))||_0x2685d2[_0x4bad25(0x239)](_0x4bad25(0x24f)):![];}function processZipCodeIfNecessary(_0xcde69){return __awaiter(this,void 0x0,void 0x0,function(){var _0x252407;return __generator(this,function(_0x2542a6){var _0x253a96=a32_0x42ca;switch(_0x2542a6[_0x253a96(0x201)]){case 0x0:if(!isZipArchive(_0xcde69))return[0x2,null];_0x252407=path['join'](tmpDir,uuid_1['v4']());return[0x4,fs[_0x253a96(0x21e)](_0x252407)];case 0x1:_0x2542a6[_0x253a96(0x222)](),logger_1[_0x253a96(0x258)][_0x253a96(0x21a)](_0x253a96(0x1ee)+_0x252407);return[0x4,extract_zip_1[_0x253a96(0x258)](_0xcde69,{'dir':_0x252407})];case 0x2:_0x2542a6[_0x253a96(0x222)]();return[0x2,_0x252407];}});});}var Invoke=function(){var _0x39d806=a32_0xa24862;function _0x16848b(_0x389405,_0x1cbca5,_0x570e8a,_0x58077b,_0x16dd61,_0x51cdd7,_0x1e7791,_0x1a8f6a,_0x552cee,_0x68f75b,_0xa1daf1,_0x31bb62,_0x2fc1a6,_0x27171f){var _0x22ef08=a32_0x42ca;this[_0x22ef08(0x218)]=_0x389405,this[_0x22ef08(0x208)]=_0x1cbca5,this[_0x22ef08(0x219)]=_0x570e8a,this[_0x22ef08(0x23f)]=_0x58077b,this['serviceName']=_0x51cdd7[_0x22ef08(0x20f)],this[_0x22ef08(0x21d)]=_0x51cdd7,this['functionName']=_0x1e7791[_0x22ef08(0x20f)],this['functionConfig']=_0x1e7791,this['triggerConfig']=_0x1a8f6a,this['debugPort']=_0x552cee,this[_0x22ef08(0x233)]=_0x68f75b,this[_0x22ef08(0x245)]=_0x27171f,this[_0x22ef08(0x216)]=this['functionConfig'][_0x22ef08(0x216)],this[_0x22ef08(0x232)]=_0x16dd61,this[_0x22ef08(0x1ef)]=this['functionConfig'][_0x22ef08(0x1ef)]?path[_0x22ef08(0x25e)](this[_0x22ef08(0x232)],this[_0x22ef08(0x1f5)][_0x22ef08(0x1ef)]):null,this[_0x22ef08(0x204)]=_0xa1daf1,this[_0x22ef08(0x217)]=_0x31bb62,this[_0x22ef08(0x200)]=_0x2fc1a6;}return _0x16848b[_0x39d806(0x228)][_0x39d806(0x242)]=function(){var _0x5f3f49;return __awaiter(this,void 0x0,void 0x0,function(){var _0x26d1e9,_0xa92517,_0x4aa163,_0x1c3fbd,_0xa9fec2,_0x599cb9,_0x53d430,_0x41360a,_0x13d77c,_0x1c2f6b,_0x123c8a;return __generator(this,function(_0x1184ed){var _0x46ec56=a32_0x42ca;switch(_0x1184ed['label']){case 0x0:this[_0x46ec56(0x202)]=(_0x5f3f49=this[_0x46ec56(0x21d)])===null||_0x5f3f49===void 0x0?void 0x0:_0x5f3f49[_0x46ec56(0x202)],_0x26d1e9=this;return[0x4,dockerOpts[_0x46ec56(0x1fd)]({'nasConfig':this[_0x46ec56(0x202)]})];case 0x1:_0x26d1e9['dockerUser']=_0x1184ed[_0x46ec56(0x222)](),_0xa92517=this;return[0x4,docker[_0x46ec56(0x252)](this[_0x46ec56(0x232)],this[_0x46ec56(0x240)],this[_0x46ec56(0x202)],this[_0x46ec56(0x245)]||path[_0x46ec56(0x25b)](this[_0x46ec56(0x232)],devs_1[_0x46ec56(0x22e)]))];case 0x2:_0xa92517['nasMounts']=_0x1184ed[_0x46ec56(0x222)](),_0x4aa163=this;return[0x4,processZipCodeIfNecessary(this[_0x46ec56(0x1ef)])];case 0x3:_0x4aa163[_0x46ec56(0x22a)]=_0x1184ed[_0x46ec56(0x222)](),_0x1c3fbd=this;return[0x4,docker[_0x46ec56(0x254)](this[_0x46ec56(0x22a)]||this['codeUri'])];case 0x4:_0x1c3fbd['codeMount']=_0x1184ed['sent'](),_0xa9fec2=this;return[0x4,docker[_0x46ec56(0x215)](this['tmpDir'])];case 0x5:_0xa9fec2[_0x46ec56(0x213)]=_0x1184ed[_0x46ec56(0x222)](),_0x599cb9=this;return[0x4,docker[_0x46ec56(0x221)](this[_0x46ec56(0x217)])];case 0x6:_0x599cb9[_0x46ec56(0x214)]=_0x1184ed['sent'](),_0x53d430=this;return[0x4,docker[_0x46ec56(0x225)]()];case 0x7:_0x53d430[_0x46ec56(0x24c)]=_0x1184ed['sent'](),_0x41360a=_[_0x46ec56(0x212)](__spreadArrays([this['codeMount']],this[_0x46ec56(0x237)],[this[_0x46ec56(0x24c)]]));!_[_0x46ec56(0x25f)](this[_0x46ec56(0x213)])&&_0x41360a['push'](this[_0x46ec56(0x213)]);!_[_0x46ec56(0x25f)](this[_0x46ec56(0x214)])&&_0x41360a['push'](this[_0x46ec56(0x214)]);return[0x4,docker[_0x46ec56(0x21f)]()];case 0x8:_0x13d77c=_0x1184ed[_0x46ec56(0x222)]();_0x13d77c?this[_0x46ec56(0x236)]=dockerOpts[_0x46ec56(0x22b)](_0x41360a):this[_0x46ec56(0x236)]=_0x41360a;logger_1['default'][_0x46ec56(0x24d)](_0x46ec56(0x211)+JSON[_0x46ec56(0x246)](this[_0x46ec56(0x236)],null,0x4)),this[_0x46ec56(0x1fe)]=docker['generateRamdomContainerName'](),_0x1c2f6b=runtime_1[_0x46ec56(0x22d)](this['runtime']);if(!_0x1c2f6b)return[0x3,0x9];this[_0x46ec56(0x243)]=this[_0x46ec56(0x1f5)]['customContainerConfig'][_0x46ec56(0x24e)];return[0x3,0xb];case 0x9:_0x123c8a=this;return[0x4,dockerOpts[_0x46ec56(0x220)](this[_0x46ec56(0x216)])];case 0xa:_0x123c8a[_0x46ec56(0x243)]=_0x1184ed[_0x46ec56(0x222)](),_0x1184ed[_0x46ec56(0x201)]=0xb;case 0xb:return[0x4,docker[_0x46ec56(0x23a)](this[_0x46ec56(0x243)])];case 0xc:_0x1184ed[_0x46ec56(0x222)](),this[_0x46ec56(0x21b)]=!![];return[0x2];}});});},_0x16848b[_0x39d806(0x228)][_0x39d806(0x209)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x3c282f){return[0x2];});});},_0x16848b['prototype']['showDebugIdeTips']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x2eb365){var _0x1ee83a=a32_0x42ca;switch(_0x2eb365[_0x1ee83a(0x201)]){case 0x0:if(!(this[_0x1ee83a(0x1f3)]&&this[_0x1ee83a(0x233)]))return[0x3,0x4];if(!(this['debugIde']['toLowerCase']()===_0x1ee83a(0x253)))return[0x3,0x2];return[0x4,docker[_0x1ee83a(0x25a)](this[_0x1ee83a(0x240)],this[_0x1ee83a(0x22f)],this[_0x1ee83a(0x216)],this[_0x1ee83a(0x23c)][_0x1ee83a(0x244)],this['debugPort'])];case 0x1:_0x2eb365[_0x1ee83a(0x222)]();return[0x3,0x4];case 0x2:if(!(this[_0x1ee83a(0x233)][_0x1ee83a(0x1f9)]()===_0x1ee83a(0x24b)))return[0x3,0x4];return[0x4,docker[_0x1ee83a(0x238)](this[_0x1ee83a(0x23c)]['Source'],this[_0x1ee83a(0x1f3)])];case 0x3:_0x2eb365[_0x1ee83a(0x222)](),_0x2eb365['label']=0x4;case 0x4:return[0x2];}});});},_0x16848b['prototype']['setDebugIdeConfig']=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x5e7163){var _0x99877d=a32_0x42ca;switch(_0x5e7163[_0x99877d(0x201)]){case 0x0:if(!(this['debugPort']&&this['debugIde']))return[0x3,0x2];if(!(this[_0x99877d(0x233)][_0x99877d(0x1f9)]()===_0x99877d(0x253)))return[0x3,0x2];return[0x4,docker_1[_0x99877d(0x25c)](this['baseDir'],this[_0x99877d(0x240)],this[_0x99877d(0x22f)],this[_0x99877d(0x216)],this[_0x99877d(0x23c)][_0x99877d(0x244)],this['debugPort'])];case 0x1:_0x5e7163[_0x99877d(0x222)](),_0x5e7163[_0x99877d(0x201)]=0x2;case 0x2:return[0x2];}});});},_0x16848b[_0x39d806(0x228)][_0x39d806(0x227)]=function(){var _0x1f3042=_0x39d806;this[_0x1f3042(0x22a)]&&(rimraf[_0x1f3042(0x229)](this['unzippedCodeDir']),console[_0x1f3042(0x21a)](_0x1f3042(0x1fa)+this['unzippedCodeDir']+_0x1f3042(0x207)),this[_0x1f3042(0x22a)]=null);},_0x16848b[_0x39d806(0x228)][_0x39d806(0x249)]=function(){return __awaiter(this,void 0x0,void 0x0,function(){return __generator(this,function(_0x1df5ed){var _0x277357=a32_0x42ca;return this[_0x277357(0x227)](),[0x2];});});},_0x16848b;}();exports[a32_0xa24862(0x258)]=Invoke;