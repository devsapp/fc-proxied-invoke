'use strict';var a29_0x16ab=['590112dYbyzL','PYTHONUSERBASE','containerPath','then','string','/usr/local/lib','__awaiter','683142HxQdWl','/usr/lib','/lib','call','/usr/local/lib/node_modules','trys','LD_LIBRARY_PATH','83lXVwbW','8heyXim','existsSync','union','pop','/usr/sbin','label','__createBinding','__setModuleDefault','readdirSync','/root','resolve','/usr/bin','utf-8','/lib/x86_64-linux-gnu','/python','.conf','/node_modules','addEnv','resolveMountPoint','pathExists','startsWith','NODE_PATH','isEmpty','/code/.s','next','assign','defineProperty','PATH','addInstallTargetEnv','/code/lib','hasOwnProperty','/usr/lib64','125262JjaurM','lstat','645087MLnAEU','/python/lib/python2.7/site-packages','resolveLibPathsFromLdConf','mountPoints','.fun/root/etc/ld.so.conf.d','/usr/lib/x86_64-linux-gnu','325894ayqMVu','ops','path','/usr/local/sbin','reduce','PYTHONPATH','__esModule','../utils/file','throw','/code/.fun/root','length','/node_modules/.bin','forEach','join','/code','/python/bin','__importStar','/usr/local/bin','return','5813DRfpqy','__generator','done','./nas','match','function','/bin','2oMgURB','value','isFile','mountDir','/sbin','/python/lib/python3.6/site-packages','lodash','flatten','push','default','all','2405hOhJrI','sent','apply','create','map','2YaYgcu'];var a29_0x2551a6=a29_0x419e;(function(_0x420e91,_0x2aae10){var _0x2806e=a29_0x419e;while(!![]){try{var _0x31ef65=-parseInt(_0x2806e(0x1c6))*-parseInt(_0x2806e(0x19c))+-parseInt(_0x2806e(0x196))+parseInt(_0x2806e(0x1c7))+-parseInt(_0x2806e(0x1b6))*parseInt(_0x2806e(0x1af))+parseInt(_0x2806e(0x1ce))+-parseInt(_0x2806e(0x1c1))*-parseInt(_0x2806e(0x1d5))+parseInt(_0x2806e(0x1f6))*-parseInt(_0x2806e(0x1d6));if(_0x31ef65===_0x2aae10)break;else _0x420e91['push'](_0x420e91['shift']());}catch(_0x1d9ee0){_0x420e91['push'](_0x420e91['shift']());}}}(a29_0x16ab,0x71bb8));var __createBinding=this&&this[a29_0x2551a6(0x1dc)]||(Object['create']?function(_0xb5671,_0xfca3d8,_0x360566,_0x51a973){var _0x4b10b4=a29_0x2551a6;if(_0x51a973===undefined)_0x51a973=_0x360566;Object[_0x4b10b4(0x1f0)](_0xb5671,_0x51a973,{'enumerable':!![],'get':function(){return _0xfca3d8[_0x360566];}});}:function(_0x5c3991,_0x416422,_0x534287,_0x2592e5){if(_0x2592e5===undefined)_0x2592e5=_0x534287;_0x5c3991[_0x2592e5]=_0x416422[_0x534287];}),__setModuleDefault=this&&this[a29_0x2551a6(0x1dd)]||(Object[a29_0x2551a6(0x1c4)]?function(_0x1f531c,_0x21b552){var _0x28ab18=a29_0x2551a6;Object[_0x28ab18(0x1f0)](_0x1f531c,_0x28ab18(0x1bf),{'enumerable':!![],'value':_0x21b552});}:function(_0x1af1a4,_0x5117bc){var _0x432035=a29_0x2551a6;_0x1af1a4[_0x432035(0x1bf)]=_0x5117bc;}),__importStar=this&&this[a29_0x2551a6(0x1ac)]||function(_0x4525d9){var _0x42164d=a29_0x2551a6;if(_0x4525d9&&_0x4525d9[_0x42164d(0x1a2)])return _0x4525d9;var _0x59f3d5={};if(_0x4525d9!=null){for(var _0x1ca3aa in _0x4525d9)if(_0x1ca3aa!=='default'&&Object[_0x42164d(0x1f4)][_0x42164d(0x1d1)](_0x4525d9,_0x1ca3aa))__createBinding(_0x59f3d5,_0x4525d9,_0x1ca3aa);}return __setModuleDefault(_0x59f3d5,_0x4525d9),_0x59f3d5;},__awaiter=this&&this[a29_0x2551a6(0x1cd)]||function(_0x48fff5,_0x3167ea,_0x304dcd,_0x29178c){function _0x13b94a(_0x505487){return _0x505487 instanceof _0x304dcd?_0x505487:new _0x304dcd(function(_0x44b686){_0x44b686(_0x505487);});}return new(_0x304dcd||(_0x304dcd=Promise))(function(_0xc4906d,_0x3f21fd){var _0x1405c1=a29_0x419e;function _0x54856f(_0x51133d){var _0x4f10fb=a29_0x419e;try{_0x48903b(_0x29178c[_0x4f10fb(0x1ee)](_0x51133d));}catch(_0x302c20){_0x3f21fd(_0x302c20);}}function _0x3d77df(_0x516438){try{_0x48903b(_0x29178c['throw'](_0x516438));}catch(_0x199605){_0x3f21fd(_0x199605);}}function _0x48903b(_0x47f15a){var _0x1969aa=a29_0x419e;_0x47f15a[_0x1969aa(0x1b1)]?_0xc4906d(_0x47f15a[_0x1969aa(0x1b7)]):_0x13b94a(_0x47f15a[_0x1969aa(0x1b7)])[_0x1969aa(0x1ca)](_0x54856f,_0x3d77df);}_0x48903b((_0x29178c=_0x29178c[_0x1405c1(0x1c3)](_0x48fff5,_0x3167ea||[]))[_0x1405c1(0x1ee)]());});},__generator=this&&this[a29_0x2551a6(0x1b0)]||function(_0x4468a4,_0x6935fe){var _0x4786e5=a29_0x2551a6,_0x336102={'label':0x0,'sent':function(){if(_0x1af7a2[0x0]&0x1)throw _0x1af7a2[0x1];return _0x1af7a2[0x1];},'trys':[],'ops':[]},_0x38ad3a,_0x513a6e,_0x1af7a2,_0x2b729e;return _0x2b729e={'next':_0x216a3d(0x0),'throw':_0x216a3d(0x1),'return':_0x216a3d(0x2)},typeof Symbol===_0x4786e5(0x1b4)&&(_0x2b729e[Symbol['iterator']]=function(){return this;}),_0x2b729e;function _0x216a3d(_0x3a6d27){return function(_0x414985){return _0x533a4f([_0x3a6d27,_0x414985]);};}function _0x533a4f(_0x5ed8a6){var _0x174f61=_0x4786e5;if(_0x38ad3a)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x336102)try{if(_0x38ad3a=0x1,_0x513a6e&&(_0x1af7a2=_0x5ed8a6[0x0]&0x2?_0x513a6e[_0x174f61(0x1ae)]:_0x5ed8a6[0x0]?_0x513a6e[_0x174f61(0x1a4)]||((_0x1af7a2=_0x513a6e[_0x174f61(0x1ae)])&&_0x1af7a2[_0x174f61(0x1d1)](_0x513a6e),0x0):_0x513a6e[_0x174f61(0x1ee)])&&!(_0x1af7a2=_0x1af7a2[_0x174f61(0x1d1)](_0x513a6e,_0x5ed8a6[0x1]))[_0x174f61(0x1b1)])return _0x1af7a2;if(_0x513a6e=0x0,_0x1af7a2)_0x5ed8a6=[_0x5ed8a6[0x0]&0x2,_0x1af7a2['value']];switch(_0x5ed8a6[0x0]){case 0x0:case 0x1:_0x1af7a2=_0x5ed8a6;break;case 0x4:_0x336102[_0x174f61(0x1db)]++;return{'value':_0x5ed8a6[0x1],'done':![]};case 0x5:_0x336102[_0x174f61(0x1db)]++,_0x513a6e=_0x5ed8a6[0x1],_0x5ed8a6=[0x0];continue;case 0x7:_0x5ed8a6=_0x336102[_0x174f61(0x19d)][_0x174f61(0x1d9)](),_0x336102[_0x174f61(0x1d3)]['pop']();continue;default:if(!(_0x1af7a2=_0x336102[_0x174f61(0x1d3)],_0x1af7a2=_0x1af7a2[_0x174f61(0x1a6)]>0x0&&_0x1af7a2[_0x1af7a2[_0x174f61(0x1a6)]-0x1])&&(_0x5ed8a6[0x0]===0x6||_0x5ed8a6[0x0]===0x2)){_0x336102=0x0;continue;}if(_0x5ed8a6[0x0]===0x3&&(!_0x1af7a2||_0x5ed8a6[0x1]>_0x1af7a2[0x0]&&_0x5ed8a6[0x1]<_0x1af7a2[0x3])){_0x336102[_0x174f61(0x1db)]=_0x5ed8a6[0x1];break;}if(_0x5ed8a6[0x0]===0x6&&_0x336102[_0x174f61(0x1db)]<_0x1af7a2[0x1]){_0x336102[_0x174f61(0x1db)]=_0x1af7a2[0x1],_0x1af7a2=_0x5ed8a6;break;}if(_0x1af7a2&&_0x336102[_0x174f61(0x1db)]<_0x1af7a2[0x2]){_0x336102[_0x174f61(0x1db)]=_0x1af7a2[0x2],_0x336102[_0x174f61(0x19d)][_0x174f61(0x1be)](_0x5ed8a6);break;}if(_0x1af7a2[0x2])_0x336102[_0x174f61(0x19d)][_0x174f61(0x1d9)]();_0x336102[_0x174f61(0x1d3)]['pop']();continue;}_0x5ed8a6=_0x6935fe['call'](_0x4468a4,_0x336102);}catch(_0x2359c0){_0x5ed8a6=[0x6,_0x2359c0],_0x513a6e=0x0;}finally{_0x38ad3a=_0x1af7a2=0x0;}if(_0x5ed8a6[0x0]&0x5)throw _0x5ed8a6[0x1];return{'value':_0x5ed8a6[0x0]?_0x5ed8a6[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['addEnv']=exports[a29_0x2551a6(0x198)]=exports[a29_0x2551a6(0x1f2)]=void 0x0;var _=__importStar(require(a29_0x2551a6(0x1bc))),definition_1=require('../definition'),nas_1=require(a29_0x2551a6(0x1b2)),path=__importStar(require(a29_0x2551a6(0x19e))),fs=__importStar(require('fs-extra')),file_1=require(a29_0x2551a6(0x1a3)),sysLibs=['/usr/local/lib',a29_0x2551a6(0x1cf),a29_0x2551a6(0x19b),a29_0x2551a6(0x1f5),a29_0x2551a6(0x1d0),a29_0x2551a6(0x1e3),a29_0x2551a6(0x197),a29_0x2551a6(0x1bb)],fcLibs=[a29_0x2551a6(0x1aa),a29_0x2551a6(0x1f3),a29_0x2551a6(0x1cc)],sysPaths=[a29_0x2551a6(0x1ad),a29_0x2551a6(0x19f),a29_0x2551a6(0x1e1),a29_0x2551a6(0x1da),a29_0x2551a6(0x1ba),a29_0x2551a6(0x1b5)],fcPaths=[a29_0x2551a6(0x1aa),'/code/node_modules/.bin'],pythonPaths=['/python/lib/python2.7/site-packages',a29_0x2551a6(0x1bb)],funPaths=[a29_0x2551a6(0x1ab),a29_0x2551a6(0x1a7)];function addInstallTargetEnv(_0x804d24,_0x12c19f){var _0x3e9903=a29_0x2551a6,_0x4b4f22=Object['assign']({},_0x804d24);if(!_0x12c19f)return _0x4b4f22;return _[_0x3e9903(0x1a8)](_0x12c19f,function(_0x5397fb){var _0x306571=_0x3e9903,_0x1fbc0b=_0x5397fb[_0x306571(0x1c9)],_0x4e6960=_0x1fbc0b,_0x25ad22=pythonPaths[_0x306571(0x1c5)](function(_0x7b9a81){return''+_0x4e6960+_0x7b9a81;})[_0x306571(0x1a9)](':');_0x4b4f22[_0x306571(0x1a1)]?_0x4b4f22[_0x306571(0x1a1)]=_0x4b4f22[_0x306571(0x1a1)]+':'+_0x25ad22:_0x4b4f22['PYTHONPATH']=_0x25ad22;}),_0x4b4f22;}exports['addInstallTargetEnv']=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x1a7585,_0x4cc329){return __awaiter(this,void 0x0,void 0x0,function(){var _0x20ccfe,_0x13d6db,_0x21d649,_0x87274c;return __generator(this,function(_0x32e2f9){var _0x28ff5f=a29_0x419e;switch(_0x32e2f9[_0x28ff5f(0x1db)]){case 0x0:_0x20ccfe={};if(!_0x4cc329)return[0x2,_0x20ccfe];_0x13d6db=path[_0x28ff5f(0x1e0)](_0x1a7585,_0x4cc329,_0x28ff5f(0x19a));return[0x4,fs[_0x28ff5f(0x1e9)](_0x13d6db)];case 0x1:if(!_0x32e2f9[_0x28ff5f(0x1c2)]())return[0x2,_0x20ccfe];return[0x4,fs[_0x28ff5f(0x1f7)](_0x13d6db)];case 0x2:_0x21d649=_0x32e2f9['sent']();if(_0x21d649[_0x28ff5f(0x1b8)]())return[0x2,_0x20ccfe];return[0x4,resolveLibPaths(_0x13d6db)];case 0x3:_0x87274c=_0x32e2f9[_0x28ff5f(0x1c2)]();!_[_0x28ff5f(0x1ec)](_0x87274c)&&(_0x20ccfe[_0x28ff5f(0x1d4)]=_0x87274c[_0x28ff5f(0x1c5)](function(_0x10eb39){var _0x221eda=_0x28ff5f;return _0x221eda(0x1a5)+_0x10eb39;})[_0x28ff5f(0x1a9)](':'));return[0x2,_0x20ccfe];}});});}exports[a29_0x2551a6(0x198)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x30ba4c){return __awaiter(this,void 0x0,void 0x0,function(){var _0xf591e3,_0x197fd5=this;return __generator(this,function(_0x2fe650){var _0x493aa5=a29_0x419e;switch(_0x2fe650[_0x493aa5(0x1db)]){case 0x0:if(!fs[_0x493aa5(0x1d7)](_0x30ba4c))return[0x2,[]];return[0x4,Promise[_0x493aa5(0x1c0)](fs[_0x493aa5(0x1de)](_0x30ba4c,_0x493aa5(0x1e2))['filter'](function(_0x4f4686){var _0x6105ab=_0x493aa5;return _0x4f4686['endsWith'](_0x6105ab(0x1e5));})['map'](function(_0x4a6a47){return __awaiter(_0x197fd5,void 0x0,void 0x0,function(){return __generator(this,function(_0x2cae66){var _0x26de55=a29_0x419e;switch(_0x2cae66[_0x26de55(0x1db)]){case 0x0:return[0x4,file_1['readLines'](path['join'](_0x30ba4c,_0x4a6a47))];case 0x1:return[0x2,_0x2cae66[_0x26de55(0x1c2)]()];}});});}))];case 0x1:_0xf591e3=_0x2fe650[_0x493aa5(0x1c2)]();return[0x2,_[_0x493aa5(0x1bd)](_0xf591e3)[_0x493aa5(0x1a0)](function(_0x47f3d8,_0x564548){var _0x2c9817=_0x493aa5,_0x535555=_0x564548[_0x2c9817(0x1b3)](/^\s*(\/.*)\s*$/);return _0x535555&&_0x535555[0x1][_0x2c9817(0x1ea)]('/')&&_0x47f3d8[_0x2c9817(0x1be)](_0x535555[0x1]),_0x47f3d8;},[])];}});});}function addEnv(_0x50f0ba,_0x23e923){var _0x3ebf75=a29_0x2551a6,_0x5ec82e=Object[_0x3ebf75(0x1ef)]({},_0x50f0ba),_0x4d7a1a=_0x3ebf75(0x1ed);_0x5ec82e[_0x3ebf75(0x1d4)]=generateLibPath(_0x5ec82e,_0x4d7a1a),_0x5ec82e['PATH']=generatePath(_0x5ec82e,_0x4d7a1a),_0x5ec82e['NODE_PATH']=generateNodePaths(_0x5ec82e,_0x3ebf75(0x1aa));var _0x37fac5=_0x4d7a1a+_0x3ebf75(0x1e4);!_0x5ec82e[_0x3ebf75(0x1c8)]&&(_0x5ec82e[_0x3ebf75(0x1c8)]=_0x37fac5);if(_0x23e923)return appendNasEnvs(_0x5ec82e,_0x23e923);return _0x5ec82e;}exports[a29_0x2551a6(0x1e7)]=addEnv;function appendNasEnvs(_0x1f4671,_0x44a626){var _0x1d4ac3=a29_0x2551a6,_0x4fa4d9=definition_1['isAutoConfig'](_0x44a626),_0x4363b8;if(_0x4fa4d9){var _0x791cf3='/mnt/auto';_0x4363b8=appendNasMountPointEnv(_0x1f4671,_0x791cf3);}else{if(typeof _0x44a626!==_0x1d4ac3(0x1cb)){var _0x1ce76c=_0x44a626[_0x1d4ac3(0x199)];_[_0x1d4ac3(0x1a8)](_0x1ce76c,function(_0x337758){var _0x4d1c3b=_0x1d4ac3,_0x4852ee=nas_1[_0x4d1c3b(0x1e8)](_0x337758)[_0x4d1c3b(0x1b9)];_0x4363b8=appendNasMountPointEnv(_0x1f4671,_0x4852ee);});}}return _0x4363b8;}function appendNasMountPointEnv(_0x2b0bcc,_0x2af10d){var _0x443e11=a29_0x2551a6;_0x2b0bcc[_0x443e11(0x1d4)]=generateLibPath(_0x2b0bcc,_0x2af10d),_0x2b0bcc[_0x443e11(0x1f1)]=generatePath(_0x2b0bcc,_0x2af10d),_0x2b0bcc['NODE_PATH']=generateNodePaths(_0x2b0bcc,_0x2af10d);var _0x482cc5=generatePythonPaths(_0x2af10d);return _0x2b0bcc[_0x443e11(0x1a1)]?_0x2b0bcc[_0x443e11(0x1a1)]=_0x2b0bcc['PYTHONPATH']+':'+_0x482cc5:_0x2b0bcc['PYTHONPATH']=_0x482cc5,_0x2b0bcc;}function generatePythonPaths(_0x5b89f2){var _0x43a355=a29_0x2551a6;return pythonPaths[_0x43a355(0x1c5)](function(_0x22c074){return''+_0x5b89f2+_0x22c074;})[_0x43a355(0x1a9)](':');}function a29_0x419e(_0x5e9b06,_0xb41467){return a29_0x419e=function(_0x16ab37,_0x419e9f){_0x16ab37=_0x16ab37-0x196;var _0x259e12=a29_0x16ab[_0x16ab37];return _0x259e12;},a29_0x419e(_0x5e9b06,_0xb41467);}function generateNodePaths(_0x30b4e1,_0x59bfe2){var _0xeb96ee=a29_0x2551a6,_0xf0e38b=_0xeb96ee(0x1d2),_0x15563d=_0x59bfe2+_0xeb96ee(0x1e6),_0x176314;return _0x30b4e1[_0xeb96ee(0x1eb)]?_0x176314=_0x30b4e1[_0xeb96ee(0x1eb)]+':'+_0x15563d+':'+_0xf0e38b:_0x176314=_0x15563d+':'+_0xf0e38b,duplicateRemoval(_0x176314);}function generateLibPath(_0x2e339c,_0x14f1ae){var _0x2b3ec0=a29_0x2551a6,_0x13eb84=_[_0x2b3ec0(0x1d8)](sysLibs[_0x2b3ec0(0x1c5)](function(_0x5114f3){var _0x5d1319=_0x2b3ec0;return _0x14f1ae+_0x5d1319(0x1df)+_0x5114f3;}),fcLibs)[_0x2b3ec0(0x1a9)](':');return _0x2e339c[_0x2b3ec0(0x1d4)]&&(_0x13eb84=_0x2e339c[_0x2b3ec0(0x1d4)]+':'+_0x13eb84),duplicateRemoval(_0x13eb84);}function generatePath(_0x34d253,_0x3329aa){var _0x3521f2=a29_0x2551a6,_0x3d6b9a=_[_0x3521f2(0x1d8)](sysPaths['map'](function(_0x3625d5){return _0x3329aa+'/root'+_0x3625d5;}),fcPaths,funPaths[_0x3521f2(0x1c5)](function(_0x1abae9){return''+_0x3329aa+_0x1abae9;}),sysPaths)[_0x3521f2(0x1a9)](':');return _0x34d253[_0x3521f2(0x1f1)]&&(_0x3d6b9a=_0x34d253[_0x3521f2(0x1f1)]+':'+_0x3d6b9a),duplicateRemoval(_0x3d6b9a);}function duplicateRemoval(_0x528777){var _0x335f8a=a29_0x2551a6,_0x54a20d=_0x528777['split'](':');return _[_0x335f8a(0x1d8)](_0x54a20d)[_0x335f8a(0x1a9)](':');}