'use strict';var a29_0x4598=['resolve','487201oaMdEH','/code/lib','readdirSync','/lib','/usr/sbin','/code','1VAehwD','fs-extra','/python/lib/python2.7/site-packages','readLines','flatten','__awaiter','/root','pop','iterator','reduce','label','default','all','/python/bin','isEmpty','map','/usr/local/sbin','existsSync','.fun/root/etc/ld.so.conf.d','__generator','forEach','171539OpmbEn','/usr/local/bin','lstat','apply','/usr/local/lib','22EQFvpi','411470BZmMpt','resolveMountPoint','addEnv','endsWith','/sbin','43833AeLFQB','pathExists','return','push','path','/lib/x86_64-linux-gnu','PYTHONPATH','NODE_PATH','create','mountPoints','containerPath','utf-8','addInstallTargetEnv','ops','defineProperty','.conf','21EzxbcB','PATH','/mnt/auto','43669UrivUc','/usr/lib','/node_modules/.bin','/node_modules','sent','409161SXBbGP','540493EYJwPB','isAutoConfig','trys','Generator\x20is\x20already\x20executing.','__esModule','__importStar','next','/usr/local/lib/node_modules','resolveLibPathsFromLdConf','then','__setModuleDefault','startsWith','call','length','isFile','value','LD_LIBRARY_PATH','done','../definition','union','/usr/bin','throw','join','PYTHONUSERBASE','hasOwnProperty','/usr/lib64'];var a29_0x46b435=a29_0x4788;function a29_0x4788(_0x232885,_0x180e75){return a29_0x4788=function(_0x4598ed,_0x4788c3){_0x4598ed=_0x4598ed-0x142;var _0x280e5d=a29_0x4598[_0x4598ed];return _0x280e5d;},a29_0x4788(_0x232885,_0x180e75);}(function(_0x428e5a,_0x1cf450){var _0x41a39b=a29_0x4788;while(!![]){try{var _0x42d6ec=-parseInt(_0x41a39b(0x182))*parseInt(_0x41a39b(0x16d))+parseInt(_0x41a39b(0x188))+-parseInt(_0x41a39b(0x14c))+parseInt(_0x41a39b(0x187))*parseInt(_0x41a39b(0x146))+parseInt(_0x41a39b(0x14b))+-parseInt(_0x41a39b(0x143))*parseInt(_0x41a39b(0x18d))+parseInt(_0x41a39b(0x167));if(_0x42d6ec===_0x1cf450)break;else _0x428e5a['push'](_0x428e5a['shift']());}catch(_0x25af70){_0x428e5a['push'](_0x428e5a['shift']());}}}(a29_0x4598,0x9b479));var __createBinding=this&&this['__createBinding']||(Object[a29_0x46b435(0x195)]?function(_0x4769e0,_0x4f64c0,_0x4869ba,_0x476d3c){var _0x484f69=a29_0x46b435;if(_0x476d3c===undefined)_0x476d3c=_0x4869ba;Object[_0x484f69(0x19b)](_0x4769e0,_0x476d3c,{'enumerable':!![],'get':function(){return _0x4f64c0[_0x4869ba];}});}:function(_0x4016b3,_0x22e49b,_0x3907e3,_0x55ad36){if(_0x55ad36===undefined)_0x55ad36=_0x3907e3;_0x4016b3[_0x55ad36]=_0x22e49b[_0x3907e3];}),__setModuleDefault=this&&this[a29_0x46b435(0x156)]||(Object['create']?function(_0xcba1de,_0x3ab023){var _0x268139=a29_0x46b435;Object['defineProperty'](_0xcba1de,_0x268139(0x178),{'enumerable':!![],'value':_0x3ab023});}:function(_0x2e3370,_0x43629b){var _0x2a1a0c=a29_0x46b435;_0x2e3370[_0x2a1a0c(0x178)]=_0x43629b;}),__importStar=this&&this[a29_0x46b435(0x151)]||function(_0x498f36){var _0x425cde=a29_0x46b435;if(_0x498f36&&_0x498f36[_0x425cde(0x150)])return _0x498f36;var _0xc9ad4d={};if(_0x498f36!=null){for(var _0x311e5a in _0x498f36)if(_0x311e5a!=='default'&&Object[_0x425cde(0x164)][_0x425cde(0x158)](_0x498f36,_0x311e5a))__createBinding(_0xc9ad4d,_0x498f36,_0x311e5a);}return __setModuleDefault(_0xc9ad4d,_0x498f36),_0xc9ad4d;},__awaiter=this&&this[a29_0x46b435(0x172)]||function(_0x11f67b,_0x537c33,_0x65867f,_0x586233){function _0x3c06a1(_0x445a8a){return _0x445a8a instanceof _0x65867f?_0x445a8a:new _0x65867f(function(_0x864d2d){_0x864d2d(_0x445a8a);});}return new(_0x65867f||(_0x65867f=Promise))(function(_0x599f9c,_0x3075ce){var _0x21f9fa=a29_0x4788;function _0x9e02aa(_0x23af91){var _0x4ed8a3=a29_0x4788;try{_0x41b471(_0x586233[_0x4ed8a3(0x152)](_0x23af91));}catch(_0x514021){_0x3075ce(_0x514021);}}function _0x159e99(_0x276e18){var _0x2a8cff=a29_0x4788;try{_0x41b471(_0x586233[_0x2a8cff(0x161)](_0x276e18));}catch(_0x118f50){_0x3075ce(_0x118f50);}}function _0x41b471(_0xa29cd){var _0x723553=a29_0x4788;_0xa29cd[_0x723553(0x15d)]?_0x599f9c(_0xa29cd[_0x723553(0x15b)]):_0x3c06a1(_0xa29cd[_0x723553(0x15b)])[_0x723553(0x155)](_0x9e02aa,_0x159e99);}_0x41b471((_0x586233=_0x586233[_0x21f9fa(0x185)](_0x11f67b,_0x537c33||[]))[_0x21f9fa(0x152)]());});},__generator=this&&this[a29_0x46b435(0x180)]||function(_0x584b09,_0x59c5b4){var _0x86056d=a29_0x46b435,_0x36adc3={'label':0x0,'sent':function(){if(_0x3eab60[0x0]&0x1)throw _0x3eab60[0x1];return _0x3eab60[0x1];},'trys':[],'ops':[]},_0x35191c,_0x1eb72f,_0x3eab60,_0x435ea7;return _0x435ea7={'next':_0x603155(0x0),'throw':_0x603155(0x1),'return':_0x603155(0x2)},typeof Symbol==='function'&&(_0x435ea7[Symbol[_0x86056d(0x175)]]=function(){return this;}),_0x435ea7;function _0x603155(_0x58c593){return function(_0x351f92){return _0x32f256([_0x58c593,_0x351f92]);};}function _0x32f256(_0x1e5681){var _0x157205=_0x86056d;if(_0x35191c)throw new TypeError(_0x157205(0x14f));while(_0x36adc3)try{if(_0x35191c=0x1,_0x1eb72f&&(_0x3eab60=_0x1e5681[0x0]&0x2?_0x1eb72f[_0x157205(0x18f)]:_0x1e5681[0x0]?_0x1eb72f[_0x157205(0x161)]||((_0x3eab60=_0x1eb72f[_0x157205(0x18f)])&&_0x3eab60['call'](_0x1eb72f),0x0):_0x1eb72f[_0x157205(0x152)])&&!(_0x3eab60=_0x3eab60[_0x157205(0x158)](_0x1eb72f,_0x1e5681[0x1]))[_0x157205(0x15d)])return _0x3eab60;if(_0x1eb72f=0x0,_0x3eab60)_0x1e5681=[_0x1e5681[0x0]&0x2,_0x3eab60[_0x157205(0x15b)]];switch(_0x1e5681[0x0]){case 0x0:case 0x1:_0x3eab60=_0x1e5681;break;case 0x4:_0x36adc3['label']++;return{'value':_0x1e5681[0x1],'done':![]};case 0x5:_0x36adc3[_0x157205(0x177)]++,_0x1eb72f=_0x1e5681[0x1],_0x1e5681=[0x0];continue;case 0x7:_0x1e5681=_0x36adc3[_0x157205(0x19a)]['pop'](),_0x36adc3[_0x157205(0x14e)][_0x157205(0x174)]();continue;default:if(!(_0x3eab60=_0x36adc3['trys'],_0x3eab60=_0x3eab60['length']>0x0&&_0x3eab60[_0x3eab60[_0x157205(0x159)]-0x1])&&(_0x1e5681[0x0]===0x6||_0x1e5681[0x0]===0x2)){_0x36adc3=0x0;continue;}if(_0x1e5681[0x0]===0x3&&(!_0x3eab60||_0x1e5681[0x1]>_0x3eab60[0x0]&&_0x1e5681[0x1]<_0x3eab60[0x3])){_0x36adc3['label']=_0x1e5681[0x1];break;}if(_0x1e5681[0x0]===0x6&&_0x36adc3[_0x157205(0x177)]<_0x3eab60[0x1]){_0x36adc3[_0x157205(0x177)]=_0x3eab60[0x1],_0x3eab60=_0x1e5681;break;}if(_0x3eab60&&_0x36adc3['label']<_0x3eab60[0x2]){_0x36adc3[_0x157205(0x177)]=_0x3eab60[0x2],_0x36adc3[_0x157205(0x19a)]['push'](_0x1e5681);break;}if(_0x3eab60[0x2])_0x36adc3[_0x157205(0x19a)][_0x157205(0x174)]();_0x36adc3[_0x157205(0x14e)][_0x157205(0x174)]();continue;}_0x1e5681=_0x59c5b4[_0x157205(0x158)](_0x584b09,_0x36adc3);}catch(_0x582369){_0x1e5681=[0x6,_0x582369],_0x1eb72f=0x0;}finally{_0x35191c=_0x3eab60=0x0;}if(_0x1e5681[0x0]&0x5)throw _0x1e5681[0x1];return{'value':_0x1e5681[0x0]?_0x1e5681[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a29_0x46b435(0x18a)]=exports[a29_0x46b435(0x154)]=exports[a29_0x46b435(0x199)]=void 0x0;var _=__importStar(require('lodash')),definition_1=require(a29_0x46b435(0x15e)),nas_1=require('./nas'),path=__importStar(require(a29_0x46b435(0x191))),fs=__importStar(require(a29_0x46b435(0x16e))),file_1=require('../utils/file'),sysLibs=[a29_0x46b435(0x186),a29_0x46b435(0x147),'/usr/lib/x86_64-linux-gnu',a29_0x46b435(0x165),a29_0x46b435(0x16a),a29_0x46b435(0x192),a29_0x46b435(0x16f),'/python/lib/python3.6/site-packages'],fcLibs=[a29_0x46b435(0x16c),a29_0x46b435(0x168),'/usr/local/lib'],sysPaths=[a29_0x46b435(0x183),a29_0x46b435(0x17d),a29_0x46b435(0x160),a29_0x46b435(0x16b),a29_0x46b435(0x18c),'/bin'],fcPaths=[a29_0x46b435(0x16c),'/code/node_modules/.bin'],pythonPaths=['/python/lib/python2.7/site-packages','/python/lib/python3.6/site-packages'],funPaths=[a29_0x46b435(0x17a),a29_0x46b435(0x148)];function addInstallTargetEnv(_0x428409,_0x43aaae){var _0x5ea936=a29_0x46b435,_0x1a8b5f=Object['assign']({},_0x428409);if(!_0x43aaae)return _0x1a8b5f;return _[_0x5ea936(0x181)](_0x43aaae,function(_0x42ef52){var _0x5e2e22=_0x5ea936,_0xf13ae2=_0x42ef52[_0x5e2e22(0x197)],_0x48b1ff=_0xf13ae2,_0x2141fe=pythonPaths[_0x5e2e22(0x17c)](function(_0x2f4abe){return''+_0x48b1ff+_0x2f4abe;})[_0x5e2e22(0x162)](':');_0x1a8b5f[_0x5e2e22(0x193)]?_0x1a8b5f[_0x5e2e22(0x193)]=_0x1a8b5f[_0x5e2e22(0x193)]+':'+_0x2141fe:_0x1a8b5f[_0x5e2e22(0x193)]=_0x2141fe;}),_0x1a8b5f;}exports[a29_0x46b435(0x199)]=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x27e57f,_0x1cf1e1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x2d7e56,_0x5208cd,_0x39f7cf,_0x174912;return __generator(this,function(_0x15935c){var _0x13a1b7=a29_0x4788;switch(_0x15935c['label']){case 0x0:_0x2d7e56={};if(!_0x1cf1e1)return[0x2,_0x2d7e56];_0x5208cd=path[_0x13a1b7(0x166)](_0x27e57f,_0x1cf1e1,_0x13a1b7(0x17f));return[0x4,fs[_0x13a1b7(0x18e)](_0x5208cd)];case 0x1:if(!_0x15935c[_0x13a1b7(0x14a)]())return[0x2,_0x2d7e56];return[0x4,fs[_0x13a1b7(0x184)](_0x5208cd)];case 0x2:_0x39f7cf=_0x15935c[_0x13a1b7(0x14a)]();if(_0x39f7cf[_0x13a1b7(0x15a)]())return[0x2,_0x2d7e56];return[0x4,resolveLibPaths(_0x5208cd)];case 0x3:_0x174912=_0x15935c['sent']();!_[_0x13a1b7(0x17b)](_0x174912)&&(_0x2d7e56['LD_LIBRARY_PATH']=_0x174912[_0x13a1b7(0x17c)](function(_0x59c4da){return'/code/.fun/root'+_0x59c4da;})[_0x13a1b7(0x162)](':'));return[0x2,_0x2d7e56];}});});}exports[a29_0x46b435(0x154)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x171389){return __awaiter(this,void 0x0,void 0x0,function(){var _0x57cace,_0x5bd892=this;return __generator(this,function(_0x47e700){var _0x1be45d=a29_0x4788;switch(_0x47e700[_0x1be45d(0x177)]){case 0x0:if(!fs[_0x1be45d(0x17e)](_0x171389))return[0x2,[]];return[0x4,Promise[_0x1be45d(0x179)](fs[_0x1be45d(0x169)](_0x171389,_0x1be45d(0x198))['filter'](function(_0x3eca00){var _0x5c567d=_0x1be45d;return _0x3eca00[_0x5c567d(0x18b)](_0x5c567d(0x142));})[_0x1be45d(0x17c)](function(_0x120b2d){return __awaiter(_0x5bd892,void 0x0,void 0x0,function(){return __generator(this,function(_0x47e750){var _0x557f4c=a29_0x4788;switch(_0x47e750[_0x557f4c(0x177)]){case 0x0:return[0x4,file_1[_0x557f4c(0x170)](path[_0x557f4c(0x162)](_0x171389,_0x120b2d))];case 0x1:return[0x2,_0x47e750[_0x557f4c(0x14a)]()];}});});}))];case 0x1:_0x57cace=_0x47e700[_0x1be45d(0x14a)]();return[0x2,_[_0x1be45d(0x171)](_0x57cace)[_0x1be45d(0x176)](function(_0x466e3f,_0x1959ef){var _0x5c76c9=_0x1be45d,_0x248bab=_0x1959ef['match'](/^\s*(\/.*)\s*$/);return _0x248bab&&_0x248bab[0x1][_0x5c76c9(0x157)]('/')&&_0x466e3f[_0x5c76c9(0x190)](_0x248bab[0x1]),_0x466e3f;},[])];}});});}function addEnv(_0x2b4037,_0x5eeb70){var _0x52ed21=a29_0x46b435,_0x328849=Object['assign']({},_0x2b4037),_0x16f4f7='/code/.s';_0x328849['LD_LIBRARY_PATH']=generateLibPath(_0x328849,_0x16f4f7),_0x328849[_0x52ed21(0x144)]=generatePath(_0x328849,_0x16f4f7),_0x328849[_0x52ed21(0x194)]=generateNodePaths(_0x328849,_0x52ed21(0x16c));var _0x495324=_0x16f4f7+'/python';!_0x328849[_0x52ed21(0x163)]&&(_0x328849[_0x52ed21(0x163)]=_0x495324);if(_0x5eeb70)return appendNasEnvs(_0x328849,_0x5eeb70);return _0x328849;}exports[a29_0x46b435(0x18a)]=addEnv;function appendNasEnvs(_0x48493e,_0x2f182c){var _0x3f4270=a29_0x46b435,_0x3bf035=definition_1[_0x3f4270(0x14d)](_0x2f182c),_0x5bbd2f;if(_0x3bf035){var _0x14d428=_0x3f4270(0x145);_0x5bbd2f=appendNasMountPointEnv(_0x48493e,_0x14d428);}else{if(typeof _0x2f182c!=='string'){var _0x390c54=_0x2f182c[_0x3f4270(0x196)];_['forEach'](_0x390c54,function(_0x12f8af){var _0x3b35b5=_0x3f4270,_0x2c7a0d=nas_1[_0x3b35b5(0x189)](_0x12f8af)['mountDir'];_0x5bbd2f=appendNasMountPointEnv(_0x48493e,_0x2c7a0d);});}}return _0x5bbd2f;}function appendNasMountPointEnv(_0x48bd0e,_0x3b058d){var _0x44fcfe=a29_0x46b435;_0x48bd0e[_0x44fcfe(0x15c)]=generateLibPath(_0x48bd0e,_0x3b058d),_0x48bd0e[_0x44fcfe(0x144)]=generatePath(_0x48bd0e,_0x3b058d),_0x48bd0e[_0x44fcfe(0x194)]=generateNodePaths(_0x48bd0e,_0x3b058d);var _0x44d1e9=generatePythonPaths(_0x3b058d);return _0x48bd0e[_0x44fcfe(0x193)]?_0x48bd0e[_0x44fcfe(0x193)]=_0x48bd0e[_0x44fcfe(0x193)]+':'+_0x44d1e9:_0x48bd0e[_0x44fcfe(0x193)]=_0x44d1e9,_0x48bd0e;}function generatePythonPaths(_0x20970a){var _0x34f641=a29_0x46b435;return pythonPaths[_0x34f641(0x17c)](function(_0x1e7c48){return''+_0x20970a+_0x1e7c48;})[_0x34f641(0x162)](':');}function generateNodePaths(_0x233efe,_0x243dcf){var _0x2c8545=a29_0x46b435,_0x1fea77=_0x2c8545(0x153),_0x74bc0a=_0x243dcf+_0x2c8545(0x149),_0x427de3;return _0x233efe[_0x2c8545(0x194)]?_0x427de3=_0x233efe['NODE_PATH']+':'+_0x74bc0a+':'+_0x1fea77:_0x427de3=_0x74bc0a+':'+_0x1fea77,duplicateRemoval(_0x427de3);}function generateLibPath(_0x5c84bc,_0x45d9e6){var _0x2495bf=a29_0x46b435,_0x5dd192=_[_0x2495bf(0x15f)](sysLibs[_0x2495bf(0x17c)](function(_0x4e437e){var _0x5fc911=_0x2495bf;return _0x45d9e6+_0x5fc911(0x173)+_0x4e437e;}),fcLibs)['join'](':');return _0x5c84bc['LD_LIBRARY_PATH']&&(_0x5dd192=_0x5c84bc[_0x2495bf(0x15c)]+':'+_0x5dd192),duplicateRemoval(_0x5dd192);}function generatePath(_0x439125,_0x42a412){var _0x27b1e8=a29_0x46b435,_0xb7fcc7=_[_0x27b1e8(0x15f)](sysPaths[_0x27b1e8(0x17c)](function(_0x5251d7){var _0x5cd35b=_0x27b1e8;return _0x42a412+_0x5cd35b(0x173)+_0x5251d7;}),fcPaths,funPaths[_0x27b1e8(0x17c)](function(_0x4b64cc){return''+_0x42a412+_0x4b64cc;}),sysPaths)[_0x27b1e8(0x162)](':');return _0x439125[_0x27b1e8(0x144)]&&(_0xb7fcc7=_0x439125[_0x27b1e8(0x144)]+':'+_0xb7fcc7),duplicateRemoval(_0xb7fcc7);}function duplicateRemoval(_0x4dd6b8){var _0x3b34f1=a29_0x46b435,_0x5a42eb=_0x4dd6b8['split'](':');return _[_0x3b34f1(0x15f)](_0x5a42eb)[_0x3b34f1(0x162)](':');}