'use strict';var a29_0x5b6b=['reduce','/usr/lib64','211177iiDqDn','create','assign','readLines','PYTHONUSERBASE','call','/usr/sbin','default','__esModule','/node_modules','pathExists','hasOwnProperty','11486RTWAfI','then','/python/lib/python3.6/site-packages','label','PATH','/bin','./nas','LD_LIBRARY_PATH','readdirSync','530893VVOZvV','sent','function','apply','/mnt/auto','/sbin','/code/.fun/root','179912ggCwjU','/usr/bin','push','ops','containerPath','join','resolveMountPoint','match','/code/.s','string','forEach','/python/lib/python2.7/site-packages','/usr/local/sbin','existsSync','defineProperty','PYTHONPATH','/usr/lib/x86_64-linux-gnu','/code','fs-extra','17BStOpO','length','pop','.conf','lstat','41701GiaJHd','isEmpty','NODE_PATH','1hAiyrD','trys','29LfpSjS','union','addInstallTargetEnv','/python/bin','addEnv','flatten','mountPoints','/usr/lib','/code/lib','98693QdFdKj','next','resolveLibPathsFromLdConf','all','mountDir','.fun/root/etc/ld.so.conf.d','return','map','317FDydNI','resolve','/lib','/root','iterator','/usr/local/lib','__createBinding','filter','value','isFile','throw'];var a29_0x33ca1e=a29_0x2a4a;(function(_0x1f21d4,_0x4972ec){var _0x3ac2a8=a29_0x2a4a;while(!![]){try{var _0x10ba58=parseInt(_0x3ac2a8(0x229))*-parseInt(_0x3ac2a8(0x23a))+parseInt(_0x3ac2a8(0x232))+-parseInt(_0x3ac2a8(0x224))*-parseInt(_0x3ac2a8(0x227))+parseInt(_0x3ac2a8(0x1fc))*parseInt(_0x3ac2a8(0x21f))+parseInt(_0x3ac2a8(0x205))+-parseInt(_0x3ac2a8(0x1f0))+-parseInt(_0x3ac2a8(0x20c));if(_0x10ba58===_0x4972ec)break;else _0x1f21d4['push'](_0x1f21d4['shift']());}catch(_0x1c4b10){_0x1f21d4['push'](_0x1f21d4['shift']());}}}(a29_0x5b6b,0x71d5b));function a29_0x2a4a(_0x442d96,_0x3aa049){return a29_0x2a4a=function(_0x5b6b65,_0x2a4a76){_0x5b6b65=_0x5b6b65-0x1ed;var _0x19287a=a29_0x5b6b[_0x5b6b65];return _0x19287a;},a29_0x2a4a(_0x442d96,_0x3aa049);}var __createBinding=this&&this[a29_0x33ca1e(0x240)]||(Object['create']?function(_0x22b824,_0x5c5794,_0x2a7e6e,_0x161d11){var _0x362b15=a29_0x33ca1e;if(_0x161d11===undefined)_0x161d11=_0x2a7e6e;Object[_0x362b15(0x21a)](_0x22b824,_0x161d11,{'enumerable':!![],'get':function(){return _0x5c5794[_0x2a7e6e];}});}:function(_0x91d1cb,_0x5401e6,_0x3613bd,_0x3aa6f4){if(_0x3aa6f4===undefined)_0x3aa6f4=_0x3613bd;_0x91d1cb[_0x3aa6f4]=_0x5401e6[_0x3613bd];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a29_0x33ca1e(0x1f1)]?function(_0x1933b0,_0x4af066){Object['defineProperty'](_0x1933b0,'default',{'enumerable':!![],'value':_0x4af066});}:function(_0x3061ff,_0x39890d){var _0x1b03af=a29_0x33ca1e;_0x3061ff[_0x1b03af(0x1f7)]=_0x39890d;}),__importStar=this&&this['__importStar']||function(_0x37902b){var _0x4182a0=a29_0x33ca1e;if(_0x37902b&&_0x37902b['__esModule'])return _0x37902b;var _0x172693={};if(_0x37902b!=null){for(var _0x534d8e in _0x37902b)if(_0x534d8e!==_0x4182a0(0x1f7)&&Object[_0x4182a0(0x1fb)]['call'](_0x37902b,_0x534d8e))__createBinding(_0x172693,_0x37902b,_0x534d8e);}return __setModuleDefault(_0x172693,_0x37902b),_0x172693;},__awaiter=this&&this['__awaiter']||function(_0x2e2f85,_0x9bc434,_0x1e1133,_0x23bbdc){function _0x4e9d25(_0xe89bdf){return _0xe89bdf instanceof _0x1e1133?_0xe89bdf:new _0x1e1133(function(_0x5562c6){_0x5562c6(_0xe89bdf);});}return new(_0x1e1133||(_0x1e1133=Promise))(function(_0x3b6dd9,_0x19a191){var _0x2b12ff=a29_0x2a4a;function _0x3ea404(_0x36bc24){try{_0x432bfe(_0x23bbdc['next'](_0x36bc24));}catch(_0x5df587){_0x19a191(_0x5df587);}}function _0x1bd46c(_0x105a29){try{_0x432bfe(_0x23bbdc['throw'](_0x105a29));}catch(_0x4c0686){_0x19a191(_0x4c0686);}}function _0x432bfe(_0x469a56){var _0x7ab834=a29_0x2a4a;_0x469a56['done']?_0x3b6dd9(_0x469a56[_0x7ab834(0x242)]):_0x4e9d25(_0x469a56['value'])[_0x7ab834(0x1fd)](_0x3ea404,_0x1bd46c);}_0x432bfe((_0x23bbdc=_0x23bbdc[_0x2b12ff(0x208)](_0x2e2f85,_0x9bc434||[]))[_0x2b12ff(0x233)]());});},__generator=this&&this['__generator']||function(_0x3f51b1,_0x5a36d4){var _0x2e1715=a29_0x33ca1e,_0x242efb={'label':0x0,'sent':function(){if(_0x42bbf8[0x0]&0x1)throw _0x42bbf8[0x1];return _0x42bbf8[0x1];},'trys':[],'ops':[]},_0x2cd31c,_0x2572ea,_0x42bbf8,_0x51d4f6;return _0x51d4f6={'next':_0x4f77a9(0x0),'throw':_0x4f77a9(0x1),'return':_0x4f77a9(0x2)},typeof Symbol===_0x2e1715(0x207)&&(_0x51d4f6[Symbol[_0x2e1715(0x23e)]]=function(){return this;}),_0x51d4f6;function _0x4f77a9(_0x5b155c){return function(_0x324d07){return _0x3fcde8([_0x5b155c,_0x324d07]);};}function _0x3fcde8(_0x2cdc92){var _0x4c6f3c=_0x2e1715;if(_0x2cd31c)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x242efb)try{if(_0x2cd31c=0x1,_0x2572ea&&(_0x42bbf8=_0x2cdc92[0x0]&0x2?_0x2572ea[_0x4c6f3c(0x238)]:_0x2cdc92[0x0]?_0x2572ea[_0x4c6f3c(0x1ed)]||((_0x42bbf8=_0x2572ea[_0x4c6f3c(0x238)])&&_0x42bbf8[_0x4c6f3c(0x1f5)](_0x2572ea),0x0):_0x2572ea[_0x4c6f3c(0x233)])&&!(_0x42bbf8=_0x42bbf8[_0x4c6f3c(0x1f5)](_0x2572ea,_0x2cdc92[0x1]))['done'])return _0x42bbf8;if(_0x2572ea=0x0,_0x42bbf8)_0x2cdc92=[_0x2cdc92[0x0]&0x2,_0x42bbf8[_0x4c6f3c(0x242)]];switch(_0x2cdc92[0x0]){case 0x0:case 0x1:_0x42bbf8=_0x2cdc92;break;case 0x4:_0x242efb[_0x4c6f3c(0x1ff)]++;return{'value':_0x2cdc92[0x1],'done':![]};case 0x5:_0x242efb[_0x4c6f3c(0x1ff)]++,_0x2572ea=_0x2cdc92[0x1],_0x2cdc92=[0x0];continue;case 0x7:_0x2cdc92=_0x242efb[_0x4c6f3c(0x20f)][_0x4c6f3c(0x221)](),_0x242efb[_0x4c6f3c(0x228)]['pop']();continue;default:if(!(_0x42bbf8=_0x242efb[_0x4c6f3c(0x228)],_0x42bbf8=_0x42bbf8[_0x4c6f3c(0x220)]>0x0&&_0x42bbf8[_0x42bbf8[_0x4c6f3c(0x220)]-0x1])&&(_0x2cdc92[0x0]===0x6||_0x2cdc92[0x0]===0x2)){_0x242efb=0x0;continue;}if(_0x2cdc92[0x0]===0x3&&(!_0x42bbf8||_0x2cdc92[0x1]>_0x42bbf8[0x0]&&_0x2cdc92[0x1]<_0x42bbf8[0x3])){_0x242efb[_0x4c6f3c(0x1ff)]=_0x2cdc92[0x1];break;}if(_0x2cdc92[0x0]===0x6&&_0x242efb['label']<_0x42bbf8[0x1]){_0x242efb[_0x4c6f3c(0x1ff)]=_0x42bbf8[0x1],_0x42bbf8=_0x2cdc92;break;}if(_0x42bbf8&&_0x242efb[_0x4c6f3c(0x1ff)]<_0x42bbf8[0x2]){_0x242efb[_0x4c6f3c(0x1ff)]=_0x42bbf8[0x2],_0x242efb[_0x4c6f3c(0x20f)][_0x4c6f3c(0x20e)](_0x2cdc92);break;}if(_0x42bbf8[0x2])_0x242efb[_0x4c6f3c(0x20f)][_0x4c6f3c(0x221)]();_0x242efb['trys'][_0x4c6f3c(0x221)]();continue;}_0x2cdc92=_0x5a36d4[_0x4c6f3c(0x1f5)](_0x3f51b1,_0x242efb);}catch(_0x582198){_0x2cdc92=[0x6,_0x582198],_0x2572ea=0x0;}finally{_0x2cd31c=_0x42bbf8=0x0;}if(_0x2cdc92[0x0]&0x5)throw _0x2cdc92[0x1];return{'value':_0x2cdc92[0x0]?_0x2cdc92[0x1]:void 0x0,'done':!![]};}};Object[a29_0x33ca1e(0x21a)](exports,a29_0x33ca1e(0x1f8),{'value':!![]}),exports[a29_0x33ca1e(0x22d)]=exports[a29_0x33ca1e(0x234)]=exports[a29_0x33ca1e(0x22b)]=void 0x0;var _=__importStar(require('lodash')),definition_1=require('../definition'),nas_1=require(a29_0x33ca1e(0x202)),path=__importStar(require('path')),fs=__importStar(require(a29_0x33ca1e(0x21e))),file_1=require('../utils/file'),sysLibs=[a29_0x33ca1e(0x23f),a29_0x33ca1e(0x230),a29_0x33ca1e(0x21c),a29_0x33ca1e(0x1ef),a29_0x33ca1e(0x23c),'/lib/x86_64-linux-gnu',a29_0x33ca1e(0x217),a29_0x33ca1e(0x1fe)],fcLibs=[a29_0x33ca1e(0x21d),a29_0x33ca1e(0x231),a29_0x33ca1e(0x23f)],sysPaths=['/usr/local/bin',a29_0x33ca1e(0x218),a29_0x33ca1e(0x20d),a29_0x33ca1e(0x1f6),a29_0x33ca1e(0x20a),a29_0x33ca1e(0x201)],fcPaths=[a29_0x33ca1e(0x21d),'/code/node_modules/.bin'],pythonPaths=[a29_0x33ca1e(0x217),'/python/lib/python3.6/site-packages'],funPaths=[a29_0x33ca1e(0x22c),'/node_modules/.bin'];function addInstallTargetEnv(_0xc91524,_0x14e46f){var _0x1b8c18=a29_0x33ca1e,_0x338d2c=Object['assign']({},_0xc91524);if(!_0x14e46f)return _0x338d2c;return _[_0x1b8c18(0x216)](_0x14e46f,function(_0xd6ab31){var _0x58f218=_0x1b8c18,_0x295e85=_0xd6ab31[_0x58f218(0x210)],_0x46f58e=_0x295e85,_0x4e5a39=pythonPaths[_0x58f218(0x239)](function(_0x231e5d){return''+_0x46f58e+_0x231e5d;})[_0x58f218(0x211)](':');_0x338d2c[_0x58f218(0x21b)]?_0x338d2c[_0x58f218(0x21b)]=_0x338d2c[_0x58f218(0x21b)]+':'+_0x4e5a39:_0x338d2c['PYTHONPATH']=_0x4e5a39;}),_0x338d2c;}exports[a29_0x33ca1e(0x22b)]=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x338897,_0x1f0a6b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x45b36c,_0x1d5422,_0x2e235e,_0x2a4cf8;return __generator(this,function(_0x23973){var _0x54b2b6=a29_0x2a4a;switch(_0x23973['label']){case 0x0:_0x45b36c={};if(!_0x1f0a6b)return[0x2,_0x45b36c];_0x1d5422=path[_0x54b2b6(0x23b)](_0x338897,_0x1f0a6b,_0x54b2b6(0x237));return[0x4,fs[_0x54b2b6(0x1fa)](_0x1d5422)];case 0x1:if(!_0x23973['sent']())return[0x2,_0x45b36c];return[0x4,fs[_0x54b2b6(0x223)](_0x1d5422)];case 0x2:_0x2e235e=_0x23973[_0x54b2b6(0x206)]();if(_0x2e235e[_0x54b2b6(0x243)]())return[0x2,_0x45b36c];return[0x4,resolveLibPaths(_0x1d5422)];case 0x3:_0x2a4cf8=_0x23973['sent']();!_[_0x54b2b6(0x225)](_0x2a4cf8)&&(_0x45b36c[_0x54b2b6(0x203)]=_0x2a4cf8[_0x54b2b6(0x239)](function(_0x1fbb57){var _0x371779=_0x54b2b6;return _0x371779(0x20b)+_0x1fbb57;})[_0x54b2b6(0x211)](':'));return[0x2,_0x45b36c];}});});}exports[a29_0x33ca1e(0x234)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x3089a4){return __awaiter(this,void 0x0,void 0x0,function(){var _0x7cf8a3,_0x408022=this;return __generator(this,function(_0x20d291){var _0x502cbf=a29_0x2a4a;switch(_0x20d291[_0x502cbf(0x1ff)]){case 0x0:if(!fs[_0x502cbf(0x219)](_0x3089a4))return[0x2,[]];return[0x4,Promise[_0x502cbf(0x235)](fs[_0x502cbf(0x204)](_0x3089a4,'utf-8')[_0x502cbf(0x241)](function(_0x1eebe3){var _0x18f9a0=_0x502cbf;return _0x1eebe3['endsWith'](_0x18f9a0(0x222));})['map'](function(_0x33a4b2){return __awaiter(_0x408022,void 0x0,void 0x0,function(){return __generator(this,function(_0x453722){var _0x3a35ed=a29_0x2a4a;switch(_0x453722['label']){case 0x0:return[0x4,file_1[_0x3a35ed(0x1f3)](path['join'](_0x3089a4,_0x33a4b2))];case 0x1:return[0x2,_0x453722['sent']()];}});});}))];case 0x1:_0x7cf8a3=_0x20d291[_0x502cbf(0x206)]();return[0x2,_[_0x502cbf(0x22e)](_0x7cf8a3)[_0x502cbf(0x1ee)](function(_0x5617c3,_0x592366){var _0x58232f=_0x502cbf,_0xb0f2b1=_0x592366[_0x58232f(0x213)](/^\s*(\/.*)\s*$/);return _0xb0f2b1&&_0xb0f2b1[0x1]['startsWith']('/')&&_0x5617c3[_0x58232f(0x20e)](_0xb0f2b1[0x1]),_0x5617c3;},[])];}});});}function addEnv(_0x596c27,_0x50d0bf){var _0x52150a=a29_0x33ca1e,_0x5ef7f1=Object[_0x52150a(0x1f2)]({},_0x596c27),_0x40820d=_0x52150a(0x214);_0x5ef7f1[_0x52150a(0x203)]=generateLibPath(_0x5ef7f1,_0x40820d),_0x5ef7f1['PATH']=generatePath(_0x5ef7f1,_0x40820d),_0x5ef7f1[_0x52150a(0x226)]=generateNodePaths(_0x5ef7f1,'/code');var _0x5bab38=_0x40820d+'/python';!_0x5ef7f1[_0x52150a(0x1f4)]&&(_0x5ef7f1['PYTHONUSERBASE']=_0x5bab38);if(_0x50d0bf)return appendNasEnvs(_0x5ef7f1,_0x50d0bf);return _0x5ef7f1;}exports[a29_0x33ca1e(0x22d)]=addEnv;function appendNasEnvs(_0x4c0074,_0x5a79f6){var _0x5bf7a9=a29_0x33ca1e,_0x3e3150=definition_1['isAutoConfig'](_0x5a79f6),_0x4b7a74;if(_0x3e3150){var _0x3046d9=_0x5bf7a9(0x209);_0x4b7a74=appendNasMountPointEnv(_0x4c0074,_0x3046d9);}else{if(typeof _0x5a79f6!==_0x5bf7a9(0x215)){var _0xeb2b99=_0x5a79f6[_0x5bf7a9(0x22f)];_['forEach'](_0xeb2b99,function(_0x17b342){var _0x2f08ec=_0x5bf7a9,_0x5bc389=nas_1[_0x2f08ec(0x212)](_0x17b342)[_0x2f08ec(0x236)];_0x4b7a74=appendNasMountPointEnv(_0x4c0074,_0x5bc389);});}}return _0x4b7a74;}function appendNasMountPointEnv(_0x2cb2e0,_0x44cf87){var _0x542037=a29_0x33ca1e;_0x2cb2e0['LD_LIBRARY_PATH']=generateLibPath(_0x2cb2e0,_0x44cf87),_0x2cb2e0[_0x542037(0x200)]=generatePath(_0x2cb2e0,_0x44cf87),_0x2cb2e0['NODE_PATH']=generateNodePaths(_0x2cb2e0,_0x44cf87);var _0x47e88b=generatePythonPaths(_0x44cf87);return _0x2cb2e0[_0x542037(0x21b)]?_0x2cb2e0[_0x542037(0x21b)]=_0x2cb2e0['PYTHONPATH']+':'+_0x47e88b:_0x2cb2e0[_0x542037(0x21b)]=_0x47e88b,_0x2cb2e0;}function generatePythonPaths(_0x526705){var _0x5d7b5d=a29_0x33ca1e;return pythonPaths[_0x5d7b5d(0x239)](function(_0x4f5138){return''+_0x526705+_0x4f5138;})['join'](':');}function generateNodePaths(_0x3b674f,_0x48a949){var _0x3c4493=a29_0x33ca1e,_0x3b378a='/usr/local/lib/node_modules',_0x542760=_0x48a949+_0x3c4493(0x1f9),_0x2f62b6;return _0x3b674f[_0x3c4493(0x226)]?_0x2f62b6=_0x3b674f[_0x3c4493(0x226)]+':'+_0x542760+':'+_0x3b378a:_0x2f62b6=_0x542760+':'+_0x3b378a,duplicateRemoval(_0x2f62b6);}function generateLibPath(_0x11137e,_0x37c3a5){var _0x5884cf=a29_0x33ca1e,_0x3c2c37=_['union'](sysLibs[_0x5884cf(0x239)](function(_0x1b05db){var _0x2ef04c=_0x5884cf;return _0x37c3a5+_0x2ef04c(0x23d)+_0x1b05db;}),fcLibs)['join'](':');return _0x11137e['LD_LIBRARY_PATH']&&(_0x3c2c37=_0x11137e['LD_LIBRARY_PATH']+':'+_0x3c2c37),duplicateRemoval(_0x3c2c37);}function generatePath(_0x22e4e2,_0x2a147c){var _0x10afe2=a29_0x33ca1e,_0x10a321=_[_0x10afe2(0x22a)](sysPaths[_0x10afe2(0x239)](function(_0x5bc6a0){var _0x5f3bb3=_0x10afe2;return _0x2a147c+_0x5f3bb3(0x23d)+_0x5bc6a0;}),fcPaths,funPaths[_0x10afe2(0x239)](function(_0x12aaeb){return''+_0x2a147c+_0x12aaeb;}),sysPaths)['join'](':');return _0x22e4e2[_0x10afe2(0x200)]&&(_0x10a321=_0x22e4e2[_0x10afe2(0x200)]+':'+_0x10a321),duplicateRemoval(_0x10a321);}function duplicateRemoval(_0x22c1cb){var _0x633186=a29_0x33ca1e,_0x1a4703=_0x22c1cb['split'](':');return _[_0x633186(0x22a)](_0x1a4703)[_0x633186(0x211)](':');}