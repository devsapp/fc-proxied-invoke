'use strict';var a29_0x4044=['return','endsWith','pathExists','resolve','forEach','/node_modules/.bin','assign','/code/.fun/root','value','iterator','lstat','filter','209839ftDyqP','all','then','addInstallTargetEnv','reduce','/usr/local/lib','isEmpty','491539LQcruu','/usr/local/lib/node_modules','map','/usr/lib/x86_64-linux-gnu','sent','string','PYTHONPATH','push','addEnv','readLines','../utils/file','containerPath','lodash','flatten','fs-extra','ops','match','7fUtSrT','17914zKiEev','1OgdEyA','function','startsWith','581414zHDewn','__generator','LD_LIBRARY_PATH','/python','./nas','defineProperty','__setModuleDefault','388NwWXVW','join','/usr/sbin','__esModule','499BXcGzK','.conf','/root','create','call','253611dtinik','/usr/local/sbin','/code/node_modules/.bin','/code','/code/.s','/code/lib','resolveLibPathsFromLdConf','/usr/bin','/python/lib/python2.7/site-packages','utf-8','3KVJvmN','mountPoints','NODE_PATH','/lib','throw','17nSUkMk','4849zKnmHq','/usr/local/bin','existsSync','PATH','length','/usr/lib','default','__awaiter','trys','label','/python/lib/python3.6/site-packages','path','pop','PYTHONUSERBASE','isFile','resolveMountPoint','/bin','union','next','/mnt/auto','/usr/lib64','/python/bin','done'];var a29_0x47085d=a29_0x5765;(function(_0x45dae4,_0x3601c3){var _0x248657=a29_0x5765;while(!![]){try{var _0x1ab468=parseInt(_0x248657(0x1ec))*parseInt(_0x248657(0x1ef))+parseInt(_0x248657(0x1ff))+parseInt(_0x248657(0x1eb))*-parseInt(_0x248657(0x1ea))+-parseInt(_0x248657(0x20f))*parseInt(_0x248657(0x20e))+parseInt(_0x248657(0x1d9))+-parseInt(_0x248657(0x1fa))*parseInt(_0x248657(0x1f6))+-parseInt(_0x248657(0x1d2))*parseInt(_0x248657(0x209));if(_0x1ab468===_0x3601c3)break;else _0x45dae4['push'](_0x45dae4['shift']());}catch(_0xaa7727){_0x45dae4['push'](_0x45dae4['shift']());}}}(a29_0x4044,0x482b4));var __createBinding=this&&this['__createBinding']||(Object[a29_0x47085d(0x1fd)]?function(_0x5312f7,_0x436125,_0x3a7cf6,_0x52cbee){if(_0x52cbee===undefined)_0x52cbee=_0x3a7cf6;Object['defineProperty'](_0x5312f7,_0x52cbee,{'enumerable':!![],'get':function(){return _0x436125[_0x3a7cf6];}});}:function(_0xe9fed6,_0xb9ff1f,_0x44cff5,_0xc14b11){if(_0xc14b11===undefined)_0xc14b11=_0x44cff5;_0xe9fed6[_0xc14b11]=_0xb9ff1f[_0x44cff5];}),__setModuleDefault=this&&this[a29_0x47085d(0x1f5)]||(Object[a29_0x47085d(0x1fd)]?function(_0x5269c8,_0x3038b8){var _0x3d4aca=a29_0x47085d;Object[_0x3d4aca(0x1f4)](_0x5269c8,_0x3d4aca(0x215),{'enumerable':!![],'value':_0x3038b8});}:function(_0x14418a,_0x550501){var _0x4b2753=a29_0x47085d;_0x14418a[_0x4b2753(0x215)]=_0x550501;}),__importStar=this&&this['__importStar']||function(_0x57296e){if(_0x57296e&&_0x57296e['__esModule'])return _0x57296e;var _0x2c4154={};if(_0x57296e!=null){for(var _0x2bd8f4 in _0x57296e)if(_0x2bd8f4!=='default'&&Object['hasOwnProperty']['call'](_0x57296e,_0x2bd8f4))__createBinding(_0x2c4154,_0x57296e,_0x2bd8f4);}return __setModuleDefault(_0x2c4154,_0x57296e),_0x2c4154;},__awaiter=this&&this[a29_0x47085d(0x216)]||function(_0x48631f,_0x4512e0,_0x36bfd9,_0x120cb5){function _0x3c86ed(_0x41b7e){return _0x41b7e instanceof _0x36bfd9?_0x41b7e:new _0x36bfd9(function(_0x24fc0b){_0x24fc0b(_0x41b7e);});}return new(_0x36bfd9||(_0x36bfd9=Promise))(function(_0x3657c7,_0x2717ef){var _0x386190=a29_0x5765;function _0x3119f1(_0x4c20d3){try{_0x5da3f3(_0x120cb5['next'](_0x4c20d3));}catch(_0x41b55d){_0x2717ef(_0x41b55d);}}function _0x272302(_0x5d1833){var _0xeaf4b6=a29_0x5765;try{_0x5da3f3(_0x120cb5[_0xeaf4b6(0x20d)](_0x5d1833));}catch(_0x180092){_0x2717ef(_0x180092);}}function _0x5da3f3(_0x1eabc4){var _0x2a93cc=a29_0x5765;_0x1eabc4[_0x2a93cc(0x225)]?_0x3657c7(_0x1eabc4[_0x2a93cc(0x1ce)]):_0x3c86ed(_0x1eabc4[_0x2a93cc(0x1ce)])[_0x2a93cc(0x1d4)](_0x3119f1,_0x272302);}_0x5da3f3((_0x120cb5=_0x120cb5['apply'](_0x48631f,_0x4512e0||[]))[_0x386190(0x221)]());});},__generator=this&&this[a29_0x47085d(0x1f0)]||function(_0x2b9e95,_0x4e6a99){var _0x459200=a29_0x47085d,_0x2a2ad1={'label':0x0,'sent':function(){if(_0x3dbb74[0x0]&0x1)throw _0x3dbb74[0x1];return _0x3dbb74[0x1];},'trys':[],'ops':[]},_0x5845f5,_0x28b5af,_0x3dbb74,_0x13495f;return _0x13495f={'next':_0x59d269(0x0),'throw':_0x59d269(0x1),'return':_0x59d269(0x2)},typeof Symbol===_0x459200(0x1ed)&&(_0x13495f[Symbol[_0x459200(0x1cf)]]=function(){return this;}),_0x13495f;function _0x59d269(_0x37f68b){return function(_0x18e8f7){return _0x234006([_0x37f68b,_0x18e8f7]);};}function _0x234006(_0x323ec3){var _0x1d6fba=_0x459200;if(_0x5845f5)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x2a2ad1)try{if(_0x5845f5=0x1,_0x28b5af&&(_0x3dbb74=_0x323ec3[0x0]&0x2?_0x28b5af[_0x1d6fba(0x226)]:_0x323ec3[0x0]?_0x28b5af[_0x1d6fba(0x20d)]||((_0x3dbb74=_0x28b5af[_0x1d6fba(0x226)])&&_0x3dbb74['call'](_0x28b5af),0x0):_0x28b5af[_0x1d6fba(0x221)])&&!(_0x3dbb74=_0x3dbb74['call'](_0x28b5af,_0x323ec3[0x1]))['done'])return _0x3dbb74;if(_0x28b5af=0x0,_0x3dbb74)_0x323ec3=[_0x323ec3[0x0]&0x2,_0x3dbb74[_0x1d6fba(0x1ce)]];switch(_0x323ec3[0x0]){case 0x0:case 0x1:_0x3dbb74=_0x323ec3;break;case 0x4:_0x2a2ad1[_0x1d6fba(0x218)]++;return{'value':_0x323ec3[0x1],'done':![]};case 0x5:_0x2a2ad1[_0x1d6fba(0x218)]++,_0x28b5af=_0x323ec3[0x1],_0x323ec3=[0x0];continue;case 0x7:_0x323ec3=_0x2a2ad1[_0x1d6fba(0x1e8)][_0x1d6fba(0x21b)](),_0x2a2ad1[_0x1d6fba(0x217)][_0x1d6fba(0x21b)]();continue;default:if(!(_0x3dbb74=_0x2a2ad1[_0x1d6fba(0x217)],_0x3dbb74=_0x3dbb74['length']>0x0&&_0x3dbb74[_0x3dbb74[_0x1d6fba(0x213)]-0x1])&&(_0x323ec3[0x0]===0x6||_0x323ec3[0x0]===0x2)){_0x2a2ad1=0x0;continue;}if(_0x323ec3[0x0]===0x3&&(!_0x3dbb74||_0x323ec3[0x1]>_0x3dbb74[0x0]&&_0x323ec3[0x1]<_0x3dbb74[0x3])){_0x2a2ad1[_0x1d6fba(0x218)]=_0x323ec3[0x1];break;}if(_0x323ec3[0x0]===0x6&&_0x2a2ad1[_0x1d6fba(0x218)]<_0x3dbb74[0x1]){_0x2a2ad1[_0x1d6fba(0x218)]=_0x3dbb74[0x1],_0x3dbb74=_0x323ec3;break;}if(_0x3dbb74&&_0x2a2ad1[_0x1d6fba(0x218)]<_0x3dbb74[0x2]){_0x2a2ad1['label']=_0x3dbb74[0x2],_0x2a2ad1['ops'][_0x1d6fba(0x1e0)](_0x323ec3);break;}if(_0x3dbb74[0x2])_0x2a2ad1['ops']['pop']();_0x2a2ad1[_0x1d6fba(0x217)][_0x1d6fba(0x21b)]();continue;}_0x323ec3=_0x4e6a99[_0x1d6fba(0x1fe)](_0x2b9e95,_0x2a2ad1);}catch(_0xbdca13){_0x323ec3=[0x6,_0xbdca13],_0x28b5af=0x0;}finally{_0x5845f5=_0x3dbb74=0x0;}if(_0x323ec3[0x0]&0x5)throw _0x323ec3[0x1];return{'value':_0x323ec3[0x0]?_0x323ec3[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,a29_0x47085d(0x1f9),{'value':!![]}),exports['addEnv']=exports[a29_0x47085d(0x205)]=exports[a29_0x47085d(0x1d5)]=void 0x0;var _=__importStar(require(a29_0x47085d(0x1e5))),definition_1=require('../definition'),nas_1=require(a29_0x47085d(0x1f3)),path=__importStar(require(a29_0x47085d(0x21a))),fs=__importStar(require(a29_0x47085d(0x1e7))),file_1=require(a29_0x47085d(0x1e3)),sysLibs=[a29_0x47085d(0x1d7),a29_0x47085d(0x214),a29_0x47085d(0x1dc),a29_0x47085d(0x223),a29_0x47085d(0x20c),'/lib/x86_64-linux-gnu','/python/lib/python2.7/site-packages',a29_0x47085d(0x219)],fcLibs=[a29_0x47085d(0x202),a29_0x47085d(0x204),a29_0x47085d(0x1d7)],sysPaths=[a29_0x47085d(0x210),a29_0x47085d(0x200),a29_0x47085d(0x206),a29_0x47085d(0x1f8),'/sbin',a29_0x47085d(0x21f)],fcPaths=[a29_0x47085d(0x202),a29_0x47085d(0x201)],pythonPaths=[a29_0x47085d(0x207),a29_0x47085d(0x219)],funPaths=[a29_0x47085d(0x224),a29_0x47085d(0x22b)];function addInstallTargetEnv(_0xfefbca,_0x2a7809){var _0x3389e6=a29_0x47085d,_0x23f921=Object['assign']({},_0xfefbca);if(!_0x2a7809)return _0x23f921;return _[_0x3389e6(0x22a)](_0x2a7809,function(_0xc9a70){var _0x59c91e=_0x3389e6,_0x16fbfc=_0xc9a70[_0x59c91e(0x1e4)],_0x465ade=_0x16fbfc,_0x278a53=pythonPaths[_0x59c91e(0x1db)](function(_0x11a321){return''+_0x465ade+_0x11a321;})[_0x59c91e(0x1f7)](':');_0x23f921[_0x59c91e(0x1df)]?_0x23f921[_0x59c91e(0x1df)]=_0x23f921[_0x59c91e(0x1df)]+':'+_0x278a53:_0x23f921[_0x59c91e(0x1df)]=_0x278a53;}),_0x23f921;}exports[a29_0x47085d(0x1d5)]=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x3550bc,_0x53147b){return __awaiter(this,void 0x0,void 0x0,function(){var _0x50a47c,_0x52341d,_0x2c89c2,_0x33cbcc;return __generator(this,function(_0x341f0f){var _0x1e24e9=a29_0x5765;switch(_0x341f0f['label']){case 0x0:_0x50a47c={};if(!_0x53147b)return[0x2,_0x50a47c];_0x52341d=path[_0x1e24e9(0x229)](_0x3550bc,_0x53147b,'.fun/root/etc/ld.so.conf.d');return[0x4,fs[_0x1e24e9(0x228)](_0x52341d)];case 0x1:if(!_0x341f0f[_0x1e24e9(0x1dd)]())return[0x2,_0x50a47c];return[0x4,fs[_0x1e24e9(0x1d0)](_0x52341d)];case 0x2:_0x2c89c2=_0x341f0f[_0x1e24e9(0x1dd)]();if(_0x2c89c2[_0x1e24e9(0x21d)]())return[0x2,_0x50a47c];return[0x4,resolveLibPaths(_0x52341d)];case 0x3:_0x33cbcc=_0x341f0f[_0x1e24e9(0x1dd)]();!_[_0x1e24e9(0x1d8)](_0x33cbcc)&&(_0x50a47c['LD_LIBRARY_PATH']=_0x33cbcc[_0x1e24e9(0x1db)](function(_0x37a0c3){var _0x4eaab4=_0x1e24e9;return _0x4eaab4(0x1cd)+_0x37a0c3;})[_0x1e24e9(0x1f7)](':'));return[0x2,_0x50a47c];}});});}exports[a29_0x47085d(0x205)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x334d86){return __awaiter(this,void 0x0,void 0x0,function(){var _0xe8c651,_0x260111=this;return __generator(this,function(_0x5078bb){var _0x13a655=a29_0x5765;switch(_0x5078bb['label']){case 0x0:if(!fs[_0x13a655(0x211)](_0x334d86))return[0x2,[]];return[0x4,Promise[_0x13a655(0x1d3)](fs['readdirSync'](_0x334d86,_0x13a655(0x208))[_0x13a655(0x1d1)](function(_0xf3b090){var _0x4ec9a0=_0x13a655;return _0xf3b090[_0x4ec9a0(0x227)](_0x4ec9a0(0x1fb));})[_0x13a655(0x1db)](function(_0x17b85d){return __awaiter(_0x260111,void 0x0,void 0x0,function(){return __generator(this,function(_0x121556){var _0x40e4b8=a29_0x5765;switch(_0x121556[_0x40e4b8(0x218)]){case 0x0:return[0x4,file_1[_0x40e4b8(0x1e2)](path[_0x40e4b8(0x1f7)](_0x334d86,_0x17b85d))];case 0x1:return[0x2,_0x121556['sent']()];}});});}))];case 0x1:_0xe8c651=_0x5078bb[_0x13a655(0x1dd)]();return[0x2,_[_0x13a655(0x1e6)](_0xe8c651)[_0x13a655(0x1d6)](function(_0x2584d6,_0x10492a){var _0x1451e1=_0x13a655,_0xa763f6=_0x10492a[_0x1451e1(0x1e9)](/^\s*(\/.*)\s*$/);return _0xa763f6&&_0xa763f6[0x1][_0x1451e1(0x1ee)]('/')&&_0x2584d6[_0x1451e1(0x1e0)](_0xa763f6[0x1]),_0x2584d6;},[])];}});});}function a29_0x5765(_0x183991,_0x114d76){return a29_0x5765=function(_0x4044b1,_0x576547){_0x4044b1=_0x4044b1-0x1cd;var _0x404cef=a29_0x4044[_0x4044b1];return _0x404cef;},a29_0x5765(_0x183991,_0x114d76);}function addEnv(_0x232c8f,_0x3bfa39){var _0x3e8720=a29_0x47085d,_0x2a9342=Object[_0x3e8720(0x22c)]({},_0x232c8f),_0x2751b9=_0x3e8720(0x203);_0x2a9342[_0x3e8720(0x1f1)]=generateLibPath(_0x2a9342,_0x2751b9),_0x2a9342[_0x3e8720(0x212)]=generatePath(_0x2a9342,_0x2751b9),_0x2a9342[_0x3e8720(0x20b)]=generateNodePaths(_0x2a9342,_0x3e8720(0x202));var _0x43322e=_0x2751b9+_0x3e8720(0x1f2);!_0x2a9342['PYTHONUSERBASE']&&(_0x2a9342[_0x3e8720(0x21c)]=_0x43322e);if(_0x3bfa39)return appendNasEnvs(_0x2a9342,_0x3bfa39);return _0x2a9342;}exports[a29_0x47085d(0x1e1)]=addEnv;function appendNasEnvs(_0x3c3e5f,_0x50423c){var _0xd27a67=a29_0x47085d,_0x3c9555=definition_1['isAutoConfig'](_0x50423c),_0x147167;if(_0x3c9555){var _0x19428d=_0xd27a67(0x222);_0x147167=appendNasMountPointEnv(_0x3c3e5f,_0x19428d);}else{if(typeof _0x50423c!==_0xd27a67(0x1de)){var _0x9ccd36=_0x50423c[_0xd27a67(0x20a)];_[_0xd27a67(0x22a)](_0x9ccd36,function(_0x483052){var _0x5bbe64=_0xd27a67,_0x1f5eea=nas_1[_0x5bbe64(0x21e)](_0x483052)['mountDir'];_0x147167=appendNasMountPointEnv(_0x3c3e5f,_0x1f5eea);});}}return _0x147167;}function appendNasMountPointEnv(_0x12684c,_0x293fe2){var _0x43d1a8=a29_0x47085d;_0x12684c[_0x43d1a8(0x1f1)]=generateLibPath(_0x12684c,_0x293fe2),_0x12684c[_0x43d1a8(0x212)]=generatePath(_0x12684c,_0x293fe2),_0x12684c[_0x43d1a8(0x20b)]=generateNodePaths(_0x12684c,_0x293fe2);var _0x2d2014=generatePythonPaths(_0x293fe2);return _0x12684c['PYTHONPATH']?_0x12684c[_0x43d1a8(0x1df)]=_0x12684c['PYTHONPATH']+':'+_0x2d2014:_0x12684c[_0x43d1a8(0x1df)]=_0x2d2014,_0x12684c;}function generatePythonPaths(_0x3cab3a){var _0x5d1bea=a29_0x47085d;return pythonPaths[_0x5d1bea(0x1db)](function(_0x500bf6){return''+_0x3cab3a+_0x500bf6;})[_0x5d1bea(0x1f7)](':');}function generateNodePaths(_0x44c9ca,_0x235d88){var _0x2a3113=a29_0x47085d,_0x286194=_0x2a3113(0x1da),_0x3ebbfa=_0x235d88+'/node_modules',_0x342bc6;return _0x44c9ca['NODE_PATH']?_0x342bc6=_0x44c9ca[_0x2a3113(0x20b)]+':'+_0x3ebbfa+':'+_0x286194:_0x342bc6=_0x3ebbfa+':'+_0x286194,duplicateRemoval(_0x342bc6);}function generateLibPath(_0x234323,_0x36c615){var _0x3497a5=a29_0x47085d,_0x387773=_[_0x3497a5(0x220)](sysLibs[_0x3497a5(0x1db)](function(_0x17802d){return _0x36c615+'/root'+_0x17802d;}),fcLibs)[_0x3497a5(0x1f7)](':');return _0x234323[_0x3497a5(0x1f1)]&&(_0x387773=_0x234323[_0x3497a5(0x1f1)]+':'+_0x387773),duplicateRemoval(_0x387773);}function generatePath(_0xa71c7d,_0x3e878){var _0xcd586c=a29_0x47085d,_0x9af9fa=_[_0xcd586c(0x220)](sysPaths[_0xcd586c(0x1db)](function(_0x37de33){var _0x38b211=_0xcd586c;return _0x3e878+_0x38b211(0x1fc)+_0x37de33;}),fcPaths,funPaths['map'](function(_0x5918bb){return''+_0x3e878+_0x5918bb;}),sysPaths)[_0xcd586c(0x1f7)](':');return _0xa71c7d[_0xcd586c(0x212)]&&(_0x9af9fa=_0xa71c7d[_0xcd586c(0x212)]+':'+_0x9af9fa),duplicateRemoval(_0x9af9fa);}function duplicateRemoval(_0x2bf530){var _0x1a31d8=a29_0x47085d,_0x454341=_0x2bf530['split'](':');return _[_0x1a31d8(0x220)](_0x454341)['join'](':');}