'use strict';var a29_0x24a1=['/node_modules/.bin','map','1157sEXTFc','forEach','hasOwnProperty','/python/bin','__awaiter','2cTMjGT','/usr/local/lib','sent','readdirSync','addEnv','utf-8','path','fs-extra','value','apply','lstat','resolve','trys','create','/python/lib/python2.7/site-packages','readLines','default','1434655FdntNt','/usr/local/bin','109IElkID','49331KxHGxM','./nas','Generator\x20is\x20already\x20executing.','1sokBfJ','done','/usr/local/lib/node_modules','pathExists','mountPoints','__esModule','PYTHONUSERBASE','__setModuleDefault','../definition','/bin','PYTHONPATH','next','endsWith','iterator','defineProperty','1435936zPLewT','/code/.s','isFile','throw','/usr/bin','isEmpty','containerPath','call','/root','all','/code','330428fZraHi','function','startsWith','/lib','__generator','split','/code/.fun/root','return','NODE_PATH','reduce','/usr/lib','ops','/usr/lib/x86_64-linux-gnu','.conf','length','PATH','LD_LIBRARY_PATH','8741ZBHjAo','pop','/node_modules','label','union','/usr/lib64','18523BCySEh','then','join','resolveLibPathsFromLdConf','string','addInstallTargetEnv','push','/usr/sbin','existsSync','71SvCOtF'];var a29_0x3f955b=a29_0x5acf;(function(_0x15994b,_0x7e9be1){var _0x27d5c7=a29_0x5acf;while(!![]){try{var _0x1972da=-parseInt(_0x27d5c7(0x198))+-parseInt(_0x27d5c7(0x15f))+-parseInt(_0x27d5c7(0x154))+parseInt(_0x27d5c7(0x187))*parseInt(_0x27d5c7(0x182))+parseInt(_0x27d5c7(0x17f))*-parseInt(_0x27d5c7(0x176))+parseInt(_0x27d5c7(0x170))*parseInt(_0x27d5c7(0x19e))+-parseInt(_0x27d5c7(0x19a))*-parseInt(_0x27d5c7(0x19b));if(_0x1972da===_0x7e9be1)break;else _0x15994b['push'](_0x15994b['shift']());}catch(_0x2452ab){_0x15994b['push'](_0x15994b['shift']());}}}(a29_0x24a1,0xd4e2e));var __createBinding=this&&this['__createBinding']||(Object[a29_0x3f955b(0x194)]?function(_0x9fe500,_0x3b4fbd,_0x37086f,_0x2c8401){var _0xaa4ea0=a29_0x3f955b;if(_0x2c8401===undefined)_0x2c8401=_0x37086f;Object[_0xaa4ea0(0x153)](_0x9fe500,_0x2c8401,{'enumerable':!![],'get':function(){return _0x3b4fbd[_0x37086f];}});}:function(_0x36d6a8,_0x4c7b74,_0x45de31,_0x1a7f75){if(_0x1a7f75===undefined)_0x1a7f75=_0x45de31;_0x36d6a8[_0x1a7f75]=_0x4c7b74[_0x45de31];}),__setModuleDefault=this&&this[a29_0x3f955b(0x1a5)]||(Object[a29_0x3f955b(0x194)]?function(_0x418eb4,_0x3569e5){var _0x32d0bc=a29_0x3f955b;Object['defineProperty'](_0x418eb4,_0x32d0bc(0x197),{'enumerable':!![],'value':_0x3569e5});}:function(_0x2f9a4f,_0x2e6514){var _0x21e766=a29_0x3f955b;_0x2f9a4f[_0x21e766(0x197)]=_0x2e6514;}),__importStar=this&&this['__importStar']||function(_0x45f247){var _0x5b72c6=a29_0x3f955b;if(_0x45f247&&_0x45f247[_0x5b72c6(0x1a3)])return _0x45f247;var _0x47292b={};if(_0x45f247!=null){for(var _0x3c63da in _0x45f247)if(_0x3c63da!==_0x5b72c6(0x197)&&Object[_0x5b72c6(0x184)][_0x5b72c6(0x15b)](_0x45f247,_0x3c63da))__createBinding(_0x47292b,_0x45f247,_0x3c63da);}return __setModuleDefault(_0x47292b,_0x45f247),_0x47292b;},__awaiter=this&&this[a29_0x3f955b(0x186)]||function(_0x1072a7,_0xc74261,_0x50301c,_0x17b1e4){function _0x49c45b(_0x3055d8){return _0x3055d8 instanceof _0x50301c?_0x3055d8:new _0x50301c(function(_0x182481){_0x182481(_0x3055d8);});}return new(_0x50301c||(_0x50301c=Promise))(function(_0x566991,_0x27c29b){var _0x239ae0=a29_0x5acf;function _0x4167a5(_0x106ee6){var _0x4e74a5=a29_0x5acf;try{_0x157090(_0x17b1e4[_0x4e74a5(0x1a9)](_0x106ee6));}catch(_0x219ded){_0x27c29b(_0x219ded);}}function _0x5d4795(_0x315cb6){try{_0x157090(_0x17b1e4['throw'](_0x315cb6));}catch(_0x4de8ca){_0x27c29b(_0x4de8ca);}}function _0x157090(_0x8fa273){var _0x2bd9de=a29_0x5acf;_0x8fa273[_0x2bd9de(0x19f)]?_0x566991(_0x8fa273['value']):_0x49c45b(_0x8fa273[_0x2bd9de(0x18f)])[_0x2bd9de(0x177)](_0x4167a5,_0x5d4795);}_0x157090((_0x17b1e4=_0x17b1e4[_0x239ae0(0x190)](_0x1072a7,_0xc74261||[]))[_0x239ae0(0x1a9)]());});},__generator=this&&this[a29_0x3f955b(0x163)]||function(_0x997b3e,_0x4a3858){var _0x2d61e0=a29_0x3f955b,_0xf9999e={'label':0x0,'sent':function(){if(_0x2ee8a1[0x0]&0x1)throw _0x2ee8a1[0x1];return _0x2ee8a1[0x1];},'trys':[],'ops':[]},_0x157f3b,_0x3fc24f,_0x2ee8a1,_0x625dbd;return _0x625dbd={'next':_0x11f844(0x0),'throw':_0x11f844(0x1),'return':_0x11f844(0x2)},typeof Symbol===_0x2d61e0(0x160)&&(_0x625dbd[Symbol[_0x2d61e0(0x152)]]=function(){return this;}),_0x625dbd;function _0x11f844(_0x1f6ae9){return function(_0x38ea0c){return _0x39e3b6([_0x1f6ae9,_0x38ea0c]);};}function _0x39e3b6(_0xaab024){var _0x201709=_0x2d61e0;if(_0x157f3b)throw new TypeError(_0x201709(0x19d));while(_0xf9999e)try{if(_0x157f3b=0x1,_0x3fc24f&&(_0x2ee8a1=_0xaab024[0x0]&0x2?_0x3fc24f['return']:_0xaab024[0x0]?_0x3fc24f[_0x201709(0x157)]||((_0x2ee8a1=_0x3fc24f[_0x201709(0x166)])&&_0x2ee8a1[_0x201709(0x15b)](_0x3fc24f),0x0):_0x3fc24f[_0x201709(0x1a9)])&&!(_0x2ee8a1=_0x2ee8a1[_0x201709(0x15b)](_0x3fc24f,_0xaab024[0x1]))[_0x201709(0x19f)])return _0x2ee8a1;if(_0x3fc24f=0x0,_0x2ee8a1)_0xaab024=[_0xaab024[0x0]&0x2,_0x2ee8a1[_0x201709(0x18f)]];switch(_0xaab024[0x0]){case 0x0:case 0x1:_0x2ee8a1=_0xaab024;break;case 0x4:_0xf9999e['label']++;return{'value':_0xaab024[0x1],'done':![]};case 0x5:_0xf9999e[_0x201709(0x173)]++,_0x3fc24f=_0xaab024[0x1],_0xaab024=[0x0];continue;case 0x7:_0xaab024=_0xf9999e[_0x201709(0x16a)]['pop'](),_0xf9999e[_0x201709(0x193)][_0x201709(0x171)]();continue;default:if(!(_0x2ee8a1=_0xf9999e['trys'],_0x2ee8a1=_0x2ee8a1[_0x201709(0x16d)]>0x0&&_0x2ee8a1[_0x2ee8a1['length']-0x1])&&(_0xaab024[0x0]===0x6||_0xaab024[0x0]===0x2)){_0xf9999e=0x0;continue;}if(_0xaab024[0x0]===0x3&&(!_0x2ee8a1||_0xaab024[0x1]>_0x2ee8a1[0x0]&&_0xaab024[0x1]<_0x2ee8a1[0x3])){_0xf9999e[_0x201709(0x173)]=_0xaab024[0x1];break;}if(_0xaab024[0x0]===0x6&&_0xf9999e[_0x201709(0x173)]<_0x2ee8a1[0x1]){_0xf9999e['label']=_0x2ee8a1[0x1],_0x2ee8a1=_0xaab024;break;}if(_0x2ee8a1&&_0xf9999e[_0x201709(0x173)]<_0x2ee8a1[0x2]){_0xf9999e[_0x201709(0x173)]=_0x2ee8a1[0x2],_0xf9999e[_0x201709(0x16a)][_0x201709(0x17c)](_0xaab024);break;}if(_0x2ee8a1[0x2])_0xf9999e['ops'][_0x201709(0x171)]();_0xf9999e['trys']['pop']();continue;}_0xaab024=_0x4a3858[_0x201709(0x15b)](_0x997b3e,_0xf9999e);}catch(_0x3a31b3){_0xaab024=[0x6,_0x3a31b3],_0x3fc24f=0x0;}finally{_0x157f3b=_0x2ee8a1=0x0;}if(_0xaab024[0x0]&0x5)throw _0xaab024[0x1];return{'value':_0xaab024[0x0]?_0xaab024[0x1]:void 0x0,'done':!![]};}};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['addEnv']=exports[a29_0x3f955b(0x179)]=exports['addInstallTargetEnv']=void 0x0;var _=__importStar(require('lodash')),definition_1=require(a29_0x3f955b(0x1a6)),nas_1=require(a29_0x3f955b(0x19c)),path=__importStar(require(a29_0x3f955b(0x18d))),fs=__importStar(require(a29_0x3f955b(0x18e))),file_1=require('../utils/file'),sysLibs=['/usr/local/lib',a29_0x3f955b(0x169),a29_0x3f955b(0x16b),a29_0x3f955b(0x175),a29_0x3f955b(0x162),'/lib/x86_64-linux-gnu',a29_0x3f955b(0x195),'/python/lib/python3.6/site-packages'],fcLibs=[a29_0x3f955b(0x15e),'/code/lib',a29_0x3f955b(0x188)],sysPaths=[a29_0x3f955b(0x199),'/usr/local/sbin',a29_0x3f955b(0x158),a29_0x3f955b(0x17d),'/sbin',a29_0x3f955b(0x1a7)],fcPaths=['/code','/code/node_modules/.bin'],pythonPaths=['/python/lib/python2.7/site-packages','/python/lib/python3.6/site-packages'],funPaths=[a29_0x3f955b(0x185),a29_0x3f955b(0x180)];function addInstallTargetEnv(_0x5f1cc6,_0x2d9325){var _0x20c04f=a29_0x3f955b,_0x2ed731=Object['assign']({},_0x5f1cc6);if(!_0x2d9325)return _0x2ed731;return _[_0x20c04f(0x183)](_0x2d9325,function(_0x13135b){var _0x53f627=_0x20c04f,_0x8842fb=_0x13135b[_0x53f627(0x15a)],_0x19fd7d=_0x8842fb,_0x4b34bb=pythonPaths[_0x53f627(0x181)](function(_0x181f0b){return''+_0x19fd7d+_0x181f0b;})[_0x53f627(0x178)](':');_0x2ed731[_0x53f627(0x1a8)]?_0x2ed731['PYTHONPATH']=_0x2ed731[_0x53f627(0x1a8)]+':'+_0x4b34bb:_0x2ed731[_0x53f627(0x1a8)]=_0x4b34bb;}),_0x2ed731;}exports[a29_0x3f955b(0x17b)]=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x4f89ed,_0x4d250a){return __awaiter(this,void 0x0,void 0x0,function(){var _0x1f752d,_0x7d6365,_0x152846,_0x1c2a07;return __generator(this,function(_0x5b6c2f){var _0x18916e=a29_0x5acf;switch(_0x5b6c2f['label']){case 0x0:_0x1f752d={};if(!_0x4d250a)return[0x2,_0x1f752d];_0x7d6365=path[_0x18916e(0x192)](_0x4f89ed,_0x4d250a,'.fun/root/etc/ld.so.conf.d');return[0x4,fs[_0x18916e(0x1a1)](_0x7d6365)];case 0x1:if(!_0x5b6c2f[_0x18916e(0x189)]())return[0x2,_0x1f752d];return[0x4,fs[_0x18916e(0x191)](_0x7d6365)];case 0x2:_0x152846=_0x5b6c2f[_0x18916e(0x189)]();if(_0x152846[_0x18916e(0x156)]())return[0x2,_0x1f752d];return[0x4,resolveLibPaths(_0x7d6365)];case 0x3:_0x1c2a07=_0x5b6c2f[_0x18916e(0x189)]();!_[_0x18916e(0x159)](_0x1c2a07)&&(_0x1f752d[_0x18916e(0x16f)]=_0x1c2a07[_0x18916e(0x181)](function(_0x2b5a67){var _0x3b1af5=_0x18916e;return _0x3b1af5(0x165)+_0x2b5a67;})[_0x18916e(0x178)](':'));return[0x2,_0x1f752d];}});});}exports[a29_0x3f955b(0x179)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x3b90d5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x22037b,_0x51852d=this;return __generator(this,function(_0x1a5115){var _0x46d295=a29_0x5acf;switch(_0x1a5115[_0x46d295(0x173)]){case 0x0:if(!fs[_0x46d295(0x17e)](_0x3b90d5))return[0x2,[]];return[0x4,Promise[_0x46d295(0x15d)](fs[_0x46d295(0x18a)](_0x3b90d5,_0x46d295(0x18c))['filter'](function(_0x165fba){var _0x2a0c37=_0x46d295;return _0x165fba[_0x2a0c37(0x1aa)](_0x2a0c37(0x16c));})[_0x46d295(0x181)](function(_0x224814){return __awaiter(_0x51852d,void 0x0,void 0x0,function(){return __generator(this,function(_0x26821b){var _0x1e6dc8=a29_0x5acf;switch(_0x26821b[_0x1e6dc8(0x173)]){case 0x0:return[0x4,file_1[_0x1e6dc8(0x196)](path['join'](_0x3b90d5,_0x224814))];case 0x1:return[0x2,_0x26821b[_0x1e6dc8(0x189)]()];}});});}))];case 0x1:_0x22037b=_0x1a5115[_0x46d295(0x189)]();return[0x2,_['flatten'](_0x22037b)[_0x46d295(0x168)](function(_0x3b85c7,_0x365b9c){var _0x2b5c9c=_0x46d295,_0x25e8d6=_0x365b9c['match'](/^\s*(\/.*)\s*$/);return _0x25e8d6&&_0x25e8d6[0x1][_0x2b5c9c(0x161)]('/')&&_0x3b85c7[_0x2b5c9c(0x17c)](_0x25e8d6[0x1]),_0x3b85c7;},[])];}});});}function addEnv(_0x3145ee,_0x28b21a){var _0x1e29c4=a29_0x3f955b,_0x2fdfad=Object['assign']({},_0x3145ee),_0x43e573=_0x1e29c4(0x155);_0x2fdfad['LD_LIBRARY_PATH']=generateLibPath(_0x2fdfad,_0x43e573),_0x2fdfad[_0x1e29c4(0x16e)]=generatePath(_0x2fdfad,_0x43e573),_0x2fdfad['NODE_PATH']=generateNodePaths(_0x2fdfad,_0x1e29c4(0x15e));var _0x2d08a9=_0x43e573+'/python';!_0x2fdfad[_0x1e29c4(0x1a4)]&&(_0x2fdfad[_0x1e29c4(0x1a4)]=_0x2d08a9);if(_0x28b21a)return appendNasEnvs(_0x2fdfad,_0x28b21a);return _0x2fdfad;}exports[a29_0x3f955b(0x18b)]=addEnv;function appendNasEnvs(_0xc8346b,_0x317676){var _0x91fae5=a29_0x3f955b,_0x2ed655=definition_1['isAutoConfig'](_0x317676),_0x4cee47;if(_0x2ed655){var _0x4e7a6c='/mnt/auto';_0x4cee47=appendNasMountPointEnv(_0xc8346b,_0x4e7a6c);}else{if(typeof _0x317676!==_0x91fae5(0x17a)){var _0x517ebe=_0x317676[_0x91fae5(0x1a2)];_['forEach'](_0x517ebe,function(_0x29ddb3){var _0x55004d=nas_1['resolveMountPoint'](_0x29ddb3)['mountDir'];_0x4cee47=appendNasMountPointEnv(_0xc8346b,_0x55004d);});}}return _0x4cee47;}function appendNasMountPointEnv(_0xc679c4,_0x3f6000){var _0x5847df=a29_0x3f955b;_0xc679c4['LD_LIBRARY_PATH']=generateLibPath(_0xc679c4,_0x3f6000),_0xc679c4['PATH']=generatePath(_0xc679c4,_0x3f6000),_0xc679c4[_0x5847df(0x167)]=generateNodePaths(_0xc679c4,_0x3f6000);var _0x4f6e9f=generatePythonPaths(_0x3f6000);return _0xc679c4[_0x5847df(0x1a8)]?_0xc679c4[_0x5847df(0x1a8)]=_0xc679c4[_0x5847df(0x1a8)]+':'+_0x4f6e9f:_0xc679c4[_0x5847df(0x1a8)]=_0x4f6e9f,_0xc679c4;}function generatePythonPaths(_0x5c4edf){var _0x530c74=a29_0x3f955b;return pythonPaths['map'](function(_0x3d06c8){return''+_0x5c4edf+_0x3d06c8;})[_0x530c74(0x178)](':');}function generateNodePaths(_0x31acdf,_0xcfa69f){var _0x3c9d54=a29_0x3f955b,_0x2e0caa=_0x3c9d54(0x1a0),_0x4c8961=_0xcfa69f+_0x3c9d54(0x172),_0x5b8b2d;return _0x31acdf[_0x3c9d54(0x167)]?_0x5b8b2d=_0x31acdf[_0x3c9d54(0x167)]+':'+_0x4c8961+':'+_0x2e0caa:_0x5b8b2d=_0x4c8961+':'+_0x2e0caa,duplicateRemoval(_0x5b8b2d);}function generateLibPath(_0x383026,_0x255247){var _0x57947b=a29_0x3f955b,_0x2c5786=_[_0x57947b(0x174)](sysLibs['map'](function(_0x559cae){var _0x3a82f2=_0x57947b;return _0x255247+_0x3a82f2(0x15c)+_0x559cae;}),fcLibs)[_0x57947b(0x178)](':');return _0x383026['LD_LIBRARY_PATH']&&(_0x2c5786=_0x383026[_0x57947b(0x16f)]+':'+_0x2c5786),duplicateRemoval(_0x2c5786);}function a29_0x5acf(_0x36144c,_0x3cb844){return a29_0x5acf=function(_0x24a13d,_0x5acf60){_0x24a13d=_0x24a13d-0x152;var _0x4b021b=a29_0x24a1[_0x24a13d];return _0x4b021b;},a29_0x5acf(_0x36144c,_0x3cb844);}function generatePath(_0x3c7d69,_0x55c56c){var _0x1359f5=a29_0x3f955b,_0x3b24b1=_[_0x1359f5(0x174)](sysPaths[_0x1359f5(0x181)](function(_0x2287c0){return _0x55c56c+'/root'+_0x2287c0;}),fcPaths,funPaths['map'](function(_0x2d728e){return''+_0x55c56c+_0x2d728e;}),sysPaths)[_0x1359f5(0x178)](':');return _0x3c7d69['PATH']&&(_0x3b24b1=_0x3c7d69[_0x1359f5(0x16e)]+':'+_0x3b24b1),duplicateRemoval(_0x3b24b1);}function duplicateRemoval(_0x36be6d){var _0x88871c=a29_0x3f955b,_0x3d51e1=_0x36be6d[_0x88871c(0x164)](':');return _[_0x88871c(0x174)](_0x3d51e1)[_0x88871c(0x178)](':');}