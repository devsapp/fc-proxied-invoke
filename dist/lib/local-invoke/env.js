'use strict';var a28_0x2754=['then','/code','ops','/code/lib','map','addInstallTargetEnv','/bin','/code/.s','next','default','/root','/python/lib/python2.7/site-packages','/usr/sbin','PATH','flatten','resolveLibPathsFromLdConf','/usr/bin','forEach','4517cPRbOi','iterator','join','assign','pop','reduce','355TFQOvD','412248rAJvua','pathExists','hasOwnProperty','defineProperty','/usr/local/lib/node_modules','PYTHONPATH','mountPoints','isEmpty','endsWith','union','134aHearC','3695AGsqgm','31PoCvdX','/usr/local/sbin','973DEzPNf','PYTHONUSERBASE','NODE_PATH','create','call','startsWith','sent','__importStar','LD_LIBRARY_PATH','73281HVOiEX','/usr/lib64','existsSync','return','/usr/lib','424665uZYGmw','path','__setModuleDefault','done','resolveMountPoint','__esModule','/python','mountDir','/code/node_modules/.bin','trys','isAutoConfig','34lbchxP','readLines','__generator','.fun/root/etc/ld.so.conf.d','/sbin','fs-extra','value','/usr/lib/x86_64-linux-gnu','push','/node_modules/.bin','/usr/local/bin','/python/bin','containerPath','throw','match','24626TpwtfP','/node_modules','label','readdirSync','/usr/local/lib','lstat','.conf','resolve','8JTUjLv'];var a28_0xf7daab=a28_0x34a0;(function(_0x323fcf,_0xb112f8){var _0x4e10eb=a28_0x34a0;while(!![]){try{var _0x17131c=parseInt(_0x4e10eb(0x147))*-parseInt(_0x4e10eb(0x148))+parseInt(_0x4e10eb(0x13d))+-parseInt(_0x4e10eb(0x17b))*parseInt(_0x4e10eb(0x154))+parseInt(_0x4e10eb(0x159))+parseInt(_0x4e10eb(0x136))*parseInt(_0x4e10eb(0x149))+parseInt(_0x4e10eb(0x13c))*-parseInt(_0x4e10eb(0x14b))+parseInt(_0x4e10eb(0x164))*parseInt(_0x4e10eb(0x173));if(_0x17131c===_0xb112f8)break;else _0x323fcf['push'](_0x323fcf['shift']());}catch(_0x3a35f5){_0x323fcf['push'](_0x323fcf['shift']());}}}(a28_0x2754,0x5e967));var __createBinding=this&&this['__createBinding']||(Object[a28_0xf7daab(0x14e)]?function(_0x5d5640,_0x1ca342,_0x455ab0,_0x217ba1){var _0x568904=a28_0xf7daab;if(_0x217ba1===undefined)_0x217ba1=_0x455ab0;Object[_0x568904(0x140)](_0x5d5640,_0x217ba1,{'enumerable':!![],'get':function(){return _0x1ca342[_0x455ab0];}});}:function(_0x5afcfb,_0x51d4f4,_0x37cd59,_0x30310f){if(_0x30310f===undefined)_0x30310f=_0x37cd59;_0x5afcfb[_0x30310f]=_0x51d4f4[_0x37cd59];}),__setModuleDefault=this&&this[a28_0xf7daab(0x15b)]||(Object[a28_0xf7daab(0x14e)]?function(_0x3c1f5e,_0x337327){var _0x64e882=a28_0xf7daab;Object[_0x64e882(0x140)](_0x3c1f5e,_0x64e882(0x185),{'enumerable':!![],'value':_0x337327});}:function(_0x4edf15,_0x47e765){_0x4edf15['default']=_0x47e765;}),__importStar=this&&this[a28_0xf7daab(0x152)]||function(_0x2d854e){var _0x4cca6a=a28_0xf7daab;if(_0x2d854e&&_0x2d854e[_0x4cca6a(0x15e)])return _0x2d854e;var _0x1fdd83={};if(_0x2d854e!=null){for(var _0x524061 in _0x2d854e)if(_0x524061!==_0x4cca6a(0x185)&&Object[_0x4cca6a(0x13f)][_0x4cca6a(0x14f)](_0x2d854e,_0x524061))__createBinding(_0x1fdd83,_0x2d854e,_0x524061);}return __setModuleDefault(_0x1fdd83,_0x2d854e),_0x1fdd83;},__awaiter=this&&this['__awaiter']||function(_0x17204b,_0x54fcb6,_0x58ab5f,_0x232b78){function _0x2c1ac0(_0x34e461){return _0x34e461 instanceof _0x58ab5f?_0x34e461:new _0x58ab5f(function(_0x3476aa){_0x3476aa(_0x34e461);});}return new(_0x58ab5f||(_0x58ab5f=Promise))(function(_0x4cb1cf,_0x1288a6){var _0x5587af=a28_0x34a0;function _0x184daf(_0x264823){try{_0xda45a3(_0x232b78['next'](_0x264823));}catch(_0x4eecb6){_0x1288a6(_0x4eecb6);}}function _0xeafd6e(_0x115c4d){var _0x25cd46=a28_0x34a0;try{_0xda45a3(_0x232b78[_0x25cd46(0x171)](_0x115c4d));}catch(_0x43c697){_0x1288a6(_0x43c697);}}function _0xda45a3(_0x46a66e){var _0x35b14b=a28_0x34a0;_0x46a66e[_0x35b14b(0x15c)]?_0x4cb1cf(_0x46a66e[_0x35b14b(0x16a)]):_0x2c1ac0(_0x46a66e[_0x35b14b(0x16a)])[_0x35b14b(0x17c)](_0x184daf,_0xeafd6e);}_0xda45a3((_0x232b78=_0x232b78['apply'](_0x17204b,_0x54fcb6||[]))[_0x5587af(0x184)]());});},__generator=this&&this[a28_0xf7daab(0x166)]||function(_0x4f8053,_0x17e1dc){var _0x32aaf4=a28_0xf7daab,_0x4fe234={'label':0x0,'sent':function(){if(_0x3277ed[0x0]&0x1)throw _0x3277ed[0x1];return _0x3277ed[0x1];},'trys':[],'ops':[]},_0x3cf36e,_0x199bd4,_0x3277ed,_0x277ee6;return _0x277ee6={'next':_0x47f026(0x0),'throw':_0x47f026(0x1),'return':_0x47f026(0x2)},typeof Symbol==='function'&&(_0x277ee6[Symbol[_0x32aaf4(0x137)]]=function(){return this;}),_0x277ee6;function _0x47f026(_0x4571d7){return function(_0xbe06ec){return _0x10425b([_0x4571d7,_0xbe06ec]);};}function _0x10425b(_0x251c42){var _0x2f5409=_0x32aaf4;if(_0x3cf36e)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x4fe234)try{if(_0x3cf36e=0x1,_0x199bd4&&(_0x3277ed=_0x251c42[0x0]&0x2?_0x199bd4[_0x2f5409(0x157)]:_0x251c42[0x0]?_0x199bd4[_0x2f5409(0x171)]||((_0x3277ed=_0x199bd4[_0x2f5409(0x157)])&&_0x3277ed[_0x2f5409(0x14f)](_0x199bd4),0x0):_0x199bd4[_0x2f5409(0x184)])&&!(_0x3277ed=_0x3277ed[_0x2f5409(0x14f)](_0x199bd4,_0x251c42[0x1]))[_0x2f5409(0x15c)])return _0x3277ed;if(_0x199bd4=0x0,_0x3277ed)_0x251c42=[_0x251c42[0x0]&0x2,_0x3277ed['value']];switch(_0x251c42[0x0]){case 0x0:case 0x1:_0x3277ed=_0x251c42;break;case 0x4:_0x4fe234[_0x2f5409(0x175)]++;return{'value':_0x251c42[0x1],'done':![]};case 0x5:_0x4fe234[_0x2f5409(0x175)]++,_0x199bd4=_0x251c42[0x1],_0x251c42=[0x0];continue;case 0x7:_0x251c42=_0x4fe234[_0x2f5409(0x17e)][_0x2f5409(0x13a)](),_0x4fe234[_0x2f5409(0x162)][_0x2f5409(0x13a)]();continue;default:if(!(_0x3277ed=_0x4fe234[_0x2f5409(0x162)],_0x3277ed=_0x3277ed['length']>0x0&&_0x3277ed[_0x3277ed['length']-0x1])&&(_0x251c42[0x0]===0x6||_0x251c42[0x0]===0x2)){_0x4fe234=0x0;continue;}if(_0x251c42[0x0]===0x3&&(!_0x3277ed||_0x251c42[0x1]>_0x3277ed[0x0]&&_0x251c42[0x1]<_0x3277ed[0x3])){_0x4fe234[_0x2f5409(0x175)]=_0x251c42[0x1];break;}if(_0x251c42[0x0]===0x6&&_0x4fe234[_0x2f5409(0x175)]<_0x3277ed[0x1]){_0x4fe234[_0x2f5409(0x175)]=_0x3277ed[0x1],_0x3277ed=_0x251c42;break;}if(_0x3277ed&&_0x4fe234[_0x2f5409(0x175)]<_0x3277ed[0x2]){_0x4fe234[_0x2f5409(0x175)]=_0x3277ed[0x2],_0x4fe234['ops'][_0x2f5409(0x16c)](_0x251c42);break;}if(_0x3277ed[0x2])_0x4fe234[_0x2f5409(0x17e)][_0x2f5409(0x13a)]();_0x4fe234['trys'][_0x2f5409(0x13a)]();continue;}_0x251c42=_0x17e1dc[_0x2f5409(0x14f)](_0x4f8053,_0x4fe234);}catch(_0x32ab0c){_0x251c42=[0x6,_0x32ab0c],_0x199bd4=0x0;}finally{_0x3cf36e=_0x3277ed=0x0;}if(_0x251c42[0x0]&0x5)throw _0x251c42[0x1];return{'value':_0x251c42[0x0]?_0x251c42[0x1]:void 0x0,'done':!![]};}};Object[a28_0xf7daab(0x140)](exports,a28_0xf7daab(0x15e),{'value':!![]}),exports['addEnv']=exports[a28_0xf7daab(0x133)]=exports[a28_0xf7daab(0x181)]=void 0x0;var _=__importStar(require('lodash')),definition_1=require('../definition'),nas_1=require('./nas'),path=__importStar(require(a28_0xf7daab(0x15a))),fs=__importStar(require(a28_0xf7daab(0x169))),file_1=require('../utils/file'),sysLibs=['/usr/local/lib',a28_0xf7daab(0x158),a28_0xf7daab(0x16b),a28_0xf7daab(0x155),'/lib','/lib/x86_64-linux-gnu',a28_0xf7daab(0x187),'/python/lib/python3.6/site-packages'],fcLibs=[a28_0xf7daab(0x17d),a28_0xf7daab(0x17f),a28_0xf7daab(0x177)],sysPaths=[a28_0xf7daab(0x16e),a28_0xf7daab(0x14a),a28_0xf7daab(0x134),a28_0xf7daab(0x188),a28_0xf7daab(0x168),a28_0xf7daab(0x182)],fcPaths=[a28_0xf7daab(0x17d),a28_0xf7daab(0x161)],pythonPaths=[a28_0xf7daab(0x187),'/python/lib/python3.6/site-packages'],funPaths=[a28_0xf7daab(0x16f),a28_0xf7daab(0x16d)];function addInstallTargetEnv(_0x563f4e,_0x7a163){var _0x4987d7=a28_0xf7daab,_0x371049=Object[_0x4987d7(0x139)]({},_0x563f4e);if(!_0x7a163)return _0x371049;return _[_0x4987d7(0x135)](_0x7a163,function(_0x1aaa6e){var _0x5004f5=_0x4987d7,_0x4a3ff0=_0x1aaa6e[_0x5004f5(0x170)],_0x12cdf5=_0x4a3ff0,_0xd5b106=pythonPaths[_0x5004f5(0x180)](function(_0x155d1c){return''+_0x12cdf5+_0x155d1c;})['join'](':');_0x371049[_0x5004f5(0x142)]?_0x371049[_0x5004f5(0x142)]=_0x371049['PYTHONPATH']+':'+_0xd5b106:_0x371049[_0x5004f5(0x142)]=_0xd5b106;}),_0x371049;}exports[a28_0xf7daab(0x181)]=addInstallTargetEnv;function resolveLibPathsFromLdConf(_0x387ab4,_0x53713e){return __awaiter(this,void 0x0,void 0x0,function(){var _0x586a14,_0x5e57e8,_0x54d5b4,_0x1e7079;return __generator(this,function(_0x5426ce){var _0x41e359=a28_0x34a0;switch(_0x5426ce['label']){case 0x0:_0x586a14={};if(!_0x53713e)return[0x2,_0x586a14];_0x5e57e8=path[_0x41e359(0x17a)](_0x387ab4,_0x53713e,_0x41e359(0x167));return[0x4,fs[_0x41e359(0x13e)](_0x5e57e8)];case 0x1:if(!_0x5426ce['sent']())return[0x2,_0x586a14];return[0x4,fs[_0x41e359(0x178)](_0x5e57e8)];case 0x2:_0x54d5b4=_0x5426ce[_0x41e359(0x151)]();if(_0x54d5b4['isFile']())return[0x2,_0x586a14];return[0x4,resolveLibPaths(_0x5e57e8)];case 0x3:_0x1e7079=_0x5426ce[_0x41e359(0x151)]();!_[_0x41e359(0x144)](_0x1e7079)&&(_0x586a14[_0x41e359(0x153)]=_0x1e7079[_0x41e359(0x180)](function(_0x2ef57e){return'/code/.fun/root'+_0x2ef57e;})[_0x41e359(0x138)](':'));return[0x2,_0x586a14];}});});}exports[a28_0xf7daab(0x133)]=resolveLibPathsFromLdConf;function resolveLibPaths(_0x36a22c){return __awaiter(this,void 0x0,void 0x0,function(){var _0x3427c9,_0x52de3=this;return __generator(this,function(_0x5a8859){var _0x51c7e9=a28_0x34a0;switch(_0x5a8859[_0x51c7e9(0x175)]){case 0x0:if(!fs[_0x51c7e9(0x156)](_0x36a22c))return[0x2,[]];return[0x4,Promise['all'](fs[_0x51c7e9(0x176)](_0x36a22c,'utf-8')['filter'](function(_0x4789a4){var _0x6c806c=_0x51c7e9;return _0x4789a4[_0x6c806c(0x145)](_0x6c806c(0x179));})[_0x51c7e9(0x180)](function(_0x5c4e45){return __awaiter(_0x52de3,void 0x0,void 0x0,function(){return __generator(this,function(_0x2f4e37){var _0x420ef8=a28_0x34a0;switch(_0x2f4e37['label']){case 0x0:return[0x4,file_1[_0x420ef8(0x165)](path[_0x420ef8(0x138)](_0x36a22c,_0x5c4e45))];case 0x1:return[0x2,_0x2f4e37[_0x420ef8(0x151)]()];}});});}))];case 0x1:_0x3427c9=_0x5a8859[_0x51c7e9(0x151)]();return[0x2,_[_0x51c7e9(0x18a)](_0x3427c9)[_0x51c7e9(0x13b)](function(_0x1e15de,_0x220f81){var _0x5cf39e=_0x51c7e9,_0x394d95=_0x220f81[_0x5cf39e(0x172)](/^\s*(\/.*)\s*$/);return _0x394d95&&_0x394d95[0x1][_0x5cf39e(0x150)]('/')&&_0x1e15de['push'](_0x394d95[0x1]),_0x1e15de;},[])];}});});}function addEnv(_0x42215f,_0x3b777b){var _0x57cb7d=a28_0xf7daab,_0xa47a8=Object[_0x57cb7d(0x139)]({},_0x42215f),_0x26402e=_0x57cb7d(0x183);_0xa47a8[_0x57cb7d(0x153)]=generateLibPath(_0xa47a8,_0x26402e),_0xa47a8[_0x57cb7d(0x189)]=generatePath(_0xa47a8,_0x26402e),_0xa47a8[_0x57cb7d(0x14d)]=generateNodePaths(_0xa47a8,_0x57cb7d(0x17d));var _0x1973f8=_0x26402e+_0x57cb7d(0x15f);!_0xa47a8[_0x57cb7d(0x14c)]&&(_0xa47a8[_0x57cb7d(0x14c)]=_0x1973f8);if(_0x3b777b)return appendNasEnvs(_0xa47a8,_0x3b777b);return _0xa47a8;}function a28_0x34a0(_0x512514,_0x13c75c){return a28_0x34a0=function(_0x27544a,_0x34a0b8){_0x27544a=_0x27544a-0x133;var _0x2de482=a28_0x2754[_0x27544a];return _0x2de482;},a28_0x34a0(_0x512514,_0x13c75c);}exports['addEnv']=addEnv;function appendNasEnvs(_0x102331,_0x35502a){var _0x3bcfec=a28_0xf7daab,_0x1c9b20=definition_1[_0x3bcfec(0x163)](_0x35502a),_0xf2a27e;if(_0x1c9b20){var _0xda1f1a='/mnt/auto';_0xf2a27e=appendNasMountPointEnv(_0x102331,_0xda1f1a);}else{if(typeof _0x35502a!=='string'){var _0x187d14=_0x35502a[_0x3bcfec(0x143)];_['forEach'](_0x187d14,function(_0x2cdc1b){var _0x397293=_0x3bcfec,_0x1ea780=nas_1[_0x397293(0x15d)](_0x2cdc1b)[_0x397293(0x160)];_0xf2a27e=appendNasMountPointEnv(_0x102331,_0x1ea780);});}}return _0xf2a27e;}function appendNasMountPointEnv(_0x839829,_0x2f568b){var _0x11823e=a28_0xf7daab;_0x839829[_0x11823e(0x153)]=generateLibPath(_0x839829,_0x2f568b),_0x839829[_0x11823e(0x189)]=generatePath(_0x839829,_0x2f568b),_0x839829[_0x11823e(0x14d)]=generateNodePaths(_0x839829,_0x2f568b);var _0x380941=generatePythonPaths(_0x2f568b);return _0x839829[_0x11823e(0x142)]?_0x839829[_0x11823e(0x142)]=_0x839829[_0x11823e(0x142)]+':'+_0x380941:_0x839829[_0x11823e(0x142)]=_0x380941,_0x839829;}function generatePythonPaths(_0x1246fb){var _0x9ea848=a28_0xf7daab;return pythonPaths['map'](function(_0x5a3bda){return''+_0x1246fb+_0x5a3bda;})[_0x9ea848(0x138)](':');}function generateNodePaths(_0x426fec,_0x1b744){var _0x319983=a28_0xf7daab,_0x238a6f=_0x319983(0x141),_0x132e65=_0x1b744+_0x319983(0x174),_0x32ec4f;return _0x426fec[_0x319983(0x14d)]?_0x32ec4f=_0x426fec[_0x319983(0x14d)]+':'+_0x132e65+':'+_0x238a6f:_0x32ec4f=_0x132e65+':'+_0x238a6f,duplicateRemoval(_0x32ec4f);}function generateLibPath(_0x3965ea,_0x41e76c){var _0x4cf8f5=a28_0xf7daab,_0x28a4e4=_[_0x4cf8f5(0x146)](sysLibs['map'](function(_0x53b4f0){var _0x345b3a=_0x4cf8f5;return _0x41e76c+_0x345b3a(0x186)+_0x53b4f0;}),fcLibs)[_0x4cf8f5(0x138)](':');return _0x3965ea[_0x4cf8f5(0x153)]&&(_0x28a4e4=_0x3965ea[_0x4cf8f5(0x153)]+':'+_0x28a4e4),duplicateRemoval(_0x28a4e4);}function generatePath(_0x719c4b,_0x4774a1){var _0x3da0fd=a28_0xf7daab,_0x252e45=_['union'](sysPaths['map'](function(_0xf5f43d){var _0x1df36f=a28_0x34a0;return _0x4774a1+_0x1df36f(0x186)+_0xf5f43d;}),fcPaths,funPaths['map'](function(_0x3e5127){return''+_0x4774a1+_0x3e5127;}),sysPaths)[_0x3da0fd(0x138)](':');return _0x719c4b[_0x3da0fd(0x189)]&&(_0x252e45=_0x719c4b['PATH']+':'+_0x252e45),duplicateRemoval(_0x252e45);}function duplicateRemoval(_0x11e761){var _0xc8ca5d=a28_0xf7daab,_0x4259d5=_0x11e761['split'](':');return _[_0xc8ca5d(0x146)](_0x4259d5)[_0xc8ca5d(0x138)](':');}