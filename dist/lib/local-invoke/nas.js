'use strict';var a34_0xd5dd=['__setModuleDefault','sent','value','string','default','65RucZZn','trys','iterator','ops','label','Unsupported\x20nasConfig:\x20','mountPoints','function','push','13LlckbZ','nasDir','throw','377252WLTukE','join','__esModule','6FFrcVz','create','resolveMountPoint','39oJzXaV','9377vCUSEJ','call','return','/mnt/auto','done','then','fs-extra','next','mountDir','5MfJBuS','mountSource','path','1qzWdrH','__generator','pathExists','6897MffRxk','length','__createBinding','__awaiter','ensureDir','pop','__importDefault','auto-default','9844jwMibT','4249aVVGMW','convertNasConfigToNasMappings','419026aBDgrZ','apply','__importStar','defineProperty','58165GyUaZM'];var a34_0xb10e8a=a34_0x8eaf;(function(_0x33e210,_0x2069c1){var _0x59102e=a34_0x8eaf;while(!![]){try{var _0x1a01d0=parseInt(_0x59102e(0x1ca))*parseInt(_0x59102e(0x1da))+parseInt(_0x59102e(0x1c4))*-parseInt(_0x59102e(0x1d7))+parseInt(_0x59102e(0x1e3))*parseInt(_0x59102e(0x1ef))+-parseInt(_0x59102e(0x1e5))+-parseInt(_0x59102e(0x1e9))*-parseInt(_0x59102e(0x1d4))+-parseInt(_0x59102e(0x1c7))*-parseInt(_0x59102e(0x1e2))+parseInt(_0x59102e(0x1f8))*parseInt(_0x59102e(0x1cb));if(_0x1a01d0===_0x2069c1)break;else _0x33e210['push'](_0x33e210['shift']());}catch(_0xe46db7){_0x33e210['push'](_0x33e210['shift']());}}}(a34_0xd5dd,0x35e08));function a34_0x8eaf(_0x30b494,_0x27d6f2){return a34_0x8eaf=function(_0xd5ddaa,_0x8eafb){_0xd5ddaa=_0xd5ddaa-0x1c2;var _0x18a47b=a34_0xd5dd[_0xd5ddaa];return _0x18a47b;},a34_0x8eaf(_0x30b494,_0x27d6f2);}var __createBinding=this&&this[a34_0xb10e8a(0x1dc)]||(Object[a34_0xb10e8a(0x1c8)]?function(_0x4e5fc,_0x3fbdb4,_0x4d2a37,_0x5a6789){var _0x55ec5b=a34_0xb10e8a;if(_0x5a6789===undefined)_0x5a6789=_0x4d2a37;Object[_0x55ec5b(0x1e8)](_0x4e5fc,_0x5a6789,{'enumerable':!![],'get':function(){return _0x3fbdb4[_0x4d2a37];}});}:function(_0xe5c185,_0x18a947,_0x37cf12,_0x3b90bf){if(_0x3b90bf===undefined)_0x3b90bf=_0x37cf12;_0xe5c185[_0x3b90bf]=_0x18a947[_0x37cf12];}),__setModuleDefault=this&&this[a34_0xb10e8a(0x1ea)]||(Object[a34_0xb10e8a(0x1c8)]?function(_0x7b81dc,_0x4f69a1){Object['defineProperty'](_0x7b81dc,'default',{'enumerable':!![],'value':_0x4f69a1});}:function(_0x46f80a,_0x4a8262){var _0x4a6dfd=a34_0xb10e8a;_0x46f80a[_0x4a6dfd(0x1ee)]=_0x4a8262;}),__importStar=this&&this[a34_0xb10e8a(0x1e7)]||function(_0x3d43d8){var _0x3c0e97=a34_0xb10e8a;if(_0x3d43d8&&_0x3d43d8[_0x3c0e97(0x1c6)])return _0x3d43d8;var _0x1f866b={};if(_0x3d43d8!=null){for(var _0x2c8587 in _0x3d43d8)if(_0x2c8587!=='default'&&Object['hasOwnProperty'][_0x3c0e97(0x1cc)](_0x3d43d8,_0x2c8587))__createBinding(_0x1f866b,_0x3d43d8,_0x2c8587);}return __setModuleDefault(_0x1f866b,_0x3d43d8),_0x1f866b;},__awaiter=this&&this[a34_0xb10e8a(0x1dd)]||function(_0x9d2774,_0x4f3d73,_0x888db,_0x20cd35){function _0x36081a(_0x129e8a){return _0x129e8a instanceof _0x888db?_0x129e8a:new _0x888db(function(_0x34ed05){_0x34ed05(_0x129e8a);});}return new(_0x888db||(_0x888db=Promise))(function(_0x401d56,_0x1f3396){var _0x2825e7=a34_0x8eaf;function _0x3fde85(_0x54b2f4){var _0x5fe1a0=a34_0x8eaf;try{_0x20c384(_0x20cd35[_0x5fe1a0(0x1d2)](_0x54b2f4));}catch(_0x2b2f29){_0x1f3396(_0x2b2f29);}}function _0x305ca6(_0x36d6cb){var _0x7228e8=a34_0x8eaf;try{_0x20c384(_0x20cd35[_0x7228e8(0x1c3)](_0x36d6cb));}catch(_0x522c39){_0x1f3396(_0x522c39);}}function _0x20c384(_0x3c8efb){var _0x50e892=a34_0x8eaf;_0x3c8efb[_0x50e892(0x1cf)]?_0x401d56(_0x3c8efb[_0x50e892(0x1ec)]):_0x36081a(_0x3c8efb[_0x50e892(0x1ec)])[_0x50e892(0x1d0)](_0x3fde85,_0x305ca6);}_0x20c384((_0x20cd35=_0x20cd35[_0x2825e7(0x1e6)](_0x9d2774,_0x4f3d73||[]))[_0x2825e7(0x1d2)]());});},__generator=this&&this[a34_0xb10e8a(0x1d8)]||function(_0x331caf,_0x5a6fa6){var _0x4c415e=a34_0xb10e8a,_0x48b1bd={'label':0x0,'sent':function(){if(_0x400a2e[0x0]&0x1)throw _0x400a2e[0x1];return _0x400a2e[0x1];},'trys':[],'ops':[]},_0x151d35,_0x573988,_0x400a2e,_0xe8bd6;return _0xe8bd6={'next':_0x55c969(0x0),'throw':_0x55c969(0x1),'return':_0x55c969(0x2)},typeof Symbol===_0x4c415e(0x1f6)&&(_0xe8bd6[Symbol[_0x4c415e(0x1f1)]]=function(){return this;}),_0xe8bd6;function _0x55c969(_0x5855a3){return function(_0x2a6766){return _0x3ef846([_0x5855a3,_0x2a6766]);};}function _0x3ef846(_0x18a225){var _0x4d45fb=_0x4c415e;if(_0x151d35)throw new TypeError('Generator\x20is\x20already\x20executing.');while(_0x48b1bd)try{if(_0x151d35=0x1,_0x573988&&(_0x400a2e=_0x18a225[0x0]&0x2?_0x573988[_0x4d45fb(0x1cd)]:_0x18a225[0x0]?_0x573988[_0x4d45fb(0x1c3)]||((_0x400a2e=_0x573988[_0x4d45fb(0x1cd)])&&_0x400a2e[_0x4d45fb(0x1cc)](_0x573988),0x0):_0x573988[_0x4d45fb(0x1d2)])&&!(_0x400a2e=_0x400a2e[_0x4d45fb(0x1cc)](_0x573988,_0x18a225[0x1]))['done'])return _0x400a2e;if(_0x573988=0x0,_0x400a2e)_0x18a225=[_0x18a225[0x0]&0x2,_0x400a2e[_0x4d45fb(0x1ec)]];switch(_0x18a225[0x0]){case 0x0:case 0x1:_0x400a2e=_0x18a225;break;case 0x4:_0x48b1bd[_0x4d45fb(0x1f3)]++;return{'value':_0x18a225[0x1],'done':![]};case 0x5:_0x48b1bd[_0x4d45fb(0x1f3)]++,_0x573988=_0x18a225[0x1],_0x18a225=[0x0];continue;case 0x7:_0x18a225=_0x48b1bd[_0x4d45fb(0x1f2)][_0x4d45fb(0x1df)](),_0x48b1bd[_0x4d45fb(0x1f0)]['pop']();continue;default:if(!(_0x400a2e=_0x48b1bd[_0x4d45fb(0x1f0)],_0x400a2e=_0x400a2e[_0x4d45fb(0x1db)]>0x0&&_0x400a2e[_0x400a2e[_0x4d45fb(0x1db)]-0x1])&&(_0x18a225[0x0]===0x6||_0x18a225[0x0]===0x2)){_0x48b1bd=0x0;continue;}if(_0x18a225[0x0]===0x3&&(!_0x400a2e||_0x18a225[0x1]>_0x400a2e[0x0]&&_0x18a225[0x1]<_0x400a2e[0x3])){_0x48b1bd['label']=_0x18a225[0x1];break;}if(_0x18a225[0x0]===0x6&&_0x48b1bd[_0x4d45fb(0x1f3)]<_0x400a2e[0x1]){_0x48b1bd[_0x4d45fb(0x1f3)]=_0x400a2e[0x1],_0x400a2e=_0x18a225;break;}if(_0x400a2e&&_0x48b1bd[_0x4d45fb(0x1f3)]<_0x400a2e[0x2]){_0x48b1bd[_0x4d45fb(0x1f3)]=_0x400a2e[0x2],_0x48b1bd['ops']['push'](_0x18a225);break;}if(_0x400a2e[0x2])_0x48b1bd[_0x4d45fb(0x1f2)]['pop']();_0x48b1bd[_0x4d45fb(0x1f0)]['pop']();continue;}_0x18a225=_0x5a6fa6[_0x4d45fb(0x1cc)](_0x331caf,_0x48b1bd);}catch(_0x1a890d){_0x18a225=[0x6,_0x1a890d],_0x573988=0x0;}finally{_0x151d35=_0x400a2e=0x0;}if(_0x18a225[0x0]&0x5)throw _0x18a225[0x1];return{'value':_0x18a225[0x0]?_0x18a225[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a34_0xb10e8a(0x1e0)]||function(_0x10b443){return _0x10b443&&_0x10b443['__esModule']?_0x10b443:{'default':_0x10b443};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports['convertNasConfigToNasMappings']=exports[a34_0xb10e8a(0x1c9)]=void 0x0;var path_1=__importDefault(require(a34_0xb10e8a(0x1d6))),fs=__importStar(require(a34_0xb10e8a(0x1d1))),definition_1=require('../definition');function resolveMountPoint(_0x482f11){var _0x1a806a=a34_0xb10e8a;return{'serverPath':_0x482f11['serverAddr'],'mountSource':_0x482f11[_0x1a806a(0x1c2)],'mountDir':_0x482f11['fcDir']};}exports[a34_0xb10e8a(0x1c9)]=resolveMountPoint;function convertNasConfigToNasMappings(_0xdd0510,_0x55be6b,_0x14eb6e){return __awaiter(this,void 0x0,void 0x0,function(){var _0x5403f5,_0x25bad1,_0x10db74,_0x3571c9;return __generator(this,function(_0x19b683){var _0x27fd29=a34_0x8eaf;switch(_0x19b683[_0x27fd29(0x1f3)]){case 0x0:if(!_0x55be6b)return[0x2,[]];_0x5403f5=definition_1['isAutoConfig'](_0x55be6b);if(!_0x5403f5)return[0x3,0x4];_0x25bad1=path_1[_0x27fd29(0x1ee)]['join'](_0xdd0510,_0x27fd29(0x1e1)),_0x10db74=path_1[_0x27fd29(0x1ee)][_0x27fd29(0x1c5)](_0x25bad1,_0x14eb6e);return[0x4,fs[_0x27fd29(0x1d9)](_0x10db74)];case 0x1:if(!!_0x19b683[_0x27fd29(0x1eb)]())return[0x3,0x3];return[0x4,fs['ensureDir'](_0x10db74)];case 0x2:_0x19b683[_0x27fd29(0x1eb)](),_0x19b683[_0x27fd29(0x1f3)]=0x3;case 0x3:return[0x2,[{'localNasDir':_0x10db74,'remoteNasDir':_0x27fd29(0x1ce)}]];case 0x4:if(typeof _0x55be6b===_0x27fd29(0x1ed))throw new Error(_0x27fd29(0x1f4)+_0x55be6b+'\x20which\x20should\x20be\x20\x27auto\x27\x20or\x20\x27Auto\x27\x20when\x20its\x20type\x20is\x20string');_0x3571c9=_0x55be6b[_0x27fd29(0x1f5)];return[0x4,convertMountPointsToNasMappings(_0xdd0510,_0x3571c9)];case 0x5:return[0x2,_0x19b683[_0x27fd29(0x1eb)]()];}});});}exports[a34_0xb10e8a(0x1e4)]=convertNasConfigToNasMappings;function convertMountPointsToNasMappings(_0x4593af,_0x4e56a9){return __awaiter(this,void 0x0,void 0x0,function(){var _0xcd6574,_0xb2fb41,_0x22ebef,_0x1d94be,_0x11af5c;return __generator(this,function(_0x30136f){var _0x3d5563=a34_0x8eaf;switch(_0x30136f['label']){case 0x0:if(!_0x4e56a9)return[0x2,[]];_0xcd6574=[],(_0xb2fb41=0x0,_0x22ebef=_0x4e56a9),_0x30136f[_0x3d5563(0x1f3)]=0x1;case 0x1:if(!(_0xb2fb41<_0x22ebef[_0x3d5563(0x1db)]))return[0x3,0x4];_0x1d94be=_0x22ebef[_0xb2fb41];return[0x4,convertMountPointToNasMapping(_0x4593af,_0x1d94be)];case 0x2:_0x11af5c=_0x30136f['sent'](),_0xcd6574[_0x3d5563(0x1f7)](_0x11af5c),_0x30136f[_0x3d5563(0x1f3)]=0x3;case 0x3:_0xb2fb41++;return[0x3,0x1];case 0x4:return[0x2,_0xcd6574];}});});}function convertMountPointToNasMapping(_0x1bb895,_0x5e8ce1){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4b5322,_0x303ba9,_0x3e8507,_0x2a4c66,_0x3d1c19,_0x22afb7;return __generator(this,function(_0x54f78d){var _0x5c6776=a34_0x8eaf;switch(_0x54f78d[_0x5c6776(0x1f3)]){case 0x0:_0x4b5322=resolveMountPoint(_0x5e8ce1),_0x303ba9=_0x4b5322[_0x5c6776(0x1d5)],_0x3e8507=_0x4b5322[_0x5c6776(0x1d3)],_0x2a4c66=_0x4b5322['serverPath'],_0x3d1c19=path_1[_0x5c6776(0x1ee)][_0x5c6776(0x1c5)](_0x1bb895,_0x2a4c66);return[0x4,fs[_0x5c6776(0x1d9)](_0x3d1c19)];case 0x1:if(!!_0x54f78d[_0x5c6776(0x1eb)]())return[0x3,0x3];return[0x4,fs[_0x5c6776(0x1de)](_0x3d1c19)];case 0x2:_0x54f78d[_0x5c6776(0x1eb)](),_0x54f78d[_0x5c6776(0x1f3)]=0x3;case 0x3:_0x22afb7=path_1[_0x5c6776(0x1ee)][_0x5c6776(0x1c5)](_0x3d1c19,_0x303ba9);return[0x4,fs[_0x5c6776(0x1d9)](_0x22afb7)];case 0x4:if(!!_0x54f78d[_0x5c6776(0x1eb)]())return[0x3,0x6];return[0x4,fs[_0x5c6776(0x1de)](_0x22afb7)];case 0x5:_0x54f78d[_0x5c6776(0x1eb)](),_0x54f78d[_0x5c6776(0x1f3)]=0x6;case 0x6:return[0x2,{'localNasDir':_0x22afb7,'remoteNasDir':_0x3e8507}];}});});}