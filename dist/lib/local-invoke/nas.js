'use strict';var a34_0x4925=['__generator','value','345EwuGrC','2334799KAyevl','length','1yYoIME','label','sent','defineProperty','1693568WWMPVn','605223WCkyQp','return','__createBinding','__importDefault','trys','fcDir','Generator\x20is\x20already\x20executing.','nasDir','isAutoConfig','hasOwnProperty','call','1QLolEk','join','create','mountSource','Unsupported\x20nasConfig:\x20','pathExists','convertNasConfigToNasMappings','879829yspSiP','apply','push','done','next','mountPoints','iterator','serverPath','ensureDir','1cNxMMO','3818ipqwjv','1893258XLPUvS','__esModule','__setModuleDefault','string','then','pop','711337KsetLf','resolveMountPoint','ops','default','\x20which\x20should\x20be\x20\x27auto\x27\x20or\x20\x27Auto\x27\x20when\x20its\x20type\x20is\x20string'];var a34_0x4416a6=a34_0x259e;(function(_0x33c100,_0x56ea3c){var _0xc6e9dc=a34_0x259e;while(!![]){try{var _0x376e84=-parseInt(_0xc6e9dc(0x157))+parseInt(_0xc6e9dc(0x177))*parseInt(_0xc6e9dc(0x16c))+parseInt(_0xc6e9dc(0x16b))+-parseInt(_0xc6e9dc(0x155))*-parseInt(_0xc6e9dc(0x17e))+-parseInt(_0xc6e9dc(0x156))*-parseInt(_0xc6e9dc(0x164))+parseInt(_0xc6e9dc(0x15d))*parseInt(_0xc6e9dc(0x167))+-parseInt(_0xc6e9dc(0x165));if(_0x376e84===_0x56ea3c)break;else _0x33c100['push'](_0x33c100['shift']());}catch(_0x122c00){_0x33c100['push'](_0x33c100['shift']());}}}(a34_0x4925,0xef0a6));var __createBinding=this&&this[a34_0x4416a6(0x16e)]||(Object[a34_0x4416a6(0x179)]?function(_0x59d110,_0x4dc636,_0x450cbe,_0xf1de15){var _0x3de50d=a34_0x4416a6;if(_0xf1de15===undefined)_0xf1de15=_0x450cbe;Object[_0x3de50d(0x16a)](_0x59d110,_0xf1de15,{'enumerable':!![],'get':function(){return _0x4dc636[_0x450cbe];}});}:function(_0x4ba312,_0x48b463,_0x37d990,_0x3fa8ef){if(_0x3fa8ef===undefined)_0x3fa8ef=_0x37d990;_0x4ba312[_0x3fa8ef]=_0x48b463[_0x37d990];}),__setModuleDefault=this&&this[a34_0x4416a6(0x159)]||(Object[a34_0x4416a6(0x179)]?function(_0x22a08d,_0x99f34f){var _0x43a846=a34_0x4416a6;Object[_0x43a846(0x16a)](_0x22a08d,'default',{'enumerable':!![],'value':_0x99f34f});}:function(_0x583da7,_0x10a55c){_0x583da7['default']=_0x10a55c;}),__importStar=this&&this['__importStar']||function(_0x5ae500){var _0x33977=a34_0x4416a6;if(_0x5ae500&&_0x5ae500[_0x33977(0x158)])return _0x5ae500;var _0x2695d={};if(_0x5ae500!=null){for(var _0x459805 in _0x5ae500)if(_0x459805!==_0x33977(0x160)&&Object[_0x33977(0x175)][_0x33977(0x176)](_0x5ae500,_0x459805))__createBinding(_0x2695d,_0x5ae500,_0x459805);}return __setModuleDefault(_0x2695d,_0x5ae500),_0x2695d;},__awaiter=this&&this['__awaiter']||function(_0x25aae8,_0x583a39,_0x517cb8,_0x1d7fd8){function _0x713e5a(_0x3c9750){return _0x3c9750 instanceof _0x517cb8?_0x3c9750:new _0x517cb8(function(_0x9c4e0e){_0x9c4e0e(_0x3c9750);});}return new(_0x517cb8||(_0x517cb8=Promise))(function(_0x51e571,_0x3b8826){var _0x18ea5e=a34_0x259e;function _0x3cc3f0(_0x232d04){var _0xa97e91=a34_0x259e;try{_0x2bbd9f(_0x1d7fd8[_0xa97e91(0x182)](_0x232d04));}catch(_0x1ffa47){_0x3b8826(_0x1ffa47);}}function _0x119a3e(_0x2a7b70){try{_0x2bbd9f(_0x1d7fd8['throw'](_0x2a7b70));}catch(_0x210c7b){_0x3b8826(_0x210c7b);}}function _0x2bbd9f(_0x55b171){var _0x3ebc75=a34_0x259e;_0x55b171[_0x3ebc75(0x181)]?_0x51e571(_0x55b171['value']):_0x713e5a(_0x55b171['value'])[_0x3ebc75(0x15b)](_0x3cc3f0,_0x119a3e);}_0x2bbd9f((_0x1d7fd8=_0x1d7fd8[_0x18ea5e(0x17f)](_0x25aae8,_0x583a39||[]))[_0x18ea5e(0x182)]());});},__generator=this&&this[a34_0x4416a6(0x162)]||function(_0x42e6e5,_0x57b22f){var _0x43ff1c=a34_0x4416a6,_0xa22a6b={'label':0x0,'sent':function(){if(_0x8d7de5[0x0]&0x1)throw _0x8d7de5[0x1];return _0x8d7de5[0x1];},'trys':[],'ops':[]},_0xb81dcb,_0x3e9b13,_0x8d7de5,_0x3d9b3b;return _0x3d9b3b={'next':_0x3b7fed(0x0),'throw':_0x3b7fed(0x1),'return':_0x3b7fed(0x2)},typeof Symbol==='function'&&(_0x3d9b3b[Symbol[_0x43ff1c(0x184)]]=function(){return this;}),_0x3d9b3b;function _0x3b7fed(_0x57ee3a){return function(_0x42bc23){return _0x1e4fa1([_0x57ee3a,_0x42bc23]);};}function _0x1e4fa1(_0x1533e1){var _0x4a5fb8=_0x43ff1c;if(_0xb81dcb)throw new TypeError(_0x4a5fb8(0x172));while(_0xa22a6b)try{if(_0xb81dcb=0x1,_0x3e9b13&&(_0x8d7de5=_0x1533e1[0x0]&0x2?_0x3e9b13[_0x4a5fb8(0x16d)]:_0x1533e1[0x0]?_0x3e9b13['throw']||((_0x8d7de5=_0x3e9b13[_0x4a5fb8(0x16d)])&&_0x8d7de5[_0x4a5fb8(0x176)](_0x3e9b13),0x0):_0x3e9b13[_0x4a5fb8(0x182)])&&!(_0x8d7de5=_0x8d7de5['call'](_0x3e9b13,_0x1533e1[0x1]))[_0x4a5fb8(0x181)])return _0x8d7de5;if(_0x3e9b13=0x0,_0x8d7de5)_0x1533e1=[_0x1533e1[0x0]&0x2,_0x8d7de5[_0x4a5fb8(0x163)]];switch(_0x1533e1[0x0]){case 0x0:case 0x1:_0x8d7de5=_0x1533e1;break;case 0x4:_0xa22a6b['label']++;return{'value':_0x1533e1[0x1],'done':![]};case 0x5:_0xa22a6b[_0x4a5fb8(0x168)]++,_0x3e9b13=_0x1533e1[0x1],_0x1533e1=[0x0];continue;case 0x7:_0x1533e1=_0xa22a6b[_0x4a5fb8(0x15f)]['pop'](),_0xa22a6b[_0x4a5fb8(0x170)]['pop']();continue;default:if(!(_0x8d7de5=_0xa22a6b[_0x4a5fb8(0x170)],_0x8d7de5=_0x8d7de5[_0x4a5fb8(0x166)]>0x0&&_0x8d7de5[_0x8d7de5[_0x4a5fb8(0x166)]-0x1])&&(_0x1533e1[0x0]===0x6||_0x1533e1[0x0]===0x2)){_0xa22a6b=0x0;continue;}if(_0x1533e1[0x0]===0x3&&(!_0x8d7de5||_0x1533e1[0x1]>_0x8d7de5[0x0]&&_0x1533e1[0x1]<_0x8d7de5[0x3])){_0xa22a6b['label']=_0x1533e1[0x1];break;}if(_0x1533e1[0x0]===0x6&&_0xa22a6b[_0x4a5fb8(0x168)]<_0x8d7de5[0x1]){_0xa22a6b[_0x4a5fb8(0x168)]=_0x8d7de5[0x1],_0x8d7de5=_0x1533e1;break;}if(_0x8d7de5&&_0xa22a6b[_0x4a5fb8(0x168)]<_0x8d7de5[0x2]){_0xa22a6b['label']=_0x8d7de5[0x2],_0xa22a6b[_0x4a5fb8(0x15f)][_0x4a5fb8(0x180)](_0x1533e1);break;}if(_0x8d7de5[0x2])_0xa22a6b[_0x4a5fb8(0x15f)]['pop']();_0xa22a6b['trys'][_0x4a5fb8(0x15c)]();continue;}_0x1533e1=_0x57b22f['call'](_0x42e6e5,_0xa22a6b);}catch(_0x448b1b){_0x1533e1=[0x6,_0x448b1b],_0x3e9b13=0x0;}finally{_0xb81dcb=_0x8d7de5=0x0;}if(_0x1533e1[0x0]&0x5)throw _0x1533e1[0x1];return{'value':_0x1533e1[0x0]?_0x1533e1[0x1]:void 0x0,'done':!![]};}},__importDefault=this&&this[a34_0x4416a6(0x16f)]||function(_0x7e11f2){return _0x7e11f2&&_0x7e11f2['__esModule']?_0x7e11f2:{'default':_0x7e11f2};};Object[a34_0x4416a6(0x16a)](exports,a34_0x4416a6(0x158),{'value':!![]}),exports[a34_0x4416a6(0x17d)]=exports['resolveMountPoint']=void 0x0;var path_1=__importDefault(require('path')),fs=__importStar(require('fs-extra')),definition_1=require('../definition');function resolveMountPoint(_0x1dbccc){var _0x13b9d7=a34_0x4416a6;return{'serverPath':_0x1dbccc['serverAddr'],'mountSource':_0x1dbccc[_0x13b9d7(0x173)],'mountDir':_0x1dbccc[_0x13b9d7(0x171)]};}exports[a34_0x4416a6(0x15e)]=resolveMountPoint;function convertNasConfigToNasMappings(_0x506128,_0x395424,_0xcff30f){return __awaiter(this,void 0x0,void 0x0,function(){var _0x26e21e,_0x3d1190,_0x1c6696,_0x3211bc;return __generator(this,function(_0x194086){var _0x21ed68=a34_0x259e;switch(_0x194086[_0x21ed68(0x168)]){case 0x0:if(!_0x395424)return[0x2,[]];_0x26e21e=definition_1[_0x21ed68(0x174)](_0x395424);if(!_0x26e21e)return[0x3,0x4];_0x3d1190=path_1[_0x21ed68(0x160)]['join'](_0x506128,'auto-default'),_0x1c6696=path_1[_0x21ed68(0x160)][_0x21ed68(0x178)](_0x3d1190,_0xcff30f);return[0x4,fs[_0x21ed68(0x17c)](_0x1c6696)];case 0x1:if(!!_0x194086[_0x21ed68(0x169)]())return[0x3,0x3];return[0x4,fs[_0x21ed68(0x154)](_0x1c6696)];case 0x2:_0x194086[_0x21ed68(0x169)](),_0x194086[_0x21ed68(0x168)]=0x3;case 0x3:return[0x2,[{'localNasDir':_0x1c6696,'remoteNasDir':'/mnt/auto'}]];case 0x4:if(typeof _0x395424===_0x21ed68(0x15a))throw new Error(_0x21ed68(0x17b)+_0x395424+_0x21ed68(0x161));_0x3211bc=_0x395424[_0x21ed68(0x183)];return[0x4,convertMountPointsToNasMappings(_0x506128,_0x3211bc)];case 0x5:return[0x2,_0x194086['sent']()];}});});}exports[a34_0x4416a6(0x17d)]=convertNasConfigToNasMappings;function a34_0x259e(_0x498a1f,_0x476994){return a34_0x259e=function(_0x49254a,_0x259eef){_0x49254a=_0x49254a-0x153;var _0x2f2827=a34_0x4925[_0x49254a];return _0x2f2827;},a34_0x259e(_0x498a1f,_0x476994);}function convertMountPointsToNasMappings(_0x56fb23,_0x5b16a5){return __awaiter(this,void 0x0,void 0x0,function(){var _0x4eb7bf,_0x864450,_0x177768,_0x412bc3,_0x12a36d;return __generator(this,function(_0x2dff65){var _0x7f9228=a34_0x259e;switch(_0x2dff65[_0x7f9228(0x168)]){case 0x0:if(!_0x5b16a5)return[0x2,[]];_0x4eb7bf=[],(_0x864450=0x0,_0x177768=_0x5b16a5),_0x2dff65[_0x7f9228(0x168)]=0x1;case 0x1:if(!(_0x864450<_0x177768[_0x7f9228(0x166)]))return[0x3,0x4];_0x412bc3=_0x177768[_0x864450];return[0x4,convertMountPointToNasMapping(_0x56fb23,_0x412bc3)];case 0x2:_0x12a36d=_0x2dff65[_0x7f9228(0x169)](),_0x4eb7bf[_0x7f9228(0x180)](_0x12a36d),_0x2dff65['label']=0x3;case 0x3:_0x864450++;return[0x3,0x1];case 0x4:return[0x2,_0x4eb7bf];}});});}function convertMountPointToNasMapping(_0x31d89c,_0x5757fd){return __awaiter(this,void 0x0,void 0x0,function(){var _0x593018,_0x1de8f6,_0x14369d,_0x373986,_0x2b4641,_0x284907;return __generator(this,function(_0x3726aa){var _0x27fdfa=a34_0x259e;switch(_0x3726aa[_0x27fdfa(0x168)]){case 0x0:_0x593018=resolveMountPoint(_0x5757fd),_0x1de8f6=_0x593018[_0x27fdfa(0x17a)],_0x14369d=_0x593018['mountDir'],_0x373986=_0x593018[_0x27fdfa(0x153)],_0x2b4641=path_1['default'][_0x27fdfa(0x178)](_0x31d89c,_0x373986);return[0x4,fs['pathExists'](_0x2b4641)];case 0x1:if(!!_0x3726aa['sent']())return[0x3,0x3];return[0x4,fs[_0x27fdfa(0x154)](_0x2b4641)];case 0x2:_0x3726aa[_0x27fdfa(0x169)](),_0x3726aa[_0x27fdfa(0x168)]=0x3;case 0x3:_0x284907=path_1[_0x27fdfa(0x160)][_0x27fdfa(0x178)](_0x2b4641,_0x1de8f6);return[0x4,fs[_0x27fdfa(0x17c)](_0x284907)];case 0x4:if(!!_0x3726aa['sent']())return[0x3,0x6];return[0x4,fs[_0x27fdfa(0x154)](_0x284907)];case 0x5:_0x3726aa['sent'](),_0x3726aa[_0x27fdfa(0x168)]=0x6;case 0x6:return[0x2,{'localNasDir':_0x284907,'remoteNasDir':_0x14369d}];}});});}